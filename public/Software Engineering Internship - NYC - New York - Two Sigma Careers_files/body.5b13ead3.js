/*! For license information please see body.5b13ead3.js.LICENSE.txt */
(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[495],{65484:(e,t,n)=>{"use strict";n.d(t,{j:()=>p});n(63534),n(40590),n(64216),n(36611),n(18665),n(87787),n(79389),n(64189),n(94009),n(85365),n(97755),n(15852),n(41412),n(4632),n(5086),n(52231),n(34606),n(29979),n(14602);var r=n(19181),o=n(24321);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function l(e,t,n){return t=c(t),function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),n=t,i=[{key:"fromDateTime",value:function(e){return new t(e.getFullYear(),e.getMonth()+1,e.getDate())}},{key:"unserialize",value:function(e){return new t(e.year,e.month,e.dayOfTheMonth)}}],(r=[{key:"initialize",value:function(e,t,n){if(void 0!==e||void 0!==t||void 0!==n)if(e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),Number.isNaN(e)||Number.isNaN(t))this.date=null;else{t-=1;var r=Number.isNaN(n)?new Date(e,t):new Date(e,t,n);this.date=o.L.truncateToValidDateRange(r)}else this.date=o.L.now()}},{key:"getTimeStamp",value:function(){return this.date.getTime()/1e3}},{key:"getDateTime",value:function(){return this.date}},{key:"getFullYear",value:function(){return this.date.getFullYear()}},{key:"getMonth",value:function(){return this.date.getMonth()}},{key:"getDayOfTheMonth",value:function(){return this.date.getDate()}},{key:"getTimezoneOffset",value:function(){return this.date.getTimezoneOffset()}},{key:"setFullYear",value:function(e){this.date.setFullYear(e),this.date=o.L.truncateToValidDateRange(this.date)}},{key:"setMonth",value:function(e){this.date.setMonth(e),this.date=o.L.truncateToValidDateRange(this.date)}},{key:"setDayOfTheMonth",value:function(e){this.date.setDate(e),this.date=o.L.truncateToValidDateRange(this.date)}},{key:"toString",value:function(){return o.L.getShortDateFormat(this.getDateTime())}},{key:"equals",value:function(e){return e.getDateTime().getTime()==this.getDateTime().getTime()}},{key:"valueOf",value:function(){return this.date.valueOf()}},{key:"getJsonValue",value:function(){return{$JSNType:"date",value:{year:this.date.getFullYear(),month:this.date.getMonth()+1,dayOfTheMonth:this.date.getDate()}}}},{key:"clone",value:function(){return new t(this.date.getFullYear(),this.date.getMonth()+1,this.date.getDate())}}])&&a(n.prototype,r),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.y)},74136:(e,t,n)=>{"use strict";n.d(t,{O:()=>f});n(63534),n(40590),n(64216),n(36611),n(18665),n(87787),n(79389),n(94009),n(15852),n(5086),n(52231),n(87136),n(6048),n(29979),n(78636),n(14602),n(80475),n(96088),n(40173),n(58649);var r=n(90493);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"isInteger",value:function(e){var t=Number(e);return!r.E.isWhitespace(e)&&!isNaN(t)&&t%1==0}},{key:"format",value:function(e,t,n){var r=Number(e).toString().split(".");return r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),r.join(t)}},{key:"fromString",value:function(e,t,n){return n&&(e=e.split(n).join("")),t&&(e=e.replace(t,".")),Number(e)}}],(t=null)&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"setUseMilitaryTimeFormat",value:function(t){e.useMilitaryTimeFormat=!!t}},{key:"setPickerFirstDayOfTheWeek",value:function(t){e.pickerFirstDayOfTheWeek=t}},{key:"unserialize",value:function(t){return new e(t.hour,t.minute,t.second)}},{key:"fromString",value:function(t){if(!t.length)return null;var n=t.match(/^(\d{1,2})(?:[:|.](\d{1,2})(?:[:|.](\d{1,2}))?)?\s*(?:(am|pm))?$/i);if(!n)return null;var r=parseInt(n[1],10),o=parseInt(n[2],10);isNaN(o)&&(o=0);var i=parseInt(n[3],10);isNaN(i)&&(i=0);var a=(n[4]||"").toLowerCase();return"pm"===a&&r<12?r+=12:"am"===a&&r<=12&&(r%=12),24==r&&(r=0),r>23||o>=60||i>=60?null:new e(r,o,i)}}],(n=[{key:"initialize",value:function(e,t,n){e=parseInt(e||0,10),this._hour=24===e?0:e,this._minute=parseInt(t||0,10),this._second=parseInt(n||0,10),this._validate(this._hour,this._minute,this._second)}},{key:"getHour",value:function(){return this._hour}},{key:"getMinute",value:function(){return this._minute}},{key:"getSecond",value:function(){return this._second}},{key:"getJsonValue",value:function(){return{$JSNType:"time",value:{hour:this.getHour(),minute:this.getMinute(),second:this.getSecond()}}}},{key:"clone",value:function(){return new e(this.getHour(),this.getMinute(),this.getSecond())}},{key:"toString",value:function(){return this.getFormattedTime(!0)}},{key:"getFormattedTime",value:function(t){var n=e.useMilitaryTimeFormat?this.getHour():this.getHour()%12||12,r=e.useMilitaryTimeFormat?this._addLeadingZero(n):n;return t&&(r+=":"+this._addLeadingZero(this.getMinute())),e.useMilitaryTimeFormat||(r+=" "+(this.getHour()>=12?"PM":"AM")),r}},{key:"_addLeadingZero",value:function(e){return e>9?e.toString():"0"+e}},{key:"_validate",value:function(e,t,n){this._validateHour(e),this._validateMinute(t),this._validateSecond(n)}},{key:"_validateHour",value:function(e){if(!u.isNumber(e)||e<0||e>23)throw new Error("Hour value should be beetwen 0 and 23.")}},{key:"_validateMinute",value:function(e){if(!u.isNumber(e)||e<0||e>59)throw new Error("Minute value should be beetwen 0 and 59.")}},{key:"_validateSecond",value:function(e){if(!u.isNumber(e)||e<0||e>59)throw new Error("Second value should be beetwen 0 and 59.")}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}()},24321:(e,t,n)=>{"use strict";n.d(t,{L:()=>T});n(63534),n(40590),n(64216),n(36611),n(18665),n(87787),n(79389),n(64189),n(94009),n(97755),n(15852),n(41412),n(4632),n(5086),n(96088),n(52231),n(34606),n(87136),n(6048),n(29979),n(40173),n(58649),n(68329),n(14602),n(15178);var r=n(15370);const o=["TIN","input","date","lang"];for(var i=window,a=0;a<o.length;++a)i[o[a]]||(i[o[a]]={}),i=i[o[a]];i.en_US||(i.en_US={}),i.en_US.Util={text:{at:"at",justNow:"just%20now",secondsAgo:"seconds%20ago",minuteAgo:"1%20minute%20ago",minutesAgo:"%7B%24amount%7D%20minutes%20ago",hourAgo:"1%20hour%20ago",hoursAgo:"%7B%24amount%7D%20hours%20ago",dayAgo:"1%20day%20ago",daysAgo:"%7B%24amount%7D%20days%20ago",today:"today",weekAgo:"1%20week%20ago",weeksAgo:"%7B%24amount%7D%20weeks%20ago",yesterday:"yesterday"}};const u=function(e,t,n){return r.t.get("currentLanguage").translate("TIN.input.date.Util",e,t,n)},l=u;var s=n(19181);n(80115),n(92157),n(19693);const c=["TIN","input","date","lang"];for(var f=window,p=0;p<c.length;++p)f[c[p]]||(f[c[p]]={}),f=f[c[p]];f.en_US||(f.en_US={}),f.en_US.Text={text:{apr:"Apr",april:"April",aug:"Aug",august:"August",dec:"Dec",december:"December",feb:"Feb",february:"February",fri:"Fri",friday:"Friday",jan:"Jan",january:"January",jul:"Jul",july:"July",jun:"Jun",june:"June",mar:"Mar",march:"March",may:"May",mon:"Mon",monday:"Monday",nov:"Nov",november:"November",oct:"Oct",october:"October",sat:"Sat",saturday:"Saturday",sep:"Sep",september:"September",shortMay:"May",sun:"Sun",sunday:"Sunday",thu:"Thu",thursday:"Thursday",tinyFriday:"F",tinyMonday:"M",tinySaturday:"S",tinySunday:"S",tinyThursday:"T",tinyTuesday:"T",tinyWednesday:"W",tue:"Tue",tuesday:"Tuesday",wed:"Wed",wednesday:"Wednesday",dayOfMonthOrd01:"1st",dayOfMonthOrd02:"2nd",dayOfMonthOrd03:"3rd",dayOfMonthOrd04:"4th",dayOfMonthOrd05:"5th",dayOfMonthOrd06:"6th",dayOfMonthOrd07:"7th",dayOfMonthOrd08:"8th",dayOfMonthOrd09:"9th",dayOfMonthOrd10:"10th",dayOfMonthOrd11:"11th",dayOfMonthOrd12:"12th",dayOfMonthOrd13:"13th",dayOfMonthOrd14:"14th",dayOfMonthOrd15:"15th",dayOfMonthOrd16:"16th",dayOfMonthOrd17:"17th",dayOfMonthOrd18:"18th",dayOfMonthOrd19:"19th",dayOfMonthOrd20:"20th",dayOfMonthOrd21:"21st",dayOfMonthOrd22:"22nd",dayOfMonthOrd23:"23rd",dayOfMonthOrd24:"24th",dayOfMonthOrd25:"25th",dayOfMonthOrd26:"26th",dayOfMonthOrd27:"27th",dayOfMonthOrd28:"28th",dayOfMonthOrd29:"29th",dayOfMonthOrd30:"30th",dayOfMonthOrd31:"31st"}};const d=function(e,t,n){return r.t.get("currentLanguage").translate("TIN.input.date.Text",e,t,n)},y=d;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"getMonthNames",value:function(){return e.monthNames.concat()}},{key:"getMonthName",value:function(t){return e.monthNames[t]}},{key:"getShortMonthNames",value:function(){return e.shortMonthNames}},{key:"getShortMonthName",value:function(t){return e.shortMonthNames[t]}},{key:"isValidShortMonthName",value:function(e){return-1!==this.getMonthIndexFromShortName(e)}},{key:"getMonthIndexFromShortName",value:function(t){return t?e.shortMonthNames.findIndex((function(e){return!t.localeCompare(e,void 0,{sensitivity:"base"})})):-1}},{key:"getMonthIndexFromName",value:function(t){return e.monthNames.indexOf(t)}},{key:"getDayIndexFromOrdinalName",value:function(t){return e.dayOfMonthOrdinalNames.indexOf(t)}},{key:"getMonthIndexFromEnglishShortName",value:function(t){return e.untranslatedShortMonthNames.indexOf(t)}},{key:"getDayOfWeekName",value:function(t){return e.dayOfWeekNames[t]}},{key:"getDayOfWeekTinyName",value:function(t){return e.dayOfWeekTinyNames[t]}},{key:"getDayOfWeekTinyNames",value:function(){return e.dayOfWeekTinyNames}},{key:"getDayOfWeekShortName",value:function(t){return e.dayOfWeekShortNames[t]}},{key:"getDayOfMonthOrdinalName",value:function(t){return e.dayOfMonthOrdinalNames[t-1]}}],(n=null)&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();m.untranslatedMonthNames=["january","february","march","april","may","june","july","august","september","october","november","december"],m.monthNames=[y("january"),y("february"),y("march"),y("april"),y("may"),y("june"),y("july"),y("august"),y("september"),y("october"),y("november"),y("december")],m.shortMonthNames=[y("jan"),y("feb"),y("mar"),y("apr"),y("shortMay"),y("jun"),y("jul"),y("aug"),y("sep"),y("oct"),y("nov"),y("dec")],m.untranslatedShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m.dayOfWeekNames=[y("sunday"),y("monday"),y("tuesday"),y("wednesday"),y("thursday"),y("friday"),y("saturday")],m.dayOfWeekTinyNames=[y("tinySunday"),y("tinyMonday"),y("tinyTuesday"),y("tinyWednesday"),y("tinyThursday"),y("tinyFriday"),y("tinySaturday")],m.dayOfWeekShortNames=[y("sun"),y("mon"),y("tue"),y("wed"),y("thu"),y("fri"),y("sat")],m.dayOfMonthOrdinalNames=[y("dayOfMonthOrd01"),y("dayOfMonthOrd02"),y("dayOfMonthOrd03"),y("dayOfMonthOrd04"),y("dayOfMonthOrd05"),y("dayOfMonthOrd06"),y("dayOfMonthOrd07"),y("dayOfMonthOrd08"),y("dayOfMonthOrd09"),y("dayOfMonthOrd10"),y("dayOfMonthOrd11"),y("dayOfMonthOrd12"),y("dayOfMonthOrd13"),y("dayOfMonthOrd14"),y("dayOfMonthOrd15"),y("dayOfMonthOrd16"),y("dayOfMonthOrd17"),y("dayOfMonthOrd18"),y("dayOfMonthOrd19"),y("dayOfMonthOrd20"),y("dayOfMonthOrd21"),y("dayOfMonthOrd22"),y("dayOfMonthOrd23"),y("dayOfMonthOrd24"),y("dayOfMonthOrd25"),y("dayOfMonthOrd26"),y("dayOfMonthOrd27"),y("dayOfMonthOrd28"),y("dayOfMonthOrd29"),y("dayOfMonthOrd30"),y("dayOfMonthOrd31")];var g=n(74136);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}function S(e,t,n){return t=P(t),function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),n=t,i=[{key:"getDaysToThisWeekLastWorkingDay",value:function(e){return t.getDaysToDayOfWeek(e,5)}},{key:"getDaysToDayOfWeek",value:function(e,t){return(7+t-e)%7}},{key:"getDaysToSaturday",value:function(e){return t.getDaysToDayOfWeek(e,6)}},{key:"getWeekStartDate",value:function(e,t){var n=(e.getDay()-t+7)%7,r=e.getDate()-n;return new Date(e.getFullYear(),e.getMonth(),r)}},{key:"getWeekEndDate",value:function(e,t){var n=(e.getDay()-t+7)%7,r=e.getDate()-n+6;return new Date(e.getFullYear(),e.getMonth(),r)}},{key:"getMonthStartDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),1)}},{key:"getMonthEndDate",value:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}},{key:"getBeginningOfTheDay",value:function(e){return new Date(e.setHours(0,0,0,0))}},{key:"getEndOfTheDay",value:function(e){return new Date(e.setHours(23,59,59,999))}},{key:"now",value:function(){return r.t.get("dateOffsetMilliseconds")?new Date((new Date).getTime()+r.t.get("dateOffsetMilliseconds")):new Date}},{key:"getOffsettedDateFromTimeZone",value:function(e,t){return r.t.get("dateOffsetMilliseconds")?new Date((e.getTime()+r.t.get("dateOffsetMilliseconds")).toLocaleString("en-US",{timeZone:t})):new Date(e.toLocaleString("en-US",{timeZone:t}))}},{key:"getShortDateFormat",value:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),n+"-"+m.getShortMonthName(e.getMonth())+"-"+(t?(e.getFullYear()+"").substr(2):e.getFullYear())}},{key:"getTimeOnlyFormat",value:function(e){var t=e.getMinutes();return e.getHours()+(t<10?":0":":")+t}},{key:"getDateFromTextValue",value:function(e){if(""==(e=e.trim()))return{isValid:!0,value:null};var n=e.split(/[ \/.-]+/);if(3!=n.length)return{isValid:!1};var r=parseInt(n[0],10);if(isNaN(r))return{isValid:!1};var o=parseInt(n[1],10);if(isNaN(o)){var i=n[1].substr(0,1).toUpperCase()+n[1].substr(1).toLowerCase(),a=m.getMonthIndexFromEnglishShortName(i);if(-1==a&&(a=m.getMonthIndexFromShortName(i)),-1==(o=a))return{isValid:!1}}else if((o-=1)<0||o>11)return{isValid:!1};var u=parseInt(n[2],10);return isNaN(u)||u>99&&u<1e3?{isValid:!1}:(u+"").length>=4&&(u<t.MIN_YEAR||u>t.MAX_YEAR)?{isValid:!1,errorMsgKey:"invalidYear",validDate:u<t.MIN_YEAR?t.getMinValidDate():t.getMaxValidDate()}:(u<=99&&(u>69?u+=1900:u>0&&(u+=2e3)),{isValid:!0,value:new Date(u,o,r)})}},{key:"getTimeFromTextValue",value:function(e){if(""==(e=e.trim()))return{isValid:!0,value:null};var t=e.split(/[ \/:]+/);if(3!=t.length)return{isValid:!1,errorMsgKey:"invalidTime"};var n=parseInt(t[0],10);if(isNaN(n)||n<0||n>24)return{isValid:!1,errorMsgKey:"invalidHours"};var r=parseInt(t[1],10);if(isNaN(r)||r<0||r>60)return{isValid:!1,errorMsgKey:"invalidMinutes"};var o=parseInt(t[2],10);return isNaN(o)||o<0||o>60?{isValid:!1,errorMsgKey:"invalidSeconds"}:{isValid:!0,value:[n,r,o]}}},{key:"getDateTimeFromTextValue",value:function(e,n){var r=e.split(" ");if(!(n||2==r.length&&r[0]&&r[1]))return{isValid:!1,errorMsgKey:"invalidDateTime"};if(!(i=t.getDateFromTextValue(r[0])).isValid)return i;if(r[1]){var o;if(!(o=t.getTimeFromTextValue(r[1])).isValid)return o}else{if(!n)return{isValid:!1,errorMsgKey:"invalidDateTime"};o={value:[0,0,0]}}var i=new Date(i.value.getFullYear(),i.value.getMonth(),i.value.getDate(),o.value[0],o.value[1],o.value[2]);return{isValid:!0,value:t.truncateToValidDateRange(i)}}},{key:"_addLeadingZero",value:function(e,t){return 1!=e.length||t?e:"0"+e}},{key:"getShortDateFormatWithTime",value:function(e,n){var r=t._addLeadingZero(e.getDate().toString(),!1),o=n?t.getOnlyTimeFromDate(e,!1):t._getHoursFromDate(e,!1)+":"+t._getMinutesFromDate(e,!1);return r+"-"+m.getShortMonthName(e.getMonth())+"-"+e.getFullYear()+" "+o}},{key:"_getHoursFromDate",value:function(e,n){return t._addLeadingZero(e.getHours().toString(),n)}},{key:"_getMinutesFromDate",value:function(e,n){return t._addLeadingZero(e.getMinutes().toString(),n)}},{key:"getOnlyTimeFromDate",value:function(e,t){var n=new g.O(e.getHours(),e.getMinutes());return n.getFormattedTime(!t||0!=n.getMinute())}},{key:"getOnlyMonthAndYear",value:function(e){return m.getShortMonthName(e.getMonth())+"-"+e.getFullYear()}},{key:"getLongDateFormat",value:function(e){var t=e.getHours().toString();1==t.length&&(t="0"+t);var n=e.getMinutes().toString();return 1==n.length&&(n="0"+n),m.getDayOfWeekName(e.getDay())+", "+m.getMonthName(e.getMonth())+" "+e.getDate().toString()+", "+e.getFullYear()+". "+t+":"+n}},{key:"addDaysToDate",value:function(e,n){var r=new Date(e.getFullYear(),e.getMonth(),e.getDate()+n,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return t.truncateToValidDateRange(r)}},{key:"addMonthsToDate",value:function(e,n){var r=new Date(e.getFullYear(),e.getMonth()+n,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return t.truncateToValidDateRange(r)}},{key:"equals",value:function(e,t){return!e&&!t||!(!e||!t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}},{key:"equalsWithTime",value:function(e,t){return!e&&!t||!(!e||!t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()}},{key:"getDateDifferenceInDays",value:function(e,t){var n=e.getTime()-36e5*e.getHours()-(t.getTime()-36e5*t.getHours());return Math.round(n/864e5)}},{key:"getDiff",value:function(e,t){return e.getTime()-t.getTime()}},{key:"getShortDateWithDayNameFormat",value:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+m.getShortMonthName(e.getMonth()).toUpperCase()+" ("+m.getDayOfWeekName(e.getDay()).substring(0,3)+")"}},{key:"getShortDateWithDayNameAndYearFormat",value:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+m.getShortMonthName(e.getMonth()).toUpperCase()+" "+e.getFullYear()+" ("+m.getDayOfWeekName(e.getDay()).substring(0,3)+")"}},{key:"getOnlyMonthAndDayFormat",value:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),(t?m.getShortMonthName(e.getMonth()):m.getMonthName(e.getMonth()))+" "+n}},{key:"getOnlyMonthAndDayWithTimeFormat",value:function(e){return t.getOnlyMonthAndDayFormat(e,!0)+" "+l("at")+" "+t.getOnlyTimeFromDate(e)}},{key:"getDateFromTimestamp",value:function(e){return t.truncateToValidDateRange(new Date(1e3*parseFloat(e)))}},{key:"getStrFTime",value:function(e,n){return n=n.constructor==Date?n:t.now(),e=(e=(e=e.replace(/%a/g,m.getDayOfWeekName(n.getDay()).substring(0,3))).replace(/%b/g,m.getShortMonthName(n.getMonth()))).replace(/%e/g,n.getDate())}},{key:"getStrFDate",value:function(e,n){return n=n.constructor==Date?n:t.now(),e=(e=(e=e.replace(/%d/g,t._addLeadingZero(n.getDate().toString()))).replace(/%m/g,t._addLeadingZero((n.getMonth()+1).toString()))).replace(/%G/g,n.getFullYear())}},{key:"getStrFTimeRange",value:function(e,n,r){return t.getStrFTime(t.getStrFTime(e,n).replace(/#([abe])/g,"%$1"),r)}},{key:"getDayNameMonthAndDayNumberFormat",value:function(e){return m.getDayOfWeekName(e.getDay())+", "+m.getMonthName(e.getMonth())+" "+e.getDate()}},{key:"dateToJson",value:function(e){return e||(e=t.now()),{year:e.getFullYear(),month:e.getMonth(),dayOfTheMonth:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}}},{key:"dateFromJson",value:function(e){var n=new Date(e.year,e.month,e.dayOfTheMonth,e.hours,e.minutes,e.seconds);return t.truncateToValidDateRange(n)}},{key:"dateToUTC",value:function(e){var n=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return t.truncateToValidDateRange(n)}},{key:"dateFromUTC",value:function(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0));return t.truncateToValidDateRange(n)}},{key:"jsonToUTC",value:function(e){return t.dateToJson(t.dateToUTC(t.dateFromJson(e)))}},{key:"jsonFromUTC",value:function(e){return t.dateToJson(t.dateFromUTC(t.dateFromJson(e)))}},{key:"cleanTimeFromDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}},{key:"formatMinutesEntry",value:function(e){if(e>59||e<0)throw new Error("Invalid value in TIN_input_date_Util.formatMinutesEntry. Minutes must be between 0 and 59");var t=e.toString();return t.length>1?t:"0".concat(t)}},{key:"getDefaultMinutesEntries",value:function(){return[0,10,20,30,40,50]}},{key:"getTimeAgoAsString",value:function(e){var n,r=t.now(),o=parseInt((r.getTime()-e.getTime())/1e3,10),i=o;if(o<30)n="justNow";else if(o<60)n="secondsAgo";else if(o<3600)n=(i=o/60)<2?"minuteAgo":"minutesAgo";else if(o<86400)n=(i=o/3600)<2?"hourAgo":"hoursAgo";else if(o<604800)n=(i=o/86400)<2?"dayAgo":"daysAgo";else{if(!(o<7776e3))return o<2592e4?t.getOnlyMonthAndDayWithTimeFormat(e):t.getShortDateFormatWithTime(e);n=(i=o/604800)<2?"weekAgo":"weeksAgo"}return l(n,{amount:parseInt(i,10)})}},{key:"getTimeDayAsString",value:function(e){var n=t.getDateDifferenceInDays(t.now(),e);return 0===n?l("today"):1===n?l("yesterday"):l("daysAgo",{amount:n})}},{key:"truncateToValidDateRange",value:function(e){var n=e.getFullYear();return n>t.MAX_YEAR&&(e=t.getMaxValidDate()),n<t.MIN_YEAR&&(e=t.getMinValidDate()),e}},{key:"getMaxValidDate",value:function(){return new Date(t.MAX_YEAR,11,31,23,59,59.999999)}},{key:"getMinValidDate",value:function(){return new Date(t.MIN_YEAR,0,1,0,0,0)}}],(o=null)&&w(n.prototype,o),i&&w(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(s.y);T.FIRST_DAY_OF_THE_WEEK={},T.FIRST_DAY_OF_THE_WEEK.SUNDAY=0,T.FIRST_DAY_OF_THE_WEEK.MONDAY=1,T.SECONDS_IN_A_DAY=86400,T.SECONDS_IN_A_MINUTE=60,T.MIN_YEAR=1001,T.MAX_YEAR=9999},55647:(e,t,n)=>{"use strict";n.d(t,{W:()=>y});n(63534),n(40590),n(64216),n(36611),n(80115),n(17),n(58476),n(15195),n(4895),n(18665),n(14913),n(87787),n(79389),n(64189),n(98741),n(94009),n(97755),n(15852),n(67579),n(41412),n(4632),n(5086),n(90345),n(34606),n(87136),n(6048),n(45708),n(29979),n(40173),n(40460),n(58379),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){return t=p(t),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var y={initMethodEnabled:!0,Delete:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){e&&(e.constructor!=Array?e.constructor!=Object||e.uninit?(e.uninit?e.uninit():e.nodeType&&e.parentNode&&e.parentNode.removeChild(e),e._uninit&&e._uninit()):Object.values(e).forEach((function(e){return y.Delete(e)})):e.forEach((function(e){return y.Delete(e)})))}))},Class:function(e,t){if(!window[e]){var n=window[e]=t?function(e){function t(){return s(this,t),c(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),u(t)}(window[t.className.replaceAll("$Section","").replaceAll("$","_")]):function(){return u((function e(){s(this,e)}))}();n.prototype.classRef=n,n.className=e,n.baseClass=t,n.getClassName=function(){return e},n.New=function(e){return function(e,t,n){if(f())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&d(o,n.prototype),o}(n,o(e||[]))}}return window[e]},peg:function(e,t){return e.peg(t),e},addMethodNames:function(e){var t=e.getClassName()+".";function n(e,n){e.methodName=t+n}y.callForEachPrototypeMethod(e,n),y.callForEachStaticClassMethod(e,n)},abstractMethod:function(){throw new Error("Abstract method. Needs to be implemented in the subclass.")},callForEachPrototypeMethod:function(e,t){for(var n in e.prototype)"classRef"==n||"function"!=typeof e.prototype[n]||e.baseClass&&e.baseClass.prototype[n]&&e.baseClass.prototype[n]===e.prototype[n]||t(e.prototype[n],n)},callForEachStaticClassMethod:function(e,t){for(var n in e)"function"==typeof e[n]&&"getClassName"!=n&&"baseClass"!=n&&e.constructor[n]!=e[n]&&t(e[n],n)},getAllClassMethods:function(e){for(var t=new Set(["arguments","callee","caller","constructor"]),n=[],r=e.prototype||e;r;){var i=Object.getOwnPropertyNames(r).filter((function(e){return!t.has(e)&&"function"==typeof r[e]}));n=n.concat(i),r=Object.getPrototypeOf(r)}return o(new Set(n))}};window.Peg=y.peg,window.Delete=y.Delete,window.AbstractMethod=y.abstractMethod},30782:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});n(63534),n(40590),n(64216),n(36611),n(18665),n(14913),n(87787),n(79389),n(94009),n(15852),n(5086),n(87136),n(6048),n(29979),n(40173),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"describeValue",value:function(t,n){if(n||(n=0),null!=t){if(t.getTypeName)return"<<"+t.getTypeName()+">>";if("function"==typeof t)return"<<func:"+(t.methodName?t.methodName:"Anonymous")+">>";if(9==t.nodeType)return"<<Document>>";if(t.nodeType)return 1==t.nodeType?e.describeElement(t):"<<"+t.nodeName+">>";if(t.self==t&&t==t.window)return"<<Window>>";if("string"==typeof t)return'"'+t.replace(/"/g,'\\"')+'"';if(t instanceof Array||void 0!==t.length&&(t.item||t.slice&&t.pop&&t.push)){if(n<=3){for(var r="[",o=0;o<t.length;++o)o>0&&(r+=", "),r+=e.describeValue(t[o],n+1);return r+="]"}return"Array"}try{if(t.constructor==Object){if(n<=3){var i="{",a=0;for(var u in t)a>0&&(i+=", "),i+=u+": "+e.describeValue(t[u],n+1),++a;return i+="}"}return"Object"}}catch(e){try{if(t.length)return"<<Unknown (has .length): "+t+">>"}catch(e){}return"<<Unknown: "+t+">>"}return t.toString?t.toString():"<<unknown>>"}return void 0===t?"undefined":"null"}},{key:"describeElement",value:function(e){var t,n,r="<"+e.tagName.toLowerCase();for(e.className&&(r+=' class="'+e.className+'"'),e.getAttribute("href")&&(r+=' href="'+e.getAttribute("href")+'"'),r+=">"+((t=e.textContent).length>20?t.substr(0,17)+"...":t)+"</"+e.tagName.toLowerCase()+">";!n&&e;)n=e.widgetRef,e=e.parentNode;n&&!n.widget&&n.content&&"getDomNode"in n.content&&(n=n.content);for(;n&&"getDomNode"in(n.widget||{});)n=n.widget;if(n){r+=" in ";for(var o=0;o<3&&n;++o)o>0&&(r+=" -> "),r+=n.toString(),n=n.getParentWidget()}return r}}],(n=null)&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}()},19181:(e,t,n)=>{"use strict";n.d(t,{y:()=>f});n(63534),n(40590),n(64216),n(36611),n(92157),n(58476),n(15195),n(19693),n(4895),n(18665),n(59581),n(533),n(14913),n(68763),n(87787),n(79389),n(98741),n(94009),n(15852),n(84095),n(5086),n(90345),n(87136),n(6048),n(29979),n(40173),n(54989),n(58379),n(14602);var r=n(30299),o=n(30782),i=n(15370);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize.apply(this,arguments)}return t=e,n=[{key:"initialize",value:function(){}},{key:"getClassName",value:function(){return this.classRef?this.classRef.className:"Object"}},{key:"getTypeName",value:function(){return this.getClassName().replace(/\$Section$/,"")}},{key:"getSimpleClassName",value:function(){return this.classRef.simpleClassName?this.classRef.simpleClassName:this.classRef.className}},{key:"getPackage",value:function(){return this.classRef.packageRef}},{key:"includeToStringInLogItem",value:function(){return!1}},{key:"toString",value:function(){return this.classRef?"<<"+this.classRef.className+">>":"<<Object>>"}},{key:"Delete",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.map((function(e){if("string"!=typeof e&&void 0!==e)throw new Error("Delete should only receive propertyName as a string.");return e})).forEach((function(t){Delete(e[t]),delete e[t]}))}))},{key:"dispatcher",value:function(e){var t=this;return this.dispatchers||(this.dispatchers={}),this.dispatchers[e]||(this.dispatchers[e]=function(n){return t.dispatchEvent(e,n)}),this.dispatchers[e]}},{key:"dispatchEvent",value:function(e,t){return void 0===t&&(t=new r.C),t instanceof r.C&&(t.getSourceWidget()||t.setSourceWidget(this),t.setCurrentWidget(this)),this.eventListeners&&this.eventListeners[e]&&this.eventListeners[e].slice().forEach((function(e){return e(t)})),t}},{key:"addListener",value:function(t,n){if(this.Deleted)throw new Error("adding listener to a deleted emitter. Event: "+t+". Classname: "+this+". ExpectedListener: "+o.R.describeValue(n));if(this.eventListeners||(this.eventListeners={}),this.eventListeners[t]||(this.eventListeners[t]=[]),e.VALIDATE_LISTENER_ADDITION&&-1!==this.eventListeners[t].indexOf(n))throw new Error("adding repeated listener: "+this+"; listener to add: "+o.R.describeValue(n));if(n.callerObj){var r={context:this,eventName:t};n.callerObj.attachedTo.push(r)}this.eventListeners[t].push(n)}},{key:"addListenerOnce",value:function(e,t){var n=this;this.addListener(e,(function r(o){t(o),n.removeListener(e,r)}))}},{key:"removeListener",value:function(e,t){if(!this.Deleted)if(this.eventListeners&&this.eventListeners[e]&&this.eventListeners[e].length){var n=this.eventListeners[e].indexOf(t);-1!==n?(this._detachFromEvent(t,e),this.eventListeners[e].splice(n,1)):i.t.get("defaultErrorHandler").reportAsException("Cannot remove listener. Listener not added or already removed. Event: "+e+". Classname: "+this+". ExpectedListener: "+o.R.describeValue(t))}else i.t.get("defaultErrorHandler").reportAsException("Cannot remove listener. Event has no listeners. Event: "+e+". Classname: "+this+". ExpectedListener: "+o.R.describeValue(t))}},{key:"peg",value:function(e){var t=this;e=e||{},Object.entries(e).forEach((function(e){var n=u(e,2),r=n[0],o=n[1];if(r.startsWith("on")){if("function"==typeof o)t.addListener(r.substr(2),o);else if(null!==o)throw new Error("Event listener must be a valid function")}else{var a="set"+r.substring(0,1).toUpperCase()+r.substr(1);if(i.t.get("ENABLE_UI_VALIDATION")&&"function"!=typeof t[a])throw new Error(a+" is not a valid setter for class "+t.getTypeName());t[a](o)}}))}},{key:"caller",value:function(e){return this.callers||(this.callers={}),this.callers[e]?this.callers[e]:this.callers[e]=this._createCaller(e)}},{key:"_createCaller",value:function(e){var t=this;if(!this[e])throw new Error("missingCaller: "+this.getTypeName()+"."+e);var n=function(){return t[e].apply(t,arguments)};return n.methodName="caller:"+this.getTypeName()+"."+e,n}},{key:"_detachFromEvent",value:function(e,t){var n=this;if(e.callerObj&&e.callerObj.attachedTo){var r=e.callerObj.attachedTo.findIndex((function(e){return e.context===n&&e.eventName===t}));e.callerObj.attachedTo.splice(r,1)}}},{key:"_detachFromEvents",value:function(){var e=this,t=this.eventListeners||{};Object.entries(t).forEach((function(t){var n=u(t,2),r=n[0];(n[1]||[]).forEach((function(t){return e._detachFromEvent(t,r)}))}))}},{key:"_removeAllListenersFrom",value:function(e){e=e||{},Object.values(e).forEach((function(e){(e.callerObj&&e.callerObj.attachedTo?e.callerObj.attachedTo:[]).forEach((function(t){t.context.removeListener(t.eventName,e)}))}))}},{key:"_removeAllListeners",value:function(){this._removeAllListenersFrom(this.callers),this._removeAllListenersFrom(this.dispatchers)}},{key:"_uninit",value:function(){this.Deleted=!0,this._detachFromEvents(),this._removeAllListeners(),this.Delete("eventListeners"),this.Delete("callers"),this.Delete("dispatchers")}}],n&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();f.VALIDATE_LISTENER_ADDITION=!1,i.t.get("DEBUG_MODE")&&(f.VALIDATE_LISTENER_ADDITION=!0,f.prototype._createCaller=function(e){var t=this,n=function(){return t[e].apply(t,arguments)},r={object:this,methodName:e,callback:this[e],attachedTo:[]};n.callerObj=r;var o="caller:"+this.getTypeName()+"."+e;if(n.getTypeName=function(){return o},n.getExtraInfoToLog=function(){return{obj:function(){tinkerman.log(t)},attachedTo:function(){tinkerman.log(r.attachedTo,{as:"table"})}}},n.methodName=o,!this[e]){var i=o+" doesn't exist";throw tinkerman.log(n,i),new Error("ERROR: "+i)}return n},f.prototype.getExtraInfoToLog=function(){var e=this;return{evt:function(){e.eventListeners?tinkerman.log(Object.entries(e.eventListeners).map((function(e){return{name:e[0],listeners:e[1]}})),{as:"table"}):tinkerman.log("No events are being listened to",{as:"text",prependNumber:!1})}}},f.prototype.getListenersCount=function(){var e=this.eventListeners||{};return Object.values(e).reduce((function(e,t){return e+t.length}),0)})},30299:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});n(63534),n(40590),n(64216),n(36611),n(58476),n(15195),n(4895),n(18665),n(14913),n(87787),n(79389),n(98741),n(94009),n(15852),n(84095),n(5086),n(87136),n(6048),n(29979),n(58379),n(14602);var r=n(15370);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize.apply(this,arguments)},(t=[{key:"initialize",value:function(e){this._assign(e),this.prevented=!1,this.sourceWidget=null,this.currentWidget=null}},{key:"_assign",value:function(e){if(e&&"object"!==a(e))throw new Error("Parameter must be an object.");for(var t in e)this[t]=e[t]}},{key:"preventDefault",value:function(){this.prevented=!0}},{key:"getDefaultPrevented",value:function(){return this.prevented}},{key:"setSourceWidget",value:function(e){this.sourceWidget=e}},{key:"getSourceWidget",value:function(){return this.sourceWidget}},{key:"setCurrentWidget",value:function(e){this.currentWidget=e}},{key:"getCurrentWidget",value:function(){return this.currentWidget}},{key:"peg",value:function(e){var t=this;e=e||{},Object.entries(e).forEach((function(e){var n=o(e,2),i=n[0],a=n[1],u="set"+i.substring(0,1).toUpperCase()+i.substr(1);if(r.t.get("ENABLE_UI_VALIDATION")&&"function"!=typeof t[u])throw new Error(u+" is not a valid setter for class "+t.getTypeName());t[u](a)}))}}])&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},15370:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});n(63534),n(40590),n(64216),n(36611),n(18665),n(87787),n(7918),n(94009),n(15852),n(5086),n(29979),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._values=new Map}return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"set",value:function(e,t){this.getInstance()._set(e,t)}},{key:"get",value:function(e){return this.getInstance()._get(e)}}],(n=[{key:"_set",value:function(e,t){this._values.set(e,t)}},{key:"_get",value:function(e){return this._values.get(e)}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}()},15178:(e,t,n)=>{"use strict";n(63534),n(40590),n(64216),n(36611),n(19693),n(18665),n(80475),n(87787),n(94009),n(15852),n(5086),n(87136),n(29979),n(78636),n(58649),n(14602),n(18636),n(15195),n(4895),n(94582),n(14913),n(79389),n(64189),n(98741),n(97755),n(41412),n(4632),n(34606),n(6048);var r=n(19181),o=n(15370),i=n(55647);n(59581);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}return t=e,r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],(n=[{key:"reset",value:function(){this.map={}}},{key:"track",value:function(e){this.map[e]=1}},{key:"getData",value:function(){var e;for(e in this.map)return this.map;return null}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();n(40173);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"getCompleteClassName",value:function(e,t){return e.replace(/\./g,"_")+(t&&"Section"!=t?"_"+t:"")}},{key:"getPackageNameFromNamespace",value:function(e){e=e.replace(/_/g,".");var t=/(?:UNIT\.)?((?:[A-Z]{3}\.)?(?:[a-z\d]+\.)*(?:PLUG\.|MODEL\.)?(?:[a-z\d]+\.)*(?:[A-Z][A-Za-z\d]+))/.exec(e);if(!t)throw new Error("packageNameNotFoundFor: "+e);return t[0]}},{key:"getClassNameFromNamespace",value:function(t){t=t.replace(/_/g,".");var n=e.getPackageNameFromNamespace(t);return t.replace(n,"").replace(".","")||"Section"}}],(n=null)&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function g(e,t,n){return t=w(t),function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,a=[{key:"initialize",value:function(e){this.loaded=!1,this.name=e.name,this.codeReady=!1,this.classNames=[],this.classes=[],this.exportNames=[],this.exports=[]}},{key:"setCodeReady",value:function(e){this.codeReady=e}},{key:"getCodeReady",value:function(){return this.codeReady}},{key:"getAssetName",value:function(){return this.name+".js"}},{key:"load",value:function(e){function n(e){for(var t=0;t<a.classNames.length;++t)e(a[a.classNames[t]])}function r(e){for(var n in a)"function"!=typeof a[n]||t.prototype[n]||e(a[n],n)}var a=this;e.call(a,a.loaded),n(i.W.addMethodNames);var u=a.name+".";if(r((function(e,t){e.methodName=u+t})),!0===o.t.get("trackPackageUsage")){var l=s.getInstance();!function(e){function t(t){var u=function(){return e(),n((function(e){i.W.callForEachPrototypeMethod(e,o(e.prototype)),i.W.callForEachStaticClassMethod(e,o(e))})),r(o(a)),t.apply(this,arguments)};return u.oldMethod=t,u}function o(e){return function(t,n){t.oldMethod&&(e[n]=e[n].oldMethod)}}n((function(e){i.W.callForEachPrototypeMethod(e,(function(n,r){e.prototype[r]=t(n)})),i.W.callForEachStaticClassMethod(e,(function(n,r){e[r]=t(n)}))})),r((function(e,n){e.simpleClassName||(a[n]=t(e))}))}((function(){l.track(a.name)}))}a.loaded||(a.loaded=!0)}},{key:"translate",value:function(e,t,n){return o.t.get("currentLanguage").translate(this.name,e,t,n)}},{key:"translateWithResultCallback",value:function(e,t,n,r){return o.t.get("currentLanguage").translateWithResultCallback(this.name,e,t,n,r)}},{key:"Class",value:function(e,t,n){void 0===t&&(t=r.y);var o=i.W.Class(d.getCompleteClassName(this.name)+"$"+e,t,n);o.packageRef=this,o.simpleClassName=e,this.classNames.push(e),this.classes.push(o),this[e]=o,o.translate=this.caller("translate"),window[d.getCompleteClassName(this.name,e)]=o}},{key:"export",value:function(e,t){var n="function"==typeof t&&/^class\s/.test(Function.prototype.toString.call(t)),r=t;"object"!==v(r)&&"function"!=typeof r||(r.packageRef=this,r.exportName=e),this.exportNames.push(e),this.exports.push(t),this[e]=t,n&&(r.prototype.classRef=r,r.simpleClassName=e,r.className=d.getCompleteClassName(this.name)+"$"+e,r.getClassName=function(){return r.className},r.New=function(e){return function(e,t,n){if(_())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&O(o,n.prototype),o}(r,y(e||[]))},this.classNames.push(e),this.classes.push(r)),window[d.getCompleteClassName(this.name,e)]=t}},{key:"getMainClass",value:function(){if(o.t.get("assetLoader").hurryUpPackage(this.name),!this.loaded)throw new Error("packageNotLoadedYet");return this.classes.find((function(e){return"Section"===e.exportName}))||this.classes[0]}}],u=[{key:"getPathAndBaseName",value:function(e){var t=e.lastIndexOf(".")+1;return{path:e.substr(0,t),basename:e.substr(t)}}},{key:"getPackageNameWithLanguage",value:function(e){var n=t.getPathAndBaseName(e);return n.path+"lang."+o.t.get("currentLanguage").getLanguage()+"."+n.basename}},{key:"getPackageNameWithoutLanguage",value:function(e){return t.getLangAndBasePackageName(e)[1]}},{key:"isLangPackage",value:function(e){return-1!=e.indexOf(".lang.")}},{key:"getLangAndBasePackageName",value:function(e){var t=e.indexOf(".lang.");if(-1==t)return[null,e];var n=t+1,r=n+5,o=e.indexOf(".",r);return[e.substring(r,o),e.substr(0,n)+e.substr(o+1)]}},{key:"fromName",value:function(e){return o.t.get("assetLoader").hurryUpPackage(e),t.getOrCreatePackageFromName(e)}},{key:"getOrCreatePackageFromName",value:function(e,n,r){for(var i=e.split(/\./),a=window,u=0;u<i.length-1;++u){if(0==i[u].length)throw new Error("TIN_start_Package name "+e+" is not valid");if(!a[i[u]]){if(!n)return null;a[i[u]]={}}a=a[i[u]]}var l=i[u];if(a[l]){if(o.t.get("ENABLE_UI_VALIDATION")&&!(a[l]instanceof t))throw new Error("Variable "+e+" already exists and is not a TIN_start_Package")}else{if(!n)return null;a[l]=new t(r)}return a[l]}}],a&&b(n.prototype,a),u&&b(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,u}(r.y),E=n(90493);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}var j=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.language=t,this.languagePathCache={},this.displayPackageAndKeyNames=!!n},(t=[{key:"getLanguage",value:function(){return this.language}},{key:"translate",value:function(e,t,n,r){return this.translateWithResultCallback(e,t,n,r,this._resultAsString)}},{key:"translateWithResultCallback",value:function(e,t,n,r,i){var a="";if(void 0!==t||void 0!==r){var u=S.getPathAndBaseName(e),l=this._getPkg(u.path+"lang");l||void 0!==r||o.t.get("defaultErrorHandler").reportAsException("noPackageForLanguageFoundForTranslation-"+e+"-"+this.language),a=this._getUnprocessedValue(l,u.basename,t),a=this._processUndefined(l,u.basename,e,a,t,r),a=this._processDisplayPackageAndKeyNames(l,a,e,t,u.basename),a=this._processFields(a,n,i)}return void 0===t&&o.t.get("defaultErrorHandler").reportAsException("missingKeyForTranslation-"+e+"-"+this.language),a}},{key:"_getUnprocessedValue",value:function(e,t,n){var r=void 0;return e&&void 0!==e[this.language]&&void 0!==e[this.language][t].text&&void 0===(r=e[this.language][t].text[n])&&this._isGenderKey(n)&&(r=e[this.language][t].text[this._getGenderBaseKey(n)]),r}},{key:"_isGenderKey",value:function(e){return"string"==typeof e&&e.match(this._getGenderRegex())}},{key:"_getGenderBaseKey",value:function(e){var t=e.match(this._getGenderRegex());return t?t[1]:void 0}},{key:"_getGenderRegex",value:function(){return/(.+Default)(Masculine|Feminine)$/}},{key:"_processUndefined",value:function(e,t,n,r,i,a){return void 0===r&&(void 0===a?(o.t.get("defaultErrorHandler").reportAsException("translationNotFound-"+n+"-"+this.language+"-"+i),r=e&&void 0!==e[this.language]&&void 0!==e[this.language][t].text&&void 0!==e[this.language][t].text[i+"#Default"]?e[this.language][t].text[i+"#Default"]:i):r=a),r}},{key:"_processFields",value:function(e,t,n){return n(e&&t&&"object"===P(t)?this._replaceFields(e,t):[e])}},{key:"_replaceFields",value:function(e,t){for(var n=[],r=this._compileTranslation(e),o=0;o<r.variables.length;o++){var i=void 0!==t[r.variablesNames[o]]?t[r.variablesNames[o]]:r.variables[o];n.push(r.nonVariables[o],i)}return n.push(r.nonVariables.pop()),n}},{key:"_compileTranslation",value:function(e){var t={variables:[],variablesNames:[],nonVariables:[]},n=e.match(/\{\$[^}]+\}/g);if(null===n)t.nonVariables=[e];else{t.variables=n,t.nonVariables=E.E.split(e,/\{\$[^}]+\}/);for(var r=0;r<n.length;r++){var o=n[r].match(/\{\$([^}]+)\}/);t.variablesNames.push(o[1])}}return t}},{key:"_resultAsString",value:function(e){return e.join("")}},{key:"_processDisplayPackageAndKeyNames",value:function(e,t,n,r,o){return this.displayPackageAndKeyNames&&e&&void 0!==e[this.language][o].text&&-1===r.indexOf("NONT",r.length-4)&&(t=t+"( "+n+"-"+r+" )"),t}},{key:"_getPkgFromLanguagePath",value:function(e){for(var t=window,n=e.split(/\./),r=0;r<n.length;++r)if(!(t=t[n[r]]))return null;return t}},{key:"_getPkg",value:function(e){if(this.languagePathCache[e])return this.languagePathCache[e];var t=this._getPkgFromLanguagePath(e);return this.languagePathCache[e]=t,t}}])&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();if(void 0===I)var I={code:"en_US",displayPackageAndKeyNames:!0};o.t.set("currentLanguage",new j(I.code,!!I.displayPackageAndKeyNames))},30959:(e,t,n)=>{"use strict";n.d(t,{w:()=>u});n(63534),n(40590),n(64216),n(36611),n(17),n(47746),n(18665),n(80475),n(59581),n(533),n(14913),n(68763),n(87787),n(94009),n(15852),n(5086),n(43148),n(29979),n(14602);var r=n(17972);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,o=[{key:"uremove",value:function(e,t,n){var r=n(e,t);return-1!=r&&(e.splice(r,1),!0)}},{key:"remove",value:function(t,n){var r=e.sloppyIndexOf(t,n);return-1!=r&&(t.splice(r,1),!0)}},{key:"setContains",value:function(t,n,r){var o=e.sloppyIndexOf(t,n);return-1!=o==r?o:r?(t.push(n),t.length-1):e.remove(t,n)}},{key:"sloppyIndexOf",value:function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}},{key:"append",value:function(e,t){return e.push.apply(e,t),e}},{key:"hasElement",value:function(e,t,n){n||(n=function(e){return e});for(var r=0;r<e.length;++r)if(n(e[r])==t)return!0;return!1}},{key:"usearch",value:function(e,t,n){if(!n||"function"!=typeof n)return null;for(var r=0;r<e.length;++r)if(n(e[r],t))return e[r]}},{key:"indexOfObject",value:function(e,t){for(var n=0;n<e.length;++n)if(r.J.equals(e[n],t))return n;return-1}},{key:"unique",value:function(e,t){var n=[];t=t||r.J.equals;for(var o=0,i=e.length;o<i;o++){for(var a=!1,u=0,l=n.length;u<l;u++)if(t(e[o],n[u])){a=!0;break}a||n.push(e[o])}return n}},{key:"intersection",value:function(e){return e.reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))}},{key:"createArrayFromRange",value:function(e,t){var n=[];if(e<t)for(;e<=t;)n.push(e++);else for(;e>=t;)n.push(e--);return n}},{key:"getArrayWithSeparators",value:function(e,t,n){for(var r=[],o=0;o<e.length;++o)o>0&&r.push(t),r.push(n?n(e[o]):e[o]);return r}},{key:"join",value:function(e,t,n,r){return 1==e.length?r?r(e[0]):e[0]:(r&&(e=e.map(r)),null===t&&(t=","),null==n?e.join(t):e.slice(0,-1).join(t)+n+e.slice(-1))}},{key:"getArrayDiff",value:function(t,n){var r=[];for(var o in t){var i=t[o];-1===e.indexOfObject(n,i)&&r.push(i)}return r}}],(n=null)&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}()},17972:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});n(63534),n(40590),n(64216),n(36611),n(4895),n(18665),n(87787),n(79389),n(94009),n(15852),n(5086),n(29979),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,i=[{key:"isString",value:function(e){return"string"==typeof e||e instanceof String}},{key:"isObject",value:function(e){return"object"===r(e)}},{key:"isEmpty",value:function(e){return""===e||null==e||Array.isArray(e)&&0===e.length}},{key:"equals",value:function(t,n,o){if(o||(o=0),++o>100)return!0;if(t===n)return!0;if(t instanceof Array||n instanceof Array){if(t instanceof Array&&n instanceof Array){if(t.length!=n.length)return!1;for(var i=0;i<t.length;++i)if(!e.equals(t[i],n[i],o))return!1;return!0}return!1}if(t instanceof Date||n instanceof Date)return t instanceof Date&&n instanceof Date||(t=new Date(t),n=new Date(n)),t.getTime()==n.getTime();if(!0===t||!1===t||null==t)return!1;var a=r(t);if("string"==a||"number"==a)return!1;if(null===n)return!1;if(a!=r(n))return!1;if(t.equals)return t.equals(n);var u,l=0;for(u in t){if(!(u in n))return!1;if(!e.equals(t[u],n[u],o))return!1;++l}var s=0;for(u in n)++s;return l==s}},{key:"matches",value:function(t,n){var r=!0;for(var o in n){if(!t.hasOwnProperty(o)||!r)return!1;e.isObject(n[o])?(Array.isArray(n[o])&&(r=Array.isArray(t[o])),r=r&&e.matches(t[o],n[o])):r=t[o]===n[o]}return r}},{key:"wrapIntoArray",value:function(e){return Array.isArray(e)?e:[e]}}],(n=null)&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();a.isArray=Array.isArray},90493:(e,t,n)=>{"use strict";n.d(t,{E:()=>v});n(63534),n(40590),n(64216),n(36611),n(80115),n(17),n(18665),n(80475),n(14913),n(1772),n(33734),n(87787),n(79389),n(94009),n(15852),n(5086),n(79073),n(87136),n(6048),n(29979),n(78636),n(40173),n(50785),n(58649),n(68329),n(53746),n(20861),n(71905),n(85213),n(97182),n(12279),n(39302),n(70147),n(66217),n(97966),n(35186),n(35944),n(44787),n(50632),n(52278),n(14245),n(52492),n(93266),n(37192),n(37220),n(82432),n(32483),n(36696),n(58083),n(14602);var r=n(30959),o=n(17972);n(64189),n(97755),n(41412),n(4632),n(34606);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function l(e,t,n){return t=c(t),function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),n=t,o=[{key:"replaceSpecialChar",value:function(e){var t="ŠŽšžŸÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåçèéêëìíîïıñòóôõöøùúûüýÿ".indexOf(e);return t>=0?"SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiiinoooooouuuuyy".charAt(t):e}},{key:"createEszettRegexString",value:function(e){return e.replace(new RegExp("ss|ẞ|ß|SS","g"),"(ss|ẞ|ß|SS)")}},{key:"replaceSpecialChars",value:function(e){return e.replace(/š|ž|à|á|â|ã|ä|å|ç|è|é|ê|ë|ì|í|î|ï|ı|ñ|ò|ó|ô|õ|ö|ø|ù|ú|û|ü|ý|ÿ/gi,t.replaceSpecialChar)}},{key:"escape",value:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"flatten",value:function(e){return t.escape(t.replaceSpecialChars(e.toLowerCase()))}},{key:"pL",value:function(){return"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײ؀-ۿݐ-ݿࢠ-ࣿؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ"}},{key:"pN",value:function(){return"0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൦-൵๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９"}},{key:"getSearchCriteriaRegExp",value:function(e){for(var n,r=e.replace(","," ").split(/\s+/),o="",i=0,a=r.length-1;i<a;i++)o+=(n=r[i],"(?=.*(\\b|\\s)"+t.flatten(n)+"(\\b|\\s))");return o+=function(e){return"(?=.*(\\b|\\s)"+t.flatten(e)+").*$"}(r[r.length-1]),new RegExp(o,"mi")}},{key:"getHighlighterRegExp",value:function(e){for(var n,r=e.replace(","," ").split(/\s+/),o="",i=0,a=r.length-1;i<a;i++)o+=(n=r[i],"(?:\\b|\\s)"+t.flatten(n)+"(?:\\b|\\s)|");return o+=function(e){return"(?:\\b|\\s)"+t.flatten(e)}(r[r.length-1]),new RegExp("("+o+")","gmi")}}],(r=null)&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(19181).y);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,i=[{key:"unprefix",value:function(e,t){return e.substr(0,t.length)==t&&e.substr(t.length)}},{key:"toCamelCase",value:function(e){return e.replace(/([A-Z]+)/g,(function(e,t){return t.substr(0,1).toUpperCase()+t.toLowerCase().substr(1,t.length)})).replace(/[\-_\s](.)/g,(function(e,t){return t.toUpperCase()}))}},{key:"toPascalCase",value:function(t){for(var n=t.split(/\s+/),r="",o=0;o<n.length;++o)r+=e.capitalize(n[o]);return r}},{key:"cutText",value:function(e,t){return e.length>t?e.substr(0,t)+"...":e}},{key:"removeFromEnd",value:function(e,t){var n=e.length-t.length;return e.substr(n)==t&&e.substr(0,n)}},{key:"hasWord",value:function(e,t){return!!e&&r.w.hasElement(e.match(/\w+/g),t)}},{key:"removeWord",value:function(t,n){var o=e.split(t,/  */).filter((function(e){return e!=n}));return r.w.join(o," ")}},{key:"addWord",value:function(t,n){return e.hasWord(t,n)?t:(t+" "+n).trim()}},{key:"isWhitespace",value:function(e){return o.J.isString(e)&&""===e.trim()}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"removeAllWhitespace",value:function(e){return e.replace(/\s*/g,"")}},{key:"getUncamelized",value:function(t,n){for(var r="",o=0;o<t.length;++o){var i=t.charAt(o);0==o||i!=i.toUpperCase()||n&&!isNaN(i)?r+=i:r+=" "+i.toLowerCase()}return e.capitalize(r)}},{key:"isEmpty",value:function(e){return!e||""===e.trim()}},{key:"truncate",value:function(e,t,n){return t=t||30,n=n||"...",e.length>t?e.slice(0,t-n.length)+n:String(e)}},{key:"split",value:function(e,t,n){var r=String.prototype.split,o=void 0===/()??/.exec("")[1];if("[object RegExp]"!==Object.prototype.toString.call(t))return r.call(e,t,n);var i,a,u,l,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),f=0;for(t=new RegExp(t.source,c+"g"),e+="",o||(i=new RegExp("^"+t.source+"$(?!\\s)",c)),n=void 0===n?-1>>>0:n>>>0;(a=t.exec(e))&&!((u=a.index+a[0].length)>f&&(s.push(e.slice(f,a.index)),!o&&a.length>1&&a[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)})),a.length>1&&a.index<e.length&&Array.prototype.push.apply(s,a.slice(1)),l=a[0].length,f=u,s.length>=n));)t.lastIndex===a.index&&t.lastIndex++;return f===e.length?!l&&t.test("")||s.push(""):s.push(e.slice(f)),s.length>n?s.slice(0,n):s}},{key:"removeAccents",value:function(e){for(var t,n="",r=0;r<e.length;++r){var o=e.charAt(r);n+=-1!=(t="ŠŽšžŸÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåçèéêëìíîïıñòóôõöøùúûüýÿ".indexOf(o))?"SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiiinoooooouuuuyy"[t]:o}return n}},{key:"getSplitter",value:function(){return e._splitter||(e._splitter=new RegExp("((?:[^ \\n]){"+e.MAX_WORD_LENGTH+"})\\B","g")),e._splitter}},{key:"getLineBreaksOrWhitespace",value:function(){return e._lineBreaksOrWhitespace||(e._lineBreaksOrWhitespace=/\r|\n|\s/),e._lineBreaksOrWhitespace}},{key:"putWbrElementsInAllChildsIfNeeded",value:function(t,n){n=n||document;for(var r=t.childNodes,o=r.length-1;o>=0;--o)if(3==r[o].nodeType){var i=r[o].nodeValue.replace(/\s/gm," "),a=e.split(i,e.getSplitter()),u=n.createElement("span");u.className="wbrContainer";for(var l=0;l<a.length;++l)u.appendChild(e._putWbrElement(a[l],n));t.replaceChild(u,r[o])}else e.putWbrElementsInAllChildsIfNeeded(r[o])}},{key:"_putWbrElement",value:function(t,n){var r,o=n.createElement("span");return e.getLineBreaksOrWhitespace().test(t)||t.length<e.MAX_WORD_LENGTH?(o.className="wbrSpanSimple",r=n.createTextNode(t.replace(/^[\r\n]+/,"")),o.appendChild(r)):(o.className="wbrSpan",r=n.createTextNode(t),o.appendChild(r)),o}},{key:"isRtlText",value:function(e){return e&&(e.search("‮")>=0||e.search("‫")>=0||/[\u0600-\u06FF]/.test(e)||/[\u0590-\u05FF]/.test(e))}},{key:"highlightChildrenMatches",value:function(t,n){if(n)for(var r=t.childNodes,o=r.length-1;o>=0;--o)if(3==r[o].nodeType){for(var i=r[o].nodeValue.replace(/\s/gm," "),a=e.split(p.replaceSpecialChars(i),n),u=e._splitByStringsArray(a,i),l=document.createElement("span"),s=0;s<a.length;++s)l.appendChild(e._getHighlightedChild(a[s],u[s],n));t.replaceChild(l,r[o])}else e.highlightChildrenMatches(r[o],n)}},{key:"_getHighlightedChild",value:function(e,t,n){var r=n.test(p.replaceSpecialChars(e)),o=document.createElement(r?"strong":"span"),i=document.createTextNode(t);return o.className=r?"HighlightedChild":"",o.appendChild(i),o}},{key:"_splitByStringsArray",value:function(e,t){for(var n=[],r=0,o=0,i=e.length;o<i;o++){var a=e[o].length;n.push(0===a?"":t.substr(r,a)),r+=a}return n}},{key:"countWords",value:function(e){var t=e.match(/[\w\d]+/gi);return t?t.length:0}},{key:"splitWords",value:function(e){return function(e){for(var t=[],n=0;n<e.length;++n)""!=e[n]&&t.push(e[n]);return t}(e.split(/[ \t\n\r,;:_]+/))}},{key:"isAsianChar",value:function(e){var t=new RegExp("[一-鿿|⿰-⿿|㇀-㇯|㈀-龿|豈-﫿]"),n=new RegExp("[　-〿぀-ゟ゠-ヿ＀-ﾟ一-龯㐀-䶿]"),r=new RegExp("[ᄀ-ᇿ|㄰-㆏|ꥠ-꥿|가-힯|ힰ-퟿]");return t.test(e)||n.test(e)||r.test(e)}},{key:"hasMSWordSource",value:function(e){return new RegExp('<o:p>|class="Mso|class=Mso|<?xml:namespace|data-leveltext').test(e)}},{key:"generateRandCode",value:function(e){for(var t="",n=0;n<=e;++n)t+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-"[Math.floor(64*Math.random())];return t}},{key:"uuidv4",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}},{key:"tempId",value:function(){return"TEMPID_"+Math.random().toString(36).substr(2,8)}},{key:"trimSpecialUnicodeCharacters",value:function(e){var t=["ㅤ","​","‎","‏","⠀"," "],n=new RegExp("^[".concat(t.join(""),"]+|[").concat(t.join(""),"]+$"),"g");return e.trim().replace(n,"")}}],(n=null)&&y(t.prototype,n),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();v.MAX_WORD_LENGTH=14,v.whitespaceCharacters=" \t\n\r"},70834:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(79389),n(5086),n(96088),n(87136),n(6048),n(40173);var r={monthNames:["january","february","march","april","may","june","july","august","september","october","november","december"],shortMonthNames:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],dayOfWeekNames:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],shortDayOfWeekNames:["sun","mon","tue","wed","thu","fri","sat"],texts:{at:"at"},getDaysToThisWeekLastWorkingDay:function(e){return r.getDaysToDayOfWeek(e,5)},getDaysToDayOfWeek:function(e,t){return(7+t-e)%7},getDaysToSaturday:function(e){return r.getDaysToDayOfWeek(e,6)},getLongDateFormat:function(e){var t=r.dayOfWeekNames[e.getDay()]+", "+r.monthNames[e.getMonth()]+" "+e.getDate();return e.getFullYear()!=(new Date).getFullYear()&&(t+=", "+e.getFullYear()),t},getShortDateFormat:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),n+"-"+r.shortMonthNames[e.getMonth()]+"-"+(t?(e.getFullYear()+"").substr(2):e.getFullYear())},getDayAndMonthFormat:function(e){return r.monthNames[e.getMonth()]+" "+e.getFullYear()},getTimeOnlyFormat:function(e){var t=e.getMinutes();return e.getHours()+(t<10?":0":":")+t},getShortDateFormatWithTime:function(e){var t=e.getDate().toString();1==t.length&&(t="0"+t);var n=e.getMinutes().toString();1==n.length&&(n="0"+n);var o=e.getHours().toString();return 1==o.length&&(o="0"+o),t+"-"+r.shortMonthNames[e.getMonth()]+"-"+e.getFullYear()+" "+o+":"+n},getOnlyTimeFromDate:function(e,t){var n=e.getMinutes().toString();1!=n.length||t||(n="0"+n);var r,o=e.getHours().toString();return 1!=o.length||t||(o="0"+o),t?(r=o>12?o-12:o,r+=0!=n?":"+n:""):r=(o>12?o-12:o)+":"+n,r+" "+(o>=12?"PM":"AM")},addDaysToDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},equals:function(e,t){return!e&&!t||!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate())},equalsWithTime:function(e,t){return!e&&!t||!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes())},getDateDifferenceInDays:function(e,t){var n=e.getTime()-36e5*e.getHours()-(t.getTime()-36e5*t.getHours());return Math.round(n/864e5)},getShortDateWithDayNameFormat:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+r.shortMonthNames[e.getMonth()].toUpperCase()+" ("+r.dayOfWeekNames[e.getDay()].substring(0,3)+")"},getOnlyMonthAndDayWithTimeFormat:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),r.shortMonthNames[e.getMonth()]+" "+t+" "+r.texts.at+" "+r.getTimeWithMeridianFromDate(e)},getDateFromTimestamp:function(e){return new Date(1e3*parseFloat(e))},getTimeWithMeridianFromDate:function(e){var t=e.getHours(),n=e.getMinutes(),r=t%12;return(0==r?12:r)+":"+(n>9?n:"0"+n)+(t>=12?"pm":"am")},getStrFTime:function(e,t){return t=t.constructor==Date?t:r.now(),e=(e=(e=e.replace(/%a/g,r.dayOfWeekNames[t.getDay()].substring(0,3))).replace(/%b/g,r.shortMonthNames[t.getMonth()])).replace(/%e/g,t.getDate())},getStrFTimeRange:function(e,t,n){return r.getStrFTime(r.getStrFTime(e,t).replace(/#([abe])/g,"%$1"),n)},getLastDayInMonth:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}};const o=r},84459:(e,t,n)=>{"use strict";n(18772);var r=n(61691),o=(n(79389),n(5086),n(6048),(0,r.Xs)("SendBeacon",r.x0));o.prototype.send=function(e,t){var n="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return n.open("POST",e,!1),n.setRequestHeader("Accept","*/*"),"string"==typeof t?(n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.responseType="text/plain"):"[object Blob]"===Object.prototype.toString.call(t)&&t.type&&n.setRequestHeader("Content-Type",t.type),n.send(t),!0};const i=o;var a,u=n(27118),l={},s=(0,r.Xs)("Notifier",r.x0),c=new i;l.TIME_LIMIT=3e5,l.load=function(e,t,n){this.urlLocation=e,this.statusConfirmed=!!t,this.hasError=!!n},u.A.getEventManager().attachToLoadEvent((function(){var e=document.getElementById("rsvpComment");if(e){var t=l.statusConfirmed?null:e;a=new s(l.TIME_LIMIT,l.urlLocation,l.statusConfirmed,l.hasError,t,c)}})),window.addEventListener("beforeunload",(function(e){a&&a.sendOnClose()})),s.prototype.init=function(e,t,n,r,o,i){this.time=e,this.timer=null,this.url=t,t&&(this.urlLocation=this.getURL(t)),this.params=this.getAllParameters(t),this.commentForm=o,this.sendBeacon=i,this.statusConfirmed=n,this.hasError=r,this.addSubmitListener(o),this.setTimerIfNecessary()},s.prototype.setTimerIfNecessary=function(){this.statusConfirmed||this.hasError||(this.timer=setTimeout(this.caller("sendNotification"),this.time))},s.prototype.clearTimeOutIfNecessary=function(){this.timer&&clearTimeout(this.timer)},s.prototype.sendNotification=function(){this.clearTimeOutIfNecessary(),this.statusConfirmed=!0,this.commentForm.submit()},s.prototype.addSubmitListener=function(e){e&&e.addEventListener("submit",this.caller("formSubmit"))},s.prototype.formSubmit=function(){this.sendNotification()},s.prototype.sendOnClose=function(){if(!this.statusConfirmed){this.clearTimeOutIfNecessary();var e=new FormData;e.append("hash",this.params.hash),e.append("rsvpId",this.params.rsvpId),e.append("recurrent",this.params.recurrent),e.append("statusConfirmed","true"),this.sendBeacon.send(this.urlLocation,e)}},s.prototype.getAllParameters=function(e){var t={};if(e){var n,r,o=e.split("?")[1].split("&amp;");for(r=0;r<o.length;r++)t[(n=o[r].split("="))[0]]=void 0===n[1]||decodeURIComponent(n[1])}return t},s.prototype.getURL=function(e){return e.split("?")[0]};const f=l;n(14913),n(52231),n(87136),n(40173);var p=n(70834),d=(0,r.Xs)("EventSignupFreeTimePicker",r.x0);d.prototype.init=function(e,t,n,r,o,i,a){this.container=e,this.selectedDate=t,this.previousMonth=t.getMonth(),this.daysWithFreeTime=n,this.freeTimesForSelectedDate=r,this.timezoneOffset=a,this.drawUI(),this.container&&this.container.appendChild(this.element)},d.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePicker"},[this.e("table",{class:"FreeTimePickerTable",cellPadding:0,cellSpacing:0},[this.e("tbody",null,[this.e("tr",null,[this.e("td",{class:"FreeTimePickerTableCell"},[this.datePicker=(0,r.b4)(new h(this.selectedDate,this.daysWithFreeTime),{onselectdate:this.caller("onSelectDate")})]),this.e("td",{class:"FreeTimePickerTableCell"},[this.timeSelector=new m(this.selectedDate,this.freeTimesForSelectedDate)])])])])])},d.prototype.onScheduleAppointmentClick=function(e){this.cancelEvent(e)},d.prototype.onSelectDate=function(e){this.selectedDate=e.date;var t=new Date(this.selectedDate),n=new Date(this.selectedDate);n.setHours(23),n.setSeconds(59),n.setMinutes(59);for(var r=[],o=0;o<availableEvents.length;++o)if(void 0!==availableEvents[o]){var i=new Date(1e3*availableEvents[o].targetDate.timestamp);if(i>=t&&i<=n){var a={eventId:availableEvents[o].id,targetDate:{timestamp:1e3*availableEvents[o].targetDate.timestamp},timezoneOffset:i.getTimezoneOffset(),durationInSeconds:availableEvents[o].durationInSeconds,slotInMinutes:availableEvents[o].durationInSeconds/60,hasTime:availableEvents[o].targetDateHasTime};r.push({targetDate:new Date(1e3*availableEvents[o].targetDate.timestamp),slot:a})}}this.freeTimesForSelectedDate=r,this.datePicker.setDate(this.selectedDate),this.timeSelector.setDate(this.selectedDate,this.freeTimesForSelectedDate)};var y=(0,r.Xs)("Toolbar",r.x0);y.prototype.init=function(e){this.content=e,this.drawUI()},y.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePickerToolbar"},[this.content])};var h=(0,r.Xs)("DatePicker",r.x0);h.prototype.init=function(e,t){this.baseCssClassName="DatePicker",this.selectedDate=e,this.daysWithFreeTime=t,this.drawUI()},h.prototype.setDate=function(e){this.selectedDate=e,this.updateData()},h.prototype.drawUI=function(){this.element=this.e("tr",{class:"DatePicker"},[new y(this.e("div",null,[this.title=this.e("span"),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onNextClick")},[">"]),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onPrevClick")},["<"])])),this.e("div",{class:"DatePickerContent"},[this.e("table",{cellPadding:0,cellSpacing:0},[this.headersContainer=this.e("thead",null,this.getHeaders()),this.createWeeksTbody()])])]),this.updateData()},h.prototype.getHeaders=function(){return[this.e("tr",null,[this.e("th",null,[p.A.shortDayOfWeekNames[0].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[0].slice(1)]),this.e("th",null,[p.A.shortDayOfWeekNames[1].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[1].slice(1)]),this.e("th",null,[p.A.shortDayOfWeekNames[2].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[2].slice(1)]),this.e("th",null,[p.A.shortDayOfWeekNames[3].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[3].slice(1)]),this.e("th",null,[p.A.shortDayOfWeekNames[4].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[4].slice(1)]),this.e("th",null,[p.A.shortDayOfWeekNames[5].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[5].slice(1)]),this.e("th",null,[p.A.shortDayOfWeekNames[6].charAt(0).toUpperCase()+p.A.shortDayOfWeekNames[6].slice(1)])])]},h.prototype.createWeeksTbody=function(){function e(e){t.ondayheaderclick&&t.ondayheaderclick(e)}var t=this;this.weeks=[];for(var n,o=this.e("tbody"),i=0;i<=5;++i)(n=(0,r.b4)(new v(this,this.baseCssClassName),{onselectdate:this.caller("onSelectDate")})).ondayheaderclick=e,this.weeks.push(n),this.appendChild(o,n);return o},h.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},h.prototype.updateData=function(){this.removeAllChildren(this.title),this.appendChild(this.title,this.toTitleCase(p.A.getDayAndMonthFormat(this.selectedDate)));for(var e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth(),n=p.A.getLastDayInMonth(this.selectedDate),r=1-function(e){return(e=new Date(e.getFullYear(),e.getMonth(),1)).getDay()}(this.selectedDate),o=(a=new Date).getFullYear(),i=a.getMonth(),a=a.getDate(),u=!1,l=0;l<6;++l){this.weeks[l].element.style.display=r>n?"none":"";for(var s=0;s<7;++s){var c=new Date(e,t,r);this.weeks[l].days[s].setDay(c),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"Past",r<=0||r>n),!u&&r+1>=n&&(u=!0),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"Today",c.getDate()==a&&c.getFullYear()==o&&c.getMonth()==i),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"Selected",this.selectedDate.getDate()==c.getDate()&&this.selectedDate.getFullYear()==c.getFullYear()&&this.selectedDate.getMonth()==c.getMonth()),this.setHasClass(this.weeks[l].days[s].element,this.baseCssClassName+"HasFreeTime",this.dateHasFreeTime(c)),++r}}},h.prototype.dateHasFreeTime=function(e){for(var t=0;t<this.daysWithFreeTime.length;++t)if(this.daysWithFreeTime[t].getDate()==e.getDate()&&this.daysWithFreeTime[t].getFullYear()==e.getFullYear()&&this.daysWithFreeTime[t].getMonth()==e.getMonth())return!0;return!1},h.prototype.onPrevClick=function(e){this.cancelEvent(e),this.changeDate(-1)},h.prototype.onNextClick=function(e){this.cancelEvent(e),this.changeDate(1)},h.prototype.changeDate=function(e){var t=new r.eT,n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+2*e,0);t.date=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate()>n.getDate()?n.getDate():this.selectedDate.getDate());for(var o=[],i=0;i<availableEvents.length;++i)void 0!==availableEvents[i]&&o.push(new Date(1e3*availableEvents[i].targetDate.timestamp));this.daysWithFreeTime=o,this.dispatchEvent("selectdate",t)},h.prototype.onSelectDate=function(e){this.dispatchEvent("selectdate",e)};var v=(0,r.Xs)("DatePickerWeek",r.x0);v.prototype.init=function(e,t){var n=this;function o(e){n.ondayheaderclick&&n.ondayheaderclick(e)}this.monthView=e,this.baseCssClassName=t,this.days=[],this.element=this.e("tr",{class:this.baseCssClassName+"WeekHeader"});for(var i=0;i<7;++i){var a;(a=(0,r.b4)(new b(this.monthView,this.baseCssClassName),{onselectdate:this.dispatcher("selectdate")})).onheaderclick=o,this.days.push(a),this.appendChild(this.element,a)}return this.widget};var b=(0,r.Xs)("DatePickerCell",r.x0);b.prototype.init=function(e,t){this.monthView=e,this.baseCssClassName=t,this.element=this.e("td",{class:this.baseCssClassName+"DayHeaderTd"},[this.e("div",{class:"tdContainer"},[this.e("div",{class:this.baseCssClassName+"DayHeader",onclick:this.caller("onHeaderClick")},[this.dayText=document.createTextNode("")])])])},b.prototype.setDay=function(e){this.date=e,this.dayText.nodeValue=e.getDate()},b.prototype.onHeaderClick=function(){var e=new r.eT;e.date=this.date,this.dispatchEvent("selectdate",e)};var m=(0,r.Xs)("TimeSelector",r.x0);m.prototype.init=function(e,t,n){this.selectedDate=e,this.freeTimes=t,this.maxColumns=3,this.timezoneOffset=n,this.drawUI()},m.prototype.setDate=function(e,t){this.selectedDate=e,this.freeTimes=t,this.updateData()},m.prototype.drawUI=function(){this.element=this.element=this.e("div",{class:"TimeSelector"},[new y(this.e("div",null,["Availability for ",this.selectedDateTextContainer=this.e("span")])),this.e("div",{class:"TimeSelectorContent"},[this.checkboxsContainer=this.e("table",{class:"TimeSelectorTable",cellPadding:0,cellSpacing:0})])]),this.updateData()},m.prototype.getCheckboxs=function(){for(var e=parseInt(this.freeTimes.length/this.maxColumns)+1,t=e<2?1:e<4?2:3,n=(parseInt(this.freeTimes.length/t),[]),r=0;r<this.freeTimes.length;++r){for(var o=[],i=0;i<t&&r<this.freeTimes.length;++i)o.push(this.e("td",{class:"TimeSelectorCell"},[new g(this.freeTimes[r],this.timezoneOffset)])),++r;n.push(this.e("tr",null,o)),--r}return this.e("tbody",null,n)},m.prototype.updateData=function(){this.removeAllChildren(this.selectedDateTextContainer),this.appendChild(this.selectedDateTextContainer,this.toTitleCase(p.A.getLongDateFormat(this.selectedDate))),this.removeAllChildren(this.checkboxsContainer),this.appendChild(this.checkboxsContainer,this.getCheckboxs())},m.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var g=(0,r.Xs)("TimeSelectorOption",r.x0);g.prototype.init=function(e,t){var n=e.targetDate;this.startDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0),this.endDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()+e.slot.slotInMinutes,0),this.slot=e.slot,this.timezoneOffset=t,this.drawUI()},g.prototype.getValueForCheckbox=function(){return this.slot.eventId},g.prototype.drawUI=function(){var e;e=this.slot.hasTime?p.A.getOnlyTimeFromDate(this.startDate)+" - "+p.A.getOnlyTimeFromDate(this.endDate):"Full day",this.element=this.e("label",null,[this.input=this.e("input",{type:"radio",name:"selectedEvent",onchange:this.caller("onChange")}),e]),this.input.value=this.getValueForCheckbox()},g.prototype.onChange=function(){var e=this.input.checked;this.setHasClass(this.element,"TimeSelectorTimeSelected",e);var t=new r.eT;t.date=this.date,this.dispatchEvent("selecttime",t)};const _=d;n.g.Invite=f,n.g.EventSignupFreeTimePicker=_},61691:(e,t,n)=>{"use strict";n.d(t,{Xs:()=>s,b4:()=>c,eT:()=>d,x0:()=>y});n(63534),n(40590),n(64216),n(19693),n(18665),n(68763),n(98741),n(5086),n(52231),n(87136),n(29979),n(78636),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){var e=parseInt((i.match(/.+ie\s([\d.]+)/i)||[])[1]);return e>7?document.documentMode:e}var i=navigator.userAgent.toLowerCase(),a=-1!=i.indexOf("opera"),u=-1!=i.indexOf("msie")&&!a,l=(u&&o(),u&&o(),u&&o(),u&&o(),u&&o()>=9);function s(e,t){var n=window[e]=function(){this.classRef=n,!s.DO_NOT_RUN_INIT_METHOD&&this.init&&this.init.apply(this,arguments)};if(t){s.DO_NOT_RUN_INIT_METHOD=!0;var r=new t;s.DO_NOT_RUN_INIT_METHOD=!1,r.classRef=t,n.prototype=r}return n.className=n.displayName=e,n.baseClass=t,n.getClassName=function(){return e},n.New=function(e){var t;return s.DO_NOT_RUN_INIT_METHOD=!0,t=new n,s.DO_NOT_RUN_INIT_METHOD=!1,t.init&&t.init.apply(t,e),t},n}function c(e,t){return e.peg(t),e}function f(e,t){return e instanceof t}c.methodName="Peg";var p={addWord:function(e,t){return p.hasWord(e,t)?e:e+" "+t},splitBySpaces:function(e){for(var t,n=[],r=0;;){if(-1==(t=e.indexOf(" ",r)))return e.length>r&&n.push(e.substring(r)),n;t>r&&n.push(e.substring(r,t)),r=t+1}},removeWord:function(e,t){for(var n="",r=0,o=p.splitBySpaces(e),i=0;i<o.length;++i)o[i]!=t&&(r&&(n+=" "),n+=o[i],++r);return n},hasWord:function(e,t){for(var n,r=0;;){if(-1==(n=e.indexOf(" ",r)))return e.length>r&&t==e.substring(r);if(n>r&&t==e.substring(r,n))return!0;r=n+1}}},d=function(){};d.prototype.init=function(){this.prevented=!1},d.prototype.preventDefault=function(){this.prevented=!0},d.prototype.getDefaultPrevented=function(){return this.prevented};var y=function(){};y.prototype.init=function(){},y.prototype.caller=function(e){return this.callers||(this.callers={}),this.callers[e]?this.callers[e]:this.callers[e]=function(e,t,n){var r;return r=n?function(){if(e[t])return e[t].apply(e,n)}:function(){if(e[t])return e[t].apply(e,arguments)},r}(this,e)},y.prototype.dispatchEvent=function(e,t){if(void 0===t&&(t=new d),f(t,d)&&(t.sourceWidget||(t.sourceWidget=this),t.currentWidget=this),this.eventListeners&&this.eventListeners[e])for(var n=function(e){var t,n;for(t in n=e.constructor==Array?[]:{},e)n[t]=e[t];return n}(this.eventListeners[e]),r=0;r<n.length;++r)n[r](t)},y.prototype.dispatcher=function(e){if(this.dispatchers||(this.dispatchers={}),this.dispatchers[e])return this.dispatchers[e];var t=this;return this.dispatchers[e]=function(n){t.dispatchEvent(e,n)}},y.prototype.addDOMListener=function(e,t){this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},y.prototype.removeDOMListener=function(e,t){this.eventListeners[e].splice(arrayIndexOf(this.eventListeners[e],t),1)},y.prototype.addListener=function(e,t){this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},y.prototype.removeListener=function(e,t){this.eventListeners[e].splice(arrayIndexOf(this.eventListeners[e],t),1)},y.prototype.peg=function(e){for(var t in e)null!==e[t]&&this.addListener(t.substr(2),e[t])},y.prototype.appendChildren=function(e,t){for(var n=0;n<t.length;++n)this.appendChild(e,t[n])},y.prototype.appendChild=function(e,t){var n;null!=t&&("string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t)):(n=f(t,y)?t.getDomNode():t,e.appendChild(n)))},y.prototype.removeChild=function(e,t){var n;null!==t&&(n=t.getDomNode?t.getDomNode():t,e.removeChild(n))},y.prototype.removeAllChildren=function(e){for(;e.firstChild;)this.removeChild(e,e.firstChild)},y.prototype.getDomNode=function(){return this.element},y.prototype.e=function(e,t,n){var o,i,a,s;for(var c in o=u&&!l&&"input"==e&&t&&t.type?document.createElement('<input type="'+t.type+'"'+(t.name?' name="'+t.name+'"':"")+(t.id?' id="'+t.id+'"':"")+">"):document.createElement(e),t)if("function"==(s=r(t[c])))this.addDOMListener(o,c.substr(2),t[c]);else if("boolean"==s)o[c]=t[c];else if("style"==c&&"object"==r(t[c]))for(a in i=t[c])null!==i[a]&&(o.style[a]=i[a]);else if("class"==c)o.className=t[c];else if("maxlength"==c)o.maxLength=t[c];else{if(null===t[c])continue;(!u||l||"input"!=e||"type"!=c&&"name"!=c)&&o.setAttribute(c,t[c])}return n&&this.appendChildren(o,n),o},y.prototype.addDOMListener=function(e,t,n,r){u?(r=!!r,e.attachEvent("on"+t,n)):e.addEventListener(t,n,r)},y.prototype.removeDOMListener=function(e,t,n,r){u?(r=!!r,e.detachEvent("on"+t,n)):e.removeEventListener(t,n,r)},y.prototype.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},y.prototype.getPreventDefault=function(e){return"defaultPrevented"in e?e.defaultPrevented:!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()},y.prototype.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},y.prototype.cancelEvent=function(e){e||(e=window.event),this.preventDefault(e),this.stopPropagation(e)},y.prototype.addClass=function(e,t){e.className=p.addWord(e.className,t)},y.prototype.removeClass=function(e,t){e.className=p.removeWord(e.className,t)},y.prototype.setHasClass=function(e,t,n){n?this.addClass(e,t):this.removeClass(e,t)}},18035:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});n(63534),n(40590),n(64216),n(36611),n(18665),n(87787),n(94009),n(15852),n(5086),n(29979),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}const a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"get",value:function(e){var t=document.querySelector('portal-data[id="'+e+'"]');return t?t.dataset:null}},{key:"getAllByDataValue",value:function(e,t){return document.querySelectorAll("portal-data[data-"+e+'="'+t+'"]')}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},46918:(e,t,n)=>{n(53270);var r=pjQuery.Deferred;function o(){this._initialize()}o.prototype.get=function(e){var t=r();return this.cache[e]?t.resolve(this.cache[e]):t.reject(null),t.promise()},o.prototype.set=function(e,t){var n=r();return this.cache[e]=t,n.resolve(!0),n.promise()},o.prototype.clear=function(e){var t=r();return this.cache.hasOwnProperty(e)?(delete this.cache[e],t.resolve(!0)):t.reject(null),t.promise()},o.prototype.purge=function(){var e=r();return this._initialize(),e.resolve(!0),e.promise()},o.prototype.buildKey=function(e,t){return t=t||{},md5(e+JSON.stringify(t))},o.prototype._initialize=function(){this.cache={}},o.getInstance=function(){return o._instance||(o._instance=new o),o._instance},e.exports=o},60477:(e,t,n)=>{e=n.nmd(e),function(){var t=window.FilePicker=function(e){this.apiKey=e.apiKey,this.clientId=e.clientId,this.scope=e.scope,this.buttonEl=e.buttonEl,this.onSelect=e.onSelect,this.onCancel=e.onCancel,this.buttonEl&&(this.buttonEl.disabled=!0,this.extensions=e.extensions,this.opened=!1,this.token=null,gapi.load("auth",{callback:pjQuery.proxy(this.open,this)}),gapi.load("client:picker",{callback:pjQuery.proxy(this._pickerApiLoaded,this)}))};t.prototype={open:function(){this.token=gapi.auth.getToken(),this.token?this._showPicker(this.token):this._doAuth(!1,pjQuery.proxy((function(e){this._showPicker(e)}),this))},_showPicker:function(e){if(!this.opened&&e&&!e.error){this.opened=!0;var t=e.access_token;if(null==this.picker){var n=new google.picker.View(google.picker.ViewId.DOCS);n.setMimeTypes(this.extensions),this.picker=(new google.picker.PickerBuilder).addView(n).setAppId(this.clientId).setOAuthToken(t).setCallback(pjQuery.proxy(this._pickerCallback,this)).build(),this.picker.setVisible(!0)}else this.picker.setVisible(!0)}},_pickerCallback:function(e){if(e[google.picker.Response.ACTION]===google.picker.Action.PICKED){var t=e[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID];gapi.client.request({path:"/drive/v2/files/"+t,method:"GET"}).execute(pjQuery.proxy(this._fileGetCallback,this))}else this._cancelCallback()},_fileGetCallback:function(e){this.onSelect&&this.onSelect(e)},_cancelCallback:function(){this.onCancel&&this.onCancel()},_pickerApiLoaded:function(){this.buttonEl.disabled=!1},_driveApiLoaded:function(){this._doAuth(!0,pjQuery.proxy((function(){this._showPicker()}),this))},_doAuth:function(e,t){tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId+".apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/"+this.scope,callback:t}),this.token?tokenClient.requestAccessToken({prompt:"consent"}):tokenClient.requestAccessToken({prompt:""})}},e&&(e.exports=t)}()},14895:(e,t,n)=>{n(18636),n(47746),n(98741),n(15852),n(5086),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,i,a=0|t,u=Math.max(a>=0?a:r-Math.abs(a),0);for(;u<r;){if((o=n[u])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;u++}return!1}}),void 0===Element.prototype.getAttributeNames&&Object.defineProperty(Element.prototype,"getAttributeNames",{value:function(){for(var e=this.attributes,t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r].name;return n}})},91130:(e,t,n)=>{"use strict";var r=n(18783),o=n.n(r),i=(n(5086),n(69193),n(87136),n(63534),n(40590),n(64216),n(36611),n(18665),n(87787),n(64189),n(94009),n(97755),n(15852),n(10678),n(41412),n(4632),n(34606),n(12091),n(29979),n(14602),n(19181)),a=n(30299),u=n(15370);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function f(e,t,n){return t=d(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.revisionNumber=0,this.dataSourceId=++t.count}},{key:"getDataHashCode",value:function(){return this.dataSourceId+"-"+this.getRevisionNumber()}},{key:"getRevisionNumber",value:function(){return this.revisionNumber}},{key:"forceChange",value:function(){var e=new a.C({partial:!1});this.dispatchChange(e)}},{key:"dispatchChange",value:function(e){++this.revisionNumber,this.dispatchEvent("change",e)}}])&&s(n.prototype,r),o&&s(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);h.count=0,u.t.get("DEBUG_MODE")&&(h.prototype.getExtraInfoToLog=function(){var e=this;return{data:function(){return tinkerman.log(e.get())}}});var v=n(24321);n(19693),n(15178);const b=["TIN","e","jscore","module","harp","UI","lang"];for(var m=window,g=0;g<b.length;++g)m[b[g]]||(m[b[g]]={}),m=m[b[g]];m.en_US||(m.en_US={}),m.en_US.ServerStatus={text:{loginRequired:"%27Login%20required.%27",sessionExpired:"%27Your%20session%20has%20expired.%27",sorryWeAreUnderMaintenance:"%27Avature%20is%20under%20maintenance.%27",unableToReachTheServer:"%27Unable%20to%20reach%20Avature.%20Please%20check%20your%20internet%20connection...%27"}};const _=function(e,t,n){return u.t.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.ServerStatus",e,t,n)},w=_;function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function P(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function T(e,t,n){return t=I(t),function(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var D=function(e){function t(){return S(this,t),T(this,t,arguments)}return F(t,e),P(t,[{key:"initialize",value:function(e,t,n){this.errorCode=e,this.reportCode=t,this.callDescription=n}},{key:"getTechnicalDescription",value:function(){return this.callDescription+" exception: "+this.errorCode+(this.reportCode?" (reportCode: "+this.reportCode+")":"")}},{key:"getErrorCode",value:function(){return this.errorCode}},{key:"getReportCode",value:function(){return this.reportCode}}])}(i.y),R=function(e){function t(){return S(this,t),T(this,t,arguments)}return F(t,e),P(t,[{key:"getTranslatedMessage",value:function(){return this.getDescription()}}])}(D);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function M(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}function B(e,t,n){return t=U(t),function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,n||[],U(e).constructor):t.apply(e,n))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}var z=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"initialize",value:function(){this.setAsOnline()}},{key:"assertValidCode",value:function(e){if(-1==["online","invalidPageSession","routerLoginRequired","offline","serverDisabled","buildingPacks","otherUserLogged"].indexOf(e))throw new Error("Invalid status code")}},{key:"setAsServerDisabled",value:function(){this._set("serverDisabled")}},{key:"setAsBuildingPacks",value:function(){this._set("buildingPacks")}},{key:"setAsOnline",value:function(){this._set("online")}},{key:"setAsOffline",value:function(){this._set("offline")}},{key:"setAsUserLess",value:function(){this._set("routerLoginRequired")}},{key:"setAsOtherUserLogged",value:function(){this._set("otherUserLogged")}},{key:"mustPollForOnline",value:function(){return this.isOffline()||this.isServerDisabled()||this.isBuildingPacks()}},{key:"setAsPageSessionLess",value:function(){this._set("invalidPageSession")}},{key:"_set",value:function(e){if(e!=this.code){this.assertValidCode(e);var t=this.mustPollForOnline();this.code=e,this.isOffline()?this.dispatchEvent("offline"):this.isOnline()?this.dispatchEvent("online"):this.isUserLess()?this.dispatchEvent("userless"):this.isPageSessionLess()&&this.dispatchEvent("pagesessionless"),this.isOnline()||this.dispatchEvent("notonline"),!t&&this.mustPollForOnline()&&this.dispatchEvent("pollrequired"),t&&!this.mustPollForOnline()&&this.dispatchEvent("pollrequiredend")}}},{key:"createRemoteException",value:function(e){if(this.isOffline())return new K("offline",e);if(this.isServerDisabled()||this.isBuildingPacks())return new $(e);if(this.isUserLess())return new G(e);if(this.isPageSessionLess())return new q(e);if(this.isOtherUserLogged())return new J(e);throw new Error("No RemoteException for "+this.code)}},{key:"isOffline",value:function(){return"offline"==this.code}},{key:"isOnline",value:function(){return"online"==this.code}},{key:"isUserLess",value:function(){return"routerLoginRequired"==this.code}},{key:"isOtherUserLogged",value:function(){return"otherUserLogged"==this.code}},{key:"isPageSessionLess",value:function(){return"invalidPageSession"==this.code}},{key:"isServerDisabled",value:function(){return"serverDisabled"==this.code}},{key:"isBuildingPacks",value:function(){return"buildingPacks"==this.code}},{key:"isPageSessionLessOrUserLess",value:function(){return this.isPageSessionLess()||this.isUserLess()}}])}(i.y),Q=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"initialize",value:function(e,n){N(U(t.prototype),"initialize",this).call(this,e,null,n)}}])}(D),q=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"initialize",value:function(e){N(U(t.prototype),"initialize",this).call(this,"invalidPageSession",e)}},{key:"getDescription",value:function(){return w("sessionExpired")}}])}(Q),G=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"initialize",value:function(e){N(U(t.prototype),"initialize",this).call(this,"routerLoginRequired",e)}},{key:"getDescription",value:function(){return w("loginRequired")}}])}(Q),J=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"initialize",value:function(e){N(U(t.prototype),"initialize",this).call(this,"otherUserLogged",e)}},{key:"getDescription",value:function(){return w("loginRequired")}}])}(Q),K=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"getDescription",value:function(){return w("unableToReachTheServer")}}])}(Q),$=function(e){function t(){return x(this,t),B(this,t,arguments)}return Y(t,e),M(t,[{key:"initialize",value:function(e){N(U(t.prototype),"initialize",this).call(this,"serverDisabled",e)}},{key:"getDescription",value:function(){return w("sorryWeAreUnderMaintenance")}}])}(Q);const Z=["TIN","e","jscore","module","harp","UI","lang"];for(var X=window,ee=0;ee<Z.length;++ee)X[Z[ee]]||(X[Z[ee]]={}),X=X[Z[ee]];X.en_US||(X.en_US={}),X.en_US.RemoteExceptionDecoder={text:{loginRequired:"%27Login%20required%27",oopsThereWasAnError:"%27Oops%2C%20there%20was%20an%20error%21%20Please%20contact%20your%20admin.%27",actionTakingTooLongContact:"%27This%20action%20is%20taking%20too%20long.%20Please%20contact%20Technical%20Support%27"}};const te=function(e,t,n){return u.t.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.RemoteExceptionDecoder",e,t,n)},ne={translate:te};var re=n(90493);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ie.apply(this,arguments)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function le(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}function ce(e,t,n){return t=pe(t),function(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fe()?Reflect.construct(t,n||[],pe(e).constructor):t.apply(e,n))}function fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fe=function(){return!!e})()}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}var he=function(e){function t(){return ae(this,t),ce(this,t,arguments)}return de(t,e),le(t,[{key:"create",value:function(e,n){var r=n.errorCode;if("loginRequired"==r)return new ve(e);if("exception"==r)return new be(n.reportCode,e);if(r in t.remoteExceptionClassByCode)return new t.remoteExceptionClassByCode[r](n.reportCode,e,n.extraData);throw new Error("Unknown remote exception: "+r)}}],[{key:"remoteExceptionClassWithCallback",value:function(e,n,r){var o=r?R:D,i=this._createMixin(o,n,e),a=re.E.capitalize(e);ne.export(a,i),t.remoteExceptionClassByCode[e]=i}},{key:"_createMixin",value:function(e,t,n){return function(e){function r(){return ae(this,r),ce(this,r,arguments)}return de(r,e),le(r,[{key:"initialize",value:function(e,t,o){this.extraData=o,ie(pe(r.prototype),"initialize",this).call(this,n,e,t)}},{key:"getDescription",value:function(){return t(this.extraData)}}])}(e)}},{key:"registerTranslatedClass",value:function(e,n){t.remoteExceptionClassWithCallback(e,(function(e){return n||e}),!0)}}])}(i.y);he.remoteExceptionClassByCode={};var ve=function(e){function t(){return ae(this,t),ce(this,t,arguments)}return de(t,e),le(t,[{key:"initialize",value:function(e){ie(pe(t.prototype),"initialize",this).call(this,"loginRequired",null,e)}},{key:"getDescription",value:function(){return ne.translate("loginRequired")}}])}(D),be=function(e){function t(){return ae(this,t),ce(this,t,arguments)}return de(t,e),le(t,[{key:"initialize",value:function(e,n){ie(pe(t.prototype),"initialize",this).call(this,"exception",e,n)}},{key:"getDescription",value:function(){return ne.translate("oopsThereWasAnError")}}])}(D),me=function(e){function t(){return ae(this,t),ce(this,t,arguments)}return de(t,e),le(t,[{key:"initialize",value:function(e){ie(pe(t.prototype),"initialize",this).call(this,"exception",null,e)}},{key:"getDescription",value:function(){return ne.translate("actionTakingTooLongContact")}}])}(D);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}function Oe(e,t,n){return t=Pe(t),function(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Se()?Reflect.construct(t,n||[],Pe(e).constructor):t.apply(e,n))}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}function Ee(){return Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ee.apply(this,arguments)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}var Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){Ee(Pe(t.prototype),"initialize",this).call(this),this.waitingForLogin=!1,this.waitingForOnline=!1,this.actionCall=e,this.busy=!0,this.fetchDuration=null,this.sendStartTime=null,u.t.get("server").isOnline()?this._fetchData():this._addOnlineListener()}},{key:"getFetchDuration",value:function(){return this.fetchDuration}},{key:"isBusy",value:function(){return this.busy}},{key:"get",value:function(){return this.data}},{key:"_fetchData",value:function(){this.sendStartTime=v.L.now(),u.t.get("server").execCall(this.actionCall,this.caller("onDataReceive"),this.caller("onError"))}},{key:"_addLoginListener",value:function(){if(this.waitingForLogin)throw new Error("Already waiting for login");this.waitingForLogin=!0,u.t.get("page").addListener("userchange",this.caller("onLoginAfterLoginRequired"))}},{key:"onLoginAfterLoginRequired",value:function(){this._removeLoginListener(),this._fetchData()}},{key:"_removeLoginListener",value:function(){u.t.get("page").removeListener("userchange",this.caller("onLoginAfterLoginRequired")),this.waitingForLogin=!1}},{key:"_addOnlineListener",value:function(){if(this.waitingForOnline)throw new Error("Already waiting for online");this.waitingForOnline=!0,u.t.get("server").addListener("online",this.caller("onServerOnlineAfterOfflineError"))}},{key:"onServerOnlineAfterOfflineError",value:function(){this._removeOnlineListener(),this._fetchData()}},{key:"_removeOnlineListener",value:function(){u.t.get("server").removeListener("online",this.caller("onServerOnlineAfterOfflineError")),this.waitingForOnline=!1}},{key:"updateDatasourceProperty",value:function(e,t){this.data[e]=t}},{key:"onError",value:function(e){if(!this.Deleted){if(e instanceof Q)return this._addOnlineListener(),!0;if(e instanceof ve)return this._addLoginListener(),!0;var t=new a.C({error:e});return this.dispatchEvent("error",t),t.getDefaultPrevented()}}},{key:"onDataReceive",value:function(e){this.Deleted||(this.data=e,this.fetchDuration=v.L.now()-this.sendStartTime,this.dispatchEvent("receive"),this.busy=!1,this.dispatchEvent("busystatechange"))}},{key:"uninit",value:function(){this.waitingForLogin&&this._removeLoginListener(),this.waitingForOnline&&this._removeOnlineListener()}}])&&_e(n.prototype,r),o&&_e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(h);n(59581),n(40173);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fe(r.key),r)}}function Fe(e){var t=function(e,t){if("object"!=je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==je(t)?t:t+""}function Ce(e,t,n){return t=Re(t),function(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,De()?Reflect.construct(t,n||[],Re(e).constructor):t.apply(e,n))}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}var Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.id=e}},{key:"getId",value:function(){return this.id}},{key:"get",value:function(){return this.data}},{key:"getError",value:function(){return this.error}},{key:"setError",value:function(e){this.errorSet=!0,this.error=e;var t=new a.C({data:e});this.dispatchEvent("error",t)}},{key:"set",value:function(e){this.valueSet=!0,this.data=e;var t=new a.C({data:e});this.dispatchEvent("load",t)}}])&&Ie(n.prototype,r),o&&Ie(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);n(98741),n(18772),n(14913),n(80115),n(17),n(58476),n(15195),n(47746),n(4895),n(68763),n(79389),n(84095),n(6048),n(45708),n(43148),n(58379);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Me(r.key),r)}}function Me(e){var t=function(e,t){if("object"!=xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xe(t)?t:t+""}function Ve(e,t,n){return t=We(t),function(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Be()?Reflect.construct(t,n||[],We(e).constructor):t.apply(e,n))}function Be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Be=function(){return!!e})()}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}var Ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ve(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.busy=!!e}},{key:"isBusy",value:function(){return this.busy}},{key:"setIsBusy",value:function(e){this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"setAsFree",value:function(){this.setIsBusy(!1)}},{key:"setAsBusy",value:function(){this.setIsBusy(!0)}}])&&Le(n.prototype,r),o&&Le(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y),He=(n(80475),n(68329),n(30782));function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qe(r.key),r)}}function qe(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ze(t)?t:t+""}var Ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"getNodeDepth",value:function(e){for(var t=0,n=e;n.parentNode;)t++,n=n.parentNode;return t}},{key:"isDomNode",value:function(e){return e&&(e instanceof Node||e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.Node&&e instanceof e.ownerDocument.defaultView.Node)}},{key:"isDomElement",value:function(e){return e&&(e instanceof Element||e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.Element&&e instanceof e.ownerDocument.defaultView.Element)}},{key:"assertIsDomNode",value:function(t){if(!e.isDomNode(t))throw new Error("Expecting DOM node to work with, received "+He.R.describeValue(t)+" instead.")}},{key:"assertIsDomElement",value:function(t){if(!e.isDomElement(t))throw new Error("Expecting DOM element to work with, received "+He.R.describeValue(t)+" instead.")}},{key:"contains",value:function(t,n){return e.assertIsDomNode(t),e.assertIsDomNode(n),t.contains(n)}},{key:"exclusiveContains",value:function(t,n){return e.assertIsDomNode(t),e.assertIsDomNode(n),t!==n&&t.contains(n)}}],(n=null)&&Qe(t.prototype,n),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function $e(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:t+""}var Ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"setAttributes",value:function(t,n){for(var r in n)e.setAttribute(t,r,n[r])}},{key:"setAttribute",value:function(e,t,n){var r,o,i;if(r=Je(n),"on"===t.substr(0,2).toLowerCase()){if(!n)return;u.t.get("defaultErrorHandler").reportAsException("setAttributeEventListener: do not set event listeners with TIN_dom_Attribute.setAttribute. Attribute: "+t+" - Value: "+He.R.describeValue(n))}else if(null==n||!1===n)e.removeAttribute(t);else if(!0===n)e.setAttribute(t.toLowerCase().trim(),t.toLowerCase().trim());else if("string"===r||"number"===r)e.setAttribute(t,n);else if("object"===r)if("style"===t)for(i in o=n)e.style[i]=o[i];else Array.isArray(n)?e.setAttribute(t,n.join(" ")):u.t.get("defaultErrorHandler").reportAsException("setAttributeObjectParam: invalid object value. Attribute: "+t+" - Value: "+He.R.describeValue(n));else u.t.get("defaultErrorHandler").reportAsException("setAttributeParams: invalid attribute value type. Attribute: "+t+" - Value: "+He.R.describeValue(n))}},{key:"hasSpaceSeparatedAttributeValue",value:function(e,t,n){if(Ge.assertIsDomElement(e),t){var r=e.getAttribute(t)||"";return!!r&&re.E.hasWord(r,n)}return!1}},{key:"addSpaceSeparatedAttributeValue",value:function(t,n,r){e.hasSpaceSeparatedAttributeValue(t,n,r)||t.setAttribute(n,re.E.addWord(t.getAttribute(n)||"",r))}},{key:"removeSpaceSeparatedAttributeValue",value:function(t,n,r){e.hasSpaceSeparatedAttributeValue(t,n,r)&&(t.setAttribute(n,re.E.removeWord(t.getAttribute(n)||"",r)),t.getAttribute(n)||t.removeAttribute(n))}},{key:"addAriaLabelledby",value:function(t,n){e.addSpaceSeparatedAttributeValue(t,"aria-labelledby",n)}},{key:"removeAriaLabelledby",value:function(t,n){e.removeSpaceSeparatedAttributeValue(t,"aria-labelledby",n)}},{key:"addAriaDescribedby",value:function(t,n){e.addSpaceSeparatedAttributeValue(t,"aria-describedby",n)}},{key:"removeAriaDescribedby",value:function(t,n){e.removeSpaceSeparatedAttributeValue(t,"aria-describedby",n)}},{key:"addAriaControls",value:function(t,n){e.addSpaceSeparatedAttributeValue(t,"aria-controls",n)}},{key:"removeAriaControls",value:function(t,n){e.removeSpaceSeparatedAttributeValue(t,"aria-controls",n)}},{key:"setDisabled",value:function(t,n){2===arguments.length?(n=!!n,e.isDisableable(t)?e.setAttribute(t,"disabled",n):e.setAttribute(t,"aria-disabled",!!n&&"true")):u.t.get("defaultErrorHandler").reportAsException("attributeDisabledWrongParams: #setDisabled missing required parameters")}},{key:"setHidden",value:function(t,n){2===arguments.length?e.setAttribute(t,"hidden",!!n):u.t.get("defaultErrorHandler").reportAsException("attributeHiddenWrongParams: #setHidden missing required parameters")}},{key:"setTabIndex",value:function(e,t){-1===t||"-1"===t||0===t||"0"===t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}},{key:"isLabelable",value:function(t){return t.nodeName&&e.HTML_LABELABLE_ELEMENTS.includes(t.nodeName.toUpperCase())}},{key:"isDisableable",value:function(t){return t.nodeName&&e.HTML_DISABLED_ELEMENTS.includes(t.nodeName.toUpperCase())}},{key:"isDisabled",value:function(t){return!(!t||!e.isDisableable(t)||!t.disabled&&!t.closest("fieldset:disabled, select:disabled, optgroup:disabled"))}}],(n=null)&&Ke(t.prototype,n),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Ze.HTML_LABELABLE_ELEMENTS=["BUTTON","INPUT","SELECT","TEXTAREA","METER","OUTPUT","PROGRESS"],Ze.HTML_DISABLED_ELEMENTS=["BUTTON","INPUT","SELECT","TEXTAREA","OPTGROUP","OPTION","FIELDSET"];var Xe=n(17972);n(52231),n(78636);function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nt(r.key),r)}}function nt(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}var rt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userAgent=t,this.platform=n,this.document=r,this.identifiers=[],this._detectBrowser()}return t=e,(n=[{key:"is",value:function(t){if(-1!==e.IDENTIFIERS.indexOf(t))return-1!==this.identifiers.indexOf(t);throw new Error("This browser identifier is unknown")}},{key:"isInCompatMode",value:function(){return!!(this.is("ie")&&this.document&&this.document.documentMode)&&this.document.documentMode!==this._getIEVersionFromUserAgent()}},{key:"getIdentifiers",value:function(){return this.identifiers}},{key:"getIEVersion",value:function(){if(!this.is("ie"))return!1;if(!this.IEVersion){var e=this._getIEVersionFromUserAgent();this.IEVersion=e>7&&this.document&&this.document.documentMode?this.document.documentMode:e}return this.IEVersion}},{key:"_getIEVersionFromUserAgent",value:function(){return this.IEAgentVersion||(this.IEAgentVersion=this.userAgent.toLowerCase().indexOf("trident/7.0")>-1?11:parseInt((this.userAgent.toLowerCase().match(/.+ie\s([\d.]+)/i)||[])[1],10)),this.IEAgentVersion}},{key:"_detectBrowser",value:function(){var t=this.userAgent.toLowerCase();-1!==t.indexOf("edge")?this.identifiers.push(e.EDGEHTML):-1!==t.indexOf("opera")||-1!==t.indexOf("presto")?this.identifiers.push(e.PRESTO):-1!==t.indexOf("konqueror")?this.identifiers.push(e.KHTML):-1!==t.indexOf("chrome")?this.identifiers.push(e.BLINK):-1!==t.indexOf("msie")||-1!==t.indexOf("trident")?this.identifiers.push(e.IE):-1!==t.indexOf("webkit")?this.identifiers.push(e.WEBKIT):-1!==t.indexOf("gecko")&&this.identifiers.push(e.GECKO),-1!==t.indexOf("windows phone")?this.identifiers.push(e.MOBILE):-1!==t.indexOf("ipad")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPAD),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("ipod")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPOD),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("iphone")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPHONE),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("macintosh")||this.platform&&-1!==this.platform.indexOf("Mac")?this.identifiers.push(e.MAC):(/\b(mobile|android)\b/i.test(t)||window.matchMedia&&window.matchMedia(["(min-resolution: 1.3dppx) and (max-device-width: 1024px)","(-webkit-min-device-pixel-ratio: 1.3) and (max-device-width: 1024px)"].toString()).matches)&&this.identifiers.push(e.MOBILE)}}])&&tt(t.prototype,n),r&&tt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();rt.EDGEHTML="edgehtml",rt.IE="ie",rt.PRESTO="presto",rt.GECKO="gecko",rt.KHTML="khtml",rt.WEBKIT="webkit",rt.BLINK="blink",rt.MOBILE="mobile",rt.IPAD="ipad",rt.IPOD="ipod",rt.IPHONE="iphone",rt.MAC="mac",rt.IOS="ios",rt.IDENTIFIERS=[rt.EDGEHTML,rt.IE,rt.PRESTO,rt.GECKO,rt.KHTML,rt.WEBKIT,rt.BLINK,rt.MOBILE,rt.IPAD,rt.IPOD,rt.IPHONE,rt.MAC,rt.IOS];var ot,it,at,ut,lt,st,ct,ft,pt,dt,yt,ht,vt,bt,mt,gt,_t=(ot=function(e){var t=null;return function(){return null!=t?t:t=e()}},it=function(e){var t=document.createElement("input");try{return t.type=e,t.type===e}catch(e){return!1}},at=new rt(navigator.userAgent,navigator.platform,document),ut=ot((function(){return at.isInCompatMode()})),lt=ot((function(){return at.getIEVersion()})),st=ot((function(){return at.is("edgehtml")})),ct=ot((function(){return at.is("blink")})),ft=ot((function(){return at.is("webkit")})),pt=ot((function(){return at.is("ie")})),dt=ot((function(){return at.is("gecko")})),yt=ot((function(){return at.is("mobile")})),ht=ot((function(){return at.is("ipad")})),vt=ot((function(){return at.is("iphone")})),bt=ot((function(){return at.is(rt.MAC)})),mt=ot((function(){return at.is(rt.IOS)})),(gt={}).placeholder=ot((function(){return void 0!==document.createElement("input").placeholder})),gt.stringTrim=ot((function(){return!!String().trim})),gt.addEventListener=ot((function(){return!!window.addEventListener})),gt.getComputedStyle=ot((function(){return document.defaultView&&document.defaultView.getComputedStyle})),gt.documentGetSelection=ot((function(){return"getSelection"in document})),gt.inputFiles=ot((function(){var e=document.createElement("input");return e.type="file","files"in e})),gt.inputTypeEmail=ot((function(){return it("email")})),gt.inputTypeSearch=ot((function(){return it("search")})),gt.inputTypeNumber=ot((function(){return it("number")})),gt.inputTypeTel=ot((function(){return it("tel")})),gt.inputTypeUrl=ot((function(){return it("url")})),gt.FileReader=ot((function(){return"FileReader"in window})),gt.FormData=ot((function(){return"FormData"in window})),gt.TransitionEvent=ot((function(){return"TransitionEvent"in window})),gt.AnimationEvent=ot((function(){return"AnimationEvent"in window})),gt.HTMLCanvasElement=ot((function(){return"HTMLCanvasElement"in window})),gt.MediaQueryList=ot((function(){return!!window.matchMedia})),gt.SVGSVGElement=ot((function(){return"SVGSVGElement"in window})),gt.windowErrorStackTrace=ot((function(){return!(st()||ft())})),{supports:function(e){if(gt[e])return gt[e]();throw new Error("This feature is not being tested")},isFullScreen:function(){return null!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null)},getBrowserClassNamesString:function(e){var t=at.getIdentifiers();if(e){for(var n=[],r=t.length;r--;)n.push(e+"_"+t[r]);return n.join(" ")}return t.join(" ")},isInCompatMode:ut,getIEVersion:lt,isEdgeHTML:st,isBlink:ct,isWebKit:ft,isIE:pt,isGecko:dt,isMobileDevice:yt,isIpad:ht,isIphone:vt,isIOS:mt,isMac:bt});function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function Ot(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pt(r.key),r)}}function Pt(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wt(t)?t:t+""}var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"add",value:function(e,t){var n,r;t&&(Array.isArray(t)?(n=e.classList).add.apply(n,Ot(t)):(r=e.classList).add.apply(r,Ot(t.split(" "))))}},{key:"remove",value:function(e,t){var n,r;t&&(Array.isArray(t)?(n=e.classList).remove.apply(n,Ot(t)):(r=e.classList).remove.apply(r,Ot(t.split(" "))))}},{key:"toggle",value:function(t,n){e.has(t,n)?e.remove(t,n):e.add(t,n)}},{key:"setHas",value:function(t,n,r){r?e.add(t,n):e.remove(t,n)}},{key:"toggleFromSet",value:function(t,n,r){Array.isArray(n)||(n=n?n.split(" "):[]),r.forEach((function(r){e.setHas(t,r,n.includes(r))}))}},{key:"set",value:function(e,t){e.className=t}},{key:"has",value:function(e,t){return!!t&&e.classList.contains(t)}}],(n=null)&&Et(t.prototype,n),r&&Et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,It(r.key),r)}}function It(e){var t=function(e,t){if("object"!=Tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tt(t)?t:t+""}function Ft(e,t,n){return t=Dt(t),function(e,t){if(t&&("object"===Tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ct()?Reflect.construct(t,n||[],Dt(e).constructor):t.apply(e,n))}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}function Dt(e){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dt(e)}function Rt(e,t){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rt(e,t)}var At=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ft(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],(r=[{key:"initialize",value:function(){}},{key:"notify",value:function(e){e instanceof Event&&this.dispatchEvent("stoppeddomevent",e)}}])&&jt(n.prototype,r),o&&jt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lt(r.key),r)}}function Lt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nt(t)?t:t+""}var Mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"addEventToRegistry",value:function(e,t,n,r,o){o[t]||(o[t]=[]);var i={handler:n,element:e,useCapture:r};o[t].push(i)}},{key:"removeEventFromRegistry",value:function(e,t,n,r,o){for(var i,a=o[t],u=!1,l=0;l<a.length;++l)if(a[l].handler==n&&a[l].element==e&&a[l].useCapture==r){i=l,u=!0;break}if(!u)throw new Error(t+" event not found in registry for specified handler");a.splice(i,1),0==a.length&&delete o[t]}},{key:"getElementFromEvent",value:function(e){return e.target}},{key:"getPositionFromEvent",value:function(e){return{x:e.pageX,y:e.pageY,clientX:e.clientX,clientY:e.clientY}}},{key:"getButtonFromEvent",value:function(t){return void 0===t.button?e.MOUSE_LEFT_BUTTON:2===t.button?e.MOUSE_RIGHT_BUTTON:0===t.button?e.MOUSE_LEFT_BUTTON:e.MOUSE_MIDDLE_BUTTON}},{key:"preventDefault",value:function(e){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault&&e.preventDefault()}},{key:"getPreventDefault",value:function(e){return"defaultPrevented"in e?e.defaultPrevented:e.getPreventDefault&&e.getPreventDefault()}},{key:"stopPropagation",value:function(e){e.stopPropagation&&e.stopPropagation(),At.getInstance().notify(e)}},{key:"cancelEvent",value:function(t){e.preventDefault(t),e.stopPropagation(t)}},{key:"addEventListener",value:function(e,t,n,r){n._wrappedHandler||(n._wrappedHandler=u.t.get("defaultErrorHandler").wrapHandlingErrors(n)),e.addEventListener(t,n._wrappedHandler,r)}},{key:"removeEventListener",value:function(e,t,n,r){e.removeEventListener(t,n._wrappedHandler,r)}}],(n=null)&&xt(t.prototype,n),r&&xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Vt(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))}function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ut(r.key),r)}}function Ut(e){var t=function(e,t){if("object"!=Bt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bt(t)?t:t+""}function Yt(e,t,n){return t=zt(t),function(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ht()?Reflect.construct(t,n||[],zt(e).constructor):t.apply(e,n))}function Ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ht=function(){return!!e})()}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function Qt(e,t){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qt(e,t)}Mt.MOUSE_LEFT_BUTTON="left",Mt.MOUSE_RIGHT_BUTTON="right",Mt.MOUSE_MIDDLE_BUTTON="middle",_t.supports("getComputedStyle")?Mt.getCurrentStyle=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.ownerDocument.defaultView.getComputedStyle(e,n)[Vt(t)]}:Mt.getCurrentStyle=function(e,t){return e.currentStyle[Vt(t)]};var qt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}(t,e),n=t,o=[{key:"toggleScrollBars",value:function(e,n){var r=!kt.has(document.documentElement,"NoScrollBars");if(n&&!r){var o=parseInt(Mt.getCurrentStyle(e,"left"),10),i=isNaN(o)?0:Math.abs(o),a=parseInt(Mt.getCurrentStyle(e,"top"),10),l=isNaN(a)?0:Math.abs(a);kt.remove(document.documentElement,"NoScrollBars"),t.scrollTo(i,l),e.style.left="auto",e.style.top="auto",t.SCROLL_Y=0}else if(!n&&r){var s=t.getWindowScrollBarPositions();e.style.left=-s.x+"px",e.style.top=-s.y+"px",t.SCROLL_Y=s.y,kt.add(document.documentElement,"NoScrollBars")}u.t.get("timeoutManager").set((function(){}),0)}},{key:"scrollToTop",value:function(){t.scrollTo(0,0)}},{key:"scrollTo",value:function(e,t){window.scrollTo(e,t),u.t.get("timeoutManager").set((function(){}),0)}},{key:"getScrollBarPositions",value:function(){var e=t.getWindowScrollBarPositions(window);return e.y=e.y||t.SCROLL_Y,e}},{key:"getWindowScrollBarPositions",value:function(e){return{x:(e=e||window).pageXOffset,y:e.pageYOffset}}},{key:"pageHasScrollBar",value:function(){var e=u.t.get("page");return e.getDomNode().scrollHeight>e.getDomNode().clientHeight}}],(r=null)&&Wt(n.prototype,r),o&&Wt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kt(r.key),r)}}function Kt(e){var t=function(e,t){if("object"!=Gt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gt(t)?t:t+""}function $t(e,t,n){return t=Xt(t),function(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zt()?Reflect.construct(t,n||[],Xt(e).constructor):t.apply(e,n))}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function en(e,t){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},en(e,t)}qt.SCROLL_Y=0;var tn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$t(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(t,e),n=t,o=[{key:"isFixed",value:function(e){var t=e;do{if("fixed"===Mt.getCurrentStyle(t,"position"))return!0}while(t=t.offsetParent);return!1}},{key:"get",value:function(e){for(var n=0,r=0,o=e;;){var i=t.getTranslate3d(o);if(n+=o.offsetLeft+i.x,r+=o.offsetTop+i.y,!o.offsetParent)break;o=o.offsetParent}for(var a=e.parentNode;a&&a!=document.body;)n-=a.scrollLeft,r-=a.scrollTop,a=a.parentNode;return{x:n,y:r}}},{key:"getTranslate3d",value:function(e,t){var n=function(e){var t=/translate3d\((-?\d+)(?:px)?,\s(-?\d+)(?:px)?,\s(-?\d+)(?:px)?\)/i.exec(e.style?e.style.transform:""),n={x:0,y:0,z:0};return t&&(n={x:parseInt(t[1],10),y:parseInt(t[2],10),z:parseInt(t[3],10)}),n};if(t){for(var r=e,o={x:0,y:0,z:0};;){var i=n(e);if(o.x+=i.x,o.y+=i.y,o.z+=i.z,!r.offsetParent)break;r=r.offsetParent}return o}return n(e)}},{key:"getIntoDocument",value:function(e,t){for(var n=0,r=0,o=t;n+=o.offsetLeft,r+=o.offsetTop,o.offsetParent;)o=o.offsetParent;return{x:n,y:r}}},{key:"isInsideElement",value:function(e,n){var r=t.get(n);return r.x1=r.x+n.offsetWidth,r.y1=r.y+n.offsetHeight,e.x>=r.x&&e.x<=r.x1&&e.y>=r.y&&e.y<=r.y1}},{key:"getElementBoundaries",value:function(e){var n=t.get(e);return{x0:n.x,x1:n.x+e.offsetWidth,y0:n.y,y1:n.y+e.offsetHeight}}},{key:"getElementBoundariesIntoIframe",value:function(e,n){var r=t.getIntoDocument(e,n);return{x0:r.x,x1:r.x+n.offsetWidth,y0:r.y,y1:r.y+n.offsetHeight}}},{key:"getInsideBoundaries",value:function(e,t){return e.x>=t.x0&&e.x<=t.x1&&e.y>=t.y0&&e.y<=t.y1?{x:e.x-t.x0,y:e.y-t.y0}:null}},{key:"getInsideElement",value:function(e,n){return t.getInsideBoundaries(e,t.getElementBoundaries(n))}},{key:"calculateAvailableRoom",value:function(e){var t=u.t.get("browserWindow").getInnerSize(),n=e.getBoundingClientRect();return{toTop:n.top,toBottom:t.h-n.bottom,toLeft:n.left,toRight:t.w-n.right}}},{key:"scrollIntoView",value:function(e,n){n=n||0;var r=u.t.get("browserWindow").getInnerSize(),o=t.getElementBoundaries(e),i=qt.getWindowScrollBarPositions(),a=r.h+i.y-n;if(o.y1>a){var l=o.y1-o.y0>a?o.y0:o.y1-r.h+n+5;u.t.get("page").scrollTo(0,l)}else o.y0<i.y&&e.scrollIntoView()}},{key:"initialize",value:function(){t.topHtmlElement=document.getElementsByTagName("html")[0]}}],(r=null)&&Jt(n.prototype,r),o&&Jt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function nn(e){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,on(r.key),r)}}function on(e){var t=function(e,t){if("object"!=nn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nn(t)?t:t+""}function an(e,t,n){return t=ln(t),function(e,t){if(t&&("object"===nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,un()?Reflect.construct(t,n||[],ln(e).constructor):t.apply(e,n))}function un(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(un=function(){return!!e})()}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}function sn(e,t){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sn(e,t)}tn.initialize();var cn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),an(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sn(e,t)}(t,e),n=t,o=[{key:"generateUniqueId",value:function(e,n){e||(e="baseName"),t.uniqueId++;var r="boolean"!=typeof n||n?"_"+Math.random().toString(36).substring(2,15):"";return e+t.uniqueId+r}},{key:"getValue",value:function(e){return e.getValue?e.getValue():void 0===e.value?e:e.type&&"checkbox"===e.type?e.checked:e.value}},{key:"setValue",value:function(e,t){"function"==typeof e.setValue?e.setValue(t):e.type&&"checkbox"===e.type?e.checked=t:void 0!==e.value&&(e.value=t)}},{key:"createDocument",value:function(e){return document.implementation.createHTMLDocument(e)}},{key:"createNodeFromHTML",value:function(e){var t=this.createDocument().createElement("body");return t.innerHTML=e,t.childNodes.length>1?t.childNodes:t.childNodes[0]}},{key:"createOutlineFromElement",value:function(e,t,n){var r=document.createElement("div");r.style.backgroundColor=n&&n.backColor?n.backColor:"cyan",r.style.opacity=n&&n.opacity?n.opacity:"0.5",r.style.zIndex="1000",r.style.position="absolute",r.style.width=e.offsetWidth+"px",r.style.height=e.offsetHeight+"px";var o=tn.getInsideElement(tn.get(e),t);return r.style.left=o.x+"px",r.style.top=o.y+"px",r}},{key:"autoAdjustElementHeightToContent",value:function(e,t){var n=qt.getScrollBarPositions(),r=parseInt(e.style.height,10);e.style.height="auto",e.style.height=Math.max(e.scrollHeight,t)+"px";var o=parseInt(e.style.height,10)-r;u.t.get("page").scrollTo(n.x,Math.max(n.y,n.y+o))}},{key:"getRelativeCoordsFromEvent",value:function(e){var t=Mt.getPositionFromEvent(e),n=tn.get(Mt.getElementFromEvent(e));return{x:t.x-n.x,y:t.y-n.y}}},{key:"hasModifiersKeysPressed",value:function(e){return e.ctrlKey||e.altKey||e.shiftKey||e.metaKey}},{key:"copyToClipboard",value:function(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{var t=document,n=t.createElement("textarea");n.value=e,n.style.cssText="display:block;width:0;height:0;opacity:0;",t.body.appendChild(n),n.select(),t.execCommand("copy"),t.body.removeChild(n)}}},{key:"getPreferredSize",value:function(e,n,r){var o=e.ownerDocument.body,i=e.cloneNode(!0),a=t.filterCssText(i.style.cssText)+"position:absolute;visibility:hidden;right:auto;bottom:auto;";a+="width:"+(n||"auto")+";",a+="height:"+(r||"auto")+";",i.style.cssText=a,o.appendChild(i);var u=t.getElementSize(i);return o.removeChild(i),u}},{key:"getElementSize",value:function(e){return{clientWidth:e.clientWidth,clientHeight:e.clientHeight,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}}},{key:"getElementCenter",value:function(e){var t=e.getBoundingClientRect();return{y:(t.bottom+t.top)/2,x:(t.right+t.left)/2}}},{key:"filterCssText",value:function(e){var t=e.toLowerCase().split(";"),n=["display","position","width","height","visibility","top","right","bottom","left"];return t.filter((function(e){var t=e.split(":")[0].replace(/\s/g,"");return-1===n.indexOf(t)})).join(";")}},{key:"setPositionAndKeepInsideViewport",value:function(e,t,n){var r=u.t.get("browserWindow").getInnerSize(),o=qt.getScrollBarPositions(),i=e.offsetWidth,a=e.offsetHeight;t+i-o.x>r.w&&(t=r.w-i+o.x),n+a-o.y>r.h&&(n=r.h-a+o.y),e.style.left=Math.max(t,0)+"px",e.style.top=Math.max(n,0)+"px"}},{key:"getScrollbarsWidth",value:function(){if(!t.scrollWidth){var e=document.createElement("div");e.style.overflow="scroll",document.body.appendChild(e);var n=document.createElement("div");n.style.width="100%",e.appendChild(n),t.scrollWidth=e.offsetWidth-n.offsetWidth,document.body.removeChild(e)}return t.scrollWidth}},{key:"getDomNodeText",value:function(e,t){return function e(t,n){if(1!=t.nodeType)return 3==t.nodeType?t.nodeValue:"";if(t.getAttribute("data-ignoredomnodetext"))return"";if("IFRAME"!==t.nodeName){if("TEXTAREA"==t.nodeName||"INPUT"==t.nodeName&&"checkbox"!=t.type&&"radio"!=t.type)return t.value||t.placeholder;if("BR"==t.nodeName)return"\n";if("WBR"==t.nodeName)return"";if("none"==n)return"";for(var r="",o=!0,i=0,a=t.childNodes.length;i<a;i++){var u,l=t.childNodes[i],s=e(l,u=1==l.nodeType?Mt.getCurrentStyle(l,"display"):null);s&&("block"==u||"table-row"==u||"table-cell"==u||"OPTION"==l.nodeName?(o||(r+="\n"),r+=s.trim(),r+="\n",o=!0):(r+=s,o=!1))}return r}try{return e(t.contentWindow.document.body)}catch(e){return""}}(e&&e.widget?e.widget:e,t).replace(/\u200b+/gim,"").replace(/[ \t]+/g," ").replace(/\u00a0/gim," ")}},{key:"getPinchZoomRatio",value:function(){return(window.visualViewport?window.visualViewport.width:window.innerWidth)/document.documentElement.clientWidth}}],(r=null)&&rn(n.prototype,r),o&&rn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dn(r.key),r)}}function dn(e){var t=function(e,t){if("object"!=fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fn(t)?t:t+""}function yn(e,t,n){return t=vn(t),function(e,t){if(t&&("object"===fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hn()?Reflect.construct(t,n||[],vn(e).constructor):t.apply(e,n))}function hn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hn=function(){return!!e})()}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}cn.uniqueId=0;var mn,gn,_n,wn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yn(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e){this.widgetToMonitor=e,this.eventRegistry={},this.widgetToMonitor.isInDom()&&this.onDomInsert(),e.addListener("dominsert",this.caller("onDomInsert")),e.addListener("domremove",this.caller("onDomRemove"))}},{key:"onDomInsert",value:function(){for(var e in this.eventRegistry)for(var t=this.eventRegistry[e],n=0;n<t.length;++n){var r=t[n];Mt.addEventListener(r.element,e,r.handler,r.useCapture)}this.inDom=!0}},{key:"onDomRemove",value:function(){for(var e in this.eventRegistry)for(var t=this.eventRegistry[e],n=0;n<t.length;++n){var r=t[n];r.element?Mt.removeEventListener(r.element,e,r.handler,r.useCapture):u.t.get("defaultErrorHandler").reportAsException("domRemoveItemElementIsNull")}this.inDom=!1}},{key:"addListener",value:function(e,t,n,r){Mt.addEventToRegistry(e,t,n,r,this.eventRegistry),this.inDom&&Mt.addEventListener(e,t,n,r)}},{key:"removeListener",value:function(e,t,n,r){Mt.removeEventFromRegistry(e,t,n,r,this.eventRegistry),this.inDom&&Mt.removeEventListener(e,t,n,r)}}],r&&pn(n.prototype,r),o&&pn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y),On=(mn=[{elements:["ARTICLE","ASIDE","DIV","DIALOG","FOOTER","FORM","HEADER","MAIN","NAV","SECTION","BLOCKQUOTE"],type:"FLOW",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE"]},{elements:["H1","H2","H3","H4","H5","H6","P","PRE"],type:"FLOW",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["OL","UL"],type:"FLOW",contentTypes:null,contentElements:["LI"]},{elements:["DETAILS"],type:"FLOW",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["SUMMARY"]},{elements:["LI"],type:null,contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE"]},{elements:["FIELDSET"],type:"FLOW",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["LEGEND","TABLE"]},{elements:["HR"],type:"FLOW",contentTypes:[],contentElements:null},{elements:["VIDEO","AUDIO"],type:"MEDIA",contentTypes:["FLOW","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["SOURCE","TRACK"]},{elements:["ABBR","B","CODE","EM","I","SPAN","STRONG","S","TIME","KBD","VAR","SAMP"],type:"PHRASING",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["BR","IMG","CANVAS","IFRAME"],type:"PHRASING",contentTypes:[],contentElements:null},{elements:["PICTURE"],type:"PHRASING",contentTypes:null,contentElements:["SOURCE","IMG"]},{elements:["A","BUTTON","LABEL"],type:"PHRASING_INTERACTIVE",contentTypes:["PHRASING","TEXT_NODE"],contentElements:null},{elements:["TEXTAREA"],type:"PHRASING_INTERACTIVE",contentTypes:["TEXT_NODE"],contentElements:null},{elements:["INPUT"],type:"PHRASING_INTERACTIVE",contentTypes:[],contentElements:null},{elements:["LEGEND"],type:null,contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["SUMMARY"],type:null,contentTypes:["PHRASING","TEXT_NODE"],contentElements:["H1","H2","H3","H4","H5","H6"]},{elements:["TABLE"],type:null,contentTypes:["TABLE_SECTION"],contentElements:["CAPTION","COLGROUP"]},{elements:["TBODY","TFOOT","THEAD"],type:"TABLE_SECTION",contentTypes:null,contentElements:["TR"]},{elements:["TR"],type:null,contentTypes:["TABLE_CELL"],contentElements:null},{elements:["TH","TD"],type:"TABLE_CELL",contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE"]},{elements:["CAPTION"],type:null,contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:null},{elements:["SELECT"],type:"PHRASING_INTERACTIVE",contentTypes:null,contentElements:["OPTGROUP","OPTION"]},{elements:["OPTGROUP"],type:null,contentTypes:null,contentElements:["OPTION"]},{elements:["OPTION"],type:null,contentTypes:["TEXT_NODE"],contentElements:null},{elements:["DATALIST"],type:"PHRASING",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["OPTION"]},{elements:["HTML"],type:null,contentTypes:null,contentElements:["HEAD","BODY"]},{elements:["HEAD"],type:null,contentTypes:null,contentElements:["BASE","TITLE","META","LINK","STYLE","SCRIPT"]},{elements:["BODY"],type:null,contentTypes:["FLOW","MEDIA","PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["TABLE","SCRIPT"]},{elements:["STYLE","SCRIPT","TITLE"],type:null,contentTypes:["TEXT_NODE"],contentElements:null},{elements:["LINK","META","BASE","PARAM","SOURCE","TRACK"],type:null,contentTypes:[],contentElements:null},{elements:["TEXT_NODE"],type:"TEXT_NODE",contentTypes:[],contentElements:null},{elements:["OBJECT"],type:"PHRASING",contentTypes:["PHRASING","PHRASING_INTERACTIVE","TEXT_NODE"],contentElements:["PARAM"]}],gn={LABEL:{childs:["INPUT"]}},_n=["a a","a button","a label","a textarea","a input","a select","button a","button button","button label","button textarea","button input","button select","label a","label button","label label"].join(", "),{getNodeMap:function(){return mn},getExceptions:function(){return gn},getAncestryQuery:function(){return _n}}),Sn=function(){var e=function(e,t){return-1!==e.indexOf(t)},t=function(t,n){e(t,n)||t.push(n)},n=function(e,n){for(var r=n.length;r--;)t(e,n[r])},r=function(e,t,r){for(var o=r.length;o--;)t===r[o].type&&n(e[t],r[o].elements)},o=function(e,t,r){var o=[],i=[];if(e)for(var a=e.length;a--;)r[e[a]]&&i.push(r[e[a]]);return o=o.concat.apply(o,i),t&&n(o,t),o},i=function(t,n,r){for(var i=n.length;i--;)if(e(n[i].elements,t))return o(n[i].contentTypes,n[i].contentElements,r)},a=function(e){for(var o=function(e){for(var t=[],r=[],o=[],i=e.length;i--;)r.push(e[i].elements),e[i].contentElements&&n(o,e[i].contentElements);return t=t.concat.apply(t,r),n(t,o),t}(e),a=function(e,t){for(var n={},o=t.length;o--;)n[t[o]]=[],r(n,t[o],e);return n}(e,function(e){for(var n=[],r=e.length;r--;)e[r].type&&t(n,e[r].type);return n}(e)),u={},l=o.length;l--;)u[o[l]]={},u[o[l]].childs=i(o[l],e,a);return u}(On.getNodeMap()),u=On.getExceptions(),l=On.getAncestryQuery(),s=function(t,n){var r=a[t]&&a[t].childs;if(r&&e(r,n))return!0;var o=u[t]&&u[t].childs;return!(!o||!e(o,n))};return{validate:function e(t,n){var r=t.nodeName,o=n.nodeName;if(1===t.nodeType){if(1===n.nodeType)return{valid:s(r.toUpperCase(),o.toUpperCase())};if(3===n.nodeType)return{valid:s(r.toUpperCase(),"TEXT_NODE")};if(11===n.nodeType){for(var i=n.childNodes.length;i--;)if(!e(t,n.childNodes[i]).valid)return{valid:!1,child:n.childNodes[i]};return{valid:!0}}}else if(3===t.nodeType)return{valid:!1};return{valid:!0}},validateDeepAncestry:function(){return!document.querySelector(l)},getInvalidChilds:function(){return document.querySelectorAll(l)}}}();function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fn(r.key),r)}}function In(e,t,n){return t&&jn(e.prototype,t),n&&jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fn(e){var t=function(e,t){if("object"!=En(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==En(t)?t:t+""}function Cn(e,t,n){return t=An(t),function(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dn()?Reflect.construct(t,n||[],An(e).constructor):t.apply(e,n))}function Dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dn=function(){return!!e})()}function Rn(){return Rn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=An(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Rn.apply(this,arguments)}function An(e){return An=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},An(e)}function Nn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}var Ln=function(e){function t(){var e;Tn(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=Cn(this,t,[].concat(r))).inDom=!1,e._createDomNode(),e}return Nn(t,e),In(t,[{key:"widgetBeforeRender",value:function(e){}},{key:"widgetAfterRender",value:function(e){}},{key:"widgetBeforeDomInsert",value:function(){}},{key:"widgetAfterDomInsert",value:function(){}},{key:"widgetBeforeDomRemove",value:function(){}},{key:"widgetAfterDomRemove",value:function(){}},{key:"getDomNode",value:function(){if(this.widget){if(this.widget.getDomNode)return this.widget.getDomNode();if(this.widget.nodeType)return this.widget}return null}},{key:"getParentWidget",value:function(){return this.parentWidget}},{key:"getThisDomNodeText",value:function(){return cn.getDomNodeText(this.getDomNode(),"block")}},{key:"getBusyMonitor",value:function(){var e=new Ye(!this.getDomNode());return e.isBusy()&&this.callWhenContentReady((function(){e.setAsFree()})),e}},{key:"setExtraCssClass",value:function(e){kt.add(this.getDomNode(),e)}},{key:"setDomAttributes",value:function(e,t){var n=this;if(u.t.get("ENABLE_UI_VALIDATION")&&!this._isChildDomNode(e))throw new Error("setDomAttributesToForeignElement: element must be a child DOM node belonging to the class setting its attributes");t=t||{},Object.entries(t).forEach((function(t){var r=Pn(t,2),o=r[0],i=r[1];if("function"==typeof i){if(u.t.get("ENABLE_UI_VALIDATION")&&"on"!==o.substring(0,2))throw new Error("function attributes must begin with on");n.addDomListener(e,o.substring(2),i)}else Ze.setAttribute(e,o,i)}))}},{key:"setParentWidget",value:function(e){this.parentWidget=e}},{key:"createPlaceholderContent",value:function(){return document.createComment(this.getClassName())}},{key:"isContentReady",value:function(){return!!this.getDomNode()}},{key:"isInDom",value:function(){return!!this.inDom}},{key:"element",value:function(e,t,n){var r=document.createElement(e);return(u.t.get("DEBUG_MODE")||u.t.get("ENABLE_UI_VALIDATION"))&&(this.childDomNodes||(this.childDomNodes=new Set),this.childDomNodes.add(r),r.ownerWidget=this),this.setDomAttributes(r,t),n&&this.appendChildren(r,n),r}},{key:"addDomListener",value:function(){var e;this.domEventMonitor||(this.domEventMonitor=new wn(this)),(e=this.domEventMonitor).addListener.apply(e,arguments)}},{key:"removeDomListener",value:function(){var e;(e=this.domEventMonitor).removeListener.apply(e,arguments)}},{key:"appendChild",value:function(e,t){return this.insertBefore(e,t,null)}},{key:"appendChildren",value:function(e,t){var n=this;if(u.t.get("ENABLE_UI_VALIDATION")&&!Array.isArray(t))throw new Error("TIN_display_Widget.appendChildren: children should be an array");t.forEach((function(t){return n.appendChild(e,t)}))}},{key:"removeChild",value:function(e,n){if(!e)throw new Error("InvalidParent: TIN_display_Widget.removeChild -> parent was not present");if(u.t.get("ENABLE_UI_VALIDATION")){if(!this.isContentReady())throw new Error("removeChildFromNotReadyWidget: TIN_display_Widget.removeChild -> widget not-yet-rendered cannot remove a child");if(!this._isChildDomNode(e))throw new Error("InvalidParent: TIN_display_Widget.removeChild -> parent is not a childDomNode")}n&&(n instanceof t?this._removeChildWidget(e,n):this._removeChildDomNode(e,n))}},{key:"removeAllChildren",value:function(e){if(u.t.get("ENABLE_UI_VALIDATION")&&!this._isChildDomNode(e))throw new Error("InvalidChild: TIN_display_Widget.removeAllChildren -> element is not a childDomNode");for(;e.firstChild;)this.removeChild(e,e.firstChild)}},{key:"insertBefore",value:function(e,t,n){if(!e)throw new Error("InvalidParent: TIN_display_Widget.insertBefore -> parent was not present");if(u.t.get("ENABLE_UI_VALIDATION")&&!this._isChildDomNode(e))throw new Error("InvalidChild: TIN_display_Widget.insertBefore -> parent is not a childDomNode");null!=t&&("string"==typeof t||"number"==typeof t?this._insertTextNodeBefore(e,t,n):this._insertChildBefore(e,t,n))}},{key:"callWhenContentReady",value:function(e){this.isContentReady()?e():this.addListenerOnce("contentready",e)}},{key:"show",value:function(e){Ze.setHidden(this.getDomNode(),!e)}},{key:"dispatchEvent",value:function(e,n){var r=Rn(An(t.prototype),"dispatchEvent",this).call(this,e,n);this.parentWidget&&this.parentWidget._shouldBubble(e,r)&&this.parentWidget.dispatchEvent(e,r)}},{key:"dispatchSizeChangeEvent",value:function(){this.dispatchEvent("sizechange",new Mn)}},{key:"Delete",value:function(){for(var e=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(n){var r=e[n];r&&r.nodeType&&(1===r.nodeType&&e.removeAllChildren(r),r.parentNode&&e.removeChild(r.parentNode,r),u.t.get("DEBUG_MODE")&&e.childDomNodes&&e.childDomNodes.delete(r),delete e[n]),Rn(An(t.prototype),"Delete",e).call(e,n)}))}},{key:"_getDomNodeFromWidget",value:function(e){return e.getDomNode()||e._getPlaceholderContent()}},{key:"_getDomNodeFromChild",value:function(e){return e instanceof t?this._getDomNodeFromWidget(e):e}},{key:"_getPlaceholderContent",value:function(){return this.isContentReady()||this.placeholderContent||(this.placeholderContent=this.createPlaceholderContent()),this.placeholderContent}},{key:"_getFutureChildWidgetsContainedByChildDomNode",value:function(e){var t=[];return this.futureChildWidgets.forEach((function(n){e.contains(n._getPlaceholderContent())&&t.push(n)})),t}},{key:"_getFirstlingParentWidget",value:function(e){for(;e.parentWidget;)e=e.parentWidget;return e}},{key:"_setFutureParentWidget",value:function(e){this.futureParentWidget&&this.futureParentWidget._removeFutureChildWidget(this),this.futureParentWidget=e,e&&this.futureParentWidget._addFutureChildWidget(this)}},{key:"_createDomNode",value:function(){var e=this;this.widgetBeforeRender(!0);var n=this.render();this.widget=n&&!this.widget?n:this.widget,this._validateContentReadyAfterDomCreation(),this._registerWidgetReference(),this._alignParentWidgets(),this.widget instanceof HTMLElement?(this.getChildWidgetsFromDomNode(this.getDomNode()).forEach((function(t){return e._addAsChildWidget(t)})),this._registerWidgetAttribute()):this.widget instanceof t&&this._addAsChildWidget(this.widget),this.widgetAfterRender(!0)}},{key:"_registerWidgetReference",value:function(){var e=this.getDomNode();e&&(e.widgetRef=this)}},{key:"_registerWidgetAttribute",value:function(){this.getDomNode().dataset.iswidget="1"}},{key:"getChildWidgetsFromDomNode",value:function(e){if(!e)return[];if(e.widgetRef&&e.widgetRef!==this)return[e.widgetRef];if(0===e.childNodes.length)return[];var t=[];return e.querySelectorAll("[data-iswidget]:not(:scope [data-iswidget] [data-iswidget])").forEach((function(e){return t.push(e.widgetRef)})),t}},{key:"_alignParentWidgets",value:function(){if(this.widget instanceof t){var e=this._getFirstlingParentWidget(this.widget);this._removeWidgetFromAnotherParent(e),e.setParentWidget(this)}}},{key:"_addAsChildWidget",value:function(e){this._removeWidgetFromAnotherParent(e),this.childWidgets||(this.childWidgets=[]),this._isChildWidget(e)||this.childWidgets.push(e)}},{key:"_addFutureChildWidget",value:function(e){this.futureChildWidgets||(this.futureChildWidgets=new Set),this.futureChildWidgets.add(e)}},{key:"_switchPlaceholderContent",value:function(){if(this.placeholderContent&&this.isContentReady()){var e=this.placeholderContent.parentNode;e&&this.futureParentWidget&&!this.futureParentWidget.Deleted&&this.futureParentWidget.insertBefore(e,this,this.placeholderContent)}this._setFutureParentWidget(null),this._removePlaceholderContent()}},{key:"_removePlaceholderContent",value:function(){this.placeholderContent&&(this.placeholderContent.remove(),delete this.placeholderContent)}},{key:"_removeChildDomNode",value:function(e,t){var n,r=this;if(!this.futureChildWidgets||(this._getFutureChildWidgetsContainedByChildDomNode(t).forEach((function(e){var o=e._getPlaceholderContent();r.removeChild(o.parentElement,e),o===t&&(n=!0)})),!n)){var o=this.childWidgets&&this.childWidgets.length>0?this.getChildWidgetsFromDomNode(t):[],i=o.filter((function(e){return e.inDom}));i.forEach((function(e){return e._onWidgetDomRemove()})),this._doRemoveChild(e,t,t),o.forEach((function(e){e.setParentWidget(null),i.includes(e)&&e._onWidgetAfterDomRemove(),r._removeWidgetFromChildWidgets(e)}))}}},{key:"_removeChildWidget",value:function(e,t){var n=this._getDomNodeFromWidget(t),r=t.isInDom();if(t.isContentReady()&&this.getDomNode().contains(e)){if(u.t.get("DEBUG_MODE")&&(this._isChildWidget(t)||_logDebugError(this,"widget was not present",e,null,t),t.parentWidget!==this&&_logDebugError(this,"this.removeChild","widget is not a child",e,null,t)),u.t.get("ENABLE_UI_VALIDATION")){if(!this._isChildWidget(t))throw new Error("InvalidChild: TIN_display_Widget.removeChild -> widget was not present");if(t.parentWidget!==this)throw new Error("InvalidChild: TIN_display_Widget.removeChild -> widget is not a child")}this._removeWidgetFromChildWidgets(t)}t.setParentWidget(null),t._setFutureParentWidget(null),r&&t._onWidgetDomRemove(),this._doRemoveChild(e,n,t),r&&t._onWidgetAfterDomRemove()}},{key:"_removeWidgetFromChildWidgets",value:function(e){if(this.childWidgets){var t=this.childWidgets.indexOf(e);-1!==t&&this.childWidgets.splice(t,1)}}},{key:"_removeWidgetFromAnotherParent",value:function(e){e.parentWidget&&e.parentWidget!==this&&(!e.parentWidget.getClassName().includes("TIN_display_LazyWidget")&&e.parentWidget.widget!==e&&e.parentWidget.getDomNode()&&e.parentWidget.getDomNode().contains(e.getDomNode())?e.parentWidget.remove(e):e.parentWidget._removeWidgetFromChildWidgets(e))}},{key:"_removeFutureChildWidget",value:function(e){this.futureChildWidgets.delete(e),this.futureChildWidgets.size||delete this.futureChildWidgets}},{key:"_removeAllFutureChildWidgets",value:function(){this.futureChildWidgets&&(this.futureChildWidgets.forEach((function(e){e._getPlaceholderContent().remove(),e._setFutureParentWidget(null)})),delete this.futureChildWidgets)}},{key:"_doRemoveChild",value:function(e,t,n){try{e.removeChild(t)}catch(o){u.t.get("DEBUG_MODE")&&_logDebugError(this,"this.removeChild","DOM exception while removing",e,null,n);var r=o.message+" while calling:\n"+He.R.describeValue(this)+".removeChild(\n    "+He.R.describeValue(e)+",\n    "+He.R.describeValue(n)+" (domNode: "+He.R.describeValue(t)+")\n)";throw new Error(r)}}},{key:"_insertChildBefore",value:function(e,n,r){var o=this,i=n instanceof t,a=i&&n.isContentReady(),l=i&&!n.isContentReady(),s=this._getDomNodeFromChild(n),c=this.getDomNode()&&this.getDomNode().contains(e);if(!i&&c&&this.getChildWidgetsFromDomNode(s).forEach((function(e){e.setParentWidget(o),o._addAsChildWidget(e)})),a&&c&&this._addAsChildWidget(n),u.t.get("DEBUG_MODE")&&(i||1!==n.nodeType||this._isChildDomNode(n)||_logDebugError(this,"this.insertBefore","domNode is not a childDomNode",e,null,n)),u.t.get("ENABLE_UI_VALIDATION")&&!i&&1===n.nodeType&&!this._isChildDomNode(n))throw new Error("InvalidChild: TIN_display_Widget.insertBefore -> domNode is not a childDomNode");this._validateDomInsertion(n,e,s),a&&(this._removeWidgetFromAnotherParent(n),n.setParentWidget(this),n._onWidgetBeforeDomInsert()),this._insertChildIntoParent(e,n,s,r),l?n._setFutureParentWidget(this):(t.validateDeepAncestry&&e.isConnected&&t.validateDeepAncestry(),this._forwardDomInsertion(e,n))}},{key:"_insertChildIntoParent",value:function(e,t,n,r){try{e.insertBefore(n,r)}catch(i){u.t.get("DEBUG_MODE")&&_logDebugError(this,"this.insertBefore","DOM exception while inserting",e,r,t);var o=i.message+" while calling:\n"+He.R.describeValue(this)+".insertBefore(\n    "+He.R.describeValue(e)+",\n    "+He.R.describeValue(t)+" (domNode: "+He.R.describeValue(n)+"),\n    "+He.R.describeValue(r)+"\n)";throw new Error(o)}}},{key:"_insertTextNodeBefore",value:function(e,t,n){e.insertBefore(e.ownerDocument.createTextNode(t),n)}},{key:"_forwardDomInsertion",value:function(e,n){this.inDom&&e.isConnected&&(n instanceof t?n._onWidgetDomInsert():this.childWidgets&&this.childWidgets.forEach((function(e){e.isInDom()||e._onWidgetDomInsert()})))}},{key:"_isChildWidget",value:function(e){return this.childWidgets&&this.childWidgets.includes(e)}},{key:"_shouldBubble",value:function(e,t){return"dominsert"!==e&&"domremove"!==e&&t instanceof a.C&&(t instanceof Mn||"function"==typeof this.shouldBubble&&this.shouldBubble(t))}},{key:"_validateDomInsertion",value:function(e,n,r){if(t.VALIDATE_DOM_INSERTION&&(!e.classRef||!e.classRef.IGNORE_DOM_INSERT_VALIDATION)){try{var o=Sn.validate(n,r)}catch(t){throw new Error("Failed to validate dom insertion. ERROR: "+t.name+": "+t.message+". Parent: "+this+", Child: "+e)}if(!o.valid){var i=o.child||r,a="DOM validation exception while inserting: "+(i.nodeName||"node type "+i.nodeType)+" is not a valid child for "+(n.nodeName||"node type "+n.nodeType);throw u.t.get("DEBUG_MODE")&&_logDebugError(this,"this.insertBefore",a,null,null,i),new Error(a)}}}},{key:"_validateContentReadyAfterDomCreation",value:function(){if(!this.isContentReady())throw new Error("InvalidWidgetReadyState: Widget is not content-ready after main DOM node creation. Class: "+this.getClassName());this._validateMainDomNodeDisconnectionAfterDomCreation()}},{key:"_validateMainDomNodeDisconnectionAfterDomCreation",value:function(){if(this.getDomNode().isConnected)throw new Error("WidgetCreatedWithMainNodeAlreadyInDom: main DOM node was already in DOM before this widget finished its rendering. Class: "+this.getClassName())}},{key:"_onWidgetBeforeDomInsert",value:function(){if(!this.isBeingInserted&&!this.inDom){this.isBeingInserted=!0,this.childWidgets&&this.childWidgets.slice().forEach((function(e){return e._onWidgetBeforeDomInsert()}));try{this.widgetBeforeDomInsert()}catch(e){throw this.isBeingInserted=!1,e}}}},{key:"_onWidgetDomInsert",value:function(){if(!this.inDom){if(this.isBeingRemoved)throw new Error("ERROR: node cant be inserted while being removed. Classname: "+this+". domNode: "+He.R.describeValue(this.getDomNode()));this.inDom=!0;try{if(this.widgetAfterDomInsert(),this.dispatchEvent("dominsert"),this.childWidgets)this.childWidgets.slice().forEach((function(e){!e.isInDom()&&e.isContentReady()&&e._onWidgetDomInsert()}))}catch(e){throw this.isBeingInserted=!1,e}this.isBeingInserted=!1}}},{key:"_onWidgetDomRemove",value:function(){if(this.inDom){if(this.isBeingInserted)throw new Error("ERROR: node cant be removed while being inserted. Classname: "+this+". domNode: "+He.R.describeValue(this.getDomNode()));if(this.inDom=!1,this.isBeingRemoved=!0,this.widgetBeforeDomRemove(),this.dispatchEvent("domremove"),this.childWidgets)this.childWidgets.slice().forEach((function(e){e.isInDom()&&e._onWidgetDomRemove()}))}}},{key:"_onWidgetAfterDomRemove",value:function(){if(this.isBeingRemoved){this.childWidgets&&this.childWidgets.slice().forEach((function(e){return e._onWidgetAfterDomRemove()}));try{this.widgetAfterDomRemove()}catch(e){throw this.isBeingRemoved=!1,e}this.isBeingRemoved=!1}}},{key:"_uninit",value:function(){var e=this,n=this.getDomNode()||this.placeholderContent;n&&n.parentNode&&this.parentWidget&&this.parentWidget.removeChild(n.parentNode,this),this.childWidgets&&(this.childWidgets.forEach((function(t){t.getParentWidget()===e&&t.setParentWidget(null)})),this.childWidgets=null),this._removeAllFutureChildWidgets(),this._setFutureParentWidget(null),this._removePlaceholderContent(),Rn(An(t.prototype),"_uninit",this).call(this)}},{key:"_isChildDomNode",value:function(e){return this.getDomNode()===e||this.childDomNodes&&this.childDomNodes.has(e)}},{key:"appendTo",value:function(e,n,r){var o=this;r=r&&r instanceof t?r.getDomNode():r,Array.isArray(n)?n.forEach((function(t){return o.insertBefore(e,t,r)})):this.insertBefore(e,n,r)}},{key:"remove",value:function(e){var n=this,r=function(e){if(e)if(e instanceof t){var r=e.getDomNode()?e.getDomNode().parentElement:n.getDomNode();n.removeChild(r,e)}else n.removeChild(e.parentElement,e)};Array.isArray(e)?e.forEach(r):r(e)}},{key:"replace",value:function(e,t){var n,r;if(e){var o=e.getDomNode?e.getDomNode():e;n=o.parentElement,r=o.nextSibling,this.remove(e)}this.appendTo(n,t,r)}},{key:"replaceContent",value:function(e,t){this.emptyNode(e),this.appendTo(e,t)}},{key:"setContent",value:function(e){this.empty(),this.append(e)}},{key:"emptyNode",value:function(e){this.removeAllChildren(e)}},{key:"append",value:function(e,n){n=n&&n instanceof t?n.getDomNode():n,this.widget instanceof t?this.widget.append(e,n):this.appendTo(this.getDomNode(),e,n)}},{key:"empty",value:function(){this.widget instanceof t?this.widget.empty():this.removeAllChildren(this.getDomNode())}}],[{key:"initDomInsertionValidators",value:function(e){void 0===t.validateDeepAncestry&&(t.validateDeepAncestry=e?function(){if(!Sn.validateDeepAncestry()){var e=Sn.getInvalidChilds();throw window.tinkerman?tinkerman.log(e,"Invalid children"):console.log(e),new Error("DOM tree in an invalid state.")}}:null),t.VALIDATE_DOM_INSERTION=!0}}])}(i.y);if(Ln.topHtmlElement=document.getElementsByTagName("html")[0],Ln.prototype.render=AbstractMethod,(u.t.get("DEBUG_MODE")||u.t.get("ENABLE_UI_VALIDATION"))&&(Ln.initDomInsertionValidators(!1),Ln.prototype.dontGuessNamesList=["childWidgets","parentWidget","childDomNodes","domEventMonitor"],Ln.prototype.getDomNodesToHighlight=function(){var e=this.getDomNode();return e?[e]:[]}),u.t.get("DEBUG_MODE"));var Mn=function(e){function t(){return Tn(this,t),Cn(this,t,arguments)}return Nn(t,e),In(t)}(a.C);function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function Bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yn(r.key),r)}}function Un(e,t,n){return t&&Wn(e.prototype,t),n&&Wn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yn(e){var t=function(e,t){if("object"!=Vn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vn(t)?t:t+""}function Hn(e,t,n){return t=Qn(t),function(e,t){if(t&&("object"===Vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zn()?Reflect.construct(t,n||[],Qn(e).constructor):t.apply(e,n))}function zn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zn=function(){return!!e})()}function Qn(e){return Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qn(e)}function qn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gn(e,t)}function Gn(e,t){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gn(e,t)}var Jn=function(e){function t(){return Bn(this,t),Hn(this,t,arguments)}return qn(t,e),Un(t,[{key:"initialize",value:function(){this.callbacks=[],this.delayer=new Kn(this.caller("onDelay")),this.busy=!1}},{key:"isBusy",value:function(){return this.busy}},{key:"_checkBusy",value:function(){var e=this.callbacks.length>0;this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"callLater",value:function(e){this.scheduled||(this.scheduled=!0,this.delayer.schedule()),this.callbacks.push(e),this._checkBusy()}},{key:"onDelay",value:function(){this.scheduled=!1;var e=this.callbacks;this.callbacks=[];for(var t=0;t<e.length;++t)try{e[t]()}catch(e){u.t.get("defaultErrorHandler").handleCatchedException(e)}this._checkBusy()}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}},{key:"delay",value:function(e){t.getInstance().callLater(e)}}])}(i.y),Kn=function(e){function t(){return Bn(this,t),Hn(this,t,arguments)}return qn(t,e),Un(t,[{key:"initialize",value:function(e){this.div=document.createElement("div"),this.current=!0,new MutationObserver(e).observe(this.div,{attributes:!0})}},{key:"schedule",value:function(){this.div.setAttribute("class",this.current),this.current=!this.current}}])}(i.y);function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xn(r.key),r)}}function Xn(e){var t=function(e,t){if("object"!=$n(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$n(t)?t:t+""}function er(e,t,n){return t=nr(t),function(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tr()?Reflect.construct(t,n||[],nr(e).constructor):t.apply(e,n))}function tr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tr=function(){return!!e})()}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function rr(e,t){return rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rr(e,t)}var or=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),er(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rr(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.attributes=this._getDefaultAttributes(),this._setLoadManagerAttribute(),e&&this._mergeAttributes(e)}},{key:"render",value:function(){return this.element("iframe",this.attributes,null)}},{key:"widgetAfterRender",value:function(){this.widget.onload=this.caller("onBaseIframeLoad")}},{key:"getWindow",value:function(){try{return this.widget.contentWindow}catch(e){return null}}},{key:"getDocument",value:function(){try{return this.widget.contentDocument||this.getWindow().document}catch(e){return null}}},{key:"getBody",value:function(){var e=this.getDocument();return e?e.body:null}},{key:"getHead",value:function(){var e=this.getDocument();return e&&e.head?e.head:null}},{key:"getLocationHash",value:function(e){return this.getWindow().location.hash.slice(1)}},{key:"setSrc",value:function(e){this.widget.src=e}},{key:"setLocationHash",value:function(e){this.getWindow().location.hash=e}},{key:"setTitle",value:function(e){this.getDomNode().setAttribute("title",e)}},{key:"_getDefaultAttributes",value:function(){return{frameBorder:0}}},{key:"_setLoadManagerAttribute",value:function(){this.attributes||(this.attributes={})}},{key:"_mergeAttributes",value:function(e){for(var t in e)this.attributes[t]=e[t]}},{key:"onBaseIframeLoad",value:function(e){var t=this;Jn.delay((function(){t.dispatchEvent("load",e)}))}}])&&Zn(n.prototype,r),o&&Zn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ln);function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ur(r.key),r)}}function ur(e){var t=function(e,t){if("object"!=ir(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ir(t)?t:t+""}function lr(e,t,n){return t=cr(t),function(e,t){if(t&&("object"===ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sr()?Reflect.construct(t,n||[],cr(e).constructor):t.apply(e,n))}function sr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sr=function(){return!!e})()}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}function fr(e,t){return fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fr(e,t)}var pr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fr(e,t)}(t,e),n=t,(r=[{key:"_getDefaultAttributes",value:function(){return{frameBorder:0,style:{width:"0px",height:"0px",border:"0px",position:"absolute"}}}}])&&ar(n.prototype,r),o&&ar(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(or);function dr(e){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hr(r.key),r)}}function hr(e){var t=function(e,t){if("object"!=dr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dr(t)?t:t+""}var vr,br=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"createTemporaryIframeWithSrc",value:function(e,t){var n=u.t.get("page"),r=new pr({src:e});return n.appendChild(n.widget,r),setTimeout((function(e){e&&n.removeChild(n.widget,e)}),t||5e3,r),r}}],(t=null)&&yr(e.prototype,t),n&&yr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_r(r.key),r)}}function _r(e){var t=function(e,t){if("object"!=mr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mr(t)?t:t+""}u.t.get("DEBUG_MODE")&&window.tinkerman&&(vr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"_download",value:function(e){br.createTemporaryIframeWithSrc(e,1e3)}},{key:"openRouterApi",value:function(e,t){vr._download("/openAction.php?action="+escape(e)+"&method="+escape(t))}},{key:"openClassInEditor",value:function(e){if(e.openInEditor)e.openInEditor();else if(e.getPackage){var t=e.getPackage().name+".js",n=e.getSimpleClassName();vr._download("/_openAsset?assetName="+escape(t)+"&class="+escape(n))}}},{key:"openFileInEditor",value:function(e,t){vr._download("/_openFile?file="+escape(e)+"&line="+t)}},{key:"openJsMethodInEditor",value:function(e,t){var n;e.classRef&&e.classRef.packageRef&&e.classRef.packageRef.getAssetName&&(n=e.classRef.packageRef.getAssetName(),vr._download("/_openJsMethod?assetName="+escape(n)+"&method="+escape(t)+"&class="+escape(e.getSimpleClassName())))}}],(t=null)&&gr(e.prototype,t),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),pkg.bootstrap=function(){window.tinkerman.setOpenObjectInEditorHandler((function(e){vr.openClassInEditor(e)})),window.tinkerman.setOpenFileInEditorHandler((function(e,t){vr.openFileInEditor(e,t)}))});n(18636),n(533),n(35231),n(53270),n(7899);function wr(e){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(e)}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sr(r.key),r)}}function Sr(e){var t=function(e,t){if("object"!=wr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wr(t)?t:t+""}var Er=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"decodeType",value:function(t,n){if(Pr.decoders[t])return Pr.decoders[t](n,this);var r=this._getDecodeCodec(t);if(r)return r.decode(n,this,t);throw new Error(e.INVALID_JSON_TYPE+": "+t)}},{key:"parseLegacyModelToNewModel",value:function(e){if(e&&e.$JSNType&&"model"===e.$JSNType&&e._name_){var t={},n=e._name_.split("_");return n.splice(1,0,"MODEL"),t.$JSNType=n.join("_"),t.value=e.value.values,Object.keys(t.value).forEach((function(e){t.value[e]=this.parseLegacyModelToNewModel(t.value[e])}),this),t}return Array.isArray(e)?e.map(this.parseLegacyModelToNewModel,this):(e instanceof Object&&Object.keys(e).forEach((function(t){e[t]=this.parseLegacyModelToNewModel(e[t])}),this),e)}},{key:"_addPackagesToLoadToSet",value:function(e,t){if(e&&"object"==wr(e))if(e.$JSNType)Pr.packageToLoaderFinders.forEach((function(n){n(e.$JSNType,t)})),this._addPackagesToLoadToSet(e.value,t);else for(var n in e)this._addPackagesToLoadToSet(e[n],t)}},{key:"decodeTypes",value:function(e){if(e&&"object"==wr(e)){if(e.$JSNType)return this.decodeType(e.$JSNType,e.value);for(var t in e)e[t]=this.decodeTypes(e[t]);return e}return e}},{key:"unserialize",value:function(e){var t=this._rawUnserialize(e);return t=this.parseLegacyModelToNewModel(t),this.decodeTypes(t)}},{key:"unserializeWithModelSupport",value:function(e,t){var n=this._rawUnserialize(e);n=this.parseLegacyModelToNewModel(n);var r={};this._addPackagesToLoadToSet(n,r);var o=[];for(var i in r)o.push(i);var a=this;function l(){t(a.decodeTypes(n))}o.length>0?u.t.get("assetLoader").loadPackagesAndRun(o,l):l()}},{key:"encodeValue",value:function(e){if(void 0===e)return null;if(!(e&&e instanceof Object))return e;var t=this._getEncodeCodec(e);return t?t.encode(e):e.getClassName&&e.getJsonValue?this.encodeValue(e.getJsonValue()):e instanceof Array?this._encodeArray(e):e.constructor===Object?this._encodeRawObject(e):void this._throwInvalidValue(e)}},{key:"serialize",value:function(e,t){var n=t?this._sortedKeysReplacer:null;return JSON.stringify(this.encodeValue(e),n)}},{key:"_rawUnserialize",value:function(t){var n;try{n=JSON.parse(t)}catch(n){throw new Error(e.INVALID_JSON+": "+He.R.describeValue(t))}return n}},{key:"_sortedKeysReplacer",value:function(e,t){return t instanceof Object&&!(t instanceof Array)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}},{key:"_throwInvalidValue",value:function(t){throw t.getClassName?new Error(e.INVALID_JSON_CLASS+": "+t.getClassName()):new Error(e.INVALID_JSON_VALUE+": "+String(t).substr(0,30))}},{key:"_getDecodeCodec",value:function(e){return Pr.codecs.find((function(t){return t.canDecode(e)}))}},{key:"_getEncodeCodec",value:function(e){return Pr.codecs.find((function(t){return t.canEncode(e)}))}},{key:"_encodeArray",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=this.encodeValue(e[n]);return t}},{key:"_encodeRawObject",value:function(e){var t={};for(var n in e)t[n]=this.encodeValue(e[n]);return t}}],r=[{key:"addCodec",value:function(e){Pr.codecs.push(e);var t=e.getPackageToLoaderFinder();t&&Pr.packageToLoaderFinders.push(t)}},{key:"addTypeDecoder",value:function(e){var t=e.getType();if(Pr.decoders[t])throw new Error("decoderAlreadyDefinedForType: "+t);Pr.decoders[t]=function(t,n){return e.decode(t,n)}}}],n&&Or(t.prototype,n),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();if(Er.INVALID_JSON="invalidJson",Er.INVALID_JSON_CLASS=Er.INVALID_JSON+"Class",Er.INVALID_JSON_VALUE=Er.INVALID_JSON+"Value",Er.INVALID_JSON_MODEL=Er.INVALID_JSON+"Model",Er.INVALID_JSON_TYPE=Er.INVALID_JSON+"Type",void 0===Pr)var Pr={};function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jr(r.key),r)}}function jr(e){var t=function(e,t){if("object"!=kr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kr(t)?t:t+""}function Ir(e,t,n){return t=Cr(t),function(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fr()?Reflect.construct(t,n||[],Cr(e).constructor):t.apply(e,n))}function Fr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fr=function(){return!!e})()}function Cr(e){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cr(e)}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}Pr.decoders={},Pr.codecs=[],Pr.packageToLoaderFinders=[];var Rr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ir(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(t,e),n=t,r=[{key:"serialize",value:function(e,t){var n=this;return this.encoders={boolean:function(e){return n._serializeBoolean(e)},null:function(){return n._serializeUndefinedOrNull()},undefined:function(){return n._serializeUndefinedOrNull()},number:function(e){return n._serializeNumber(e)},object:function(e,t){return n._serializeObject(e,t)},string:function(e){return n._serializeString(e)}},this.encoders[kr(e)](e,t)}},{key:"_serializeBoolean",value:function(e){return String(e)}},{key:"_serializeUndefinedOrNull",value:function(){return"null"}},{key:"_getIndentation",value:function(e){for(var t="",n=0;n<e;++n)t+="    ";return t}},{key:"_serializeArray",value:function(e,t){return this._rawObject(e,t,!1)}},{key:"_rawObject",value:function(e,t,n){var r=["[\n"],o=this._getIndentation(t+1),i=!0;for(var a in e){var u=e[a],l=this.encoders[kr(u)];if(l){var s=l(u,t+1);"string"==typeof s&&(i||r.push(",\n"),r.push(o),n&&r.push(this._serializeString(a)," => "),r.push(s),i=!1)}}return r.push("\n"),r.push(this._getIndentation(t)+"]"),r.join("")}},{key:"_serializeNumber",value:function(e){return isFinite(e)?String(e):"null"}},{key:"_serializeObject",value:function(e,t){if(e){if(e instanceof Array)return this._serializeArray(e,t);if(e instanceof Date)return this._serializeDate(e);if(e.getClassName){var n=new Er;return"M_ICO_json_RichJson::getInstance()->decodeFromJson("+this._rawObject(n.encodeValue(e),t,!0)+")"}if(e.constructor!==Object)throw new Error(Er.INVALID_JSON_VALUE);return this._rawObject(e,t,!0)}return"null"}},{key:"_serializeDate",value:function(e){return"new COR_date_Timestamp("+e.getTime()/1e3+")"}},{key:"_serializeString",value:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',$:"\\$"};return'"'+(e=e.replace(/(["$\\\x00-\x1f])/g,(function(e,n){if(n in t)return t[n];var r=n.charCodeAt();return"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16)})))+'"'}}],r&&Tr(n.prototype,r),o&&Tr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function Nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xr(r.key),r)}}function xr(e){var t=function(e,t){if("object"!=Ar(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ar(t)?t:t+""}function Lr(e,t,n){return t=Vr(t),function(e,t){if(t&&("object"===Ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mr()?Reflect.construct(t,n||[],Vr(e).constructor):t.apply(e,n))}function Mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mr=function(){return!!e})()}function Vr(e){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vr(e)}function Br(e,t){return Br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Br(e,t)}Rr.serialize=function(e,t){return(new Rr).serialize(e,t)};var Wr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Br(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t,n){this.className=e,this.method=t,this.params=n||[]}},{key:"createDataSource",value:function(){return new Te(this)}},{key:"getParams",value:function(){return this.params}},{key:"getServerClassName",value:function(){return this.className}},{key:"getTypeLetter",value:function(){return"S"}},{key:"_getMethodNameToSend",value:function(){return"addListener"==this.method?"0":"removeListener"==this.method?"1":"get"==this.method?"2":"getDataAndProps"==this.method?"3":this.method}},{key:"getMessageToSend",value:function(){return[this.getTypeLetter()+this.className+"."+this._getMethodNameToSend(),this.params]}},{key:"getDescriptionPrefix",value:function(){return""}},{key:"getDescription",value:function(){return this.getDescriptionPrefix()+this.className+"."+this.method}},{key:"handleResponse",value:function(e,t,n,r){var o=e.msg;if(e.error)r(o);else{var i=this.getInnerValue(o);o instanceof Ne?this._handleMsgAsDelayedResponse(o,t,n,r):i instanceof Ne?this._handleInnerValueAsDelayedResponse(o,i,t,n,r):n(o)}}},{key:"getInnerValue",value:function(e){return e}},{key:"replaceInnerValue",value:function(e,t){return t}},{key:"_handleMsgAsDelayedResponse",value:function(e,t,n,r){e.addListener("load",(function(e){n(e.data)})),e.addListener("error",(function(e){r(e.data)})),t.registerDelayedResponse(e)}},{key:"_handleInnerValueAsDelayedResponse",value:function(e,t,n,r,o){var i=this;t.addListener("load",(function(t){r(i.replaceInnerValue(e,t.data))})),t.addListener("error",(function(e){o(e.data)})),n.registerDelayedResponse(t)}}])&&Nr(n.prototype,r),o&&Nr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hr(r.key),r)}}function Hr(e){var t=function(e,t){if("object"!=Ur(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ur(t)?t:t+""}function zr(e,t,n){return t=Gr(t),function(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qr()?Reflect.construct(t,n||[],Gr(e).constructor):t.apply(e,n))}function Qr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qr=function(){return!!e})()}function qr(){return qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},qr.apply(this,arguments)}function Gr(e){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gr(e)}function Jr(e,t){return Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jr(e,t)}u.t.get("DEBUG_MODE")&&(Wr.prototype.openInEditor=function(){vr.openRouterApi(this.className,this.method)},Wr.prototype.getPhpClassName=function(){var e,t;"ICO_"===this.className.substr(0,4)?(e=this.className.substr(0,4),t=this.className.substr(4)):(e="",t=this.className);var n=t.indexOf("_");return"M_"+e+t.substr(0,n)+"_API_"+t.substr(n+1)},Wr.prototype.getPhpParam=function(e,t){return Rr.serialize(this.params[e],t?1:0)},Wr.prototype.getPhpParams=function(e){for(var t="",n=0;n<this.params.length;++n)e&&(t+="    "),t+=this.getPhpParam(n,e),n<this.params.length-1&&(t+=","),e&&(t+="\n");return"("+(t&&e?"\n"+t:t)+")"},Wr.prototype.getAsPhpCode=function(){var e="$obj",t=e+" = new "+this.getPhpClassName()+"();\n";return this.getPropertiesAsPhpCode&&(t+=this.getPropertiesAsPhpCode(e)),t+=e+"->"+this.method+this.getPhpParams(this.params.length>1)+";"},Wr.prototype.logPhpCodeToTinkerman=function(){tinkerman.append(tinkerman.createElement("span",{},this.getAsPhpCode().replace(/ /g," ").split("\n").map((function(e){return tinkerman.createElement("div",{},[e])}))))});var Kr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n,r){qr(Gr(t.prototype),"initialize",this).call(this,new Wr(e,n,r))}}])&&Yr(n.prototype,r),o&&Yr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Te),$r=n(12723);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eo(r.key),r)}}function eo(e){var t=function(e,t){if("object"!=Zr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zr(t)?t:t+""}function to(e,t,n){return t=ro(t),function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,no()?Reflect.construct(t,n||[],ro(e).constructor):t.apply(e,n))}function no(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(no=function(){return!!e})()}function ro(e){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ro(e)}function oo(e,t){return oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oo(e,t)}var io=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),to(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oo(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t){this.name=e,this.code=t}},{key:"getName",value:function(){return this.name}},{key:"getCode",value:function(){return this.code}}])&&Xr(n.prototype,r),o&&Xr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y),ao=n(30959);function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,so(r.key),r)}}function so(e){var t=function(e,t){if("object"!=uo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uo(t)?t:t+""}function co(e,t,n){return t=po(t),function(e,t){if(t&&("object"===uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fo()?Reflect.construct(t,n||[],po(e).constructor):t.apply(e,n))}function fo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fo=function(){return!!e})()}function po(e){return po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},po(e)}function yo(e,t){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yo(e,t)}var ho=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),co(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yo(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],(r=[{key:"handleRequireLogin",value:function(e){this.dispatchEvent("requirelogin",{otherUserLogged:e})}},{key:"handleRemoteException",value:function(e){this.dispatchEvent("remoteexception",new a.C({remoteException:e})),u.t.get("defaultErrorHandler").notifyError(e.getTechnicalDescription())}},{key:"log",value:function(e){this.dispatchEvent("info",new a.C({message:e}))}},{key:"notifyExecManyResponseReceive",value:function(e,t){this.dispatchEvent("execmanyresponsereceive",new a.C({message:e,response:t}))}},{key:"notifyListenerEvent",value:function(e,t){this.dispatchEvent("listenerevent",new a.C({response:e,listener:t}))}},{key:"notifyExecMany",value:function(e,t,n){this.dispatchEvent("execmany",new a.C({message:e,bundleWaitTime:t,request:n}))}},{key:"notifyPageSessionRenew",value:function(){this.dispatchEvent("sessionrenew")}},{key:"notifyServerError",value:function(e){this.dispatchEvent("servererror",new a.C({randomCode:e}))}},{key:"notifyRemoteListenerAdd",value:function(e){this.dispatchEvent("remotelisteneradd",new a.C({listener:e}))}},{key:"notifyPotentialUnneededCallback",value:function(e,t){this.dispatchEvent("potentialunneededcallback",new a.C({reason:e,apiCall:t}))}}])&&lo(n.prototype,r),o&&lo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);n(77249);const vo=["TIN","e","jscore","module","harp","UI","lang"];for(var bo=window,mo=0;mo<vo.length;++mo)bo[vo[mo]]||(bo[vo[mo]]={}),bo=bo[vo[mo]];bo.en_US||(bo.en_US={}),bo.en_US.OfflineMessage={text:{connected:"%27Connected%21%27",errorCodeTitle:"%27Error%20code%3A%20%7B%24code%7D%27",retryNow:"%27retry%20now%27",retrying:"%27Retrying...%27",retryingInXSeconds:"%27Retrying%20in%20%7B%24seconds%7D%20seconds...%27",thisMessageWillDisappearOnceWeAreDone:"%27The%20page%20will%20reload%20once%20the%20process%20is%20complete.%27"}};const go=function(e,t,n){return u.t.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.OfflineMessage",e,t,n)},_o=go;function wo(e){return wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,So(r.key),r)}}function So(e){var t=function(e,t){if("object"!=wo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wo(t)?t:t+""}function Eo(e,t,n){return t=ko(t),function(e,t){if(t&&("object"===wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Po()?Reflect.construct(t,n||[],ko(e).constructor):t.apply(e,n))}function Po(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Po=function(){return!!e})()}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}function To(e,t){return To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},To(e,t)}var jo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Eo(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&To(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t){this.remoteException=e,this.reportedDate=t}},{key:"getReportedDate",value:function(){return this.reportedDate}},{key:"getRemoteException",value:function(){return this.remoteException}}])&&Oo(n.prototype,r),o&&Oo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ln);function Io(e){return Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Io(e)}function Fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ro(r.key),r)}}function Do(e,t,n){return t&&Co(e.prototype,t),n&&Co(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ro(e){var t=function(e,t){if("object"!=Io(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Io(t)?t:t+""}function Ao(e,t,n){return t=Lo(t),function(e,t){if(t&&("object"===Io(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,No()?Reflect.construct(t,n||[],Lo(e).constructor):t.apply(e,n))}function No(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(No=function(){return!!e})()}function xo(){return xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},xo.apply(this,arguments)}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}function Mo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vo(e,t)}function Vo(e,t){return Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vo(e,t)}var Bo=function(e){function t(){return Fo(this,t),Ao(this,t,arguments)}return Mo(t,e),Do(t,[{key:"initialize",value:function(e,n){xo(Lo(t.prototype),"initialize",this).call(this,e,n),this.minTimePassed=!1,this.minTimeTimeout=setTimeout(this.caller("onMinimumShowTimeout"),t.minimumShowMs);var r=u.t.get("server").getOfflineChecker();r?this._addServerPollRequiredEndListener():this._addServerOnlineListener(),this.innerMessage=e instanceof $?new Uo:r?new Ho(r):new Yo}},{key:"onMinimumShowTimeout",value:function(){this.minTimeTimeout=null,this.minTimePassed=!0,this.innerMessage.getServerIsOnline()&&this._dispatchContentDelete()}},{key:"_dispatchContentDelete",value:function(){this.dispatchEvent("contentdelete")}},{key:"removeListeners",value:function(){this.serverPollRequiredEndListenerAdded&&this._removeServerPollRequiredEndListener(),this.serverOnlineListenerAdded&&this._removeServerOnlineListener()}},{key:"onServerOnline",value:function(){this.removeListeners(),this.innerMessage?this.innerMessage.setServerAsOnline():u.t.get("defaultErrorHandler").reportAsException("offlineMessageInnerMessageIsNull: "+He.R.describeValue(this)),this.minTimePassed&&this._dispatchContentDelete()}},{key:"_addServerPollRequiredEndListener",value:function(){this.serverPollRequiredEndListenerAdded=!0,u.t.get("server").addListener("pollrequiredend",this.caller("onServerOnline"))}},{key:"_removeServerPollRequiredEndListener",value:function(){this.serverPollRequiredEndListenerAdded=!1,u.t.get("server").removeListener("pollrequiredend",this.caller("onServerOnline"))}},{key:"_addServerOnlineListener",value:function(){this.serverOnlineListenerAdded=!0,u.t.get("server").addListener("online",this.caller("onServerOnline"))}},{key:"_removeServerOnlineListener",value:function(){this.serverOnlineListenerAdded=!1,u.t.get("server").removeListener("online",this.caller("onServerOnline"))}},{key:"uninit",value:function(){this.Delete("innerMessage"),this.removeListeners(),this.minTimeTimeout&&(clearTimeout(this.minTimeTimeout),this.minTimeTimeout=null)}},{key:"render",value:function(){var e=this.getRemoteException();this.widget=this.element("span",{title:_o("errorCodeTitle",{code:e.getErrorCode()})},[this.element("span",null,[e.getDescription()])," ",this.innerMessage])}}],[{key:"setMinimumShowMs",value:function(e){t.minimumShowMs=e}},{key:"getTranslatedMessage",value:function(e,t){return _o(e,t)}}])}(jo),Wo=function(e){function t(){return Fo(this,t),Ao(this,t,arguments)}return Mo(t,e),Do(t,[{key:"initialize",value:function(){this.serverOnline=!1}},{key:"getServerIsOnline",value:function(){return this.serverOnline}},{key:"setServerAsOnline",value:function(){this.serverOnline=!0,this.updateUiData()}}])}(Ln),Uo=function(e){function t(){return Fo(this,t),Ao(this,t,arguments)}return Mo(t,e),Do(t,[{key:"updateUiData",value:function(){}},{key:"render",value:function(){this.widget=this.element("span",null,[_o("thisMessageWillDisappearOnceWeAreDone")])}}])}(Wo),Yo=function(e){function t(){return Fo(this,t),Ao(this,t,arguments)}return Mo(t,e),Do(t,[{key:"updateUiData",value:function(){this.detailTextNode.nodeValue=this.getCurrentDescription()}},{key:"getCurrentDescription",value:function(){return this.serverOnline?_o("connected"):_o("retrying")}},{key:"render",value:function(){this.widget=this.element("span",null,[this.detailTextNode=document.createTextNode("")]),this.updateUiData()}}])}(Wo),Ho=function(e){function t(){return Fo(this,t),Ao(this,t,arguments)}return Mo(t,e),Do(t,[{key:"initialize",value:function(e){xo(Lo(t.prototype),"initialize",this).call(this),this.offlineChecker=e,this.offlineChecker.addListener("change",this.caller("onOfflineCheckerChange"))}},{key:"updateUiData",value:function(){if(this.serverOnline)kt.setHas(this.link,"RouterOfflineMessageRetryLinkTrying",!0),this.retryLinkTextNode.nodeValue="",this.detailTextNode.nodeValue=_o("connected"),this.textNodeAfterRetryLink.nodeValue="";else{var e=this.offlineChecker.getValue();kt.setHas(this.link,"RouterOfflineMessageRetryLinkTrying",e.trying),this.retryLinkTextNode.nodeValue=e.trying?"":_o("retryNow"),this.detailTextNode.nodeValue=e.trying?_o("retrying"):_o("retryingInXSeconds",{seconds:e.secondsLeftToWait}),this.textNodeAfterRetryLink.nodeValue=e.trying?"":"."}}},{key:"onRetryNowClick",value:function(e){this.offlineChecker.retryNow(),Mt.preventDefault(e)}},{key:"render",value:function(){this.widget=this.element("span",null,[this.detailTextNode=document.createTextNode("")," ",this.link=this.element("a",{href:"#",onclick:this.caller("onRetryNowClick"),class:"RouterOfflineMessageRetryLink"},[this.retryLinkTextNode=document.createTextNode("")]),this.textNodeAfterRetryLink=document.createTextNode("")])}},{key:"onOfflineCheckerChange",value:function(){this.updateUiData()}},{key:"uninit",value:function(){this.offlineChecker.removeListener("change",this.caller("onOfflineCheckerChange"))}},{key:"widgetBeforeDomInsert",value:function(){this.updateUiData()}}])}(Wo);function zo(e){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(e)}function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qo(r.key),r)}}function qo(e){var t=function(e,t){if("object"!=zo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zo(t)?t:t+""}function Go(e,t,n){return t=Ko(t),function(e,t){if(t&&("object"===zo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jo()?Reflect.construct(t,n||[],Ko(e).constructor):t.apply(e,n))}function Jo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jo=function(){return!!e})()}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ko(e)}function $o(e,t){return $o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$o(e,t)}Bo.minimumShowMs=2e3;var Zo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Go(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$o(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.waitingForReload=!0,this.started=!1,this.interval=null,this.secondsLeftToWait=15}},{key:"getValue",value:function(){return{waiting:this.waitingForReload,secondsLeftToWait:this.secondsLeftToWait}}},{key:"retryNow",value:function(){this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"startToCheck",value:function(){if(this.started)throw new Error("Already checking");this.started=!0,this._setInterval()}},{key:"_setInterval",value:function(){this.interval=setInterval(this.caller("onInterval"),t.retryMs)}},{key:"_clearInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"_clearIntervalAndRetry",value:function(){this.waitingForReload&&(this.secondsLeftToWait=null,this._clearInterval(),this._reload())}},{key:"_reload",value:function(){this.waitingForReload=!1,u.t.get("browserWindow").reload()}},{key:"onInterval",value:function(){--this.secondsLeftToWait,this.secondsLeftToWait<=0&&this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"uninit",value:function(){this.interval&&this._clearInterval()}}])&&Qo(n.prototype,r),o&&Qo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Xo(e){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(e)}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ti(r.key),r)}}function ti(e){var t=function(e,t){if("object"!=Xo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xo(t)?t:t+""}function ni(e,t,n){return t=oi(t),function(e,t){if(t&&("object"===Xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ri()?Reflect.construct(t,n||[],oi(e).constructor):t.apply(e,n))}function ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ri=function(){return!!e})()}function oi(e){return oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oi(e)}function ii(e,t){return ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ii(e,t)}Zo.retryMs=1e3;var ai=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ni(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(t,e),n=t,o=[{key:"getFieldsetFromLegend",value:function(e){var n=t._getElement(e).parentElement;return t.isFieldsetElement(n)?n:null}},{key:"isFieldsetElement",value:function(e){return e&&1===e.nodeType&&"FIELDSET"===e.nodeName.toUpperCase()}},{key:"isLegendElement",value:function(e){return e&&1===e.nodeType&&"LEGEND"===e.nodeName.toUpperCase()}},{key:"validateLegendElement",value:function(e){if(t.isLegendElement(e)||u.t.get("defaultErrorHandler").reportAsException("fieldsetUtilNotLegendElement: element provided is not a LEGEND"),!e.textContent.trim().length)throw new Error("fieldsetUtilLegendEmpty: the LEGEND element must not be empty");e.parentElement&&(t.validateFieldsetElement(e.parentElement),e.parentElement.firstChild!==e&&u.t.get("defaultErrorHandler").reportAsException("fieldsetUtilLegendNotFieldsetFirstChild: the LEGEND element is not the first child"))}},{key:"validateFieldsetElement",value:function(e){t.isFieldsetElement(e)||u.t.get("defaultErrorHandler").reportAsException("fieldsetUtilNotFieldsetElement: the element is not a FIELDSET")}},{key:"_getElement",value:function(e){return e.getDomNode?e.getDomNode():e}}],(r=null)&&ei(n.prototype,r),o&&ei(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,si(r.key),r)}}function si(e){var t=function(e,t){if("object"!=ui(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ui(t)?t:t+""}var ci=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"getFormRelationTargetElement",value:function(t){return e._getRelatedElement(t,"getFormRelationTargetElement")}},{key:"getLabelElement",value:function(t){return e._getRelatedElement(t,"getLabelElement")}},{key:"getDescriptionElement",value:function(t){return e._getRelatedElement(t,"getDescriptionElement")}},{key:"isFormTargetCompatible",value:function(e){return e instanceof Ln&&"function"==typeof e.getFormRelationTargetElement}},{key:"isFieldsetCompatible",value:function(e){return e instanceof Ln&&"function"==typeof e.getFieldsetLegendWidget}},{key:"isNativeLabel",value:function(t){var n=e.getLabelElement(t);return!!n&&e.isNativeLabelElementName(n.nodeName)}},{key:"isLabelableTarget",value:function(t){var n=e.getFormRelationTargetElement(t);return!!n&&Ze.isLabelable(n)}},{key:"isLabelableRelation",value:function(t,n){return Ze.isLabelable(t)&&e.isNativeLabelElementName(n.nodeName)}},{key:"isNativeLabelElementName",value:function(e){return"LABEL"===e.toUpperCase()}},{key:"relate",value:function(t,n,r){e.relateAccessibleName(t,n),e.relateDescription(t,r)}},{key:"unrelate",value:function(t,n,r){e.unrelateAccessibleName(t,n),e.unrelateDescription(t,r)}},{key:"relateAccessibleName",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getLabelElement(n);r&&o&&(Ze.isLabelable(r)?e.relateForAttribute(r,o):e.relateAriaLabelledby(r,o))}},{key:"unrelateAccessibleName",value:function(t,n){e.unrelateForAttribute(t,n),e.unrelateAriaLabelledby(t,n)}},{key:"relateForAttribute",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getLabelElement(n);r&&o&&(e.isLabelableRelation(r,o)?o.setAttribute("for",r.getAttribute("id")):u.t.get("defaultErrorHandler").reportAsException("relateForAttributeError: target element "+r.nodeName.toUpperCase()+" cannot be related a to labeling element "+o.nodeName.toUpperCase()+' with a "for" attribute.'))}},{key:"unrelateForAttribute",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getLabelElement(n);r&&o&&o.getAttribute("for")===r.getAttribute("id")&&o.removeAttribute("for")}},{key:"relateAriaLabelledby",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getLabelElement(n);r&&o&&Ze.addAriaLabelledby(r,o.getAttribute("id"))}},{key:"unrelateAriaLabelledby",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getLabelElement(n);r&&o&&Ze.removeAriaLabelledby(r,o.getAttribute("id"))}},{key:"relateDescription",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getDescriptionElement(n);r&&o&&(ai.isLegendElement(r)?e.relateDescriptionToLegend(r,n):Ze.addAriaDescribedby(r,o.getAttribute("id")))}},{key:"unrelateDescription",value:function(t,n){var r=e.getFormRelationTargetElement(t),o=e.getDescriptionElement(n);r&&o&&(ai.isLegendElement(r)?e.unrelateDescriptionToLegend(r,n):Ze.removeAriaDescribedby(r,o.getAttribute("id")))}},{key:"relateDescriptionToLegend",value:function(t,n){var r=ai.getFieldsetFromLegend(t);e.relateDescription(r,n)}},{key:"unrelateDescriptionToLegend",value:function(t,n){var r=ai.getFieldsetFromLegend(t);e.unrelateDescription(r,n)}},{key:"_getRelatedElement",value:function(t,n){if(t){if(1===t.nodeType&&t.nodeName)return t;if("function"==typeof t[n])return e._getRelatedElement(t[n](),n)}return null}}],(n=null)&&li(t.prototype,n),r&&li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function fi(e){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(e)}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,di(r.key),r)}}function di(e){var t=function(e,t){if("object"!=fi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fi(t)?t:t+""}function yi(e,t,n){return t=vi(t),function(e,t){if(t&&("object"===fi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hi()?Reflect.construct(t,n||[],vi(e).constructor):t.apply(e,n))}function hi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hi=function(){return!!e})()}function vi(e){return vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vi(e)}function bi(e,t){return bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bi(e,t)}var mi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yi(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bi(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,t){this.initialContent=Xe.J.wrapIntoArray(e),this.initialTitle=t||null}},{key:"render",value:function(){return this.element("button",{class:css(),id:cn.generateUniqueId(css()),type:"button",tabIndex:"0",title:this.initialTitle,onclick:this.caller("onClick")},this.initialContent)}},{key:"widgetAfterRender",value:function(){delete this.initialTitle,delete this.initialContent}},{key:"getFormRelationTargetElement",value:function(){return ci.getFormRelationTargetElement(this.getDomNode())}},{key:"setTitle",value:function(e){this.setDomAttributes(this.getDomNode(),{title:e})}},{key:"setDisabled",value:function(e){if(!arguments.length)throw new Error('buttonSetDisabledMissingValue: missing required "disabled" boolean parameter');Ze.setDisabled(this.getDomNode(),e),this.setTabIndex(e?"-1":"0")}},{key:"setTabIndex",value:function(e){Ze.setTabIndex(this.getDomNode(),e)}},{key:"setType",value:function(e){if(!ao.w.hasElement(t.TYPES,e))throw new Error('buttonSetTypeWrongValue: invalid "type" attribute value for BUTTON element');this.getDomNode().setAttribute("type",e)}},{key:"setAriaLabel",value:function(e){this.setDomAttributes(this.getDomNode(),{"aria-label":e})}},{key:"focus",value:function(){this.getDomNode().focus()}},{key:"activate",value:function(e){this._handleActivation(e)}},{key:"isDisabled",value:function(){return!!this.getDomNode().disabled}},{key:"_handleActivation",value:function(e){!this.isDisabled()&&this.isInDom()&&(e&&this._ensureFocus(),this.dispatchEvent("click",new a.C({domEvent:e||null})))}},{key:"_ensureFocus",value:function(){(_t.isWebKit()||_t.isMac()&&_t.isGecko())&&document.activeElement!==this.getDomNode()&&this.focus()}},{key:"onClick",value:function(e){Mt.cancelEvent(e),this._handleActivation(e)}}],r&&pi(n.prototype,r),o&&pi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ln);function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}function _i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Si(r.key),r)}}function Oi(e,t,n){return t&&wi(e.prototype,t),n&&wi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Si(e){var t=function(e,t){if("object"!=gi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gi(t)?t:t+""}function Ei(e,t,n){return t=ki(t),function(e,t){if(t&&("object"===gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pi()?Reflect.construct(t,n||[],ki(e).constructor):t.apply(e,n))}function Pi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pi=function(){return!!e})()}function ki(e){return ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ki(e)}function Ti(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ji(e,t)}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}mi.TYPES=["button","submit","reset"];var Ii=function(e){function t(){return _i(this,t),Ei(this,t,arguments)}return Ti(t,e),Oi(t,[{key:"initialize",value:function(){this.minTimePassed=!1,this.minTimeTimeout=setTimeout(this.caller("onMinimumShowTimeout"),t.minimumShowMs);var e=new Zo;this.innerMessage=new Fi(e)}},{key:"render",value:function(){var e=new K;return this.element("span",null,[this.element("span",null,[e.getDescription()+"."])," ",this.innerMessage])}},{key:"onMinimumShowTimeout",value:function(){this.minTimeTimeout=null,this.minTimePassed=!0,this.innerMessage.waitingForReload||this._dispatchContentDelete()}},{key:"_dispatchContentDelete",value:function(){this.dispatchEvent("contentdelete")}},{key:"uninit",value:function(){this.Delete("innerMessage"),this.minTimeTimeout&&(clearTimeout(this.minTimeTimeout),this.minTimeTimeout=null)}}])}(Ln),Fi=function(e){function t(){return _i(this,t),Ei(this,t,arguments)}return Ti(t,e),Oi(t,[{key:"initialize",value:function(e){this.pageReloader=e,this.pageReloader.addListener("change",this.caller("onPageReloaderChange")),e.startToCheck()}},{key:"updateUiData",value:function(){this.removeAllChildren(this.widget);var e=this.pageReloader.getValue();e.waiting?this.appendChildren(this.widget,[this._getMessage("retryingInXSeconds",{seconds:e.secondsLeftToWait}),Peg(new mi(this._getMessage("retryNow")),{onclick:this.caller("onRetryNowClick")}),"."]):this.appendChild(this.widget,this._getMessage("connected"))}},{key:"onRetryNowClick",value:function(e){this.pageReloader.retryNow(),Mt.preventDefault(e)}},{key:"render",value:function(){return this.element("span")}},{key:"onPageReloaderChange",value:function(){this.updateUiData()}},{key:"uninit",value:function(){this.pageReloader.removeListener("change",this.caller("onPageReloaderChange"))}},{key:"widgetBeforeDomInsert",value:function(){this.updateUiData()}},{key:"_getMessage",value:function(e,t){return Bo.getTranslatedMessage(e,t)}}])}(Ln),Ci=function(){return Oi((function e(){_i(this,e)}),null,[{key:"notify",value:function(){uicore_globalnotification_Notifier.getInstance().warning(new Ii)}}])}();function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ai(r.key),r)}}function Ai(e){var t=function(e,t){if("object"!=Di(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Di(t)?t:t+""}function Ni(e,t,n){return t=Li(t),function(e,t){if(t&&("object"===Di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xi()?Reflect.construct(t,n||[],Li(e).constructor):t.apply(e,n))}function xi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xi=function(){return!!e})()}function Li(e){return Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(e)}function Mi(e,t){return Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mi(e,t)}Ii.minimumShowMs=2e3;var Vi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ni(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mi(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.ignoredRequestErrorsDueToStartingToUnload=!1,this.serverStatus=e,u.t.get("browserWindow").addListener("beforeunloadtimeout",this.caller("onBeforeUnloadTimeout")),u.t.get("browserWindow").addListener("beforeunload",this.caller("onBeforeUnload"))}},{key:"handleGroupedResponse",value:function(e,t,n,r){u.t.get("browserWindow").isUnloading()||(n.isError()?this.onRequestError(t,n):this.onRequestLoad(e,t,n,r))}},{key:"onBeforeUnloadTimeout",value:function(){this.ignoredRequestErrorsDueToStartingToUnload&&(Ci.notify(),this.ignoredRequestErrorsDueToStartingToUnload=!1),this.startingToUnload=!1}},{key:"onBeforeUnload",value:function(){this.startingToUnload=!0}},{key:"_updateServerStatus",value:function(e){if("routerLoginRequired"==e)this.serverStatus.setAsUserLess();else if("invalidPageSession"==e)this.serverStatus.setAsPageSessionLess();else if("serverDisabled"==e)this.serverStatus.setAsServerDisabled();else if("buildingPacks"==e)this.serverStatus.setAsBuildingPacks();else{if("otherUserLogged"!=e)throw new Error("invalidStatusCode");this.serverStatus.setAsOtherUserLogged()}}},{key:"onRequestLoad",value:function(e,t,n,r){var o,i=n.get(),a=u.t.get("serverCredentials");if(i.cortex&&a.getCortex()!=i.cortex&&a.setCortex(i.cortex),i.error){var l=i.msg;if(!ao.w.hasElement(["invalidVersion","serverDisabled","buildingPacks","invalidPageSession","routerLoginRequired","otherUserLogged","invalidPublicSessionName","timeout","tooManyConnections"],l))throw new Error("unknownServerError: "+l);if("invalidVersion"==l){var s=v.L.now(),c=sessionStorage.getItem("lastInvalidVersionReloadDate");return c&&s.getTime()-parseInt(c,10)<6e4?void(window.top.location.href="_unrecoverableError"):(sessionStorage.setItem("lastInvalidVersionReloadDate",s.getTime()),void u.t.get("browserWindow").reload())}"timeout"==l||"tooManyConnections"==l?o=null:"invalidPublicSessionName"==l?(a.setPublicSessionName(i.publicSessionName),o=null,r.resend()):("routerLoginRequired"!=l&&"otherUserLogged"!=l||ho.getInstance().handleRequireLogin("otherUserLogged"==l),this._updateServerStatus(l),o=this.serverStatus.createRemoteException("requestContentError"),ho.getInstance().handleRemoteException(o))}else try{t.handleResponse(e,i.msg)}catch(e){if("routerError"!=e.message)throw e;o=new be(e.reportCode,"requestContentError"),ho.getInstance().handleRemoteException(o)}o&&t.handleRequestError(o)}},{key:"onRequestError",value:function(e,t){t.isBadGateway()&&Jn.delay((function(){u.t.get("defaultErrorHandler").reportAsException("badGatewayWhileCalling:\n"+e.getDescription())}));var n=!1,r=t.getErrorCode();if(t.isAvatureTimeout())var o=new me("requestError");else o=new K(r,"requestError"),n=!0;if(this.startingToUnload)this.ignoredRequestErrorsDueToStartingToUnload=!0;else if(!t.isAbort()){var i=this.serverStatus.isOffline();n&&this.serverStatus.setAsOffline(),!e.getMustIndicateErrors()&&i||ho.getInstance().handleRemoteException(o)}e.handleRequestError(o)}}])&&Ri(n.prototype,r),o&&Ri(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);const Bi=["TIN","e","jscore","module","harp","UI","lang"];for(var Wi=window,Ui=0;Ui<Bi.length;++Ui)Wi[Bi[Ui]]||(Wi[Bi[Ui]]={}),Wi=Wi[Bi[Ui]];Wi.en_US||(Wi.en_US={}),Wi.en_US.PageSessionFrequencyValidator={text:{connectivityProblems:"%27Connectivity%20problems%27"}};const Yi=function(e,t,n){return u.t.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.PageSessionFrequencyValidator",e,t,n)},Hi=Yi;function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qi(r.key),r)}}function qi(e){var t=function(e,t){if("object"!=zi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zi(t)?t:t+""}function Gi(e,t,n){return t=Ki(t),function(e,t){if(t&&("object"===zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ji()?Reflect.construct(t,n||[],Ki(e).constructor):t.apply(e,n))}function Ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ji=function(){return!!e})()}function Ki(e){return Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ki(e)}function $i(e,t){return $i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$i(e,t)}var Zi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gi(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$i(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(){this.lastPageSessionDates=[]}},{key:"appendDate",value:function(e){this.lastPageSessionDates.push(e)}},{key:"removeOldDates",value:function(e){for(var t=[],n=0;n<this.lastPageSessionDates.length;++n){var r=this.lastPageSessionDates[n];e-r<3e4&&t.push(r)}this.lastPageSessionDates=t}},{key:"assertNotTooManyPageSessionRenews",value:function(e){function t(e){return Math.round(e/100)/10+"s"}if(this.lastPageSessionDates.length>=10)throw u.t.get("page").info(Hi("connectivityProblems")),new Error("Too many pagesessionrenews ("+this.lastPageSessionDates.length+") in "+t(e-this.lastPageSessionDates[0])+" (message dismissed after "+t(v.L.now()-e)+")")}}],r&&Qi(n.prototype,r),o&&Qi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ta(r.key),r)}}function ta(e){var t=function(e,t){if("object"!=Xi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xi(t)?t:t+""}function na(e,t,n){return t=oa(t),function(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ra()?Reflect.construct(t,n||[],oa(e).constructor):t.apply(e,n))}function ra(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ra=function(){return!!e})()}function oa(e){return oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oa(e)}function ia(e,t){return ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ia(e,t)}var aa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),na(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ia(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t,n){this.apiCall=e,this.onload=t,this.onerror=n}},{key:"getMessageToSendAndHandleSend",value:function(){return this.apiCall.getMessageToSend()}},{key:"handleLoad",value:function(e){this.markResponseProcessingStart();var t=new a.C({response:e,error:!1});this.dispatchEvent("beforeload",t),this.onload&&this.onload(e),this.markResponseProcessingEnd()}},{key:"getApiCall",value:function(){return this.apiCall}},{key:"getCallDescription",value:function(){return this.apiCall.getDescription()}},{key:"handleError",value:function(e){this.markResponseProcessingStart();var t=new a.C({response:e,error:!0});this.dispatchEvent("beforeload",t),!!this.onerror&&this.onerror(e)||ho.getInstance().handleRemoteException(e),this.markResponseProcessingEnd()}},{key:"handle",value:function(e,t,n){var r=this;this.apiCall.handleResponse(e,t,this.caller("handleLoad"),(function(e){r.handleError(n.create(r.getCallDescription(),e))}))}},{key:"markResponseProcessingStart",value:function(){this._startTime=performance.now()}},{key:"markResponseProcessingEnd",value:function(){this._endTime=performance.now()}},{key:"getProcessingTime",value:function(){return this._endTime&&this._startTime?this._endTime-this._startTime:null}}])&&ea(n.prototype,r),o&&ea(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);u.t.get("DEBUG_MODE")&&(aa.prototype.openInEditor=function(){this.apiCall.openInEditor()},aa.prototype.getTypeName=function(){return"API:"+this.apiCall.getDescription()},aa.prototype.getExtraInfoToLog=function(){var e=this;return{php:function(){return e.apiCall.logPhpCodeToTinkerman()},resend:function(){return e.apiCall.createDataSource()}}});n(27727),n(49576),n(10557),n(31586),n(96982);function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sa(r.key),r)}}function sa(e){var t=function(e,t){if("object"!=ua(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ua(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ua(t)?t:t+""}var ca=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"getResponseText",value:function(){return null}},{key:"getResponse",value:function(){return null}},{key:"getResponseXML",value:function(){return null}},{key:"getStatus",value:function(){return null}},{key:"isRetryableError",value:function(){return!1}},{key:"isError",value:function(){return!0}},{key:"isAbort",value:function(){return!0}},{key:"isAvatureTimeout",value:function(){return!1}},{key:"getErrorCode",value:function(){return"abortedRequest"}},{key:"getErrorDescription",value:function(){return"Request has been aborted"}}])&&la(e.prototype,t),n&&la(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,da(r.key),r)}}function da(e){var t=function(e,t){if("object"!=fa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fa(t)?t:t+""}function ya(e,t,n){return t=va(t),function(e,t){if(t&&("object"===fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ha()?Reflect.construct(t,n||[],va(e).constructor):t.apply(e,n))}function ha(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ha=function(){return!!e})()}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}function ba(e,t){return ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ba(e,t)}var ma=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ya(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ba(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t,n){this.responseType=n,this.response=e,this.text=t,this.status=this._getResponseStatus(e),this.statusText=this._getResponseStatusText(e)}},{key:"_getResponseStatus",value:function(e){try{return e.status}catch(e){return null}}},{key:"_getResponseStatusText",value:function(e){try{return e.statusText}catch(e){return"__NONE__"}}},{key:"getResponse",value:function(){return this.response}},{key:"getResponseText",value:function(){return this.text}},{key:"getResponseLength",value:function(){return 280+this._getContentAsString().length}},{key:"getStatus",value:function(){return this.status}},{key:"isAbort",value:function(){return!1}},{key:"isRetryableError",value:function(){return 400==this.status}},{key:"isError",value:function(){return 200!=this.status}},{key:"isAvatureTimeout",value:function(){return this.isError()&&504==this.status&&(/Avature Timeout/.test(this.responseText)||/504 Gateway Time-out/.test(this.responseText))}},{key:"getErrorCode",value:function(){if(this.isError()){var e="string"==typeof this.responseText?this.responseText.substr(0,10):"";return"errorStatusReadingResponse/"+this.status+"/"+this.statusText+"/"+e}return null}},{key:"getErrorDescription",value:function(){return this.isError()?"Error status reading response: "+this.status:null}},{key:"_hasResponseText",value:function(){return!this.responseType||"text"===this.responseType}},{key:"_getContentAsString",value:function(){var e="",t=u.t.get("richJson");return this._hasResponseText()?e=this.getResponseText()||"":("document"===this.responseType&&this.getResponseText()&&(e=(new XMLSerializer).serializeToString(this.getResponseText())),"json"===this.responseType&&this.getResponseText()&&(e=t.serialize(this.getResponseText()))),e}}])&&pa(n.prototype,r),o&&pa(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oa(){Oa=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==ga(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ga(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Sa(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ta(r.key),r)}}function ka(e,t,n){return t&&Pa(e.prototype,t),n&&Pa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ta(e){var t=function(e,t){if("object"!=ga(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ga(t)?t:t+""}function ja(e,t,n){return t=Fa(t),function(e,t){if(t&&("object"===ga(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ia()?Reflect.construct(t,n||[],Fa(e).constructor):t.apply(e,n))}function Ia(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ia=function(){return!!e})()}function Fa(e){return Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fa(e)}function Ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Da(e,t)}function Da(e,t){return Da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Da(e,t)}var Ra=function(e){function t(){return Ea(this,t),ja(this,t,arguments)}return Ca(t,e),ka(t,[{key:"initialize",value:function(e,t){this.method=e,this.url=t,this.sent=!1,this.aborted=!1,this.headers={}}},{key:"setContentType",value:function(e){if(this.sent)throw new Error("Request already sent");this.contentType=e}},{key:"setResponseType",value:function(e){if(this.sent)throw new Error("Request already sent");this.responseType=e}},{key:"setHeader",value:function(e,t){this.headers[e]=t}},{key:"send",value:function(e,n){var r=this;if(this.sent)throw new Error("Request already sent");var o=u.t.get("defaultErrorHandler");this.sent=!0,this.callback=n,this.abortController=new AbortController;var i=this.headers,a=u.t.get("serverCredentials").getForceError();return a&&(i["X-Avature-Force-Error"]=a),this.contentType&&(i["Content-Type"]=this.contentType),u.t.get("DEBUG_MODE")&&t.charsOutMonitor.add(580+(e?e.length:0)),this.request=fetch(this.url,{method:this.method,headers:i,body:e,signal:this.abortController.signal}).then(o.wrapHandlingErrors(this.caller("_handleResponse"))).then(o.wrapHandlingErrors(this.caller("_handleResponseText"))).catch((function(e){r.aborted||(r._handleResponseText([null,Response.error()]),navigator.onLine&&(r._isExpectedNetwrokError(e)?ho.getInstance().log(e.stack):o.handleCatchedException(e)))}))}},{key:"_handleResponse",value:(n=Oa().mark((function e(t){var n,r,o;return Oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return",Promise.resolve([null,t]));case 2:return e.next=4,t.text();case 4:return n=e.sent,"document"===this.responseType&&(r=new DOMParser,o=t.headers.get("content-type")?t.headers.get("content-type").split(";")[0]:"text/xml",n=r.parseFromString(n,o)),e.abrupt("return",[n,t]);case 7:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){Sa(i,r,o,a,u,"next",e)}function u(e){Sa(i,r,o,a,u,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})},{key:"_handleResponseText",value:function(e){if(!this.aborted&&this.callback){var n=_a(e,2),r=n[0],o=n[1],i=new ma(o,r,this.responseType);u.t.get("DEBUG_MODE")&&t.charsInMonitor.add(i.getResponseLength()),this.callback(i)}}},{key:"abort",value:function(){if(!this.sent)throw new Error("Attempt to abort unsent request");if(this.aborted)throw new Error("Already aborted");this.aborted=!0,this.abortController.abort(),this.callback(new ca)}},{key:"_isExpectedNetwrokError",value:function(e){var t="Load failed"===e.message&&"TypeError"===e.name&&!e.stack;return"Failed to fetch"===e.message||-1!==e.message.indexOf("NetworkError")||t}}]);var n,r}(i.y),Aa=function(e){function t(){return Ea(this,t),ja(this,t,arguments)}return Ca(t,e),ka(t,[{key:"initialize",value:function(){this.quantity=0}},{key:"reset",value:function(){this.quantity=0,this.dispatchEvent("change")}},{key:"get",value:function(){return this.quantity}},{key:"add",value:function(e){this.quantity+=e,this.dispatchEvent("change")}}])}(i.y);function Na(e){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(e)}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,La(r.key),r)}}function La(e){var t=function(e,t){if("object"!=Na(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Na(t)?t:t+""}function Ma(e,t,n){return t=Ba(t),function(e,t){if(t&&("object"===Na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Va()?Reflect.construct(t,n||[],Ba(e).constructor):t.apply(e,n))}function Va(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Va=function(){return!!e})()}function Ba(e){return Ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ba(e)}function Wa(e,t){return Wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wa(e,t)}Ra.charsInMonitor=new Aa,Ra.charsOutMonitor=new Aa;var Ua=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ma(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wa(e,t)}(t,e),n=t,o=[{key:"setRetryTimeout",value:function(e){t.retryTimeout=e}}],(r=[{key:"initialize",value:function(e,t){this.method=e,this.url=t,this.sent=!1,this.contentType=null,this.retries=0,this.maxRetries=3}},{key:"attemptToSend",value:function(){this.serverRequest=new Ra(this.method,this.url),this.serverRequest.setContentType(this.contentType),this.retries==this.maxRetries&&this.serverRequest.setHeader("X-Avature-Last-Retry","yes"),this.serverRequest.send(this.data,this.caller("onRequestLoad"))}},{key:"send",value:function(e,t){if(this.sent)throw new Error("Request already sent");this.sent=!0,this.data=e,this.callback=t,this.attemptToSend()}},{key:"setContentType",value:function(e){this.contentType=e}},{key:"abort",value:function(){this.serverRequest.abort()}},{key:"onRequestLoad",value:function(e){e.isRetryableError()&&this.retries<this.maxRetries?(++this.retries,u.t.get("timeoutManager").set(this.caller("attemptToSend"),t.retryTimeout)):this.callback&&this.callback(e)}}])&&xa(n.prototype,r),o&&xa(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);Ua.retryTimeout=1e3;n(54989);function Ya(e){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(e)}function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,za(r.key),r)}}function za(e){var t=function(e,t){if("object"!=Ya(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ya(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ya(t)?t:t+""}function Qa(e,t,n){return t=Ga(t),function(e,t){if(t&&("object"===Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qa()?Reflect.construct(t,n||[],Ga(e).constructor):t.apply(e,n))}function qa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qa=function(){return!!e})()}function Ga(e){return Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ga(e)}function Ja(e,t){return Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ja(e,t)}var Ka=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qa(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ja(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t){this.requestResponse=e,this.onReadyCallback=t,this.parsingTimeMs=0;var n=u.t.get("richJson");if(this.requestResponse.isError())this._setResponse(!1,!1,null);else{var r=this.requestResponse.getResponseText();if(r)try{this.parsingStartTime=performance.now(),n.unserializeWithModelSupport(r,this.caller("onUnserializeComplete"))}catch(e){if(!1===e.message.startsWith(Er.INVALID_JSON))throw e;this.invalidResponse=r,this._setResponse(!0,!1,null)}else this._setResponse(!0,!0,null)}}},{key:"_setResponse",value:function(e,t,n){this.emptyResponse=t,this.error=e,this.response=n,this.onReadyCallback(this)}},{key:"onUnserializeComplete",value:function(e){this.parsingTimeMs=performance.now()-this.parsingStartTime,this._setResponse(!1,!1,e)}},{key:"isEmpty",value:function(){return null==this.response}},{key:"getErrorCode",value:function(){return this.requestResponse.isError()?this.requestResponse.getErrorCode():this.emptyResponse?"emptyResponse":this.error?"jsonResponseParseError":null}},{key:"getErrorDescription",value:function(){return this.requestResponse.isError()?this.requestResponse.getErrorDescription():this.emptyResponse?"Error parsing JSON response: emptyResponse":this.error?"Error parsing JSON response: "+this.invalidResponse:null}},{key:"isAvatureTimeout",value:function(){return this.requestResponse.isAvatureTimeout()}},{key:"isBadGateway",value:function(){return 502==this.requestResponse.getStatus()}},{key:"isError",value:function(){return this.error||this.requestResponse.isError()}},{key:"isAbort",value:function(){return this.requestResponse.isAbort()}},{key:"get",value:function(){return this.response}}])&&Ha(n.prototype,r),o&&Ha(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function $a(e){return $a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$a(e)}function Za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xa(r.key),r)}}function Xa(e){var t=function(e,t){if("object"!=$a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$a(t)?t:t+""}function eu(e,t,n){return t=nu(t),function(e,t){if(t&&("object"===$a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tu()?Reflect.construct(t,n||[],nu(e).constructor):t.apply(e,n))}function tu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tu=function(){return!!e})()}function nu(e){return nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nu(e)}function ru(e,t){return ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ru(e,t)}var ou=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ru(e,t)}(t,e),n=t,o=[{key:"isAvailable",value:function(){var e=u.t.get("richJson");return e&&e.serialize}}],(r=[{key:"initialize",value:function(e){this.serverRequest=e,this.serverRequest.setContentType("text/javascript")}},{key:"abort",value:function(){this.serverRequest.abort()}},{key:"send",value:function(e,t){this.callback=t;var n=u.t.get("richJson"),r=performance.now();e=n.serialize(e),this.parsingTimeMs=performance.now()-r,this.serverRequest.send(e,this.callback?this.caller("onLoad"):null)}},{key:"onLoad",value:function(e){new Ka(e,this.callback)}}])&&Za(n.prototype,r),o&&Za(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function iu(e){return iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(e)}function au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uu(r.key),r)}}function uu(e){var t=function(e,t){if("object"!=iu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iu(t)?t:t+""}function lu(e,t,n){return t=cu(t),function(e,t){if(t&&("object"===iu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,su()?Reflect.construct(t,n||[],cu(e).constructor):t.apply(e,n))}function su(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(su=function(){return!!e})()}function cu(e){return cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cu(e)}function fu(e,t){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fu(e,t)}var pu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fu(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.callback=e;var t=u.t.get("serverCredentials"),n=new Ua("POST","/_createPageSession?applicationCode="+t.getApplicationCode()+"&version="+t.getPacksVersion());this.request=new ou(n)}},{key:"send",value:function(){ho.getInstance().log("Requesting new page session");var e={m:[],p:u.t.get("serverCredentials").getPublicSessionName(),t:null};this.request.send(e,this.caller("onLoad"))}},{key:"onLoad",value:function(e){if(e.isError()||e.isEmpty())ho.getInstance().log("Page session request failed"),Ci.notify();else{var t=e.get().tabId,n=e.get().cortex;ho.getInstance().log("Page session request success: "+t),this.callback(t,n)}}}])&&au(n.prototype,r),o&&au(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function du(e){return du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(e)}function yu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bu(r.key),r)}}function vu(e,t,n){return t&&hu(e.prototype,t),n&&hu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bu(e){var t=function(e,t){if("object"!=du(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==du(t)?t:t+""}function mu(e,t,n){return t=_u(t),function(e,t){if(t&&("object"===du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gu()?Reflect.construct(t,n||[],_u(e).constructor):t.apply(e,n))}function gu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gu=function(){return!!e})()}function _u(e){return _u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_u(e)}function wu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ou(e,t)}function Ou(e,t){return Ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ou(e,t)}var Su=function(e){function t(){return yu(this,t),mu(this,t,arguments)}return wu(t,e),vu(t,[{key:"initialize",value:function(){this.delayedResponses={},this.unexpectedAnswers={}}},{key:"add",value:function(e){var t=e.getId(),n=this.unexpectedAnswers[t];if(n)this._clearUnexpectedAnswer(t),this._run(e,n.getMsgAndClearTimeout());else{var r=this.isBusy();this.delayedResponses[t]=e,r||this.dispatchEvent("busystatechange")}}},{key:"_run",value:function(e,t){t.error?e.setError(t.data):e.set(t.data)}},{key:"onUnexpectedAnswerTimeout",value:function(e){this._clearUnexpectedAnswer(e.sourceWidget.getId())}},{key:"_clearUnexpectedAnswer",value:function(e){delete this.unexpectedAnswers[e]}},{key:"exec",value:function(e){var t=e.id,n=this.delayedResponses[t];if(n)this._run(n,e),delete this.delayedResponses[t],this.isBusy()||this.dispatchEvent("busystatechange");else{if(this.unexpectedAnswers[t])throw new Error("duplicateResponseInAdvance: "+t);this.unexpectedAnswers[t]=Peg(new Eu(e),{ontimeout:this.caller("onUnexpectedAnswerTimeout")})}}},{key:"isBusy",value:function(){for(var e in this.delayedResponses)return!0;return!1}}])}(i.y),Eu=function(e){function t(){return yu(this,t),mu(this,t,arguments)}return wu(t,e),vu(t,[{key:"initialize",value:function(e){this.msg=e,this.timeout=setTimeout(this.caller("onTimeout"),12e4)}},{key:"getId",value:function(){return this.msg.id}},{key:"onTimeout",value:function(){throw this.dispatchEvent("timeout"),new Error("delayedAnswerWithoutQuestion: "+this.getId()+" "+He.R.describeValue(this.msg))}},{key:"getMsgAndClearTimeout",value:function(){return clearTimeout(this.timeout),this.msg}}])}(i.y);function Pu(e){return Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(e)}function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tu(r.key),r)}}function Tu(e){var t=function(e,t){if("object"!=Pu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pu(t)?t:t+""}function ju(e,t,n){return t=Fu(t),function(e,t){if(t&&("object"===Pu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Iu()?Reflect.construct(t,n||[],Fu(e).constructor):t.apply(e,n))}function Iu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iu=function(){return!!e})()}function Fu(e){return Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fu(e)}function Cu(e,t){return Cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cu(e,t)}var Du=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ju(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cu(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.requestId=re.E.generateRandCode(7)}},{key:"getRequestId",value:function(){return this.requestId}}])&&ku(n.prototype,r),o&&ku(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Ru(e){return Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nu(r.key),r)}}function Nu(e){var t=function(e,t){if("object"!=Ru(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ru(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ru(t)?t:t+""}function xu(e,t,n){return t=Vu(t),function(e,t){if(t&&("object"===Ru(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lu()?Reflect.construct(t,n||[],Vu(e).constructor):t.apply(e,n))}function Lu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lu=function(){return!!e})()}function Mu(){return Mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Mu.apply(this,arguments)}function Vu(e){return Vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vu(e)}function Bu(e,t){return Bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bu(e,t)}var Wu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bu(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,n){Mu(Vu(t.prototype),"initialize",this).call(this),this.invocations=e,this.dontIndicateErrors=n,this.handledActionsByNumber={}}},{key:"mustRetryOnNetworkErrors",value:function(){return!0}},{key:"getMustIndicateErrors",value:function(){return!this.dontIndicateErrors}},{key:"getDescription",value:function(){for(var e="",t=0;t<this.invocations.length;++t)e+=this.invocations[t].getCallDescription()+"\n";return e}},{key:"getRequestPath",value:function(){return"synapserCall/"+u.t.get("serverCredentials").getCortex()}},{key:"getMessageToSendAndHandleSend",value:function(){for(var e=[],t=0;t<this.invocations.length;++t)e.push(this.invocations[t].getMessageToSendAndHandleSend());return e}},{key:"handleResponse",value:function(e,t){var n=this,r=performance.now();t&&t.forEach((function(t){return n._handleIndividualResponse(e,t)}));var o=performance.now()-r;this.dispatchEvent("load",new a.C({response:t,responseHandleTimeMs:o}))}},{key:"_createExceptionDecoder",value:function(){return new he}},{key:"_handleIndividualResponse",value:function(e,t){var n=this._createExceptionDecoder();if(void 0!==t.actionNumber)this.invocations[t.actionNumber].handle(t,e,n),this.handledActionsByNumber[t.actionNumber]=1;else{if("event"!=t.type){if("routerError"==t.type){var r=new Error("routerError");throw r.reportCode=t.reportCode,r}throw new Error("unknownResponseType")}t.error?e.handleEventError(n.create("Event",t.msg)):e.handleEvent(t)}}},{key:"hasInvocations",value:function(){return this.invocations.length>0}},{key:"handleRequestError",value:function(e){for(var t=0;t<this.invocations.length;++t)this.handledActionsByNumber[t]||this.invocations[t].handleError(e);this.dispatchEvent("error",new a.C({remoteException:e}))}},{key:"getInvocations",value:function(){return this.invocations}}],r&&Au(n.prototype,r),o&&Au(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Du);function Uu(e){return Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uu(e)}function Yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hu(r.key),r)}}function Hu(e){var t=function(e,t){if("object"!=Uu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Uu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uu(t)?t:t+""}function zu(e,t,n){return t=qu(t),function(e,t){if(t&&("object"===Uu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qu()?Reflect.construct(t,n||[],qu(e).constructor):t.apply(e,n))}function Qu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qu=function(){return!!e})()}function qu(e){return qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qu(e)}function Gu(e,t){return Gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gu(e,t)}var Ju=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gu(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.messageSender=e,this.timeout=null,this.request=null,this.lastConnectWasAnError=!1,this.waitingForOnline=!1,this._fetch()}},{key:"_stopWaitingForOnline",value:function(){u.t.get("server").removeListener("online",this.caller("onOnline")),this.waitingForOnline=!1}},{key:"onOnline",value:function(){this._stopWaitingForOnline(),ho.getInstance().log("Retrying permanent connection due to online"),this._fetch()}},{key:"onLoadError",value:function(e){if(!this.Deleted){var t=e.remoteException;if(!this.lastConnectWasAnError){var n="Permanent connection disconnected ("+t.getTechnicalDescription()+")";ho.getInstance().log(n),u.t.get("userTrail").add(n),this.lastConnectWasAnError=!0}t instanceof Q?(ho.getInstance().log("Permanent connection request error ("+t.getTechnicalDescription()+"), waiting for online"),u.t.get("server").addListener("online",this.caller("onOnline")),this.waitingForOnline=!0):(ho.getInstance().log("Permanent connection request error ("+t.getTechnicalDescription()+"), will retry in 10000ms"),this.timeout=setTimeout(this.caller("onTimeout"),1e4))}}},{key:"onLoadOk",value:function(e){if(!this.Deleted){if(this.lastConnectWasAnError){var t="Permanent connection reconnected";ho.getInstance().log(t),u.t.get("userTrail").add(t)}this.lastConnectWasAnError=!1;var n=v.L.now()-this.lastFetchDate,r=0,o=u.t.get("config");r=0==e.response.length&&n<o.router.minPendingMessagesDelay?o.router.minPendingMessagesDelay-n:0,this.timeout=setTimeout(this.caller("onTimeout"),r)}}},{key:"onTimeout",value:function(){this.timeout=null,this._fetch()}},{key:"_fetch",value:function(){this.lastFetchDate=v.L.now();var e=new Wu([],!1);e.addListener("load",this.caller("onLoadOk")),e.addListener("error",this.caller("onLoadError")),this.request=this.messageSender.sendMessage(e)}},{key:"uninit",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.waitingForOnline&&this._stopWaitingForOnline()}}])&&Yu(n.prototype,r),o&&Yu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Ku(e){return Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ku(e)}function $u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zu(r.key),r)}}function Zu(e){var t=function(e,t){if("object"!=Ku(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ku(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ku(t)?t:t+""}function Xu(e,t,n){return t=tl(t),function(e,t){if(t&&("object"===Ku(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,el()?Reflect.construct(t,n||[],tl(e).constructor):t.apply(e,n))}function el(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(el=function(){return!!e})()}function tl(e){return tl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tl(e)}function nl(e,t){return nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nl(e,t)}var rl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nl(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t,n){this.url=e,this.pageSessionId=t,this.request=null,this.message=n}},{key:"resend",value:function(){this.request=null,this.send(this.callback)}},{key:"send",value:function(e){if(this.request)throw new Error("Already sent");this.callback=e;var t,n=u.t.get("serverCredentials"),r=this.url+"?applicationCode="+n.getApplicationCode()+"&version="+n.getPacksVersion();t=this.message.mustRetryOnNetworkErrors()?new Ua("POST",r):new Ra("POST",r),this.request=new ou(t),this.startRequestTime=performance.now(),this.request.send(this.getRequestStruct(),this.caller("onRequestResponse"))}},{key:"onRequestResponse",value:function(e){this.response=e,this.requestTimeMs=performance.now()-this.startRequestTime,this.callback(this.message,e,this)}},{key:"abort",value:function(){this.request.abort()}},{key:"getRequestStruct",value:function(){var e=u.t.get("serverCredentials");return{m:this.message.getMessageToSendAndHandleSend(),p:e.getPublicSessionName(),t:this.pageSessionId,i:this.message.getRequestId()}}},{key:"getRequestTime",value:function(){return null!=this.requestTimeMs?this.requestTimeMs-this.getRequestParsingTime()-this.getResponseParsingTime():null}},{key:"getRequestParsingTime",value:function(){return this.request?this.request.parsingTimeMs:null}},{key:"getResponseParsingTime",value:function(){return this.response?this.response.parsingTimeMs:null}}])&&$u(n.prototype,r),o&&$u(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ol(e){return ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ol(e)}function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,al(r.key),r)}}function al(e){var t=function(e,t){if("object"!=ol(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ol(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ol(t)?t:t+""}function ul(e,t,n){return t=sl(t),function(e,t){if(t&&("object"===ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ll()?Reflect.construct(t,n||[],sl(e).constructor):t.apply(e,n))}function ll(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ll=function(){return!!e})()}function sl(e){return sl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sl(e)}function cl(e,t){return cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cl(e,t)}var fl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ul(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cl(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,t){this.pageSessionId=e,this.responseReceiveCallback=t,this.currentRequests=[],this.waitingMessageCount=0,this.busy=!1}},{key:"isBusy",value:function(){return this.busy}},{key:"onRequestResponse",value:function(e,t,n){this.Deleted||(e.hasInvocations()>0&&--this.waitingMessageCount,ho.getInstance().notifyExecManyResponseReceive(e,t),ao.w.remove(this.currentRequests,n),this.responseReceiveCallback(e,t,n),this._dispatchBusyStateChangeIfNecessary())}},{key:"_dispatchBusyStateChangeIfNecessary",value:function(){var e=this.waitingMessageCount>0;this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"sendMessage",value:function(e,t){e.hasInvocations()&&++this.waitingMessageCount;var n=new rl(e.getRequestPath(),this.pageSessionId,e);return ho.getInstance().notifyExecMany(e,t,n),this.currentRequests.push(n),n.send(this.caller("onRequestResponse")),this._dispatchBusyStateChangeIfNecessary(),n}},{key:"uninit",value:function(){for(var e=this.currentRequests.slice(),t=0;t<e.length;++t)e[t].abort();delete this.responseReceiveCallback}}],r&&il(n.prototype,r),o&&il(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function pl(e){return pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(e)}function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yl(r.key),r)}}function yl(e){var t=function(e,t){if("object"!=pl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pl(t)?t:t+""}function hl(e,t,n){return t=ml(t),function(e,t){if(t&&("object"===pl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vl()?Reflect.construct(t,n||[],ml(e).constructor):t.apply(e,n))}function vl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vl=function(){return!!e})()}function bl(){return bl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ml(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},bl.apply(this,arguments)}function ml(e){return ml=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ml(e)}function gl(e,t){return gl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gl(e,t)}var _l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hl(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gl(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n,r,o){bl(ml(t.prototype),"initialize",this).call(this),this.onload=n,this.onerror=r,this.code=e,this.cortexToUse=o||u.t.get("serverCredentials").getCortex()}},{key:"mustRetryOnNetworkErrors",value:function(){return!1}},{key:"getMustIndicateErrors",value:function(){return!1}},{key:"getMessageToSendAndHandleSend",value:function(){return this.code}},{key:"getRequestPath",value:function(){return"synapserCall/"+this.cortexToUse}},{key:"handleResponse",value:function(e,t){this.onload(t)}},{key:"hasInvocations",value:function(){return!1}},{key:"handleRequestError",value:function(e){this.onerror()}},{key:"getDescription",value:function(){return"ICO.harp.SynapserMessage. Code: "+this.code}},{key:"getInvocations",value:function(){return[]}}])&&dl(n.prototype,r),o&&dl(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Du);function wl(e){return wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(e)}function Ol(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function El(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pl(r.key),r)}}function Pl(e){var t=function(e,t){if("object"!=wl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wl(t)?t:t+""}function kl(e,t,n){return t=jl(t),function(e,t){if(t&&("object"===wl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tl()?Reflect.construct(t,n||[],jl(e).constructor):t.apply(e,n))}function Tl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tl=function(){return!!e})()}function jl(e){return jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jl(e)}function Il(e,t){return Il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Il(e,t)}var Fl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kl(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Il(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t,n){this.callbackQueue=[],this.invocationQueue=[],this.busy=!1,this.hasPendingTimeout=!1,this.hasPendingCallbacks=!1,this.onHold=!1,this.config=u.t.get("config"),this.messageSender=Peg(new fl(e,t),{onbusystatechange:this.caller("_dispatchBusyStateChangeIfNecessary")}),n&&(this.fetcher=new Ju(this.messageSender)),this.currentBundleStartTime,this.nextBundleStartTime}},{key:"callBeforeExecLater",value:function(e){this.callbackQueue.push(e),this._ensureSendRequestTimeoutPresent()}},{key:"enqueueInvocationRequest",value:function(e){this.invocationQueue.push(e),this._ensureSendRequestTimeoutPresent()}},{key:"isBusy",value:function(){return this.messageSender.isBusy()||this.invocationQueue.length>0||this.callbackQueue.length>0}},{key:"ping",value:function(e,t){return this.messageSender.sendMessage(new _l("ping",e,t,"1"))}},{key:"processInvocationRequest",value:function(e,t){return this.messageSender.sendMessage(new Wu([e],t))}},{key:"flushAndHold",value:function(){var e=this;this.holdingTimeout&&clearTimeout(this.holdingTimeout),this._execPending(),this.onHold=!0,this.holdingTimeout=setTimeout((function(){e.flushAndRelease()}),this._getMaxPreflightWaitTime())}},{key:"flushAndRelease",value:function(){var e=this;this.onHold&&(clearTimeout(this.holdingTimeout),this.holdingTimeout=null,window.requestAnimationFrame((function(){e.onHold=!1,e._execPending()})))}},{key:"uninit",value:function(){this.Delete("messageSender"),this.fetcher&&this.Delete("fetcher")}},{key:"_dispatchBusyStateChangeIfNecessary",value:function(){if(!this.Deleted){var e=this.isBusy();this.busy!==e&&(this.busy=e,this.dispatchEvent("busystatechange"))}}},{key:"_ensureSendRequestTimeoutPresent",value:function(){this.hasPendingTimeout&&!this.hasPendingCallbacks||(this._saveBundleStartTime(performance.now()),this.hasPendingTimeout=!0,Jn.delay(this.caller("_execPending"))),this._dispatchBusyStateChangeIfNecessary()}},{key:"_execPending",value:function(){if(!this.Deleted){var e=this.callbackQueue.slice();this.callbackQueue=[];var t=this.invocationQueue.slice();this.invocationQueue=[],this.hasPendingCallbacks=!0;var n,r=Ol(e);try{for(r.s();!(n=r.n()).done;)(0,n.value)()}catch(e){r.e(e)}finally{r.f()}var o=performance.now()-this.currentBundleStartTime;if(this.onHold)this.invocationQueue=[].concat(t,this.invocationQueue);else if(t.length>0){var i=new Wu(t,!1);this.messageSender.sendMessage(i,o)}this.hasPendingTimeout=!1,this.hasPendingCallbacks=!1,this._dispatchBusyStateChangeIfNecessary(),this._saveNextBundleStartTime()}}},{key:"_saveBundleStartTime",value:function(e){this.hasPendingCallbacks?this.nextBundleStartTime=e:this.currentBundleStartTime=e}},{key:"_saveNextBundleStartTime",value:function(){this.nextBundleInit&&(this.currentBundleInit=this.nextBundleInit,this.nextBundleInit=null)}},{key:"_getMaxPreflightWaitTime",value:function(){return this.config.harp.control.maxPreflightWaitTime}}])&&El(n.prototype,r),o&&El(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Cl(e){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(e)}function Dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rl(r.key),r)}}function Rl(e){var t=function(e,t){if("object"!=Cl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cl(t)?t:t+""}function Al(e,t,n){return t=xl(t),function(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Nl()?Reflect.construct(t,n||[],xl(e).constructor):t.apply(e,n))}function Nl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nl=function(){return!!e})()}function xl(e){return xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xl(e)}function Ll(e,t){return Ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ll(e,t)}var Ml=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Al(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ll(e,t)}(t,e),n=t,(r=[{key:"callBeforeExecLater",value:function(e){this.callbackQueue.push(e),this._initializeInvocationHandling()}},{key:"enqueueInvocationRequest",value:function(e){this._initializeInvocationHandling(),this.invocationQueue.push(e),this._getMaxRequestPerMessageConfig()&&this.invocationQueue.length>=this._getMaxRequestPerMessageConfig()&&(this._cancelExistingDelayer(),this._cancelExistingTimeout(),this._sendInvocationBundle())}},{key:"_cancelExistingDelayer",value:function(){this.pendingBrowserDelayer&&(clearTimeout(this.pendingBrowserDelayer),this.pendingBrowserDelayer=null)}},{key:"_cancelExistingTimeout",value:function(){this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=null)}},{key:"_getMaxRequestPerMessageConfig",value:function(){return this.config.harp.control.maxRequestPerMessage}},{key:"_initializeInvocationHandling",value:function(){var e=this;!this.pendingTimeout&&!this.pendingBrowserDelayer&&(0===this.invocationQueue.length||this.callbackQueue.length>0)&&(this.pendingTimeout=setTimeout((function(){e._cancelExistingDelayer(),e.pendingTimeout=null,e._sendInvocationBundle()}),this._getMaxPreflightWaitTime()),this.pendingBrowserDelayer=Jn.delay((function(){e._cancelExistingTimeout(),e.pendingBrowserDelayer=null,e._sendInvocationBundle()})))}},{key:"_sendInvocationBundle",value:function(){this._saveBundleStartTime(performance.now()),this._execPending(),this._dispatchBusyStateChangeIfNecessary()}}])&&Dl(n.prototype,r),o&&Dl(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Fl);function Vl(e){return Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(e)}function Bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wl(r.key),r)}}function Wl(e){var t=function(e,t){if("object"!=Vl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vl(t)?t:t+""}function Ul(e,t,n){return t=Hl(t),function(e,t){if(t&&("object"===Vl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yl()?Reflect.construct(t,n||[],Hl(e).constructor):t.apply(e,n))}function Yl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yl=function(){return!!e})()}function Hl(e){return Hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hl(e)}function zl(e,t){return zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zl(e,t)}var Ql=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ul(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zl(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(){for(var e=this._isHarpControlEnabled()?Ml:Fl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.bundler=function(e,t,n){if(Yl())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&zl(o,n.prototype),o}(e,n),this.bundler.addListener("busystatechange",this.dispatcher("busystatechange"))}},{key:"callBeforeExecLater",value:function(e){this.bundler.callBeforeExecLater(e)}},{key:"exec",value:function(e,t,n){if(t)return this.bundler.processInvocationRequest(e,n);this.bundler.enqueueInvocationRequest(e)}},{key:"isBusy",value:function(){return this.bundler.isBusy()}},{key:"ping",value:function(e,t){return this.bundler.ping(e,t)}},{key:"flushAndHold",value:function(){this.bundler.flushAndHold()}},{key:"flushAndRelease",value:function(){this.bundler.flushAndRelease()}},{key:"uninit",value:function(){this.bundler.uninit(),this.Delete("bundler")}},{key:"_isHarpControlEnabled",value:function(){var e=u.t.get("config");return e.harp&&e.harp.control&&e.harp.control.enabled}}],r&&Bl(n.prototype,r),o&&Bl(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ql(e){return ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(e)}function Gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$l(r.key),r)}}function Kl(e,t,n){return t&&Jl(e.prototype,t),n&&Jl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $l(e){var t=function(e,t){if("object"!=ql(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ql(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ql(t)?t:t+""}function Zl(e,t,n){return t=es(t),function(e,t){if(t&&("object"===ql(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xl()?Reflect.construct(t,n||[],es(e).constructor):t.apply(e,n))}function Xl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xl=function(){return!!e})()}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},es(e)}function ts(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ns(e,t)}function ns(e,t){return ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ns(e,t)}var rs=function(e){function t(){return Gl(this,t),Zl(this,t,arguments)}return ts(t,e),Kl(t,null,[{key:"callWhenReady",value:function(e,t,n){for(var r=new os(n),o=0;o<e.length;++o)r.add(e[o].getBusyMonitor?e[o].getBusyMonitor():e[o]);if(r.isBusy()){return r.addListener("busystatechange",(function e(){r.removeListener("busystatechange",e),t(),Delete(r)})),r}return Delete(r),t(),null}}])}(i.y),os=function(e){function t(){return Gl(this,t),Zl(this,t,arguments)}return ts(t,e),Kl(t,[{key:"initialize",value:function(e){this.objectsToMonitor=[],this.busy=this.isBusy(),this.mustNotify=e}},{key:"checkForBusyStateChange",value:function(){var e=this.isBusy();e!=this.busy&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"onChildBusyStateChange",value:function(){this.checkForBusyStateChange()}},{key:"add",value:function(e){if(u.t.get("ENABLE_UI_VALIDATION")&&-1!==ao.w.sloppyIndexOf(this.objectsToMonitor,e))throw new Error("Object is already being monitored");this.objectsToMonitor.push(e),this.mustNotify&&e.notifyWaiting&&e.notifyWaiting(),e.addListener("busystatechange",this.caller("onChildBusyStateChange")),this.checkForBusyStateChange()}},{key:"remove",value:function(e,t){ao.w.remove(this.objectsToMonitor,e)?(e.removeListener("busystatechange",this.caller("onChildBusyStateChange")),t||this.checkForBusyStateChange()):u.t.get("defaultErrorHandler").reportAsException("Cannot remove an Object that is not in monitor: "+e)}},{key:"isBusy",value:function(){for(var e=0;e<this.objectsToMonitor.length;++e)if(this.objectsToMonitor[e].isBusy())return!0;return!1}},{key:"uninit",value:function(){for(var e=this.objectsToMonitor.length-1;e>=0;--e)this.remove(this.objectsToMonitor[e],!0)}}])}(i.y);function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,us(r.key),r)}}function us(e){var t=function(e,t){if("object"!=is(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==is(t)?t:t+""}function ls(e,t,n){return t=fs(t),function(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ss()?Reflect.construct(t,n||[],fs(e).constructor):t.apply(e,n))}function ss(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ss=function(){return!!e})()}function cs(){return cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},cs.apply(this,arguments)}function fs(e){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fs(e)}function ps(e,t){return ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ps(e,t)}var ds=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ls(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ps(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n,r,o,i){cs(fs(t.prototype),"initialize",this).call(this),this.pageSession=e,this.listenerNumber=n,this.className=r,this.eventName=o,this.callback=i,this.removing=!1,this.removed=!1;var a=void 0;this.response=a,this.errorResponse=a,this.parentObject=null}},{key:"getDescription",value:function(){return this.className+"-"+this.eventName+"#"+this.listenerNumber}},{key:"handleEvent",value:function(e){this.callback(e),this.dispatchEvent("eventreceive")}},{key:"handleEventError",value:function(e){var t=new a.C({response:e,error:!0});this.dispatchEvent("beforeload",t),this.onerror&&this.onerror(e)||ho.getInstance().handleRemoteException(e)}},{key:"setAsRemoved",value:function(){this.removed||(this.removed=!0,this.removing=!1,this.dispatchEvent("remove"))}},{key:"_assertRemovable",value:function(){if(this.removed)throw new Error("cannot remove already-removed listener");if(this.removing)throw new Error("cannot remove already-scheduled to be removed listener")}},{key:"removeNow",value:function(){this._assertRemovable(),this.pageSession.removeRemoteListenerNow(this)}},{key:"removeLater",value:function(){this._assertRemovable(),this.removing=!0,this.pageSession.removeRemoteListenerLater(this)}},{key:"getEventName",value:function(){return this.eventName}},{key:"getServerClassName",value:function(){return this.className}},{key:"getListenerNumber",value:function(){return this.listenerNumber}},{key:"cancelRemove",value:function(){this.removing=!1,this.pageSession.cancelRemoveRemoteListener(this)}},{key:"isValid",value:function(){return!this.removed}},{key:"isRemoving",value:function(){return this.removing}},{key:"getResponse",value:function(){return this.response}},{key:"getErrorResponse",value:function(){return this.errorResponse}},{key:"setResponse",value:function(e){this.response=e,this.dispatchEvent("responsereceive")}},{key:"setErrorResponse",value:function(e){this.errorResponse=e,this.dispatchEvent("error")}},{key:"setParentObject",value:function(e){this.parentObject=e}},{key:"getParentObject",value:function(){return this.parentObject}}])&&as(n.prototype,r),o&&as(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);ds.prototype.dontGuessNamesList=["pageSession"];n(36012),n(3101),n(79073);function ys(e){return ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(e)}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vs(r.key),r)}}function vs(e){var t=function(e,t){if("object"!=ys(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ys(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ys(t)?t:t+""}var bs=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"createCaller",value:function(e,t,n){return function(){if(e[t])return e[t].apply(e,n);if(u.t.get("ENABLE_UI_VALIDATION"))throw new Error("MethodDoesNotExists: Couldn't find method "+t+" in "+e)}}},{key:"shallowCloneMap",value:function(e){var t={};if(!e||"object"!=ys(e))return t;if(e.clone)return e.clone();if(e.classRef)return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e));var n=Object.keys(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),{});return Object.getOwnPropertySymbols(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);r.enumerable&&(n[t]=r)})),Object.defineProperties(t,n),t}},{key:"merge",value:function(e,t){for(var n in t)e[n]=t[n];return e}},{key:"clone",value:function(t,n,r){if(r=r||"",n&&new RegExp(n).test(r))return t;if(t&&t.clone)return t.clone();if(!t||"object"!=ys(t))return t;var o;if(t instanceof Date)o=new Date(t.getTime());else if(Array.isArray(t))o=t.map((function(t,o){return e.clone(t,n,r+"."+o)}));else if(t.classRef)o=Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t));else for(var i in o={},t)o[i]=e.clone(t[i],n,r+"."+i);return o}},{key:"clean",value:function(e){for(var t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e}},{key:"hasMethod",value:function(e,t){return!(!e||"function"!=typeof e[t])}}],(n=null)&&hs(t.prototype,n),r&&hs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function ms(e){return ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ms(e)}function gs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_s(r.key),r)}}function _s(e){var t=function(e,t){if("object"!=ms(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ms(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ms(t)?t:t+""}function ws(e,t,n){return t=Es(t),function(e,t){if(t&&("object"===ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Os()?Reflect.construct(t,n||[],Es(e).constructor):t.apply(e,n))}function Os(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Os=function(){return!!e})()}function Ss(){return Ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Es(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ss.apply(this,arguments)}function Es(e){return Es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Es(e)}function Ps(e,t){return Ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ps(e,t)}var ks=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ws(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ps(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n){Ss(Es(t.prototype),"initialize",this).call(this,e,"getDataAndProps",[]),this.instanceProperties=n||{}}},{key:"getTypeLetter",value:function(){return"R"}},{key:"getMessageToSend",value:function(){var e=Wr.prototype.getMessageToSend.call(this);return e.push(this.instanceProperties),e}},{key:"getDescriptionPrefix",value:function(){return"remoteview:"}}])&&gs(n.prototype,r),o&&gs(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Wr);function Ts(e){return Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ts(e)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Is(r.key),r)}}function Is(e){var t=function(e,t){if("object"!=Ts(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ts(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ts(t)?t:t+""}function Fs(e,t,n){return t=Rs(t),function(e,t){if(t&&("object"===Ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cs()?Reflect.construct(t,n||[],Rs(e).constructor):t.apply(e,n))}function Cs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cs=function(){return!!e})()}function Ds(){return Ds="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ds.apply(this,arguments)}function Rs(e){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rs(e)}function As(e,t){return As=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},As(e,t)}u.t.get("DEBUG_MODE")&&(ks.prototype.getPropertiesAsPhpCode=function(e){var t="";for(var n in this.instanceProperties)t+=e+"->"+n+" = "+Rr.serialize(this.instanceProperties[n],0)+";\n";return t});var Ns=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fs(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&As(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n,r,o){Ds(Rs(t.prototype),"initialize",this).call(this,e,n,r),this.instanceProperties=o||{}}},{key:"getInstanceProperties",value:function(){return this.instanceProperties}},{key:"updateDatasourceProperty",value:function(e,t){this.instanceProperties[e]=t}},{key:"getTypeLetter",value:function(){return"O"}},{key:"getMessageToSend",value:function(){var e=Wr.prototype.getMessageToSend.call(this);return e.push(this.instanceProperties),e}},{key:"getDescriptionPrefix",value:function(){return"staticview:"}},{key:"getInnerValue",value:function(e){return e.msg}},{key:"replaceInnerValue",value:function(e,t){return e.msg=t,e}}])&&js(n.prototype,r),o&&js(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Wr);u.t.get("DEBUG_MODE")&&(Ns.prototype.getPropertiesAsPhpCode=function(e){var t="";for(var n in this.instanceProperties)t+=e+"->"+n+" = "+Rr.serialize(this.instanceProperties[n],0)+";\n";return t});n(63555),n(90345),n(83396);function xs(e){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(e)}function Ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ms(r.key),r)}}function Ms(e){var t=function(e,t){if("object"!=xs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xs(t)?t:t+""}function Vs(e,t,n){return t=Us(t),function(e,t){if(t&&("object"===xs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bs()?Reflect.construct(t,n||[],Us(e).constructor):t.apply(e,n))}function Bs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bs=function(){return!!e})()}function Ws(){return Ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Us(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ws.apply(this,arguments)}function Us(e){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Us(e)}function Ys(e,t){return Ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ys(e,t)}var Hs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vs(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ys(e,t)}(t,e),n=t,o=[{key:"fromPromise",value:function(e){var n=new t(null,!0);return e.then((function(e){n.set(e)})).catch((function(){this.dispatchEvent("error")})).finally((function(){n.setIsBusy(!1)})),n}}],(r=[{key:"initialize",value:function(e,n){Ws(Us(t.prototype),"initialize",this).call(this),this.data=e,this.busy=!!n}},{key:"get",value:function(){return this.data}},{key:"setIsBusy",value:function(e){this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"isBusy",value:function(){return this.busy}},{key:"set",value:function(e,t){if(this.data=e,!this.busy){var n=new a.C({partial:!1});t||this.dispatchChange(n)}}},{key:"isEmpty",value:function(){return 0==this.data.length}},{key:"remove",value:function(e,t,n){var r=ao.w.sloppyIndexOf(this.data,e);if(-1!==r&&(this.data.splice(r,1),this.set(this.data,t),!n)){var o=new a.C({partial:!0,oldItem:e,oldItemIndex:r});this.dispatchEvent("remove",o)}}},{key:"append",value:function(e){this.insert(e)}},{key:"appendMany",value:function(e,t){Array.prototype.push.apply(this.data,e);var n=new a.C({partial:!0,newItems:e});if(this.dispatchEvent("appendmany",n),!t){var r=new a.C({partial:!0,newItems:e});this.dispatchChange(r)}}},{key:"prepend",value:function(e){this.insert(e,0)}},{key:"insert",value:function(e,t){"number"==typeof t&&t>=0&&t<=this.data.length?this.data.splice(t,0,e):this.data.push(e);var n=new a.C({partial:!0,newItem:e,atIndex:t});this.dispatchEvent("append",n);var r=new a.C({partial:!0,newItem:e});this.dispatchChange(r)}},{key:"addDependencyOf",value:function(e){}},{key:"removeDependencyOf",value:function(e){}}])&&Ls(n.prototype,r),o&&Ls(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(h);function zs(e){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zs(e)}function Qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qs(r.key),r)}}function qs(e){var t=function(e,t){if("object"!=zs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zs(t)?t:t+""}function Gs(e,t,n){return t=Ks(t),function(e,t){if(t&&("object"===zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Js()?Reflect.construct(t,n||[],Ks(e).constructor):t.apply(e,n))}function Js(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Js=function(){return!!e})()}function Ks(e){return Ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ks(e)}function $s(e,t){return $s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$s(e,t)}var Zs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gs(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$s(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e){this.cleanupTimeout=null,this.monitor=e,this.active=this.monitor.get(),this.monitor.addListener("change",this.caller("onMonitorChange"))}},{key:"isBusy",value:function(){return!1}},{key:"get",value:function(){return this.active}},{key:"_startInactiveTimeout",value:function(){if(this.cleanupTimeout)throw new Error("cleanup timeout already started");var e=u.t.get("config");this.cleanupTimeout=setTimeout(this.caller("onInactiveTimeout"),e.WebsiteSettings.liveQueryCleanupTimeout)}},{key:"_cancelInactiveTimeout",value:function(){clearTimeout(this.cleanupTimeout),this.cleanupTimeout=null}},{key:"hurryUp",value:function(){this.cleanupTimeout&&(this._cancelInactiveTimeout(),this.onInactiveTimeout())}},{key:"onInactiveTimeout",value:function(){if(this.cleanupTimeout=null,!this.active)throw new Error("unexpected timeout reached");this.active=!1,this.dispatchEvent("change")}},{key:"onMonitorChange",value:function(){this.monitor.get()?(this.cleanupTimeout&&this._cancelInactiveTimeout(),this.active=!0,this.dispatchEvent("change")):this._startInactiveTimeout()}}])&&Qs(n.prototype,r),o&&Qs(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Xs(e){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(e)}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tc(r.key),r)}}function tc(e){var t=function(e,t){if("object"!=Xs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xs(t)?t:t+""}function nc(e,t,n){return t=ic(t),function(e,t){if(t&&("object"===Xs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rc()?Reflect.construct(t,n||[],ic(e).constructor):t.apply(e,n))}function rc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rc=function(){return!!e})()}function oc(){return oc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ic(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},oc.apply(this,arguments)}function ic(e){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ic(e)}function ac(e,t){return ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ac(e,t)}var uc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nc(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,n){if(oc(ic(t.prototype),"initialize",this).call(this),this.dataSources=e,this.combineCallback=n,!Array.isArray(e))throw new Error("dataSources must be an array");this.busy=!0,this._someDataSourceIsBusy()?rs.callWhenReady(e,this.caller("onDataSourcesReady")):this.onDataSourcesReady()}},{key:"uninit",value:function(){for(var e=0;e<this.dataSources.length;++e)this.busy||this.dataSources[e].removeListener("change",this.caller("onDataSourceChange"));this.dataSources=[]}},{key:"notifyWaiting",value:function(){for(var e=0;e<this.dataSources.length;++e)this.dataSources[e].notifyWaiting&&this.dataSources[e].notifyWaiting()}},{key:"_someDataSourceIsBusy",value:function(){for(var e=0;e<this.dataSources.length;++e)if(this.dataSources[e].isBusy())return!0;return!1}},{key:"onDataSourcesReady",value:function(){this.busy=!1,this.data=this._calculateData();for(var e=0;e<this.dataSources.length;++e)this.dataSources[e].addListener("change",this.caller("onDataSourceChange"));this.dispatchEvent("busystatechange")}},{key:"onDataSourceChange",value:function(e){if(!this.busy){var t=this.data;this.data=this._calculateData(),this.data!=t&&this.dispatchChange()}}},{key:"isBusy",value:function(){return this.busy}},{key:"get",value:function(){return this.data}},{key:"isEmpty",value:function(){return 0==this.data.length}},{key:"_calculateData",value:function(){for(var e=[],t=0;t<this.dataSources.length;++t)e.push(this.dataSources[t].get());return this.combineCallback(e)}},{key:"removeDependencyOf",value:function(e){for(var t=0;t<this.dataSources.length;++t)this.dataSources[t].removeDependencyOf&&this.dataSources[t].removeDependencyOf(e)}},{key:"addDependencyOf",value:function(e){for(var t=0;t<this.dataSources.length;++t)this.dataSources[t].addDependencyOf&&this.dataSources[t].addDependencyOf(e)}}],r&&ec(n.prototype,r),o&&ec(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(h);function lc(e){return lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(e)}function sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cc(r.key),r)}}function cc(e){var t=function(e,t){if("object"!=lc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lc(t)?t:t+""}function fc(e,t,n){return t=yc(t),function(e,t){if(t&&("object"===lc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pc()?Reflect.construct(t,n||[],yc(e).constructor):t.apply(e,n))}function pc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pc=function(){return!!e})()}function dc(){return dc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},dc.apply(this,arguments)}function yc(e){return yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yc(e)}function hc(e,t){return hc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hc(e,t)}u.t.get("DEBUG_MODE")&&(uc.prototype.getDomNodesToHighlight=function(){for(var e=[],t=0;t<this.dataSources.length;++t)this.dataSources[t].getDomNodesToHighlight&&(e=e.concat(this.dataSources[t].getDomNodesToHighlight()));return e});var vc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fc(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hc(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e){dc(yc(t.prototype),"initialize",this).call(this,e,this.caller("combineValues"))}},{key:"combineValues",value:function(e){for(var t=0;t<e.length;++t)if(e[t])return!0;return!1}}],r&&sc(n.prototype,r),o&&sc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(uc);function bc(e){return bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(e)}function mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gc(r.key),r)}}function gc(e){var t=function(e,t){if("object"!=bc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bc(t)?t:t+""}function _c(e,t,n){return t=Oc(t),function(e,t){if(t&&("object"===bc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wc()?Reflect.construct(t,n||[],Oc(e).constructor):t.apply(e,n))}function wc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wc=function(){return!!e})()}function Oc(e){return Oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oc(e)}function Sc(e,t){return Sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sc(e,t)}var Ec=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_c(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sc(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(){this.childWidgets=[],this.active=!1}},{key:"isBusy",value:function(){return!1}},{key:"onChildWidgetsChange",value:function(){this.childWidgets.length>0?this.addIdlenessListener():this.removeIdlenessListener(),this.dispatchEvent("domnodestohighlightchange"),this.updateIsActive()}},{key:"calculateIsActive",value:function(){return this.childWidgets.length>0&&"xidle"!=u.t.get("browserWindow").getUserIdleness()}},{key:"updateIsActive",value:function(){var e=this.calculateIsActive();e!=this.active&&(this.active=e,this.dispatchEvent("change"))}},{key:"get",value:function(){return this.active}},{key:"addIdlenessListener",value:function(){this.userIdleChangelistenerWasAdded||(u.t.get("browserWindow").addListener("useridlechange",this.caller("updateIsActive")),this.userIdleChangelistenerWasAdded=!0)}},{key:"removeIdlenessListener",value:function(){this.userIdleChangelistenerWasAdded&&(u.t.get("browserWindow").removeListener("useridlechange",this.caller("updateIsActive")),this.userIdleChangelistenerWasAdded=!1)}},{key:"add",value:function(e){this.childWidgets.push(e),this.onChildWidgetsChange()}},{key:"remove",value:function(e){if(!ao.w.remove(this.childWidgets,e))throw new Error("widgetWasNotBeingWatched");this.onChildWidgetsChange()}},{key:"uninit",value:function(){this.childWidgets.length>0&&this.removeIdlenessListener()}},{key:"getDomNodesToHighlight",value:function(){for(var e=[],t=0;t<this.childWidgets.length;++t)if(this.childWidgets[t].getDomNode){var n=this.childWidgets[t].getDomNode();n&&e.push(n)}return e}}],r&&mc(n.prototype,r),o&&mc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Pc(e){return Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(e)}function kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tc(r.key),r)}}function Tc(e){var t=function(e,t){if("object"!=Pc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pc(t)?t:t+""}function jc(e,t,n){return t=Cc(t),function(e,t){if(t&&("object"===Pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ic()?Reflect.construct(t,n||[],Cc(e).constructor):t.apply(e,n))}function Ic(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ic=function(){return!!e})()}function Fc(){return Fc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fc.apply(this,arguments)}function Cc(e){return Cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cc(e)}function Dc(e,t){return Dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dc(e,t)}var Rc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jc(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dc(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n){if(Fc(Cc(t.prototype),"initialize",this).call(this,null,!0),this.actionCall=e,this.sendingRemote=null,this.fetchDuration=null,this.activeMonitor=Peg(new Zs(new vc([this.widgetsActiveMonitor=new Ec,this.keepAlive=new Hs(!1),this.mustLoadOnceDataSource=new Hs(!0)])),{onchange:this.caller("onActiveMonitorChange")}),n)this._addRemoteListener(n.listenerNumber,n.addListenerOutput),this.onDataReceive(n.data);else{if(!this.activeMonitor.get())throw new Error("activeMonitorShouldStartActive");this._fetchAndStartListeningIfNecessary()}}},{key:"setKeepAlive",value:function(e){this.keepAlive.set(e)}},{key:"getActiveMonitorToHurryUp",value:function(){return this.activeMonitor}},{key:"getFetchDuration",value:function(){return this.fetchDuration}},{key:"forceRefetch",value:function(){this.sendingRemote||(this.sendingRemote=Peg(new Te(this.actionCall),{onreceive:this.caller("onGetDataAndStartListeningReceive"),onerror:this.caller("onError")}))}},{key:"onActiveMonitorChange",value:function(){this.activeMonitor.get()?this._fetchAndStartListeningIfNecessary():this._stopListening()}},{key:"_deleteRemoteListenerIfPresent",value:function(){this.remoteListener&&(this.remoteListener.removeListener("remove",this.caller("onRemoteListenerRemove")),this.remoteListener.setParentObject(null),this.Delete("remoteListener"))}},{key:"_addRemoteListener",value:function(e,t){this._deleteRemoteListenerIfPresent(),this.remoteListener=e?this._createRemoteListener(e,t):this._addRemoteListenerToServer(),this.remoteListener.setParentObject(this),this.remoteListener.addListener("remove",this.caller("onRemoteListenerRemove"))}},{key:"_createRemoteListener",value:function(e,t){var n=u.t.get("server").addRemoteListener(this.actionCall.getServerClassName(),"change",this.caller("onDataReceive"),null,null,!0,!1,e);return n.setResponse(t),n}},{key:"_addRemoteListenerToServer",value:function(){var e=this.actionCall.getServerClassName();if(this.actionCall.getInstanceProperties()){var t=this.actionCall.getMessageToSend();return t[0]="O"+e+"."+this.actionCall.method,u.t.get("server").addRemoteListener(e,"change",this.caller("onDataReceive"),this.actionCall.filter,t)}return u.t.get("server").addRemoteListener(e,"change",this.caller("onDataReceive"))}},{key:"onRemoteListenerRemove",value:function(){this._deleteRemoteListenerIfPresent(),this.activeMonitor.get()?this._fetchAndStartListeningIfNecessary():this.dispatchEvent("expire")}},{key:"onError",value:function(e){this.sendingRemote=null,this._stopListening(),this.dispatchEvent("error",e)}},{key:"onDataReceive",value:function(e){if(this.set(e),this.mustLoadOnceDataSource.set(!1),!this.isBusy()){var t=this._isPotentialUnneededCallback();t&&ho.getInstance().notifyPotentialUnneededCallback(t,this.actionCall)}this.setIsBusy(!1)}},{key:"_isPotentialUnneededCallback",value:function(){var e={};return this.remoteListener||(e.noRemoteListener=1),"xidle"===u.t.get("browserWindow").getUserIdleness()&&(e.tabIsIdle=1),this.hadDependencies&&this.widgetsActiveMonitor&&0===this.widgetsActiveMonitor.childWidgets.length&&(e.notInDom=1),"hidden"===document.visibilityState&&(e.tabNotVisible=1),!!Object.values(e).some((function(e){return e}))&&e}},{key:"_fetchAndStartListeningIfNecessary",value:function(){this.sendingRemote||(this.remoteListener?this.remoteListener.isRemoving()&&this.remoteListener.cancelRemove():this.sendingRemote=Peg(new Te(this.actionCall),{onreceive:this.caller("onGetDataAndStartListeningReceive"),onerror:this.caller("onError")}))}},{key:"_stopListening",value:function(){this.remoteListener&&!this.remoteListener.isRemoving()&&this.remoteListener.removeLater()}},{key:"addDependencyOf",value:function(e){this.hadDependencies=!0,this.widgetsActiveMonitor.add(e)}},{key:"removeDependencyOf",value:function(e){this.widgetsActiveMonitor.remove(e)}},{key:"uninit",value:function(){this._stopListening(),this.remoteListener&&this._deleteRemoteListenerIfPresent(),this.Delete("widgetsActiveMonitor")}},{key:"onGetDataAndStartListeningReceive",value:function(){var e=this.sendingRemote.get();this.fetchDuration=this.sendingRemote.getFetchDuration(),this.Delete("sendingRemote"),this._addRemoteListener(e[1],e[2]),this.onDataReceive(e[0])}},{key:"getApiCall",value:function(){return this.actionCall}},{key:"getDomNodesToHighlight",value:function(){return this.widgetsActiveMonitor.getDomNodesToHighlight()}}])&&kc(n.prototype,r),o&&kc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Hs);function Ac(e){return Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(e)}function Nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xc(r.key),r)}}function xc(e){var t=function(e,t){if("object"!=Ac(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ac(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ac(t)?t:t+""}function Lc(e,t,n){return t=Bc(t),function(e,t){if(t&&("object"===Ac(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mc()?Reflect.construct(t,n||[],Bc(e).constructor):t.apply(e,n))}function Mc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mc=function(){return!!e})()}function Vc(){return Vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Vc.apply(this,arguments)}function Bc(e){return Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bc(e)}function Wc(e,t){return Wc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wc(e,t)}Rc.prototype.dontGuessNamesList=["activeMonitor","widgetsActiveMonitor"];var Uc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lc(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wc(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,n,r,o,i,a){Vc(Bc(t.prototype),"initialize",this).call(this,e,n,r,o),this.filter=i,this.noCache=a}},{key:"getTypeLetter",value:function(){return"L"}},{key:"getDescriptionPrefix",value:function(){var e="liveview:";return this.noCache&&(e+="nocache:"),e}},{key:"createDataSource",value:function(e){return new Rc(this,e)}},{key:"getMessageToSend",value:function(){var e=Ns.prototype.getMessageToSend.call(this);return e.push(this.filter),this.noCache&&e.push("nocache"),e}},{key:"getInnerValue",value:function(e){return e[0]}},{key:"replaceInnerValue",value:function(e,t){return e[0]=t,e}}])&&Nc(n.prototype,r),o&&Nc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ns);n(7918);function Yc(e){return Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(e)}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zc(r.key),r)}}function zc(e){var t=function(e,t){if("object"!=Yc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yc(t)?t:t+""}function Qc(e,t,n){return t=Gc(t),function(e,t){if(t&&("object"===Yc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qc()?Reflect.construct(t,n||[],Gc(e).constructor):t.apply(e,n))}function qc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qc=function(){return!!e})()}function Gc(e){return Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gc(e)}function Jc(e,t){return Jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jc(e,t)}var Kc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qc(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jc(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.value=null,this.setAsActive()}},{key:"get",value:function(){return this.value}},{key:"isBusy",value:function(){return!1}},{key:"_clearTimeoutIfPresent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},{key:"_setTimeoutReplacing",value:function(e,t){this._clearTimeoutIfPresent();var n=this;this.timeout=setTimeout((function(){n.timeout=null,e()}),t)}},{key:"_setIfDifferent",value:function(e){this.value!=e&&(this.value=e,this.dispatchEvent("change"))}},{key:"setAsActive",value:function(){this._clearTimeoutIfPresent(),this.lastActiveDate=v.L.now(),this._setIfDifferent("active"),this._setTimeoutReplacing(this.caller("onIdleTimeout"),t.IDLE_MS)}},{key:"onIdleTimeout",value:function(){this._setIfDifferent("idle"),this._setTimeoutReplacing(this.caller("onXIdleTimeout"),t.XIDLE_MS-(v.L.now()-this.lastActiveDate))}},{key:"onXIdleTimeout",value:function(){this._setIfDifferent("xidle")}}])&&Hc(n.prototype,r),o&&Hc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function $c(e){return $c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(e)}function Zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xc(r.key),r)}}function Xc(e){var t=function(e,t){if("object"!=$c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$c(t)?t:t+""}function ef(e,t,n){return t=nf(t),function(e,t){if(t&&("object"===$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tf()?Reflect.construct(t,n||[],nf(e).constructor):t.apply(e,n))}function tf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tf=function(){return!!e})()}function nf(e){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nf(e)}function rf(e,t){return rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rf(e,t)}Kc.IDLE_MS=3e5,Kc.XIDLE_MS=18e5;var of=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ef(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rf(e,t)}(t,e),n=t,o=[{key:"topDocument",value:function(){return window.tinkerman?top.document:window.document}}],(r=[{key:"initialize",value:function(){this.startingToUnload=!1,this.unloading=!1,this.userIsIdleDetector=Peg(new Kc,{onchange:this.dispatcher("useridlechange")}),this.innerSize=null,Mt.addEventListener(window,"beforeunload",this.caller("onBeforeUnload")),Mt.addEventListener(window,"unload",this.caller("onUnload")),Mt.addEventListener(window,"resize",this.caller("onResize")),Mt.addEventListener(document,"keypress",this.caller("onKeypress")),Mt.addEventListener(document,"mousemove",this.caller("onMousemove")),Mt.addEventListener(document,"click",this.caller("onClick"))}},{key:"getUserIdleness",value:function(){return this.userIsIdleDetector.get()}},{key:"reload",value:function(){if(u.t.get("TEST_ENV"))throw new Error("cannotReloadBrowserOnATest");t.topDocument().location.reload()}},{key:"isUnloading",value:function(){return this.unloading}},{key:"getInnerSize",value:function(){return this.innerSize?this.innerSize:this.innerSize=this._getCurrentSize()}},{key:"updateInnerSize",value:function(){var e=this._getCurrentSize();!this.innerSize||this.innerSize.w===e.w&&this.innerSize.h===e.h||(this.innerSize=e,this.dispatchEvent("resize"))}},{key:"_beforeUnloadTimeout",value:function(){this.dispatchEvent("beforeunloadtimeout"),this.startingToUnload=!1}},{key:"_getCurrentSize",value:function(){var e,t,n,r=((e=document.documentElement)||(e=document.body.parentNode))&&"number"==typeof e.clientWidth?e:document.body,o=document.body;return"number"==typeof r.clientWidth?{w:r.clientWidth,h:r.clientHeight}:r===o||(t=Math.max(r.clientWidth,o.clientWidth))>self.innerWidth||(n=Math.max(r.clientHeight,o.clientHeight))>self.innerHeight?{w:o.clientWidth,h:o.clientHeight}:{w:t,h:n}}},{key:"onClick",value:function(e){this.userIsIdleDetector.setAsActive()}},{key:"onMousemove",value:function(e){this.userIsIdleDetector.setAsActive()}},{key:"onKeypress",value:function(e){27==e.keyCode&&Mt.preventDefault(e),this.userIsIdleDetector.setAsActive()}},{key:"onUnload",value:function(){this.unloading=!0,this.dispatchEvent("unload")}},{key:"onBeforeUnload",value:function(){this.startingToUnload||(this.dispatchEvent("beforeunload"),this.startingToUnload=!0,setTimeout(this.caller("_beforeUnloadTimeout"),1e4))}},{key:"onResize",value:function(){this.updateInnerSize()}}])&&Zc(n.prototype,r),o&&Zc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function af(e){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(e)}function uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lf(r.key),r)}}function lf(e){var t=function(e,t){if("object"!=af(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==af(t)?t:t+""}function sf(e,t,n){return t=ff(t),function(e,t){if(t&&("object"===af(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cf()?Reflect.construct(t,n||[],ff(e).constructor):t.apply(e,n))}function cf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cf=function(){return!!e})()}function ff(e){return ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ff(e)}function pf(e,t){return pf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pf(e,t)}var df=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sf(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pf(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new os),t.instance}}],(r=null)&&uf(n.prototype,r),o&&uf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function yf(e){return yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(e)}function hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vf(r.key),r)}}function vf(e){var t=function(e,t){if("object"!=yf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yf(t)?t:t+""}var bf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"initialize",value:function(){this.tasks=new Map,Mt.addEventListener(of.topDocument(),"visibilitychange",this.caller("onPageVisibilityChange")),df.getInstance().add(this.busyHandler=new Ye)}},{key:"isHidden",value:function(){return"hidden"===of.topDocument().visibilityState}},{key:"enqueue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re.E.uuidv4();if(this.tasks.has(t))throw new Error("PageVisibilityTaskQueueDuplicatedKey: duplicated key "+t);if("function"!=typeof e)throw new Error("PageVisibilityTaskQueueNotAFunction: Task must be a function");this.isHidden()?(this.tasks.set(t,e),this.busyHandler.setAsBusy()):this._runTask(e)}},{key:"remove",value:function(e){return this.tasks.delete(e)}},{key:"getTaskById",value:function(e){return this.tasks.get(e)}},{key:"_processQueue",value:function(){var e=this;this.tasks.forEach((function(t){return e._runTask(t)})),this.tasks.clear(),this.busyHandler.setAsFree()}},{key:"_runTask",value:function(e){e()}},{key:"onPageVisibilityChange",value:function(){this.isHidden()||this._processQueue()}}],r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"callWhenVisible",value:function(t,n){e.getInstance().enqueue(t,n)}}],n&&hf(t.prototype,n),r&&hf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();n(89560);function mf(e){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(e)}function gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ef(r.key),r)}}function Sf(e,t,n){return t&&Of(e.prototype,t),n&&Of(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ef(e){var t=function(e,t){if("object"!=mf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mf(t)?t:t+""}function Pf(e,t,n){return t=Tf(t),function(e,t){if(t&&("object"===mf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kf()?Reflect.construct(t,n||[],Tf(e).constructor):t.apply(e,n))}function kf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kf=function(){return!!e})()}function Tf(e){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tf(e)}function jf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&If(e,t)}function If(e,t){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},If(e,t)}var Ff=function(e){function t(){return wf(this,t),Pf(this,t,arguments)}return jf(t,e),Sf(t,[{key:"initialize",value:function(){var e=u.t.get("serverCredentials");this.serializer=u.t.get("richJson"),this.cacheMap=new Map,this.listenerMap=new Map,this.validationMap=new Map,this.publicSessionName=e.publicSessionName,this.channel=new BroadcastChannel("livedatasourcecache"+this.publicSessionName),this.channel.addEventListener("message",this.caller("_resolveMessage")),this.channel.addEventListener("messageerror",this.caller("onMessageError")),this._broadcastMsg(t.ASK_FOR_ALL),this.intervalId=setInterval(this.caller("_broadcastStillAlive"),t.TTL)}},{key:"add",value:function(e,t){var n=this._hashApiCall(e);this.listenerMap.has(n)||(this.listenerMap.set(n,Peg(new Cf(n,t),{onchange:this.caller("_saveDatasourceToMap")})),t.isBusy()||this._saveDatasourceToMap({hash:n,data:t}))}},{key:"delete",value:function(e){var t=this._hashApiCall(e),n=this.listenerMap.get(t);this._removeFromListenerMap(t),n&&(n.removeListener("change",this.caller("_saveDatasourceToMap")),Delete(n)),this.cacheMap.delete(t)}},{key:"get",value:function(e){var n=this._hashApiCall(e),r=this.cacheMap.get(n),o=!(!r||!r.timestamp)&&Date.now()-r.timestamp<t.CACHE_TIMEOUT;return r&&o?r.data:null}},{key:"flush",value:function(){this.listenerMap.forEach((function(e){return Delete(e)})),this.listenerMap=new Map}},{key:"validate",value:function(e,n){var r=this,o=t.NEXT_ID++,i=this.publicSessionName+o,a=this._hashApiCall(e),u=setTimeout((function(){var e=r.validationMap.get(i);r.validationMap.delete(i),e&&e.callback(!1)}),t.VALIDATION_TIMEOUT);this._broadcastMsg(t.ASK_FOR_VALIDATE,{id:i,hash:a}),this.validationMap.set(i,{callback:n,timeoutId:u})}},{key:"_removeFromListenerMap",value:function(e){this.listenerMap.delete(e),this._broadcastMsg(t.DISPOSE_DATASOURCE,{hash:e,payload:null})}},{key:"_saveDatasourceToMap",value:function(e){var n=e.hash,r=e.data;try{var o=this.serializer.serialize(r.get());this._broadcastMsg(t.NEW_DATASOURCE,{hash:n,data:o})}catch(e){this._removeFromListenerMap(n)}}},{key:"_hashApiCall",value:function(e){return this.serializer.serialize(e.getMessageToSend(),!0)}},{key:"_broadcastMsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.channel.postMessage({operation:e,payload:t})}},{key:"_resolveMessage",value:function(e){var n=this,r=e.data,o=r.operation,i=r.payload;switch(o){case t.RESPONSE_FOR_ALL:i.forEach((function(e){var t=gf(e,2),r=t[0],o=t[1];n._saveToCache(r,o)}));break;case t.NEW_DATASOURCE:this._saveToCache(i.hash,i.data);break;case t.DISPOSE_DATASOURCE:this.cacheMap.delete(i.hash);break;case t.ASK_FOR_ALL:this._broadcastMsg(t.RESPONSE_FOR_ALL,this._serializeCurrentLiveCache());break;case t.ASK_FOR_VALIDATE:var a=i.hash;this.listenerMap.get(a)&&this._broadcastMsg(t.RESPONSE_FOR_VALIDATE,{id:i.id});break;case t.RESPONSE_FOR_VALIDATE:var u=i.id,l=this.validationMap.get(u);this.validationMap.delete(u),l&&(clearTimeout(l.timeoutId),l.callback(!0))}}},{key:"_saveToCache",value:function(e,t){var n=this,r=Date.now();try{this.serializer.unserializeWithModelSupport(t,(function(t){n.cacheMap.set(e,{data:t,timestamp:r})}))}catch(e){if(!1===e.message.startsWith(Er.INVALID_JSON))throw e}}},{key:"_broadcastStillAlive",value:function(){this._broadcastMsg(t.RESPONSE_FOR_ALL,this._serializeCurrentLiveCache())}},{key:"_serializeCurrentLiveCache",value:function(){var e=this;return Array.from(this.listenerMap.entries()).map((function(t){var n=gf(t,2),r=n[0],o=n[1];try{return[r,e.serializer.serialize(o.getValue())]}catch(e){return null}})).filter((function(e){return e}))}},{key:"onMessageError",value:function(){u.t.get("defaultErrorHandler").reportAsException("An error message has been raise on BroadcastChannel API")}},{key:"uninit",value:function(){this.channel.removeEventListener("message",this.caller("_resolveMessage")),this.channel.removeEventListener("messageerror",this.caller("onMessageError")),clearInterval(this.intervalId)}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}])}(i.y),Cf=function(e){function t(){return wf(this,t),Pf(this,t,arguments)}return jf(t,e),Sf(t,[{key:"initialize",value:function(e,t){var n=this;this.hash=e,this.datasource=Peg(t,{onchange:this.caller("_updateData")}),this.datasource.isBusy()?rs.callWhenReady([this.datasource],(function(){n._updateData()})):this._updateData()}},{key:"_updateData",value:function(){var e=new a.C({hash:this.hash,data:this.datasource});this.dispatchEvent("change",e)}},{key:"getValue",value:function(){return this.datasource.get()}},{key:"uninit",value:function(){this.datasource.removeListener("change",this.caller("_updateData"))}}])}(i.y);function Df(e){return Df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(e)}function Rf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Af(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xf(r.key),r)}}function Nf(e,t,n){return t&&Af(e.prototype,t),n&&Af(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xf(e){var t=function(e,t){if("object"!=Df(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Df(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Df(t)?t:t+""}function Lf(e,t,n){return t=Vf(t),function(e,t){if(t&&("object"===Df(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mf()?Reflect.construct(t,n||[],Vf(e).constructor):t.apply(e,n))}function Mf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mf=function(){return!!e})()}function Vf(e){return Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vf(e)}function Bf(e,t){return Bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bf(e,t)}Ff.ASK_FOR_ALL="ASK_FOR_ALL",Ff.RESPONSE_FOR_ALL="RESPONSE_FOR_ALL",Ff.NEW_DATASOURCE="NEW_DATASOURCE",Ff.DISPOSE_DATASOURCE="DISPOSE_DATASOURCE",Ff.ASK_FOR_VALIDATE="ASK_FOR_VALIDATE",Ff.RESPONSE_FOR_VALIDATE="RESPONSE_FOR_VALIDATE",Ff.TTL=1e4,Ff.CACHE_TIMEOUT=12e3,Ff.VALIDATION_TIMEOUT=300,Ff.NEXT_ID=0;var Wf=function(e){function t(){return Rf(this,t),Lf(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bf(e,t)}(t,e),Nf(t,[{key:"initialize",value:function(){var e=u.t.get("config").ui.experimental.useSharedCache;this.coldCache=e?Ff.getInstance():new Uf,this._resetMap()}},{key:"flush",value:function(){this.map.forEach((function(e){return Delete(e)})),this._resetMap()}},{key:"has",value:function(e){return this.map.keys().includes(e)}},{key:"getActionCallHash",value:function(e){return u.t.get("richJson").serialize(e.getMessageToSend(),!0)}},{key:"getOrCreateSharedDataSource",value:function(e,t){var n=this,r=this.getActionCallHash(e);if(this.map.has(r))t&&Delete(t);else{var o;if(t)o=t;else{var i=this.coldCache.get(e);o=e.createDataSource(i?{data:i}:null),i&&this.coldCache.validate(e,(function(e){if(!e){if(o.Deleted)return;o.forceRefetch()}}))}this.coldCache.add(e,o),o.addListenerOnce("expire",(function(){if(!n.map.has(r))throw new Error("Double remove");n.map.delete(r),n.coldCache.delete(e)})),this.map.set(r,o)}return this.map.get(r)}},{key:"_resetMap",value:function(){this.map=new Map,this.coldCache.flush()}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}])}(i.y),Uf=function(){return Nf((function e(){Rf(this,e)}),[{key:"get",value:function(){return null}},{key:"delete",value:function(){}},{key:"add",value:function(){}},{key:"flush",value:function(){}}])}();function Yf(e){return Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(e)}function Hf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qf(r.key),r)}}function qf(e){var t=function(e,t){if("object"!=Yf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yf(t)?t:t+""}function Gf(e,t,n){return t=$f(t),function(e,t){if(t&&("object"===Yf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jf()?Reflect.construct(t,n||[],$f(e).constructor):t.apply(e,n))}function Jf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jf=function(){return!!e})()}function Kf(){return Kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Kf.apply(this,arguments)}function $f(e){return $f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$f(e)}function Zf(e,t){return Zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zf(e,t)}var Xf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gf(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zf(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,n,r,o){Kf($f(t.prototype),"initialize",this).call(this),this.id=e,this.online=r,this.startTime=v.L.now(),this.listeners={},this.nextListenerNumber=1,this.remoteListenersToRemove=[],this.delayedResponseManager=new Su,this.tunnel=new Ql(this.id,n,o),this.busyStateMonitor=Peg(new os,{onbusystatechange:this.dispatcher("busystatechange")}),this.busyStateMonitor.add(this.delayedResponseManager),this.busyStateMonitor.add(this.tunnel)}},{key:"registerDelayedResponse",value:function(e){this.delayedResponseManager.add(e)}},{key:"callBeforeExecLater",value:function(e){this.tunnel.callBeforeExecLater(e)}},{key:"ping",value:function(e,t){return this.assertActive(),this.tunnel.ping(e,t)}},{key:"exec",value:function(e,t,n){this.assertActive();var r=this.tunnel.exec(e,t,n);return t||this.removePendingListeners(),r}},{key:"setIsOnline",value:function(e){this.assertActive(),this.online=e,e?this.removePendingListeners():this.cancelRemoveListenersTimeoutIfPresent()}},{key:"getStartTime",value:function(){return this.startTime}},{key:"flushAndHold",value:function(){this.tunnel.flushAndHold()}},{key:"flushAndRelease",value:function(){this.tunnel.flushAndRelease()}},{key:"onAddRemoteListenerError",value:function(e,t){var n=this._getListenerFromRemoteListener(e);this._removeRemoteListenerFromMap(e),n.setErrorResponse(t)}},{key:"_addRemoteListenerToServer",value:function(e,t,n,r,o,i){var a=this;this.tunnel.exec(new aa(new Wr(t,"addListener",[n,e.getListenerNumber(),r,o,i]),(function(t){return e.setResponse(t)}),(function(){return a.onAddRemoteListenerError(e)})))}},{key:"addRemoteListener",value:function(e,t,n,r,o,i,a,u){this.assertActive();var l=u||this.nextListenerNumber++,s=new ds(this,l,e,t,n);return ho.getInstance().notifyRemoteListenerAdd(s),l in this.listeners&&this.throwRemoteListenerError(this.listeners[l],"duplicateListenerNumber (new: "+s.getDescription()+"), old: "),this.listeners[l]=s,i||this._addRemoteListenerToServer(s,e,t,r,o,a),s}},{key:"cancelRemoveListenersTimeoutIfPresent",value:function(){this.removeListenersTimeout&&(clearTimeout(this.removeListenersTimeout),this.removeListenersTimeout=null)}},{key:"removePendingListeners",value:function(){this.assertActive(),this.cancelRemoveListenersTimeoutIfPresent();var e=this.remoteListenersToRemove;this.remoteListenersToRemove=[];for(var t=0;t<e.length;++t)this._removeRemoteListenerWithoutDoingChecks(e[t])}},{key:"onRemoveListenersTimeout",value:function(){this.removeListenersTimeout=null,this.removePendingListeners()}},{key:"assertActive",value:function(){if(this.deleting)throw new Error("pageSession is being deleted");if(this.Deleted)throw new Error("pageSession is deleted")}},{key:"throwRemoteListenerError",value:function(e,t){throw new Error(t+" ("+e.getDescription()+")")}},{key:"cancelRemoveRemoteListener",value:function(e){this.assertActive(),ao.w.remove(this.remoteListenersToRemove,e)||this.throwRemoteListenerError(e,"remoteListener wasn't being removed")}},{key:"_removeRemoteListenerFromServer",value:function(e){this.tunnel.exec(new aa(new Wr(e.getServerClassName(),"removeListener",[e.getListenerNumber()])))}},{key:"_removeRemoteListenerWithoutDoingChecks",value:function(e){var t=this._getListenerFromRemoteListener(e);this._removeRemoteListenerFromServer(e),this._removeRemoteListenerFromMap(e),t.setAsRemoved()}},{key:"_removeRemoteListenerFromMap",value:function(e){delete this.listeners[e.getListenerNumber()],e.setAsRemoved()}},{key:"_getListenerFromRemoteListener",value:function(e){return this.listeners[e.getListenerNumber()]}},{key:"_assertActiveAndRemovableListener",value:function(e){this.assertActive();var t=e.getListenerNumber();-1!=this.remoteListenersToRemove.indexOf(e)&&this.throwRemoteListenerError(e,"cannotRemoveAlreadyToBeRemovedListener"),this.listeners[t]||this.throwRemoteListenerError(e,"cannotRemoveNonExistentListener")}},{key:"removeRemoteListenerNow",value:function(e){this._assertActiveAndRemovableListener(e),this._removeRemoteListenerWithoutDoingChecks(e)}},{key:"removeRemoteListenerLater",value:function(e){var t=u.t.get("config");this._assertActiveAndRemovableListener(e),this.remoteListenersToRemove.push(e),this.online&&!this.removeListenersTimeout&&(this.removeListenersTimeout=setTimeout(this.caller("onRemoveListenersTimeout"),t.WebsiteSettings.liveQueryCleanupTimeout/3))}},{key:"_sendDataToEventHandler",value:function(e,t){this.listeners[e]&&this.listeners[e].handleEvent(t)}},{key:"_handleListenerEvent",value:function(e,t){var n=this;if(this.listeners[e])if(t.msg instanceof Ne){var r=t.msg;r.addListener("load",(function(t){return n._sendDataToEventHandler(e,t.data)})),this.registerDelayedResponse(r)}else this._sendDataToEventHandler(e,t.msg)}},{key:"handleEvent",value:function(e){this.assertActive();var t=e.dst;if("number"==typeof t){if(e.serverCallback)return this._scheduleServerCallback(e);this._handleListenerEvent(t,e)}else if("delayedresponse"==t)this.delayedResponseManager.exec(e.msg);else{if("servererror"!=t)throw new Error("Unknown dst: "+t);ho.getInstance().notifyServerError(e.msg.randomCode)}}},{key:"_scheduleServerCallback",value:function(e){var t=this,n=JSON.parse(e.serverCallback);e.serverCallback=null;var r=Hf(n,3),o=r[0],i=r[1],a=r[2],l=this._getActionCall(o,i,a),s=Wf.getInstance().getActionCallHash(l);if(bf.getInstance().getTaskById(s))return null;var c=function(n){e.msg=null==n?e.msg:n,t._handleListenerEvent(e.dst,e)},f=function(){};bf.callWhenVisible((function(){l instanceof Uc&&!Wf.getInstance().has(s)||u.t.get("server").execCall(l,c,f)}),s)}},{key:"_getActionCall",value:function(e,t,n){t=t||[],n=n||{};var r=Hf(e.split("."),2),o=r[0],i=r[1],a=o[0],u=o.substring(1);switch(a){case"R":return new ks(u,n);case"O":return new Ns(u,i,t,n);case"L":return new Uc(u,i,t,n);default:return new Wr(u,i,t)}}},{key:"handleEventError",value:function(e,t){this.listeners[e.dst]&&this.listeners[e.dst].handleEventError(t)}},{key:"isBusy",value:function(){return this.busyStateMonitor.isBusy()}},{key:"uninit",value:function(){this.deleting=!0,this.cancelRemoveListenersTimeoutIfPresent();var e=bs.shallowCloneMap(this.listeners);for(var t in e)e[t].setAsRemoved();this.listeners={},this.Delete("tunnel"),this.deleting=!1}}],r&&Qf(n.prototype,r),o&&Qf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ep(e){return ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,np(r.key),r)}}function np(e){var t=function(e,t){if("object"!=ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ep(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ep(t)?t:t+""}function rp(e,t,n){return t=ip(t),function(e,t){if(t&&("object"===ep(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,op()?Reflect.construct(t,n||[],ip(e).constructor):t.apply(e,n))}function op(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(op=function(){return!!e})()}function ip(e){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ip(e)}function ap(e,t){return ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ap(e,t)}var up=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ap(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,t,n){this.requestLoadHandler=new Vi(n),this.pageSession=null,this.online=!0,this.usePermanentConnection=t,this.pageSessionFrequencyValidator=new Zi,this.setTabId(e),this.idlenessChangedAndNotNotified=!1,u.t.get("browserWindow").addListener("useridlechange",this.caller("onUserIdleChange"))}},{key:"sendIdlenessToServer",value:function(){this.idlenessChangedAndNotNotified=!1,this.exec(new aa(new Wr("ICO_session_PageSession","setIdleness",[u.t.get("browserWindow").getUserIdleness()])))}},{key:"onUserIdleChange",value:function(){this.online?this.sendIdlenessToServer():this.idlenessChangedAndNotNotified=!0}},{key:"isBusy",value:function(){return this.requesting||this.pageSession&&this.pageSession.isBusy()}},{key:"setIsOnline",value:function(e){this.online=e,this.pageSession&&(this.pageSession.setIsOnline(e),this.idlenessChangedAndNotNotified&&this.sendIdlenessToServer())}},{key:"callBeforeExecLater",value:function(e){this.pageSession.callBeforeExecLater(e)}},{key:"ping",value:function(e,t){return this.pageSession.ping(e,t)}},{key:"exec",value:function(e,t,n){return this.pageSession.exec(e,t,n)}},{key:"getPageSession",value:function(){return this.pageSession}},{key:"getPageSessionStartTime",value:function(){return this.pageSession?this.pageSession.getStartTime():null}},{key:"getTabId",value:function(){return this.pageSessionId}},{key:"setTabId",value:function(e,t){this.isBusy();var n=this.getAndEndOldPageSessionIfPresentWithoutDeletingIt();null==e?(this.pageSessionId=null,t||this.requestNewPageSession()):this.startNewPageSession(e),n&&Delete(n),this.wasBusy!=this.isBusy()&&this.dispatchEvent("busystatechange")}},{key:"requestNewPageSession",value:function(){this.requesting||(this.requesting=!0,new pu(this.caller("onCreatePageSessionRequestLoadOk")).send())}},{key:"onCreatePageSessionRequestLoadOk",value:function(e,t){t&&u.t.get("serverCredentials").setCortex(t),this.setTabId(e),this.requesting=!1}},{key:"getAndEndOldPageSessionIfPresentWithoutDeletingIt",value:function(){if(this.pageSession){this.pageSession.removeListener("busystatechange",this.dispatcher("busystatechange"));var e=this.pageSession;return this.pageSession=null,e}return null}},{key:"onGroupedRequestLoad",value:function(e,t,n){this.requestLoadHandler.handleGroupedResponse(this.pageSession,e,t,n)}},{key:"startNewPageSession",value:function(e){var t=v.L.now();this.pageSessionFrequencyValidator.removeOldDates(t),this.pageSessionFrequencyValidator.appendDate(t),this.pageSessionFrequencyValidator.assertNotTooManyPageSessionRenews(t),this.pageSessionId=e,this.pageSession=new Xf(this.pageSessionId,this.caller("onGroupedRequestLoad"),this.online,this.usePermanentConnection),this.pageSession.addListener("busystatechange",this.dispatcher("busystatechange")),this.sendIdlenessToServer(),u.t.get("AUTO_RELOAD_FILES")&&this.addRemoteListener("test_TestUtils","filechange",this.caller("onFilechange")),this.dispatchEvent("pagesessionrenew")}},{key:"addRemoteListener",value:function(){return this.pageSession.addRemoteListener.apply(this.pageSession,arguments)}},{key:"endPageSession",value:function(){var e=u.t.get("serverCredentials");if(null!=this.pageSessionId&&!u.t.get("TEST_ENV")){var t="/_endPageSession?applicationCode="+e.getApplicationCode()+"&version="+e.getPacksVersion(),n={m:[],p:e.getPublicSessionName(),t:this.pageSessionId};fetch(t,{keepalive:!0,method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)})}}},{key:"flushAndHold",value:function(){this.pageSession.flushAndHold()}},{key:"flushAndRelease",value:function(){this.pageSession.flushAndRelease()}}],r&&tp(n.prototype,r),o&&tp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function lp(e){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(e)}function sp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cp(r.key),r)}}function cp(e){var t=function(e,t){if("object"!=lp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lp(t)?t:t+""}function fp(e,t,n){return t=dp(t),function(e,t){if(t&&("object"===lp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pp()?Reflect.construct(t,n||[],dp(e).constructor):t.apply(e,n))}function pp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pp=function(){return!!e})()}function dp(e){return dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dp(e)}function yp(e,t){return yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yp(e,t)}u.t.get("AUTO_RELOAD_FILES")&&(up.prototype.onFilechange=function(e){u.t.get("assetLoader").reloadCssAsset(e.name.replace(/\.css$/,""))});var hp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yp(e,t)}(t,e),n=t,o=[{key:"setRetryMs",value:function(e){t.retryMs=e}}],(r=[{key:"initialize",value:function(e){this.pageSessionManager=e,this.started=!1,this.attempt=0,this.interval=null,this.pingTimeout=null,this.secondsLeftToWait=null,this.tryingRequest=null}},{key:"getValue",value:function(){return{trying:!!this.tryingRequest,secondsLeftToWait:this.secondsLeftToWait}}},{key:"getSecondsLeftToWait",value:function(){return this.secondsLeftToWait}},{key:"retryNow",value:function(){this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"startToCheck",value:function(){if(this.started)throw new Error("Already checking");this.started=!0,this._ping()}},{key:"_getSecondsToWaitForAttempt",value:function(){var e=this.attempt;return 0==e?1:1==e?5:2==e||3==e?15:60}},{key:"_setInterval",value:function(){this.interval=setInterval(this.caller("onInterval"),t.retryMs)}},{key:"_clearInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"_clearIntervalAndRetry",value:function(){this.tryingRequest||(this.secondsLeftToWait=null,this._clearInterval(),this._ping())}},{key:"_clearPingTimeoutIfPresent",value:function(){this.pingTimeout&&(clearTimeout(this.pingTimeout),this.pingTimeout=null)}},{key:"_ping",value:function(){++this.attempt,this.pingTimeout=setTimeout(this.caller("onPingTimeout"),4e3),this.tryingRequest=this.pageSessionManager.ping(this.caller("onPingLoad"),this.caller("onPingError"))}},{key:"onInterval",value:function(){--this.secondsLeftToWait,this.secondsLeftToWait<=0&&this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"onPingLoad",value:function(e){this.Deleted||(this.onPingEnd(),this.dispatchEvent("online"))}},{key:"onPingEnd",value:function(e){this._clearPingTimeoutIfPresent(),this.tryingRequest=null}},{key:"onPingError",value:function(e){if(!this.Deleted)return this.onPingEnd(),this.secondsLeftToWait=this._getSecondsToWaitForAttempt(),this._setInterval(),!0}},{key:"onPingTimeout",value:function(){this.pingTimeout=null,this.tryingRequest&&this.tryingRequest.abort()}},{key:"uninit",value:function(){this.interval&&this._clearInterval(),this._clearPingTimeoutIfPresent()}}])&&sp(n.prototype,r),o&&sp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function vp(e){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(e)}function bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mp(r.key),r)}}function mp(e){var t=function(e,t){if("object"!=vp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vp(t)?t:t+""}function gp(e,t,n){return t=wp(t),function(e,t){if(t&&("object"===vp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_p()?Reflect.construct(t,n||[],wp(e).constructor):t.apply(e,n))}function _p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_p=function(){return!!e})()}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wp(e)}function Op(e,t){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Op(e,t)}hp.retryMs=1e3;var Sp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Op(e,t)}(t,e),n=t,r=[{key:"initialize",value:function(e,t,n){this.logoutUrl=n,this.status=Peg(new z,{onpollrequired:this.caller("onStatusPollRequired"),onpollrequiredend:this.caller("onStatusPollRequiredEnd"),ononline:this.caller("onStatusOnline"),onuserless:this.caller("onStatusUserLess"),onpagesessionless:this.caller("onStatusPageSessionLess"),onnotonline:this.caller("onStatusNotOnline")}),this.pageSessionManager=Peg(new up(e,t,this.status),{onpagesessionrenew:this.caller("onPagesessionrenew"),onbusystatechange:this.dispatcher("busystatechange")}),u.t.get("browserWindow").addListener("unload",this.caller("onUnload")),u.t.get("assetLoader").addListener("offline",this.caller("onAssetLoaderOffline")),u.t.get("assetLoader").addListener("packagenotloadedoffline",this.caller("onAssetLoaderPackageNotLoadedDueToOffline"))}},{key:"flushAndHold",value:function(){this.pageSessionManager.flushAndHold()}},{key:"flushAndRelease",value:function(){this.pageSessionManager.flushAndRelease()}},{key:"callBeforeExecLater",value:function(e){this.status.isOnline()?this.pageSessionManager.callBeforeExecLater(e):e()}},{key:"notifyLoginTabId",value:function(e,t,n){var r=u.t.get("serverCredentials");r.setPublicSessionName(e),r.setCortex(t),this.pageSessionManager.setTabId(n)}},{key:"notifyCouldNotLoadContentDueToOffline",value:function(e){ho.getInstance().handleRemoteException(this.status.createRemoteException(e))}},{key:"onAssetLoaderPackageNotLoadedDueToOffline",value:function(){ho.getInstance().handleRemoteException(this.status.createRemoteException("triedToLoadPackageWhileOffline"))}},{key:"onAssetLoaderOffline",value:function(){this.status.setAsOffline(),ho.getInstance().handleRemoteException(this.status.createRemoteException("couldNotLoadPackage"))}},{key:"getCredentials",value:function(){return u.t.get("serverCredentials")}},{key:"execCall",value:function(e,t,n,r){var o=new aa(e,t,n);this.status.isOnline()?this.pageSessionManager.exec(o,r):o.handleError(this.status.createRemoteException(o.getCallDescription()))}},{key:"exec",value:function(e,t){this.execCall(new Wr(e.className,e.method,e.parameters),e.onload,e.onerror,t)}},{key:"execAsync",value:function(e,t,n,r){var o=this;return new Promise((function(i,a){o.execCall(new Wr(e,t,n),i,(function(e){var t=new Error("execAsync: "+e.getTechnicalDescription());t.remoteException=e,a(t)}),r)}))}},{key:"logout",value:function(e){this.isOnline()||this._isOtherUserLogged()?(this.dispatchEvent("logout"),location.href=e?this.logoutUrl+"/"+e:this.logoutUrl):ho.getInstance().handleRemoteException(this.status.createRemoteException("logout"))}},{key:"onPagesessionrenew",value:function(e){this.status.isPageSessionLessOrUserLess()&&this.status.setAsOnline(),this.dispatchEvent("pagesessionrenew"),u.t.get("userTrail").logPageSessionRenew(),ho.getInstance().log("Page session renew")}},{key:"getPageSession",value:function(){return this.pageSessionManager.getPageSession()}},{key:"addRemoteListener",value:function(){return this.pageSessionManager.addRemoteListener.apply(this.pageSessionManager,arguments)}},{key:"getTabId",value:function(){return this.pageSessionManager.getTabId()}},{key:"getPageSessionStartTime",value:function(){return this.pageSessionManager.getPageSessionStartTime()}},{key:"onOfflineCheckerOnline",value:function(){this.status.setAsOnline()}},{key:"getOfflineChecker",value:function(){return this.offlineChecker}},{key:"isOnline",value:function(){return this.status.isOnline()}},{key:"_isOtherUserLogged",value:function(){return this.status.isOtherUserLogged()}},{key:"onStatusPollRequired",value:function(){null!=this.pageSessionManager?(this.offlineChecker=Peg(new hp(this.pageSessionManager),{ononline:this.caller("onOfflineCheckerOnline")}),this.offlineChecker.startToCheck()):u.t.get("defaultErrorHandler").reportAsException("There is no page session manager. Probably a connection error happened.")}},{key:"onStatusPollRequiredEnd",value:function(){this.dispatchEvent("pollrequiredend"),this.offlineChecker&&this.Delete("offlineChecker")}},{key:"onStatusOnline",value:function(){u.t.get("assetLoader").setAsOnline(),this.dispatchEvent("online"),this.pageSessionManager.setIsOnline(!0)}},{key:"onStatusUserLess",value:function(){this.pageSessionManager.setTabId(null,!0)}},{key:"onStatusPageSessionLess",value:function(){this.pageSessionManager.setTabId(null,!1)}},{key:"onStatusNotOnline",value:function(){this.dispatchEvent("offline"),this.pageSessionManager.setIsOnline(!1)}},{key:"onUnload",value:function(){this.pageSessionManager.endPageSession()}},{key:"isBusy",value:function(){return this.pageSessionManager.isBusy()}}],r&&bp(n.prototype,r),o&&bp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Ep(e){return Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(e)}function Pp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kp(r.key),r)}}function kp(e){var t=function(e,t){if("object"!=Ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ep(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ep(t)?t:t+""}function Tp(e,t,n){return t=Ip(t),function(e,t){if(t&&("object"===Ep(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jp()?Reflect.construct(t,n||[],Ip(e).constructor):t.apply(e,n))}function jp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jp=function(){return!!e})()}function Ip(e){return Ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ip(e)}function Fp(e,t){return Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fp(e,t)}var Cp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fp(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(e,t,n,r,o){this.application=e,this.publicSessionName=t,this.cortex=n,this.trackerCode=r,this.packsVersion=o,this.forceError=null,this.extraRequestParam=null}},{key:"getApplicationName",value:function(){return this.application.getName()}},{key:"getApplicationCode",value:function(){return this.application.getCode()}},{key:"setPublicSessionName",value:function(e){this.publicSessionName!=e&&(this.publicSessionName=e,ho.getInstance().notifyPageSessionRenew(),this.dispatchEvent("sessionrenew"))}},{key:"getPublicSessionName",value:function(){return this.publicSessionName}},{key:"setForceError",value:function(e){this.forceError=e}},{key:"getForceError",value:function(){return this.forceError}},{key:"getCortex",value:function(){return this.cortex}},{key:"setCortex",value:function(e){this.cortex=e}},{key:"getTrackerCode",value:function(e){return this.trackerCode}},{key:"getPacksVersion",value:function(){return this.packsVersion}}])&&Pp(n.prototype,r),o&&Pp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Dp(e){return Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(e)}function Rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ap(r.key),r)}}function Ap(e){var t=function(e,t){if("object"!=Dp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dp(t)?t:t+""}function Np(e,t,n){return t=Lp(t),function(e,t){if(t&&("object"===Dp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xp()?Reflect.construct(t,n||[],Lp(e).constructor):t.apply(e,n))}function xp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xp=function(){return!!e})()}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lp(e)}function Mp(e,t){return Mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mp(e,t)}var Vp,Bp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Np(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mp(e,t)}(t,e),n=t,r&&Rp(n.prototype,r),o&&Rp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Wp(e){return Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(e)}function Up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yp(r.key),r)}}function Yp(e){var t=function(e,t){if("object"!=Wp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wp(t)?t:t+""}function Hp(e,t,n){return t=Qp(t),function(e,t){if(t&&("object"===Wp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zp()?Reflect.construct(t,n||[],Qp(e).constructor):t.apply(e,n))}function zp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zp=function(){return!!e})()}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qp(e)}function qp(e,t){return qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qp(e,t)}Bp.DOWN_KEY=40,Bp.UP_KEY=38,Bp.LEFT_KEY=37,Bp.RIGHT_KEY=39,Bp.ENTER_KEY=13,Bp.ESC_KEY=27,Bp.BACKSPACE_KEY=8,Bp.SPACE_KEY=32,Bp.HOME_KEY=36,Bp.END_KEY=35,Bp.TAB_KEY=9,Bp.ALT_KEY=18,Bp.DELETE_KEY=46,Bp.CTRL_KEY=17,Bp.SHIFT_KEY=16,Bp.F_KEY=70,Bp.S_KEY=83;var Gp,Jp,Kp,$p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hp(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qp(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(){if(!Vp)throw new Error("Must setup an instance first.");return Vp}},{key:"setupInstance",value:function(e,n){if(Vp)throw new Error("Instance already exists.");Vp=new t(e,n)}}],(r=[{key:"initialize",value:function(e,t){this.navigation=e,this.navigation.onhashchange=this.caller("onHashChange"),this.confirmFollowingExternalLinks=t,this.pageWidget=null}},{key:"onPageContentAdded",value:function(e){this.setMainContent(e.content)}},{key:"onHashChange",value:function(e){var t=new a.C({location:e});this.dispatchEvent("locationstatechange",t),t.getDefaultPrevented()||this.setLocation(e,!0)}},{key:"onContentLocationChange",value:function(e){this.navigation.goTo(this._getContentLocation(),e&&e.replaceState)}},{key:"setMainContent",value:function(e){this.content&&this.content.removeListener("locationchange",this.caller("onContentLocationChange")),this.content=e,this.content.addListener("locationchange",this.caller("onContentLocationChange"))}},{key:"setInterceptor",value:function(e){this.interceptor=e}},{key:"_checkForExternalLocation",value:function(e){return t.isExternalUrl(e)}},{key:"setLocation",value:function(e,t,n,r){n||this._checkForExternalLocation(e)?this.handleExternalLocation(e,"_blank",null,r):this._handleInternalLocation(e,t)}},{key:"_handleInternalLocation",value:function(e,t){var n=e.match(/^.?#(.*)/)||e.match(/^http.+\/\/.+\/#(.*)/);if(n&&(e=n[1]),!this.interceptor||!this.interceptor(e)){try{this.content&&(this.content.setLocation||e)&&(this.content.setLocation(e),e=e||this._getContentLocation())}catch(e){if("pageNotFound"!=e.message)throw e;this.showPageNotFound()}finally{t||this.navigation.goTo(e)}var r=new a.C({newLocation:e});this.dispatchEvent("locationchange",r),u.t.get("userTrail").logPageLocationChange(e)}}},{key:"handleExternalLocation",value:function(e,t,n,r){var o=new a.C;this.dispatchEvent("externallinkclick",o),o.getDefaultPrevented()||(this._checkForExternalLocation(e)&&!r&&this.confirmFollowingExternalLinks?this.showExternalUrlConfirm(e,t,n):this.goToExternalLocation(e,t,n))}},{key:"showExternalUrlConfirm",value:function(e,t,n){this.dispatchEvent("showexternalurlconfirm",new Bp({location:e,target:t,otherOptionsForExternalLocations:n}))}},{key:"goToExternalLocation",value:function(e,t,n){e=e.startsWith("www.")?"http://"+e:e;var r=t||cn.generateUniqueId("windowTarget");n?window.open(e,r,n):window.open(e,r)}},{key:"showPageNotFound",value:function(){this.dispatchEvent("showpagenotfound")}},{key:"setPageWidget",value:function(e){this.pageWidget&&this.pageWidget.removeListener("contentadded",this.caller("onPageContentAdded")),this.pageWidget=e,this.pageWidget&&this.pageWidget.addListener("contentadded",this.caller("onPageContentAdded"))}},{key:"getPageWidget",value:function(){return this.pageWidget}},{key:"onPageNotFoundCloseClick",value:function(){this.setLocation(this.getLastVisitedLocation())}},{key:"_getContentLocation",value:function(){var e;return this.content&&this.content.getLocation&&(e=this.content.getLocation()),e||""}},{key:"getLocation",value:function(){return this.navigation.getLocation()}},{key:"getNavigation",value:function(){return this.navigation}},{key:"getLastVisitedLocation",value:function(){return this.content?this.content.getChild().getLastVisitedLocation():""}},{key:"getPreviousVisitedLocation",value:function(){return this.content?this.content.getChild().getLocatedWidget().getPreviousVisitedLocation():""}}])&&Up(n.prototype,r),o&&Up(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function Zp(e){return Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(e)}function Xp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ed(r.key),r)}}function ed(e){var t=function(e,t){if("object"!=Zp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zp(t)?t:t+""}function td(e,t,n){return t=rd(t),function(e,t){if(t&&("object"===Zp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nd()?Reflect.construct(t,n||[],rd(e).constructor):t.apply(e,n))}function nd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nd=function(){return!!e})()}function rd(e){return rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rd(e)}function od(e,t){return od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},od(e,t)}$p.isExternalUrl=(Kp=function(e){return Gp.href=e.startsWith("www.")?"http://"+e:e,Gp.hostname},function(e){try{return Gp||(Gp=document.createElement("a"),Jp=Kp(window.location.href)),Jp!==Kp(e)}catch(n){var t=new Error("InvalidUrl: "+e);if("uiUnitTest"==u.t.get("page").getApplicationCode())throw t;return u.t.get("defaultErrorHandler").handleCatchedException(t),!0}});var id=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),td(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&od(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.reportedErrorCount=0}},{key:"watchForErrorsAndNotify",value:function(){u.t.get("defaultErrorHandler").setReportErrorCallbackAndReportPending(this.caller("_report")),ho.getInstance().addListener("servererror",this.caller("onServerError"))}},{key:"onServerError",value:function(e){u.t.get("server").exec({className:"squealer_Squealer",method:"addPageInformationToServerErrorReport",parameters:[e.randomCode,{location:u.t.get("page")?$p.getInstance().getLocation():"",trail:u.t.get("userTrail")?u.t.get("userTrail").get():"",pageSessionId:u.t.get("server").getTabId()}]},!0),u.t.get("defaultErrorHandler").notifyError("phpReportedAnError: "+e.randomCode)}},{key:"_report",value:function(e){var t={fileName:e.getFileName(),lineNumber:e.getLineNumber(),message:e.getMessage(),name:e.getName(),stack:e.getStack(),originalStack:e.getOriginalStack()},n=!1;u.t.get("DEBUG_MODE")&&(n=!0),(this.reportedErrorCount<10||n)&&(++this.reportedErrorCount,u.t.get("userTrail")&&(u.t.get("userTrail").add("reporting error number "+this.reportedErrorCount),10==this.reportedErrorCount&&u.t.get("userTrail").add("Disabled error reporting after "+this.reportedErrorCount+" errors")),this.attemptToLogError(t,u.t.get("page")?$p.getInstance().getLocation():"",u.t.get("userTrail")?u.t.get("userTrail").get():""))}},{key:"_getSquealerUrlForReportRandomCode",value:function(e){var t=u.t.get("config");return t&&t.squealer_Squealer&&t.squealer_Squealer.publicUrl?t.squealer_Squealer.publicUrl+"view.php?randomCode="+e:"Error handler config Url is not available. Report randomCode: "+e}},{key:"onLogErrorLoad",value:function(e){if(!e.isError()){var t=e.get();if(!t.error){var n=t.msg;if(!n)return void u.t.get("page").info("Error while reporting an error (empty router responses)");var r=n[0];if(!r)return void u.t.get("page").info("Error while reporting an error (no report response)");var o=u.t.get("richJson");u.t.get("defaultErrorHandler").notifyReportedError(this._getSquealerUrlForReportRandomCode(r));var i=o.unserialize(e.requestResponse.responseText);u.t.get("userTrail").add("randomCode: "+i.msg)}}}},{key:"attemptToLogError",value:function(e,n,r,o){var i=this,a=o||0;if(ou.isAvailable())this.logError(e,n,r);else{if(!(a<t.MAX_LOG_ATTEMPTS))throw e;setTimeout((function(){i.attemptToLogError(e,n,r,function(e){throw new TypeError('"'+e+'" is read-only')}("attempt"))}),t.LOG_ATTEMPTS_INTERVAL)}}},{key:"logError",value:function(e,t,n){if(this.shouldLogError(e)){var r=u.t.get("serverCredentials");new ou(new Ua("POST","/_logJsError?applicationCode="+(r?r.getApplicationCode():"")+"&version="+r.getPacksVersion()+"&trackerCode="+r.getTrackerCode())).send({error:[e,{location:t,trail:n}]},this.caller("onLogErrorLoad"))}}},{key:"setShouldLogErrorCallback",value:function(e){this.shouldLogErrorCallback=e}},{key:"shouldLogError",value:function(e){return!this.shouldLogErrorCallback||!1!==this.shouldLogErrorCallback(e)}}])&&Xp(n.prototype,r),o&&Xp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ad(e){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad(e)}function ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ld(r.key),r)}}function ld(e){var t=function(e,t){if("object"!=ad(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ad(t)?t:t+""}id.MAX_LOG_ATTEMPTS=10,id.LOG_ATTEMPTS_INTERVAL=1e3;var sd=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"canEncode",value:function(e){return!1}},{key:"encode",value:function(e){return e.getJsonValue()}},{key:"canDecode",value:function(e){return!1}},{key:"decode",value:function(e,t){throw new Error("unimplemented")}},{key:"getPackageToLoaderFinder",value:function(){return null}}])&&ud(e.prototype,t),n&&ud(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function cd(e){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(e)}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pd(r.key),r)}}function pd(e){var t=function(e,t){if("object"!=cd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cd(t)?t:t+""}function dd(e,t,n){return t=hd(t),function(e,t){if(t&&("object"===cd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yd()?Reflect.construct(t,n||[],hd(e).constructor):t.apply(e,n))}function yd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yd=function(){return!!e})()}function hd(e){return hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hd(e)}function vd(e,t){return vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vd(e,t)}var bd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dd(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vd(e,t)}(t,e),n=t,(r=[{key:"canEncode",value:function(e){return e instanceof Date}},{key:"canDecode",value:function(e){return e===this._getType()}},{key:"_getType",value:function(){return"datetime"}},{key:"decode",value:function(e){return v.L.truncateToValidDateRange(new Date(1e3*e))}},{key:"encode",value:function(e){return{$JSNType:this._getType(),value:v.L.truncateToValidDateRange(e).getTime()/1e3}}}])&&fd(n.prototype,r),o&&fd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sd),md=n(65484);function gd(e){return gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(e)}function _d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wd(r.key),r)}}function wd(e){var t=function(e,t){if("object"!=gd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gd(t)?t:t+""}function Od(e,t,n){return t=Ed(t),function(e,t){if(t&&("object"===gd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sd()?Reflect.construct(t,n||[],Ed(e).constructor):t.apply(e,n))}function Sd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sd=function(){return!!e})()}function Ed(e){return Ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ed(e)}function Pd(e,t){return Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pd(e,t)}var kd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Od(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pd(e,t)}(t,e),n=t,(r=[{key:"canDecode",value:function(e){return"date"===e}},{key:"decode",value:function(e){return md.j.unserialize(e)}}])&&_d(n.prototype,r),o&&_d(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sd),Td=n(74136);function jd(e){return jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(e)}function Id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fd(r.key),r)}}function Fd(e){var t=function(e,t){if("object"!=jd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jd(t)?t:t+""}function Cd(e,t,n){return t=Rd(t),function(e,t){if(t&&("object"===jd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dd()?Reflect.construct(t,n||[],Rd(e).constructor):t.apply(e,n))}function Dd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dd=function(){return!!e})()}function Rd(e){return Rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rd(e)}function Ad(e,t){return Ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ad(e,t)}var Nd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cd(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ad(e,t)}(t,e),n=t,o=[{key:"unserialize",value:function(e){return new t(md.j.unserialize(e.date.value),Td.O.unserialize(e.time.value))}},{key:"create",value:function(e,n){return new t(e,n)}}],(r=[{key:"initialize",value:function(e,t){if(!(e instanceof md.j&&t instanceof Td.O))throw new Error("Incorrect object arguments");this.day=e,this.time=t}},{key:"getDay",value:function(){return this.day}},{key:"getTime",value:function(){return this.time}},{key:"getDateTime",value:function(){var e=this.day.getDateTime();return e&&(e.setHours(this.time.getHour()),e.setMinutes(this.time.getMinute()),e.setSeconds(this.time.getSecond())),e}},{key:"getJsonValue",value:function(){return{$JSNType:"dayAndTime",value:{date:this.day.getJsonValue(),time:this.time.getJsonValue()}}}},{key:"clone",value:function(){return new t(this.day.clone(),this.time.clone())}}])&&Id(n.prototype,r),o&&Id(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function xd(e){return xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(e)}function Ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Md(r.key),r)}}function Md(e){var t=function(e,t){if("object"!=xd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xd(t)?t:t+""}function Vd(e,t,n){return t=Wd(t),function(e,t){if(t&&("object"===xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bd()?Reflect.construct(t,n||[],Wd(e).constructor):t.apply(e,n))}function Bd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bd=function(){return!!e})()}function Wd(e){return Wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wd(e)}function Ud(e,t){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ud(e,t)}var Yd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vd(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ud(e,t)}(t,e),n=t,(r=[{key:"canDecode",value:function(e){return"dayAndTime"===e}},{key:"decode",value:function(e){return Nd.unserialize(e)}}])&&Ld(n.prototype,r),o&&Ld(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sd);function Hd(e){return Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(e)}function zd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qd(r.key),r)}}function Qd(e){var t=function(e,t){if("object"!=Hd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hd(t)?t:t+""}function qd(e,t,n){return t=Jd(t),function(e,t){if(t&&("object"===Hd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gd()?Reflect.construct(t,n||[],Jd(e).constructor):t.apply(e,n))}function Gd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gd=function(){return!!e})()}function Jd(e){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jd(e)}function Kd(e,t){return Kd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kd(e,t)}var $d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qd(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kd(e,t)}(t,e),n=t,(r=[{key:"canDecode",value:function(e){return"LocalDataSource"===e}},{key:"decode",value:function(e,t){return Hs.New(t.decodeTypes(e))}}])&&zd(n.prototype,r),o&&zd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sd);function Zd(e){return Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(e)}function Xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ey(r.key),r)}}function ey(e){var t=function(e,t){if("object"!=Zd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zd(t)?t:t+""}function ty(e,t,n){return t=ry(t),function(e,t){if(t&&("object"===Zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ny()?Reflect.construct(t,n||[],ry(e).constructor):t.apply(e,n))}function ny(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ny=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ry(e)}function oy(e,t){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oy(e,t)}var iy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ty(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oy(e,t)}(t,e),n=t,(r=[{key:"canDecode",value:function(e){return"time"===e}},{key:"decode",value:function(e){return Td.O.unserialize(e)}}])&&Xd(n.prototype,r),o&&Xd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(sd);function ay(e){return ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(e)}function uy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ly(r.key),r)}}function ly(e){var t=function(e,t){if("object"!=ay(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ay(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ay(t)?t:t+""}var sy=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"registerDefaultCodecs",value:function(){Er.addCodec(new bd),Er.addCodec(new kd),Er.addCodec(new Yd),Er.addCodec(new $d),Er.addCodec(new iy)}}],(t=null)&&uy(e.prototype,t),n&&uy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();n(50785);function cy(e){return cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cy(e)}function fy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,py(r.key),r)}}function py(e){var t=function(e,t){if("object"!=cy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cy(t)?t:t+""}function dy(e,t,n){return t=hy(t),function(e,t){if(t&&("object"===cy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yy()?Reflect.construct(t,n||[],hy(e).constructor):t.apply(e,n))}function yy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yy=function(){return!!e})()}function hy(e){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hy(e)}function vy(e,t){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vy(e,t)}var by=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dy(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vy(e,t)}(t,e),n=t,(r=[{key:"getLocation",value:function(){return this.getLocationFromQueryString(this.lastQueryString)}},{key:"initialize",value:function(e){this.topDocument=of.topDocument(),this.applicationCode=e,this.lastQueryString=this.getUrlHash(),this.enableInterval(),this.history=[]}},{key:"getHistory",value:function(){return this.history}},{key:"disableInterval",value:function(){this.interval&&(clearInterval(this.interval),delete this.interval)}},{key:"enableInterval",value:function(){this.interval=setInterval(this.caller("checkForUrlChanges"),1e3)}},{key:"getLocationFromQueryString",value:function(e){return"Home"==e?"":e}},{key:"callOnHashChange",value:function(e){this.onhashchange&&this.onhashchange(this.getLocationFromQueryString(e))}},{key:"goTo",value:function(e,t){var n=re.E.isWhitespace(e)?"Home":e;if(this.lastQueryString!=n){if(this.topDocument.defaultView&&this.topDocument!==document&&(t?history.replaceState:history.pushState))t?this.topDocument.defaultView.history.replaceState(null,this.topDocument.title,"#"+n):this.topDocument.defaultView.history.pushState(null,this.topDocument.title,"#"+n);else{var r=this.topDocument.location.protocol+"//"+this.topDocument.location.host+this.topDocument.location.pathname+this.topDocument.location.search+"#"+n;t?this.topDocument.location.replace(r):this.topDocument.location=r}this.lastQueryString=this.getUrlHash(),t&&this.history.pop(),this.history.push(n)}}},{key:"checkForUrlChanges",value:function(){var e=this.getUrlHash();e!=this.lastQueryString&&(this.lastQueryString=e,this.history.push(e),this.callOnHashChange(e))}},{key:"getUrlHash",value:function(){var e,t=this.topDocument.location.href,n=t.indexOf("#");if(-1==n)e="";else try{e=decodeURIComponent(t.substr(n+1))}catch(r){e=t.substr(n+1)}return e}}])&&fy(n.prototype,r),o&&fy(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function my(e){return my="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(e)}function gy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_y(r.key),r)}}function _y(e){var t=function(e,t){if("object"!=my(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=my(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==my(t)?t:t+""}function wy(e,t,n){return t=Sy(t),function(e,t){if(t&&("object"===my(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Oy()?Reflect.construct(t,n||[],Sy(e).constructor):t.apply(e,n))}function Oy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oy=function(){return!!e})()}function Sy(e){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sy(e)}function Ey(e,t){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ey(e,t)}var Py=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wy(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ey(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],(r=[{key:"initialize",value:function(){this.monitoredEvents=["click","mousedown","keydown","keyup"],At.getInstance().addListener("stoppeddomevent",this.caller("onStoppedEvent")),this.start()}},{key:"start",value:function(){var e=this,t=document;this.monitoredEvents.forEach((function(n){Mt.addEventListener(t,n,e.dispatcher(n))}))}},{key:"stop",value:function(){var e=this,t=document;this.monitoredEvents.forEach((function(n){Mt.removeEventListener(t,n,e.dispatcher(n))}))}},{key:"onStoppedEvent",value:function(e){ao.w.hasElement(this.monitoredEvents,e.type)&&this.dispatchEvent(e.type,e)}}])&&gy(n.prototype,r),o&&gy(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y);function ky(e){return ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(e)}function Ty(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jy(r.key),r)}}function jy(e){var t=function(e,t){if("object"!=ky(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ky(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ky(t)?t:t+""}function Iy(e,t,n){return t=Cy(t),function(e,t){if(t&&("object"===ky(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fy()?Reflect.construct(t,n||[],Cy(e).constructor):t.apply(e,n))}function Fy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fy=function(){return!!e})()}function Cy(e){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cy(e)}function Dy(e,t){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dy(e,t)}var Ry=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Iy(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dy(e,t)}(t,e),n=t,(r=[{key:"initialize",value:function(){this.trail=[],Peg(Py.getInstance(),{onkeydown:this.caller("onDocumentKeyDown"),onmousedown:this.caller("onDocumentMouseDown")}),u.t.get("defaultErrorHandler").addListener("error",this.caller("onError")),u.t.get("defaultErrorHandler").addListener("errorreportok",this.caller("onErrorReportOk")),u.t.get("browserWindow").addListener("beforeunload",this.caller("onBrowserWindowBeforeUnload"))}},{key:"logUserChange",value:function(){this.add("user change")}},{key:"onBrowserWindowBeforeUnload",value:function(){this.add("before unload")}},{key:"onErrorReportOk",value:function(e){this.add("Error reporter accepted js error: "+e.reportUrl)}},{key:"onError",value:function(e){this.add("defaultErrorHandler reported: "+e.error)}},{key:"logPageSessionRenew",value:function(){this.add("page session renew")}},{key:"logPageLocationChange",value:function(e){this.add('location: "'+e.replace(/"/g,'\\"')+'"')}},{key:"onDocumentKeyDown",value:function(e){var t;13==e.keyCode?t="enter":9==e.keyCode?t="tab":27==e.keyCode&&(t="esc"),t&&this.add(t+" keydown at: "+He.R.describeValue(Mt.getElementFromEvent(e)))}},{key:"onDocumentMouseDown",value:function(e){this.add(Mt.getButtonFromEvent(e)+" click at "+He.R.describeValue(Mt.getElementFromEvent(e)))}},{key:"get",value:function(){return this.trail}},{key:"add",value:function(e){this.trail.length>200&&this.trail.shift(),this.trail.push({date:v.L.now(),description:e})}}])&&Ty(n.prototype,r),o&&Ty(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(i.y),Ay=n(55647),Ny=(n(94582),n(58649),function(e,t,n,r){this.exception=e,this.urlRewriter=t,this.originalStack=e.stack,this.stack=this._getFormatedStack(n,r);var o=this._getConcreteFileName();if(o){var i=this._rewriteUrl(o,this._getConcreteLineNumber());this.fileName=i[0],this.lineNumber=i[1]}else this.fileName=null,this.lineNumber=null});function xy(e){return xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(e)}Ny.prototype.getMessage=function(){return this.exception.message},Ny.prototype.getName=function(){return this.exception.name},Ny.prototype.getStack=function(){return this.stack},Ny.prototype.getOriginalStack=function(){return this.originalStack},Ny.prototype.getExpectedWindowErrorMessage=function(){var e=navigator.userAgent.toLocaleLowerCase();return-1!==e.indexOf("chrome")?"Uncaught "+this.exception.name+": "+this.exception.message:-1!==e.indexOf("msie")||-1!==e.indexOf("trident")?this.exception.message:this.exception.name+": "+this.exception.message},Ny.prototype.getFileName=function(){return this.fileName},Ny.prototype.getLineNumber=function(){return this.lineNumber},Ny.prototype._getConcreteFileName=function(){return this.stack.length>0?this.stack[0].file:null},Ny.prototype._getConcreteLineNumber=function(){return this.stack.length>0?this.stack[0].line:null},Ny.prototype._getLocalFileFromStackUrl=function(e){var t=window.location.protocol+"//"+window.location.host+"/";e.substr(0,t.length)==t&&(e=e.substr(t.length));var n=e.lastIndexOf("?");return-1!=n&&(e=e.substr(0,n)),e},Ny.prototype._rewriteUrl=function(e,t){if(this.urlRewriter){var n=this.urlRewriter(e,t);if(n)return n}return[e,t]},Ny.prototype._getFormatedStack=function(e,t){if(this.exception.stack||(this.exception.stack=""),"string"!=typeof this.exception.stack)return this.exception.stack;for(var n,r,o=this.exception.stack.split(/\r\n|\r|\n/),i=[],a=/@(.*?):([0-9]+)(:[0-9]+)?$/,u=/^\s*at .* \((.*):([0-9]+):[0-9]+\)$/,l=/(\S*):(\d+):(\d+)$/,s=0;s<o.length;++s)if((n=o[s])&&(r=a.exec(n)||u.exec(n)||l.exec(n))){var c=this._rewriteUrl(this._getLocalFileFromStackUrl(r[1]),parseInt(r[2],10));i.push({file:c[0],line:c[1]})}return 0===i.length&&e&&null!=t&&i.push({file:e,line:t}),i};var Ly,My=function e(){var t=this;if(e.alreadySetUp)throw new Error("cantCreate2ErrorHandlers: ErrorHandler is already set up");window.addEventListener("error",(function(e){var n=e.message,r=e.filename,o=e.lineno,i=e.colno,a=e.error;t.onWindowError(n,r,o,i,a)})),window.addEventListener("unhandledrejection",this.onWindowUnhandledRejection.bind(this)),this.errorReporterCallback=null,this.errorsToReport=[],Error.stackTraceLimit=1/0,this._addGetNameToLogToFunctions(),this._events={},e.alreadySetUp=!0};My.alredySetUp=!1,My.prototype.wrapHandlingErrors=function(e){var t=this;return function(){try{return e.apply(this,arguments)}catch(e){throw t.handleCatchedException(e),e}}},My.prototype.wrapNativeFunctions=function(){var e=this;function t(t){var n=window[t];window[t]=function(){return n(e.wrapHandlingErrors(arguments[0]),arguments[1])}}t("setTimeout"),t("setInterval"),t("requestAnimationFrame")},My.prototype._addGetNameToLogToFunctions=function(){Function.prototype.getNameToLog=function(e){var t;t=this.methodName?this.methodName:this.name;var n=/function[^(]*(\([^)]*\))/.exec(this.toString());return n||t?t?t+(n?n[1]:""):e?"<<"+this.toString()+n[1]+">>":"f"+n[1]:this.toString()}},My.prototype.setReportErrorCallbackAndReportPending=function(e){if(this.errorReporterCallback)throw new Error("errorReporterCallbackAlreadySet");this.errorReporterCallback=e;var t=this.errorsToReport;this.errorsToReport=null;for(var n=0;n<t.length;++n)e(t[n])},My.prototype._createExceptionFromWindowError=function(e,t,n){for(var r=arguments.callee.caller,o=[],i=[];r&&-1==i.indexOf(r);){i.push(r);var a=[];if(r.arguments)for(var u=0;u<r.arguments.length;++u)a.push(this.describeValue(r.arguments[u]));else a.push("can't read arguments");o.push({function:r.getNameToLog?r.getNameToLog(!0):"Anonymous",args:a}),r=r.caller}var l=new Error(e);return l.name="ExternalError",l.stack=o,l.fileName=t,l.lineNumber=n,l},My.prototype._wasJustCatched=function(e){return this.lastCatchedMessage&&this.lastCatchedMessage==e&&new Date-this.lastCatchedDate<100},My.prototype.onWindowError=function(e,t,n,r,o){var i;this._wasJustCatched(e)||(i=o||this._createExceptionFromWindowError(e,t,n),this._notifyExceptionObject(i,t,n));return!1},My.prototype.onWindowUnhandledRejection=function(e){var t=new Error(e.reason);t.name="UnhandledRejection",e.reason&&e.reason.stack&&(t.stack=e.reason.stack),this.notifyError("UnhandledRejection: "+e.reason,t),e.preventDefault()},My.prototype.notifyError=function(e,t,n,r){var o,i={error:e};t&&(o=this._wrapException(t,n,r),i.errorObject=o),this.dispatchEvent("error",i),o&&(this.errorReporterCallback?this.errorReporterCallback(o):this.errorsToReport.push(o))},My.prototype.notifyReportedError=function(e){this.dispatchEvent("errorreportok",{reportUrl:e})},My.prototype.handleTooManyFailedPackageLoads=function(){this.dispatchEvent("toomanyfailedpackageloads")},My.prototype.reportAsException=function(e){try{throw new Error(e)}catch(e){this._notifyExceptionObject(e)}},My.prototype._notifyExceptionObject=function(e,t,n){this.notifyError(e.name+": "+e.message,e,t,n)},My.prototype.setAssetUrlRewriter=function(e){this.urlRewriter=e},My.prototype._wrapException=function(e,t,n){return new Ny(e,this.urlRewriter,t,n)},My.prototype.handleCatchedException=function(e){this._notifyExceptionObject(e),this.lastCatchedMessage=this._wrapException(e).getExpectedWindowErrorMessage(),this.lastCatchedDate=new Date},My.prototype.setDescriber=function(e){this._valueDescriber=e},My.prototype.describeValue=function(e){return this._valueDescriber?this._valueDescriber(e):this._defaultValueDescriber(e)},My.prototype.addListener=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},My.prototype.removeListener=function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))},My.prototype.dispatchEvent=function(e,t){(this._events[e]||[]).forEach((function(e){e(t)}))},My.prototype._defaultValueDescriber=function(e){try{return"object"===xy(e)?JSON.stringify(e):e+""}catch(t){return e}},(Ly=new My).setDescriber(He.R.describeValue),_t.supports("windowErrorStackTrace")||Ly.wrapNativeFunctions(),u.t.set("defaultErrorHandler",Ly);var Vy=n(96402),By=n(18035),Wy=n(45061),Uy=n.n(Wy),Yy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,$r.__extends)(t,e),t.prototype.setAsOnline=function(){},t.prototype.setAsOffline=function(){},t}(i.y),Hy=function(e){function t(t,n){var r=e.call(this)||this;return r.location=n,u.t.set("applicationCode",t),r}return(0,$r.__extends)(t,e),t.prototype.getDomNode=function(){return document.body},t.prototype.getLocation=function(){return this.location},t.prototype.alert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.t.get("DEBUG_MODE")&&console.log("page alert: ",e)},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.t.get("DEBUG_MODE")&&console.log("page alert: ",e)},t}(i.y),zy=function(){function e(){}return e.prototype.config=function(e,t,n,r,o,i){this._initializeGlobalParams(t);var a=new Cp(new io(e,t),n,r,o,i);u.t.set("serverCredentials",a)},e.prototype._initializeGlobalParams=function(e){var t=new by(e),n=new Vy.default,r="".concat(n.get("avature.portal.urlPath"),"/").concat(n.get("avature.portal.page")),o=new Hy(e,r);u.t.set("browserWindow",new of),u.t.set("userTrail",new Ry),u.t.set("assetLoader",new Yy),u.t.set("page",o),$p.setupInstance(o,t),u.t.set("richJson",new Er),sy.registerDefaultCodecs()},e.prototype.connect=function(){return(0,$r.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,$r.__generator)(this,(function(t){return[2,new Promise((function(t,n){document.addEventListener("DOMContentLoaded",(function(){var n=(new By.A).get("synapserBootstrap");if(n.enabled){n&&(e.pageSessionId=n.pagesessionid?n.pagesessionid:null,e.logoutUrl=n.logouturl?n.logouturl:null,e.config(n.applicationname,n.applicationcode,n.publicsessionname,parseInt(n.cortex,10),n.trackercode,n.packversion)),u.t.set("config",{WebsiteSettings:{liveQueryCleanupTimeout:4e4},router:{minPendingMessagesDelay:1e3}});var r=Ay.W.peg(new Sp(e.pageSessionId,!0,e.logoutUrl),{onpagesessionrenew:function(){var e=Ay.W.peg(new id,{shouldLogErrorCallback:function(e){return e.fileName.includes("portalpacks")}});try{e.watchForErrorsAndNotify()}catch(e){}u.t.set("server",r),t(r)},onoffline:function(){Uy().getInstance().dispatchEvent("serveroffline")}})}}))}))]}))}))},e}();const Qy={connectServer:function(){return(0,$r.__awaiter)(this,void 0,void 0,(function(){return(0,$r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(new zy).connect()];case 1:return[2,e.sent()]}}))}))}};var qy=null,Gy=null,Jy=null;const Ky={connect:function(){return qy?Gy?Promise.resolve():qy:(qy=Qy.connectServer().then((function(e){Jy=e,Gy=!0})),qy)},exec:function(e,t,n,r){return void 0===r&&(r=!1),new Promise((function(o,i){Jy.exec({className:e,method:t,parameters:n,onload:function(e){o(e)},onerror:function(e){i(e)}},r)}))},datasource:function(e,t,n){return new Promise((function(r,o){var i=new Kr(e,t,n);i.addListener("receive",(function(){r(i.get())})),i.addListener("error",(function(e){o(e)}))}))}};var $y=n(67091),Zy=n(5338);const Xy=function(){function e(e,t,n,r){this.timeout=e,this.title=t,this.message=n,this.mainButtonText=r}return e.prototype.getTimeout=function(){return this.timeout},e.prototype.getTitle=function(){return this.title},e.prototype.getMessage=function(){return this.message},e.prototype.getMainButtonText=function(){return this.mainButtonText},e.prototype.handleMainButtonClick=function(){throw new Error("Unimplemented method: BasePopUp.handleMainButtonClick")},e}();var eh=function(e){function t(t,n,r,o,i,a){var u=e.call(this,t,n,r,o)||this;return u.okButtonText=i,u.isSynapserEnabled=a,u}return(0,$r.__extends)(t,e),t.prototype.getOkButtonText=function(){return this.okButtonText},t.prototype.handleMainButtonClick=function(){this.extendSession()},t.prototype.extendSession=function(){this.isSynapserEnabled?this.extendSessionWithSynapser():this.extendSessionWithoutSynapser()},t.prototype.extendSessionWithSynapser=function(){Ky.connect().then((function(){Ky.exec("ICO_session_PageSession","setIdleness",[u.t.get("browserWindow").getUserIdleness()])}))},t.prototype.extendSessionWithoutSynapser=function(){var e=new Vy.default;pjQuery.post("/".concat(e.get("avature.portal.id"),"/_extendSession"))},t}(Xy);const th=eh;var nh=n(96540),rh=n(94708),oh=n.n(rh);const ih=function(e){var t=e.text,n=e.onClick;return(0,$y.Y)("button",(0,$r.__assign)({type:"button",className:"session-button ui-button",onClick:n},{children:t}))};const ah=function(e){var t=e.text;return(0,$y.Y)("div",(0,$r.__assign)({id:"timeoutSessionPopup",className:"session-dialog-content ui-dialog-content"},{children:(0,$y.Y)("p",{children:t})}))};const uh=function(e){var t=e.text,n=e.onCloseButtonClick;return(0,$y.FD)("div",(0,$r.__assign)({className:"session-dialog-titlebar ui-dialog-titlebar"},{children:[(0,$y.Y)("span",(0,$r.__assign)({className:"session-dialog-title ui-dialog-title"},{children:t})),(0,$y.FD)("button",(0,$r.__assign)({type:"button",className:"session-button session-dialog-titlebar-close ui-button ui-dialog-titlebar-close",title:"Close",onClick:n},{children:[(0,$y.Y)("span",{className:"session-button-icon session-icon-closethick ui-button-icon ui-icon-closethick"}),"Close"]}))]}))};const lh=function(e){var t=e.sessionTimeoutPopup,n=e.sessionExtensionPopup,r=(0,nh.useState)(null),o=r[0],i=r[1],a=(0,nh.useState)(null),u=a[0],l=a[1],s=(0,nh.useState)(null),c=s[0],f=s[1];function p(e){return e?setTimeout((function(){i(e)}),e.getTimeout()):null}function d(){var e=p(t),r=p(n);return l(e),f(r),{timeoutTimerId:e,extendTimerId:r}}function y(){o.handleMainButtonClick(),o===n&&(i(null),clearTimeout(u),clearTimeout(c),d())}function h(){o===t&&o.handleMainButtonClick(),i(null)}return(0,nh.useEffect)((function(){function e(e){"Escape"===e.key&&h()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[o]),(0,nh.useEffect)((function(){var e=d();return function(){clearTimeout(e.timeoutTimerId),clearTimeout(e.extendTimerId)}}),[]),o&&(0,$y.Y)(oh(),{children:(0,$y.FD)("div",{children:[(0,$y.FD)("div",(0,$r.__assign)({tabIndex:-1,role:"alertdialog",className:"session-dialog ui-dialog","aria-describedby":"timeoutSessionPopup","aria-modal":"true"},{children:[(0,$y.Y)(uh,{text:o.getTitle(),onCloseButtonClick:function(){return h()}}),(0,$y.Y)(ah,{text:o.getMessage()}),(0,$y.Y)("div",(0,$r.__assign)({className:"session-dialog-buttonpane ui-dialog-buttonpane"},{children:(0,$y.FD)("div",(0,$r.__assign)({className:"session-dialog-buttonset ui-dialog-buttonset"},{children:[o===n&&(0,$y.Y)(ih,{text:n.getOkButtonText(),onClick:function(){return h()}}),(0,$y.Y)(ih,{text:o.getMainButtonText(),onClick:function(){return y()}})]}))}))]})),(0,$y.Y)("div",{className:"session-widget-overlay ui-widget-overlay"})]})})};const sh=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r,o)||this;return a.portalUrl=i,a}return(0,$r.__extends)(t,e),t.prototype.handleMainButtonClick=function(){window.location.href=this.portalUrl},t}(Xy);var ch=document.createElement("div");document.body.appendChild(ch);var fh=(0,Zy.H)(ch),ph=Uy().getInstance(),dh=new By.A;function yh(){var e=dh.get("showAlertOnSessionTimeout");return e?new sh(e.timeout,e.title,e.message,e.mainbutton,e.portalurl):null}function hh(){var e=dh.get("showAlertOnSessionExtend");return e?new th(e.timeout,e.title,e.message,e.mainbutton,e.okbutton,e.issynapserenabled):null}function vh(e){return vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(e)}function bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mh(r.key),r)}}function mh(e){var t=function(e,t){if("object"!=vh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vh(t)?t:t+""}if(ph.addEventHandler(Uy().EVENT_LOAD_NAME,(function(){fh.render((0,$y.Y)(lh,{sessionTimeoutPopup:yh(),sessionExtensionPopup:hh()}))}),Uy().PRIORITY_MEDIUM),!gh)var gh=n(45061);var _h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"replaceEmailShareButtonHref",value:function(e,t){var n,r=document.querySelectorAll(".shareButton--email");r&&r.forEach((function(r){n=window.location.href.includes(e)?document.title:r.getAttribute("data-jobname")+" - "+t,r.href=r.href.replace(/subject=[\S]*&body/,"subject="+encodeURIComponent(n)+"&body")}))}}])&&bh(e.prototype,t),n&&bh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),wh=gh.getInstance(),Oh=new By.A,Sh=new Vy.default;wh.addEventHandler(gh.EVENT_LOAD_NAME,(function(){var e=Oh.get("replaceEmailShareButtonHref");e&&(new _h).replaceEmailShareButtonHref(e.jobdetailpagename,Sh.get("avature.portal.name"))}),gh.PRIORITY_MEDIUM);var Eh=n(27118);function Ph(e){return Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(e)}function kh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Th(r.key),r)}}function Th(e){var t=function(e,t){if("object"!=Ph(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ph(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ph(t)?t:t+""}var jh=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chatbotInjectionData=t},(t=[{key:"inject",value:function(){document.querySelector("body").insertAdjacentHTML("beforeend",this.chatbotInjectionData.html),document.querySelector("head").insertAdjacentHTML("beforeend",this.chatbotInjectionData.css)}}])&&kh(e.prototype,t),n&&kh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();Eh.A.getEventManager().attachToLoadEvent((function(){var e=(new By.A).get("chatbotInjection");e&&new jh(e).inject()}));function Ih(e){return Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(e)}function Fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ch(r.key),r)}}function Ch(e){var t=function(e,t){if("object"!=Ih(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ih(t)?t:t+""}var Dh=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookieBannerData=t},(t=[{key:"inject",value:function(){document.querySelector("body").insertAdjacentHTML("beforeend",this.cookieBannerData.html)}}])&&Fh(e.prototype,t),n&&Fh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();Eh.A.getEventManager().attachToLoadEvent((function(){var e=(new By.A).get("cookieBannerData");e&&new Dh(e).inject()}));function Rh(e){return Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(e)}function Ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nh(r.key),r)}}function Nh(e){var t=function(e,t){if("object"!=Rh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rh(t)?t:t+""}if(!xh)var xh=n(45061);var Lh=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t},t=[{key:"validate",value:function(){var e=this,t=new Vy.default;grecaptcha.ready((function(){grecaptcha.execute(e.key,{action:"submit"}).then((function(e){pjQuery.post("/"+t.get("avature.portal.id")+"/_visitValidator",{token:e},null,"json")}))}))}}],t&&Ah(e.prototype,t),n&&Ah(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Mh=xh.getInstance(),Vh=new By.A;Mh.addEventHandler(xh.EVENT_LOAD_NAME,(function(){var e=Vh.get("executeReCaptcha");e&&new Lh(e.key).validate()}),xh.PRIORITY_MEDIUM);function Bh(e){return Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(e)}function Wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uh(r.key),r)}}function Uh(e){var t=function(e,t){if("object"!=Bh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bh(t)?t:t+""}if(!Yh)var Yh=n(45061);var Hh=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"makeDateFieldWorkWithTimestamp",value:function(e){this._convertFromTimestampOnLoad(e),this._convertToTimestampOnSubmit(e)}},{key:"_convertToTimestampOnSubmit",value:function(e){pjQuery("form").submit((function(){var t=this;pjQuery(this).find('[name="'+e+'"]').each((function(){var e=pjQuery(this),n=e.val();if(n){n=n.split("-");var r=parseInt(n[1],10)-1,o=parseInt(new Date(n[0],r,n[2]).getTime()/1e3,10);pjQuery("<input>").attr({type:"hidden",name:e.attr("name")+"Timestamp",value:o}).appendTo(t)}}))}))}},{key:"_convertFromTimestampOnLoad",value:function(e){var t=this;pjQuery('[name="'+e+'"]').each((function(){var e=pjQuery(this),n=e.attr("value");if(t._shouldConvertFromTimstampToDateString(n)){var r=LuxonDateTime.fromMillis(1e3*n).toFormat("yyyy-MM-dd");e.val(r),e.attr("value",r)}}))}},{key:"_shouldConvertFromTimstampToDateString",value:function(e){return""!=e&&-1==e.indexOf("-")}}])&&Wh(e.prototype,t),n&&Wh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),zh=Yh.getInstance(),Qh=new By.A;zh.addEventHandler(Yh.EVENT_LOAD_NAME,(function(){var e=Qh.get("makeExpiresDateFieldWorkWithTimestamp");e&&e.inputname&&(new Hh).makeDateFieldWorkWithTimestamp(e.inputname);var t=Qh.get("makeStartsDateFieldWorkWithTimestamp");t&&t.inputname&&(new Hh).makeDateFieldWorkWithTimestamp(t.inputname)}),Yh.PRIORITY_MEDIUM);function qh(e){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(e)}function Gh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jh(r.key),r)}}function Jh(e){var t=function(e,t){if("object"!=qh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qh(t)?t:t+""}if(!Kh)var Kh=n(45061);var $h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"scheduleAutomaticRedirectionToHome",value:function(e,t){setTimeout((function(){window.location.href="/"+e}),t)}}])&&Gh(e.prototype,t),n&&Gh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Zh=Kh.getInstance(),Xh=new By.A;function ev(e){return ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(e)}function tv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rv(r.key),r)}}function nv(e,t,n){return(t=rv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rv(e){var t=function(e,t){if("object"!=ev(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ev(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ev(t)?t:t+""}if(Zh.addEventHandler(Kh.EVENT_LOAD_NAME,(function(){var e=Xh.get("automaticRedirectionToHome");e&&(new $h).scheduleAutomaticRedirectionToHome(e.url,e.timeout)}),Kh.PRIORITY_MEDIUM),!ov)var ov=n(45061);var iv=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nv(this,"initialized",!1),nv(this,"$widgets",{})},t=[{key:"init",value:function(){this.initialized||(this.initialized=!0,this._doInit())}},{key:"_doInit",value:function(){var e=this;pjQuery('select[data-rel="wsp"]').each((function(){var t=pjQuery(this);e._setCurrentStepId(t,t.val()),t.on("change",(function(){e._updateStep(t,e._getRequestData(t.data("id")))}))}))}},{key:"_getRequestData",value:function(e){var t=this._findForm(e),n=pjQuery('input[name="tokenField"]',t).val(),r={personId:t.data("personid"),jobId:t.data("jobid")},o=pjQuery('select[data-rel="wsp"]',t);return r.newStep=o.val(),r.isPrevious=o.find(":selected").data("previous"),void 0!==n&&n.length&&(r.tokenField=n),r}},{key:"_getFormAction",value:function(e){return this._findForm(e).attr("action")}},{key:"_findForm",value:function(e){return this.$widgets.hasOwnProperty(e)||(this.$widgets[e]=this._findElementOrException("form#"+e)),this.$widgets[e]}},{key:"_updateStep",value:function(e,t){var n=e.data("id"),r=this._getFormAction(n);if(!r.length)throw"Endpoint not found for picker '"+n+"'";this._removeErrorLabel(n);var o=this;pjQuery.post(r,t).done((function(e){o._fillPickerOptions(n,e.steps.next,e.steps.previous,e.texts)})).fail((function(t){var r=t.responseText.replace(/^"|"$/g,"");o._showErrorLabel(n,r),e.val(e.attr("data-current"))}))}},{key:"_fillPickerOptions",value:function(e,t,n,r){t instanceof Array||(t=[]),n instanceof Array||(n=[]);var o,i,a=this._findElementOrException('select[data-id="'+e+'"]'),u=document.createDocumentFragment();for(o in t)t.hasOwnProperty(o)&&((i=document.createElement("option")).value=t[o].id,i.text=t[o].name,i.selected=t[o].selected,i.dataset.previous=!1,u.appendChild(i),i.selected&&this._setCurrentStepId(a,i.value));if(n.length){var l=document.createElement("optgroup");for(o in l.label=r.previousSteps,n)(i=document.createElement("option")).value=n[o].id,i.text=n[o].name,i.dataset.previous=!0,l.appendChild(i);u.appendChild(l)}a.empty().append(u)}},{key:"_showErrorLabel",value:function(e,t){var n=this._findElementOrException('select[data-id="'+e+'"]'),r=pjQuery("<span>").addClass("errorMessage").attr({id:this._getErrorLabelId(e)}).text(t);n.after(r)}},{key:"_removeErrorLabel",value:function(e){this._findElement("#"+this._getErrorLabelId(e)).remove()}},{key:"_getErrorLabelId",value:function(e){return e+"-errorMessage"}},{key:"_findElementOrException",value:function(e){var t=this._findElement(e);if(!t.length)throw'Selector "'+e+'" not found';return t}},{key:"_findElement",value:function(e){return pjQuery(e)}},{key:"_setCurrentStepId",value:function(e,t){e.attr("data-current",t)}}],t&&tv(e.prototype,t),n&&tv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();ov.getInstance().addEventHandler(ov.EVENT_LOAD_NAME,(function(){document.querySelectorAll('select[data-rel="wsp"]')&&(new iv).init()}),ov.PRIORITY_MEDIUM);function av(e){return av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(e)}function uv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lv(r.key),r)}}function lv(e){var t=function(e,t){if("object"!=av(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=av(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==av(t)?t:t+""}if(!sv)var sv=n(45061);var cv=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"addCaptchaError",value:function(e){if(e){var t=pjQuery("<span/>",{class:"errorMessage",html:e});pjQuery(".g-recaptcha").before(t)}}}])&&uv(e.prototype,t),n&&uv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),fv=sv.getInstance(),pv=new By.A;fv.addEventHandler(sv.EVENT_LOAD_NAME,(function(){var e=pv.get("captchaError");e&&(new cv).addCaptchaError(e.error)}),sv.PRIORITY_MEDIUM);function dv(e){return dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(e)}function yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hv(r.key),r)}}function hv(e){var t=function(e,t){if("object"!=dv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dv(t)?t:t+""}if(!vv)var vv=n(45061);var bv=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"renderChart",value:function(e,t){AvatureChart.render(e,JSON.parse(t))}}])&&yv(e.prototype,t),n&&yv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),mv=vv.getInstance(),gv=new By.A;mv.addEventHandler(vv.EVENT_LOAD_NAME,(function(){var e=gv.getAllByDataValue("type","avatureChart");e&&e.forEach((function(e){var t=gv.get(e.id);(new bv).renderChart(t.id,t.json)}))}),vv.PRIORITY_MEDIUM);function _v(e){return _v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(e)}function wv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ov(r.key),r)}}function Ov(e){var t=function(e,t){if("object"!=_v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_v(t)?t:t+""}n(71064);var Sv=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._dictionary=this._buildDictionaryFromData(t),this._uploadButtonId=n,this._errorContainerId=r,this._methodContainerCssClass=o},(t=[{key:"_buildDictionaryFromData",value:function(e){return this._getCommonDictionaryFromData(e)}},{key:"_getCommonDictionaryFromData",value:function(e){var t=document.getElementById(e);return{continue:t.dataset.continue,fieldIsRequired:t.dataset.fieldisrequired,noFileSelected:t.dataset.nofileselected,requirePrivacyPolicyAcceptance:t.dataset.requireprivacypolicyacceptance,requirePrivacyPolicyAcceptanceText:t.dataset.requireprivacypolicyacceptancetext}}},{key:"_appendFieldContainerToForm",value:function(e,t,n){var r=this._getForm(),o=this._buildManualMethodContainer(),i=this._buildInputFieldSpecContainer(),a=this._buildErrorContainer(this._dictionary.fieldIsRequired,n),u=this._buildErrorContainerAccessibilityMessage(this._dictionary.fieldIsRequired,n);i.append(e),o.append(u),t.append(a),i.append(t),o.append(i),o.hide(),r.append(o),this._attachResumeRegistrationFileModeIfNeeded()}},{key:"_appendContinueButton",value:function(){var e=this._buildUploadResumeButton(this._dictionary.continue);this._getFieldSetContainer().append(e)}},{key:"_getForm",value:function(){return pjQuery("#manualRegisterMethodsForm")}},{key:"_submitForm",value:function(){this._getForm().submit()}},{key:"_attachResumeRegistrationFileModeIfNeeded",value:function(){if(!this._getResumeRegistrationFileModeInput().length){var e=pjQuery("<input/>",{class:"resumeRegistrationFileMode",type:"hidden",name:"radio"});this._getForm().prepend(e)}}},{key:"_setResumeRegistrationFileMode",value:function(e){this._getResumeRegistrationFileModeInput().val(e)}},{key:"_getResumeRegistrationFileModeInput",value:function(){return pjQuery("input.resumeRegistrationFileMode")}},{key:"_buildManualMethodContainer",value:function(){return pjQuery("<fieldset/>",{id:this._id+"FieldSetContainer",class:"manualRegisterMethodExtra Section"})}},{key:"_buildInputFieldSpecContainer",value:function(){return pjQuery("<div/>",{id:this._id+"FieldSpec",class:"fieldSpec"})}},{key:"_buildUploadResumeButton",value:function(e){var t=pjQuery("<button/>",{id:this._uploadButtonId,class:"button button--primary button--default",type:"submit",value:e,text:e});return pjQuery("<div/>",{id:this._uploadButtonId+"Container",class:"fieldSpec button-bar"}).append(t)}},{key:"_buildErrorContainer",value:function(e,t){var n=pjQuery("<span/>",{id:this._errorContainerId,class:"errorMessage",role:"alert","data-fieldlabel":t,text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!)"}));return n.hide(),n}},{key:"_buildErrorContainerAccessibilityMessage",value:function(e,t){return pjQuery("<div/>",{id:this._errorContainerId+"Message",class:"screenReaderVisibility",role:"alert","data-fieldlabel":t,text:e})}},{key:"_buildRequiredFieldLabel",value:function(e,t){return pjQuery("<label/>",{class:"requiredField",text:e,for:t}).append(this._buildLabelRequiredIcon())}},{key:"_buildRequiredHtmlFieldLabel",value:function(e,t){return pjQuery("<label/>",{class:"requiredField",html:e,for:t}).append(this._buildLabelRequiredIcon())}},{key:"_buildAnotherFileButtonContainer",value:function(e,t){return pjQuery("<div/>",{class:"fieldContainer"}).append([pjQuery("<div/>",{class:"selectedFile"}).append([pjQuery("<span/>",{id:e,text:this._dictionary.noFileSelected}),pjQuery("<a/>",{id:t,class:"button button--secondary button--small",text:this._dictionary.chooseAnotherFile,tabindex:0,role:"button"})])])}},{key:"_buildLabelRequiredIcon",value:function(e,t){return pjQuery("<span/>",{class:"labelRequiredIcon","aria-hidden":!0,text:" *"})}},{key:"_showCurrentManualMethodContainerAndHideMoreManualMethods",value:function(){pjQuery("fieldset.manualRegisterMethodExtra").each((function(){pjQuery(this).hide()})),pjQuery("#"+this._id+"FieldSetContainer").show(),pjQuery("a.list__item__link").each((function(){pjQuery(this).removeClass("manualRegisterMethodSelected")})),this._getManualMethodButton().addClass("manualRegisterMethodSelected")}},{key:"_getManualMethodButton",value:function(){return pjQuery("#"+this._id)}},{key:"_getUploadButton",value:function(){return pjQuery("#"+this._uploadButtonId)}},{key:"_getUploadButtonContainer",value:function(){return pjQuery("#"+this._uploadButtonId+"Container")}},{key:"_getErrorContainer",value:function(){return pjQuery("#"+this._errorContainerId)}},{key:"_getFieldSetContainer",value:function(){return pjQuery("#"+this._id+"FieldSetContainer")}},{key:"_getFieldContainer",value:function(){return pjQuery("#"+this._id+"FieldSpec")}},{key:"_showInputErrorContainer",value:function(e){e=e||this._dictionary.fieldIsRequired,this._getErrorContainer().text(e),this._getErrorContainer().show(),this._getFieldContainer().addClass("hasErrors")}},{key:"_hideInputErrorContainer",value:function(){this._getErrorContainer().hide(),this._getFieldContainer().removeClass("hasErrors")}},{key:"_enableKeyboardClickForAccessibility",value:function(e){e.keypress((function(e){var t=e.keyCode?e.keyCode:e.which;13!==t&&32!==t||(e.preventDefault(),this.click())}))}}])&&wv(e.prototype,t),n&&wv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Ev=Sv;function Pv(e){return Pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(e)}function kv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kv(Object(n),!0).forEach((function(t){jv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jv(e,t,n){return(t=Fv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fv(r.key),r)}}function Fv(e){var t=function(e,t){if("object"!=Pv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pv(t)?t:t+""}function Cv(e,t,n){return t=Av(t),function(e,t){if(t&&("object"===Pv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dv()?Reflect.construct(t,n||[],Av(e).constructor):t.apply(e,n))}function Dv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dv=function(){return!!e})()}function Rv(){return Rv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Av(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Rv.apply(this,arguments)}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Av(e)}function Nv(e,t){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nv(e,t)}if(!xv)var xv=n(45061);n(71064);var Lv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Cv(this,t,[e,"uploadPasteResume","pasteManualMethodErrorContainer","resumePasteField"])).textAreaId="resumePaste",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nv(e,t)}(t,e),n=t,(r=[{key:"prepare",value:function(){this._appendTextAreaContainer(),this._appendContinueButton(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var n=document.getElementById(e),r=Rv(Av(t.prototype),"_getCommonDictionaryFromData",this).call(this,e),o={copyAndPasteResume:n.dataset.copyandpasteresume};return Tv(Tv({},r),o)}},{key:"_appendTextAreaContainer",value:function(){var e=pjQuery("<label/>",{class:"requiredField",for:this.textAreaId,text:this._dictionary.copyAndPasteResume}).append(this._buildLabelRequiredIcon()),t=pjQuery("<div/>",{class:"fieldContainer"}).append(pjQuery("<textarea/>",{id:this.textAreaId,name:"resumePaste","aria-required":!0}));this._appendFieldContainerToForm(e,t,this._dictionary.copyAndPasteResume)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(){e._showCurrentManualMethodContainerAndHideMoreManualMethods(),e._getTextArea().focus()})),this._enableKeyboardClickForAccessibility(t),this._getUploadButton().click((function(t){t.preventDefault(),e._isResumePasted()?(e._setResumeRegistrationFileMode("paste"),e._submitForm()):e._getErrorContainer().show()})),this._getTextArea().on("keyup change focusout",(function(t){pjQuery(this).val()?(e._getUploadButtonContainer().show(),e._hideInputErrorContainer()):e._showInputErrorContainer()}))}},{key:"_isResumePasted",value:function(){return!!this._getTextArea().val()}},{key:"_getTextArea",value:function(){return pjQuery("#"+this.textAreaId)}}])&&Iv(n.prototype,r),o&&Iv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ev);xv.getInstance().addEventHandler(xv.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="paste"]');e&&e.forEach((function(e){new Lv(e.id).prepare()}))}),xv.PRIORITY_MEDIUM);n(96088);function Mv(e){return Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(e)}function Vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bv(r.key),r)}}function Bv(e){var t=function(e,t){if("object"!=Mv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mv(t)?t:t+""}function Wv(e,t,n){return t=Hv(t),function(e,t){if(t&&("object"===Mv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Uv()?Reflect.construct(t,n||[],Hv(e).constructor):t.apply(e,n))}function Uv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uv=function(){return!!e})()}function Yv(){return Yv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yv.apply(this,arguments)}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hv(e)}function zv(e,t){return zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zv(e,t)}n(71064);var Qv=function(e){function t(e,n,r,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Wv(this,t,[e,n,r,o]))._checkboxErrorContainerId="checkboxErrorContainer",a._checkboxInputId="checkBox",a._fileSizeLimitInMegabytes=parseFloat(i),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zv(e,t)}(t,e),n=t,(r=[{key:"_getRegisterMethodUploadType",value:function(){throw new Error("unimplementedMethod: ManualRegisterMethodUploadBase#_getRegisterMethodUploadType")}},{key:"_isFileAvailable",value:function(){throw new Error("unimplementedMethod: ManualRegisterMethodUploadBase#_isFileAvailable")}},{key:"_appendCheckboxToForm",value:function(e,t,n){var r=this._getFieldSetContainer(),o=this._buildCheckboxFieldSpecContainer(),i=this._buildCheckboxErrorContainer(this._dictionary.fieldIsRequired,n),a=this._buildCheckboxErrorContainerAccessibilityMessage(this._dictionary.fieldIsRequired,n);r.append(a),o.append(e),e.append(t),o.append(i),r.append(o),r.hide(),this._attachResumeRegistrationFileModeIfNeeded()}},{key:"_appendPrivacyPolicyAcceptanceContainer",value:function(){var e=this._checkboxInputId+this._getRegisterMethodUploadType(),t=this._buildRequiredHtmlFieldLabel(this._dictionary.requirePrivacyPolicyAcceptanceText,e),n=pjQuery("<input/>",{id:e,type:"checkbox",name:e,"aria-required":!0}),r=this._buildPrivacyPolicyAcceptanceCheckboxContainer();r.prepend(n),this._appendCheckboxToForm(r,t,this._dictionary.requirePrivacyPolicyAcceptanceText)}},{key:"_buildPrivacyPolicyAcceptanceCheckboxContainer",value:function(){return pjQuery("<div/>",{class:"fieldContainerCheckbox"})}},{key:"_buildCheckboxErrorContainerAccessibilityMessage",value:function(e,t){return pjQuery("<div/>",{id:this._checkboxErrorContainerId+this._getRegisterMethodUploadType()+"Message",class:"screenReaderVisibility",role:"alert","data-fieldlabel":t,text:e})}},{key:"_showCurrentManualMethodContainerAndHideMoreManualMethods",value:function(){pjQuery("#"+this._id+"Checkbox").show(),this._getUploadButtonContainer().show(),Yv(Hv(t.prototype),"_showCurrentManualMethodContainerAndHideMoreManualMethods",this).call(this)}},{key:"_getCheckbox",value:function(){return pjQuery("#"+this._checkboxInputId+this._getRegisterMethodUploadType())}},{key:"_setCheckboxEvents",value:function(){if(this._dictionary.requirePrivacyPolicyAcceptance){var e=this,t=this._getCheckbox();t.click((function(){t.prop("checked")?e._hideCheckboxErrorContainer():e._showCheckboxErrorContainer()}))}}},{key:"_showCheckboxErrorContainer",value:function(){this._getCheckboxErrorContainer().show(),this._getCheckboxErrorContainer().addClass("hasErrors")}},{key:"_getCheckboxErrorContainer",value:function(){return pjQuery("#"+this._checkboxErrorContainerId+this._getRegisterMethodUploadType())}},{key:"_hideCheckboxErrorContainer",value:function(){this._getCheckboxErrorContainer().hide(),this._getCheckboxErrorContainer().removeClass("hasErrors")}},{key:"_buildCheckboxFieldSpecContainer",value:function(){return pjQuery("<div/>",{id:this._id+"FieldSpecCheckbox",class:"fieldSpecCheckbox"})}},{key:"_buildCheckboxErrorContainer",value:function(e,t){var n=pjQuery("<span/>",{id:this._checkboxErrorContainerId+this._getRegisterMethodUploadType(),class:"errorMessage",role:"alert","data-fieldlabel":t,text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!)"}));return n.hide(),n}},{key:"_setUploadButtonEvents",value:function(){if(this._dictionary.requirePrivacyPolicyAcceptance)this._setUploadButtonEventWithPrivacyPolicyAcceptanceCheckbox();else{var e=this;this._getUploadButton().click((function(t){t.preventDefault(),e._isFileAvailable()?(e._setResumeRegistrationFileMode(e._getRegisterMethodUploadType()),e._submitForm()):e._showInputErrorContainer()}))}}},{key:"_setUploadButtonEventWithPrivacyPolicyAcceptanceCheckbox",value:function(){var e=this,t=this._getUploadButton(),n=this._getCheckbox();t.click((function(t){t.preventDefault(),e._isFileAvailable()&&n.prop("checked")?(e._setResumeRegistrationFileMode(e._getRegisterMethodUploadType()),e._submitForm()):e._isFileAvailable()||n.prop("checked")?n.prop("checked")?e._isFileAvailable()||e._showInputErrorContainer():e._showCheckboxErrorContainer():(e._showInputErrorContainer(),e._showCheckboxErrorContainer())}))}},{key:"_getFileSizeInMegabytes",value:function(e){return e/1024/1024}}])&&Vv(n.prototype,r),o&&Vv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ev);const qv=Qv;const Gv=function(){var e=[{name:"fakeDropboxResume.txt",link:"fakeDropboxResumeLink"}];function t(){}function n(e){this.options=e}return t.prototype.createChooseButton=function(e){return new n(e)},n.prototype.click=function(){this.options.success(e)},{getApi:function(){return(new By.A).get("enableDropboxDummyApi")?new t:Dropbox}}}();function Jv(e){return Jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(e)}function Kv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kv(Object(n),!0).forEach((function(t){Zv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zv(e,t,n){return(t=eb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eb(r.key),r)}}function eb(e){var t=function(e,t){if("object"!=Jv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jv(t)?t:t+""}function tb(e,t,n){return t=ob(t),function(e,t){if(t&&("object"===Jv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nb()?Reflect.construct(t,n||[],ob(e).constructor):t.apply(e,n))}function nb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nb=function(){return!!e})()}function rb(){return rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ob(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},rb.apply(this,arguments)}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ob(e)}function ib(e,t){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ib(e,t)}if(!ab)var ab=n(45061);n(71064);var ub=function(e){function t(e,n,r,o,i,a,u){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=tb(this,t,[e,"uploadDropboxResume","dropboxManualMethodErrorContainer","resumeDropboxField",o]))._appKey=n,l._allowedFileExtensions=r,l._dropboxLinkId=i,l._dropboxFileNameId=a,l._dropboxHiddenContainerId=u,l._dropboxLinkNameContainerId="dropboxLinkNameContainer",l._dropboxPickerAnotherId="dropboxPickerAnother",l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ib(e,t)}(t,e),n=t,(r=[{key:"_getRegisterMethodUploadType",value:function(){return"dropbox"}},{key:"prepare",value:function(){this._appendDropboxContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._appendHiddenInputs();var e=this._buildDropboxButton();this._attachEvents(e)}},{key:"_buildDictionaryFromData",value:function(e){var n=document.getElementById(e),r=rb(ob(t.prototype),"_getCommonDictionaryFromData",this).call(this,e),o={chooseAnotherFile:n.dataset.chooseanotherfile,fromDropbox:n.dataset.fromdropbox,fileSizeLimitError:n.dataset.filesizelimiterror};return $v($v({},r),o)}},{key:"_appendHiddenInputs",value:function(){this._getForm().append([pjQuery("<input/>",{type:"hidden",name:this._dropboxFileNameId,id:this._dropboxFileNameId}),pjQuery("<input/>",{type:"hidden",name:this._dropboxLinkId,id:this._dropboxLinkId})])}},{key:"_appendDropboxContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromDropbox,this._dropboxLinkId),t=this._buildAnotherFileButtonContainer(this._dropboxLinkNameContainerId,this._dropboxPickerAnotherId);this._appendFieldContainerToForm(e,t,this._dictionary.fromDropbox)}},{key:"_attachEvents",value:function(e){var t=this,n=this._getManualMethodButton();n.click((function(n){n.preventDefault(),t._initDropboxPicker(e)})),this._enableKeyboardClickForAccessibility(n);var r=pjQuery("#"+this._dropboxPickerAnotherId);r.click((function(n){n.preventDefault(),t._initDropboxPicker(e)})),this._enableKeyboardClickForAccessibility(r),this._setUploadButtonEvents(),this._setCheckboxEvents()}},{key:"_isFileAvailable",value:function(){return!!pjQuery("#dropboxLink").val()}},{key:"_initDropboxPicker",value:function(e){this._showCurrentManualMethodContainerAndHideMoreManualMethods(),e.click(),pjQuery("#"+this._dropboxPickerAnotherId).focus()}},{key:"_buildDropboxButton",value:function(){var e=this,t={success:function(t){e._getFileSizeInMegabytes(t[0].bytes)>e._fileSizeLimitInMegabytes?(pjQuery("#"+e._dropboxFileNameId).val(null),pjQuery("#"+e._dropboxLinkId).val(null),pjQuery("#"+e._dropboxLinkNameContainerId).text(e._dictionary.noFileSelected),e._showInputErrorContainer(e._dictionary.fileSizeLimitError),e._setResumeRegistrationFileMode("")):(pjQuery("#"+e._dropboxFileNameId).val(t[0].name),pjQuery("#"+e._dropboxLinkId).val(t[0].link),pjQuery("#"+e._dropboxPickerAnotherId).show(),pjQuery("#"+e._dropboxLinkNameContainerId).text(t[0].name),e._hideInputErrorContainer(),e._getUploadButtonContainer().show(),e._getUploadButton().focus())},cancel:function(){pjQuery("#"+e._dropboxLinkId).val()?(e._getUploadButtonContainer().show(),e._getUploadButton().focus()):(e._getUploadButtonContainer().hide(),e._showInputErrorContainer(),e._setResumeRegistrationFileMode(""),pjQuery("#"+e._dropboxPickerAnotherId).focus())},linkType:"direct",extensions:JSON.parse(this._allowedFileExtensions)},n=Gv.getApi().createChooseButton(t);return pjQuery("#"+this._dropboxHiddenContainerId).append(n),n}}])&&Xv(n.prototype,r),o&&Xv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(qv);ab.getInstance().addEventHandler(ab.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="dropbox"]');e&&e.forEach((function(e){new ub(e.id,e.dataset.appkey,e.dataset.allowedmimetypes,e.dataset.filesizelimit,e.dataset.linkid,e.dataset.filenameid,e.dataset.hiddencontainerid).prepare()}))}),ab.PRIORITY_MEDIUM);function lb(e){return lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(e)}function sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sb(Object(n),!0).forEach((function(t){fb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fb(e,t,n){return(t=db(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,db(r.key),r)}}function db(e){var t=function(e,t){if("object"!=lb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lb(t)?t:t+""}function yb(e,t,n){return t=bb(t),function(e,t){if(t&&("object"===lb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hb()?Reflect.construct(t,n||[],bb(e).constructor):t.apply(e,n))}function hb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hb=function(){return!!e})()}function vb(){return vb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bb(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},vb.apply(this,arguments)}function bb(e){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bb(e)}function mb(e,t){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mb(e,t)}if(!gb)var gb=n(45061);n(71064);var _b=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=yb(this,t,[e,"uploadFileResume","fileManualMethodErrorContainer","resumeFileField",r]))._fileInputId="resumeFile",o._allowedFileExtensions=n,o._fileNameContainerId="fileNameContainer",o._filePickerAnotherId="filePickerAnother",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mb(e,t)}(t,e),n=t,(r=[{key:"prepare",value:function(){this._appendInputFileContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var n=document.getElementById(e),r=vb(bb(t.prototype),"_getCommonDictionaryFromData",this).call(this,e),o={chooseAnotherFile:n.dataset.chooseanotherfile,fromComputer:n.dataset.fromcomputer,fileSizeLimitError:n.dataset.filesizelimiterror};return cb(cb({},r),o)}},{key:"_appendInputFileContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromComputer,this._fileInputId),t=pjQuery("<input/>",{id:this._fileInputId,type:"file",name:this._fileInputId,"aria-required":!0,accept:this._allowedFileExtensions});t.hide();var n=this._buildAnotherFileButtonContainer(this._fileNameContainerId,this._filePickerAnotherId);n.prepend(t),this._appendFieldContainerToForm(e,n,this._dictionary.fromComputer)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(){e._showCurrentManualMethodContainerAndHideMoreManualMethods(),e._getFileInput().click(),pjQuery("#"+e._filePickerAnotherId).focus()})),this._enableKeyboardClickForAccessibility(t);var n=pjQuery("#"+this._filePickerAnotherId);n.click((function(t){t.preventDefault(),e._getManualMethodButton().click()})),this._enableKeyboardClickForAccessibility(n),this._setCheckboxEvents(),this._setUploadButtonEvents(),this._getFileInput().change((function(){pjQuery(this).val()?e._getFileSizeInMegabytes(this.files[0].size)>e._fileSizeLimitInMegabytes?(pjQuery(this).val(null),e._showInputErrorContainer(e._dictionary.fileSizeLimitError),e._setResumeRegistrationFileMode(""),pjQuery("#"+e._fileNameContainerId).text(e._dictionary.noFileSelected)):(e._hideInputErrorContainer(),e._getUploadButton().focus(),pjQuery("#"+e._fileNameContainerId).text(this.files[0].name)):(e._setResumeRegistrationFileMode(""),e._getFileInput().focus(),pjQuery("#"+e._fileNameContainerId).text(e._dictionary.noFileSelected))}))}},{key:"_getRegisterMethodUploadType",value:function(){return"file"}},{key:"_isFileAvailable",value:function(){return!!this._getFileInput().val()}},{key:"_getFileInput",value:function(){return pjQuery("#"+this._fileInputId)}}])&&pb(n.prototype,r),o&&pb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(qv);gb.getInstance().addEventHandler(gb.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="file"]');e&&e.forEach((function(e){new _b(e.id,e.dataset.allowedfilextensions,e.dataset.filesizelimit).prepare()}))}),gb.PRIORITY_MEDIUM);const wb=function(){var e={access_token:"fakeAccessToken"},t={id:"fakeDriveResumeId",title:"fakeDriveResume.txt"};function n(){}function r(){}function o(e){this.options=e,e.onSelect(t)}return n.prototype.auth=new r,r.prototype.getToken=function(){return e},{getApi:function(){return(new By.A).get("enableGoogleDriveDummyApi")?new n:gapi},createFilePicker:function(e){return(new By.A).get("enableGoogleDriveDummyApi")?new o(e):new FilePicker(e)}}}();function Ob(e){return Ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ob(e)}function Sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(n),!0).forEach((function(t){Pb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pb(e,t,n){return(t=Tb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tb(r.key),r)}}function Tb(e){var t=function(e,t){if("object"!=Ob(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ob(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ob(t)?t:t+""}function jb(e,t,n){return t=Cb(t),function(e,t){if(t&&("object"===Ob(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ib()?Reflect.construct(t,n||[],Cb(e).constructor):t.apply(e,n))}function Ib(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ib=function(){return!!e})()}function Fb(){return Fb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cb(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fb.apply(this,arguments)}function Cb(e){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cb(e)}function Db(e,t){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Db(e,t)}if(!Rb)var Rb=n(45061);n(71064);var Ab=function(e){function t(e,n,r,o,i,a,u,l){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=jb(this,t,[e,"uploadDriveResume","driveManualMethodErrorContainer","resumeDriveField",u]))._appKey=n,s._clientId=r,s._scope=o,s._exportTpye=i,s._allowedFileExtensions=a,s._driveFileNameId=l,s._driveLinkNameContainerId="driveLinkNameContainer",s._drivePickerAnotherId="drivePickerAnother",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Db(e,t)}(t,e),n=t,(r=[{key:"_getRegisterMethodUploadType",value:function(){return"drive"}},{key:"prepare",value:function(){this._appendGoogleDriveContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._appendHiddenInput(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var n=document.getElementById(e),r=Fb(Cb(t.prototype),"_getCommonDictionaryFromData",this).call(this,e),o={chooseAnotherFile:n.dataset.chooseanotherfile,fromDrive:n.dataset.fromdrive,fileSizeLimitError:n.dataset.filesizelimiterror};return Eb(Eb({},r),o)}},{key:"_appendHiddenInput",value:function(){this._getForm().append(pjQuery("<input/>",{type:"hidden",name:this._driveFileNameId,id:this._driveFileNameId}))}},{key:"_appendGoogleDriveContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromDrive,this._driveFileNameId),t=this._buildAnotherFileButtonContainer(this._driveLinkNameContainerId,this._drivePickerAnotherId);this._appendFieldContainerToForm(e,t,this._dictionary.fromDrive)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(t){t.preventDefault(),e._initDrivePicker(e._id)})),this._enableKeyboardClickForAccessibility(t);var n=pjQuery("#"+this._drivePickerAnotherId);n.click((function(t){t.preventDefault(),e._initDrivePicker(e._drivePickerAnotherId)})),this._enableKeyboardClickForAccessibility(n),this._setCheckboxEvents(),this._setUploadButtonEvents()}},{key:"_isFileAvailable",value:function(){return!!pjQuery("#driveFileId").val()}},{key:"_initDrivePicker",value:function(e){this._showCurrentManualMethodContainerAndHideMoreManualMethods();var t=this;wb.createFilePicker({apiKey:this._appKey,clientId:this._clientId,scope:this._scope,buttonEl:document.getElementById(e),onSelect:function(e){if(t._getFileSizeInMegabytes(parseInt(e.fileSize,10))>t._fileSizeLimitInMegabytes)pjQuery("#"+t._driveFileNameId).val(null),pjQuery("#"+t._driveLinkNameContainerId).text(t._dictionary.noFileSelected),t._showInputErrorContainer(t._dictionary.fileSizeLimitError),t._setResumeRegistrationFileMode("");else{var n=e.title;e&&e.id&&(t.addFileDataToDownload(e),pjQuery("#"+t._drivePickerAnotherId).show(),t._getUploadButtonContainer().show(),t._hideInputErrorContainer()),pjQuery("#"+t._driveFileNameId).val(n),pjQuery("#"+t._driveLinkNameContainerId).text(e.title),t._getUploadButton().focus()}},onCancel:function(){pjQuery("#"+t._driveLinkId).val()?(t._getUploadButtonContainer().show(),t._getUploadButton().focus()):(t._getUploadButtonContainer().hide(),t._showInputErrorContainer(),t._setResumeRegistrationFileMode(""),pjQuery("#"+t._drivePickerAnotherId).focus())},extensions:this._allowedFileExtensions}),pjQuery("#"+this._drivePickerAnotherId).focus()}},{key:"addFileDataToDownload",value:function(e){if(e&&e.id){var t=wb.getApi().auth.getToken().access_token,n=this._getForm();this.createInputIfNotExists({name:"driveFileId",id:"driveFileId",value:e.id,type:"hidden"}).appendTo(n),this.createInputIfNotExists({name:"driveAccessToken",id:"driveAccessToken",value:t,type:"hidden"}).appendTo(n)}}},{key:"createInputIfNotExists",value:function(e){var t=pjQuery("#"+e.id);return 0===t.length&&(t=pjQuery("<input>")),t.attr(e),t}}])&&kb(n.prototype,r),o&&kb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(qv);Rb.getInstance().addEventHandler(Rb.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="drive"]');e&&e.forEach((function(e){new Ab(e.id,e.dataset.appkey,e.dataset.clientid,e.dataset.scope,e.dataset.exportmimetype,e.dataset.allowedmimetypes,e.dataset.filesizelimit,e.dataset.filenameid).prepare()}))}),Rb.PRIORITY_MEDIUM);function Nb(e){return Nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(e)}function xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lb(r.key),r)}}function Lb(e){var t=function(e,t){if("object"!=Nb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nb(t)?t:t+""}function Mb(e,t,n){return t=Bb(t),function(e,t){if(t&&("object"===Nb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vb()?Reflect.construct(t,n||[],Bb(e).constructor):t.apply(e,n))}function Vb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vb=function(){return!!e})()}function Bb(e){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bb(e)}function Wb(e,t){return Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wb(e,t)}if(!Ub)var Ub=n(45061);n(71064);var Yb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mb(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wb(e,t)}(t,e),n=t,(r=[{key:"prepare",value:function(){this._attachEvents()}},{key:"_attachEvents",value:function(){var e=this._getManualMethodButton();this._enableKeyboardClickForAccessibility(e)}}])&&xb(n.prototype,r),o&&xb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Ev);Ub.getInstance().addEventHandler(Ub.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="later"]');e&&e.forEach((function(e){new Yb(e.id).prepare()}))}),Ub.PRIORITY_MEDIUM);function Hb(e){return Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(e)}function zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qb(r.key),r)}}function Qb(e){var t=function(e,t){if("object"!=Hb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hb(t)?t:t+""}if(!qb)var qb=n(45061);var Gb=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"inject",value:function(e,t){var n=document.getElementById(t);(n=n.contentWindow||n.contentDocument.document||n.contentDocument).document.open(),n.document.write(e),n.document.close()}}])&&zb(e.prototype,t),n&&zb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();qb.getInstance().addEventHandler(qb.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('iframe[class="pCustomFrame"]');if(e){var t=new Gb;e.forEach((function(e){t.inject(e.dataset.content,e.id)}))}}),qb.PRIORITY_MEDIUM);function Jb(e){return Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(e)}function Kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$b(r.key),r)}}function $b(e){var t=function(e,t){if("object"!=Jb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jb(t)?t:t+""}if(!Zb)var Zb=n(45061);var Xb=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"configureButtonClick",value:function(e){var t=document.getElementById("default-apply-button");t&&(t.onclick=window[e])}}])&&Kb(e.prototype,t),n&&Kb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),em=Zb.getInstance(),tm=new By.A;em.addEventHandler(Zb.EVENT_LOAD_NAME,(function(){var e=tm.get("linkedinDefaultApplyButton");e&&(new Xb).configureButtonClick(e.onclickmethod)}),Zb.PRIORITY_MEDIUM);function nm(e){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(e)}function rm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,om(r.key),r)}}function om(e){var t=function(e,t){if("object"!=nm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nm(t)?t:t+""}if(!im)var im=n(45061);var am=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"formatWidth",value:function(e){for(var t=document.querySelectorAll('div.progress__bar[data-progress="'+e+'%"]'),n=0;n<t.length;n++)t[n].style.width=e+"%"}}],t&&rm(e.prototype,t),n&&rm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),um=im.getInstance(),lm=new By.A;um.addEventHandler(im.EVENT_LOAD_NAME,(function(){var e=lm.getAllByDataValue("type","listProgressBarData");if(e){var t=new am;e.forEach((function(e){t.formatWidth(e.dataset.progress)}))}}),im.PRIORITY_MEDIUM);function sm(e){return sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(e)}function cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fm(r.key),r)}}function fm(e){var t=function(e,t){if("object"!=sm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sm(t)?t:t+""}if(!pm)var pm=n(45061);var dm=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"configureDelegateWidget",value:function(e,t){pjQuery("#delegateWidget").autocomplete({source:function(n,r){pjQuery.ajax({type:"POST",url:"/"+e+"/_portalUserApi?delegates=true",dataType:"json",cache:!1,xhrFields:{withCredentials:!0},data:JSON.stringify({key:n.term,usePositionTitle:t}),success:function(e){r(pjQuery.map(e,(function(e){return{label:e.longName,shortName:e.shortName,value:e.id}})))}})},minLength:2,select:function(e,t){return pjQuery("#delegateUserId").val(""),0!=t.item.value&&(pjQuery("#delegateWidget").val(t.item.label),pjQuery("#delegateUserId").val(t.item.value)),!1},focus:function(e,t){return pjQuery("#delegateUserId").val(""),0!=t.item.value&&(pjQuery("#delegateWidget").val(t.item.label),pjQuery("#delegateUserId").val(t.item.value)),!1}});var n=pjQuery("#delegateEnabled"),r=pjQuery("#delegateNotify");if(n.length&&r.length){var o=this;n.on("change",(function(){o._delegateEnableChecker(n,r)})),this._delegateEnableChecker(n,r)}}},{key:"_delegateEnableChecker",value:function(e,t){e.prop("checked")?t.attr("disabled",!1):(t.attr("disabled","disabled"),t.attr("checked",!1))}}])&&cm(e.prototype,t),n&&cm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),ym=pm.getInstance(),hm=new By.A;ym.addEventHandler(pm.EVENT_LOAD_NAME,(function(){var e=hm.get("portalsDelegateWidget");e&&(new dm).configureDelegateWidget(e.portalurlpath,e.setshowpositiontitle)}),pm.PRIORITY_HIGH);function vm(e){return vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(e)}function bm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mm(r.key),r)}}function mm(e){var t=function(e,t){if("object"!=vm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vm(t)?t:t+""}if(!gm)var gm=n(45061);var _m=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"configureSelect",value:function(e){var t=document.querySelector('select[name="template"]');t&&t.addEventListener("change",(function(){var n=e[t.options[t.selectedIndex].value],r=document.getElementById("jobTemplateWidgetDescription");if(r&&r.parentNode.removeChild(r),0!==t.selectedIndex&&n){var o=document.createElement("span");o.setAttribute("id","jobTemplateWidgetDescription");var i=document.createTextNode(n);o.appendChild(i),document.getElementById("jobTemplateWidget").appendChild(o)}}))}}])&&bm(e.prototype,t),n&&bm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),wm=gm.getInstance(),Om=new By.A;wm.addEventHandler(gm.EVENT_LOAD_NAME,(function(){var e=Om.get("jobTemplateWidget");e&&(new _m).configureSelect(JSON.parse(e.templatesdatajson))}),gm.PRIORITY_MEDIUM);function Sm(){}Sm.assertIsValid=function(e){if(!(e&&e instanceof Sm))throw new Error("invalidArgumentException: invalid value. It must be an instance of ValueBaseLegacy.")},Sm.prototype.getType=function(){throw new Error("notImplementedError")},Sm.prototype.toString=function(){throw new Error("notImplementedError")},Sm.prototype.isEmpty=function(){return!1};const Em=Sm;function Pm(){Em.call(this)}Pm.TYPE="FieldEmptyValueLegacy",Pm.prototype=Object.create(Em.prototype),Pm.prototype.getType=function(){return Pm.TYPE},Pm.prototype.toString=function(){return""},Pm.prototype.isEmpty=function(){return!0};const km=Pm;function Tm(){}Tm.registerFieldDependency=function(e,t,n){PortalHtml.elementExists(e)&&PortalHtml.elementExists(t)&&(n!==Tm.TYPE_DISPLAY&&n!==Tm.TYPE_VALUES||(Tm._existsFieldWithDependencies(t)||(Tm._fieldsDependencies[t]=[]),-1===Tm._fieldsDependencies[t].indexOf(e)&&(Tm._fieldsDependencies[t][e]=[]),-1===Tm._fieldsDependencies[t][e].indexOf(n)&&Tm._fieldsDependencies[t][e].push(n)))},Tm.getChildDependentFieldsOf=function(e){return Tm._existsFieldWithDependencies(e)?Tm._fieldsDependencies[e]:[]},Tm._existsFieldWithDependencies=function(e){return e in Tm._fieldsDependencies},Tm.TYPE_DISPLAY="Display",Tm.TYPE_VALUES="Values",Tm._fieldsDependencies={};const jm=Tm;function Im(e){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(e)}function Fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cm(r.key),r)}}function Cm(e){var t=function(e,t){if("object"!=Im(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Im(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Im(t)?t:t+""}var Dm=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentDependencyFieldId=t,this._operator=n,this._value=r},(t=[{key:"getParentDependencyFieldId",value:function(){return this._parentDependencyFieldId}},{key:"getOperator",value:function(){return this._operator}},{key:"getValue",value:function(){return this._value}}])&&Fm(e.prototype,t),n&&Fm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Rm=Dm;function Am(){}Am.isFieldRegistered=function(e){return e in Am._fields},Am.registerField=function(e,t){return!(Am.isFieldRegistered(e)||!PortalHtml.elementExists(e))&&(Am._fields[e]=t,!0)},Am.getFieldValue=function(e){return Am._getFieldOrDie(e).getValue()},Am.getFieldValueByType=function(e,t){var n=Am._getFieldOrDie(e).getValue();if(n.getType()!==t&&n.getType()!==km.TYPE)throw new Error("invalidValueError: field "+e+" returns "+n.getType()+" values");return n},Am.getFieldValueForVisibilityCondition=function(e){return Am._getFieldOrDie(e).getValueForVisibilityCondition()},Am.setFieldValue=function(e,t){Am._getFieldOrDie(e).setValue(t)},Am.hasValue=function(e){var t=Am.getField(e);if(null!==t)return t.hasValue();Am._throwFieldNotRegisteredException(e)},Am.cloneForNewTableRow=function(e,t,n){PortalString.isString(n)||(n="");var r=e+"-0"+n,o=e+"-"+t+n;if(null===Am.getField(o)){var i=Am.getField(r);null===i&&Am._throwFieldNotRegisteredException(e),i.cloneForNewTableRow(o,t)}},Am.isVisible=function(e){var t=Am.getField(e);return null!==t&&t.isVisible()},Am.setFieldVisibilityConditionFromParams=function(e,t,n,r){if(Am.isFieldRegistered(e)){var o=Am.getField(e),i=new Rm(t,n,r);o.addVisibilityCondition(i)}},Am.onFieldValueChange=function(e){if(Am.isFieldRegistered(e)){var t,n,r,o=jm.getChildDependentFieldsOf(e);for(n in o)if(o.hasOwnProperty(n))for(t=0;t<o[n].length;t++)r=o[n][t],Am._addFieldAsPendingToBeUpdated(n,r,e);var i=Am._getFieldsPendingToBeUpdated(e);for(t=0;t<i.length;t++){n=i[t];var a=Am.getField(n);null!==a&&(a.onRelatedFieldValueChange(e),Am._removePendingToBeUpdatedField(n))}}},Am.fieldAcceptsValueType=function(e,t){return Am._getFieldOrDie(e).fieldAcceptsValueType(t)},Am.isSomeFieldBeingUpdated=function(){for(var e in Am._fields)if(Am._fields.hasOwnProperty(e)&&Am.getField(e).isBeingUpdated())return!0;return!1},Am.getField=function(e){return Am.isFieldRegistered(e)?Am._fields[e]:null},Am.dispatchBeforeSubmit=function(){for(var e in Am._fields)Am.getField(e).onBeforeSubmit()},Am._throwFieldNotRegisteredException=function(e){throw new Error("tryToAccessNonRegisteredField: "+e)},Am._addFieldAsPendingToBeUpdated=function(e,t,n){-1===Am._fieldsPendingToBeUpdated.indexOf(e)?Am._fieldsPendingToBeUpdated[e]={dependencyType:t,parentFieldId:n}:Am._fieldsPendingToBeUpdated[e].dependencyType===jm.TYPE_DISPLAY&&t===jm.TYPE_VALUES&&(Am._fieldsPendingToBeUpdated[e]={dependencyType:t,parentFieldId:n})},Am._getFieldsPendingToBeUpdated=function(e){var t=[];for(var n in Am._fieldsPendingToBeUpdated){if(Am._fieldsPendingToBeUpdated.hasOwnProperty(n))Am._fieldsPendingToBeUpdated[n].parentFieldId===e&&t.push(n)}return t},Am._removePendingToBeUpdatedField=function(e){var t=Am._fieldsPendingToBeUpdated.indexOf(e);t>-1&&Am._fieldsPendingToBeUpdated.splice(t,1)},Am._getFieldOrDie=function(e){var t=Am.getField(e);if(null!==t)return t;Am._throwFieldNotRegisteredException(e)},Am._fieldsPendingToBeUpdated=[],Am._fields={};const Nm=Am;function xm(e){return xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xm(e)}function Lm(){}Lm.evaluateForField=function(e,t){if(!t)return!1;for(var n=!0,r=t.length-1;r>=0;r--){var o=t[r],i=o.getParentDependencyFieldId(),a=Nm.getFieldValueForVisibilityCondition(i);if(!(n=Nm.isVisible(i)&&(a instanceof Array?this._evaluateArrayedValue(a,o.getValue(),o.getOperator()):this._evaluateValue(a,o.getValue(),o.getOperator()))))break}var u=e.isVisible();return n?!u&&(e.show(),!0):!!u&&(e.hide(),!0)},Lm._evaluateArrayedValue=function(e,t,n){return"all"===n||"=="===n?this._arrayEquals(e,t):"!="===n?!this._arrayEquals(e,t):"any"===n?this._arrayContainsAny(e,t):"none"===n?!this._arrayContainsAny(e,t):void 0},Lm._arrayContainsAny=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(Lm._parseValueForEvaluation(e[n])==Lm._parseValueForEvaluation(t[r]))return!0;return!1},Lm._arrayEquals=function(e,t){if(e.length<t.length)return!1;for(var n=!0,r=0;r<t.length;r++){for(var o=!1,i=0;i<e.length&&!o;i++)Lm._parseValueForEvaluation(t[r])==Lm._parseValueForEvaluation(e[i])&&(o=!0);n=o&&n}return n},Lm._evaluateValue=function(e,t,n){return e=Lm._parseValueForEvaluation(e),"=="===n?(null!==e||null===t)&&(e==t||!(e<t||e>t)):"!="===n?e!=t:"any"===n||"none"===n?this._evaluateArrayedValue([e],t,n):"isSet"===n?this._evaluateValueIsSet(e,t):"isEmpty"===n?!this._isValueSet(e):void 0},Lm._evaluateValueIsSet=function(e,t){return this._isWhenIsSetConditionValue(t)?this._isValueSet(e):this._isWhenIsNotSetConditionValue(t)?!this._isValueSet(e):void 0},Lm._isValueSet=function(e){return""!==e&&null!=e},Lm._isWhenIsSetConditionValue=function(e){return"1"===e},Lm._isWhenIsNotSetConditionValue=function(e){return"2"===e},Lm._parseValueForEvaluation=function(e){if(null===e)return null;if("string"==typeof e&&-1!==e.indexOf("JSNType")){var t=JSON.parse(e);return t.value&&t.value.id?t.value.id:null}return"object"===xm(e)&&e.value?e.value.id:e};const Mm=Lm;function Vm(e){this._fieldId=e,this._visibilityConditions=[],this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null}Vm.prototype.register=function(){Nm.registerField(this._fieldId,this)&&this._postRegister()},Vm.prototype.getType=function(){throw new Error("notImplementedError")},Vm.prototype.getValue=function(){throw new Error("notImplementedError")},Vm.prototype.getValueForVisibilityCondition=function(){throw new Error("notImplementedError")},Vm.prototype.setValue=function(e){throw new Error("notImplementedError")},Vm.prototype.hasValue=function(){return!this.getValue().isEmpty()},Vm.prototype._assertIsAllowedValueToSet=function(e){if(Em.assertIsValid(e),!(this._getAllowedValueTypesToSet().indexOf(e.getType())>-1))throw new Error("invalidArgumentException: value to set must be an instance of: "+this._getAllowedValueTypesToSet().join(", "))},Vm.prototype._getAllowedValueTypesToSet=function(){throw new Error("notImplementedError")},Vm.prototype.isRequired=function(){return pjQuery("#fieldSpecContainer"+this._fieldId).find(".requiredField").length||pjQuery("#fieldSpecContainer"+this._fieldId).find(".formrequiredField").length||pjQuery("#fieldSpecContainer"+this._fieldId).find(".datasetrequiredField").length},Vm.prototype.isBeingUpdated=function(){return this._isBeingUpdated||this._shouldReupdateAfterCurrentUpdate},Vm.prototype.cloneForNewTableRow=function(e,t){for(var n=this._buildClonedFieldForNewTableRow(e,t),r=this._visibilityConditions.length-1;r>=0;r--)n.addVisibilityCondition(new Rm(this._visibilityConditions[r].getParentDependencyFieldId().replace(/^((\d+-)+)\d+$/,"$1"+t),this._visibilityConditions[r].getOperator(),this._visibilityConditions[r].getValue()));n.register()},Vm.prototype.getFieldId=function(){return this._fieldId},Vm.prototype.addVisibilityCondition=function(e){null!==e&&(this._visibilityConditions.push(e),FieldsDependenciesLegacy.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),FieldsDependenciesLegacy.TYPE_DISPLAY))},Vm.prototype.isVisible=function(){if(null===this._getFieldContainerElement())return!1;var e=this._getHiddenFieldIndicatorElement();return null===e||0==e.length},Vm.prototype.show=function(){var e=this._getFieldContainerElement();if(e){var t=this._getFieldElement();e.css("display",""),this._resetAttributes(t),this._removeHiddenElementIndicator()}},Vm.prototype.hide=function(){if(this.isVisible()){var e=this._getFieldContainerElement();if(e){e.css("display","none");var t=this._getFieldElement();this._hideElement(t),this._addHiddenElementIndicator()}}},Vm.prototype.onRelatedFieldValueChange=function(e){this._isBeingUpdated?(this._shouldReupdateAfterCurrentUpdate=!0,this._nextUpdateParentFieldId=e):(this._isBeingUpdated=!0,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null,this._updateFieldAfterParentFieldValueChange(e))},Vm.prototype.fieldAcceptsValueType=function(e){return this._getAllowedValueTypesToSet().indexOf(e)>-1},Vm.prototype._postRegister=function(){if(this._attachOnChangeListener(),this.hasValue()){var e=this._fieldId;pjQuery((function(){Nm.onFieldValueChange(e)}))}},Vm.prototype._updateFieldAfterParentFieldValueChange=function(e){var t=this._evaluateConditionalVisibilityAfterRelatedFieldValueChange();this._onFieldUpdated(t)},Vm.prototype._onFieldUpdated=function(e){if(e&&Nm.onFieldValueChange(this._fieldId),this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate){this._shouldReupdateAfterCurrentUpdate=!1;var t=this._nextUpdateParentFieldId;this._nextUpdateParentFieldId=null,this.onRelatedFieldValueChange(t)}},Vm.prototype._evaluateConditionalVisibilityAfterRelatedFieldValueChange=function(){return Mm.evaluateForField(this,this._visibilityConditions)},Vm.prototype._buildClonedFieldForNewTableRow=function(e,t){throw new Error("notImplementedError")},Vm.prototype._resetAttributes=function(e){if(e){var t=e.attr("data-required");t&&(e.prop("required",t),e.attr("aria-required",t));var n=e.data("hiddentype");n&&(this._setElementType(e,n),e.removeAttr("data-hiddenType"));var r=e.attr("data-hiddenValue");r&&(e.val(r),r!==e.val()&&this._unsetOnHide(e),e.removeAttr("data-hiddenValue")),this._resetChildren(e)}},Vm.prototype._hideElement=function(e){if(e&&0!==e.length){e.removeAttr("required"),e.removeAttr("aria-required"),e.attr("data-hiddenType",e.prop("type")),this._setElementType(e,"hidden");var t=e.val();t&&e.attr("data-hiddenValue",t),this._unsetOnHide(e),this._hideChildren(e)}},Vm.prototype._unsetOnHide=function(e){e.val("")},Vm.prototype._hideChildren=function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._hideElement(pjQuery("#"+n.id))}))},Vm.prototype._resetChildren=function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._resetAttributes(pjQuery("#"+n.id))}))},Vm.prototype._addHiddenElementIndicator=function(){this._getFieldContainerElement().append('<input id="'+this._fieldId+'_hidden" name="'+this._fieldId+'_hidden" type="hidden" value="true" />')},Vm.prototype._removeHiddenElementIndicator=function(){pjQuery("#"+this._fieldId+"_hidden").remove()},Vm.prototype._setElementType=function(e,t){if(e.prop("type")!==t)switch(t){case"select-one":e[0].multiple=!1;break;case"select-multiple":e[0].multiple=!0;break;default:this._elementAllowsChangingType(e[0])&&e.prop("type",t)}},Vm.prototype._elementAllowsChangingType=function(e){var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"type");return t&&"function"==typeof t.set},Vm.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("change",(function(){Nm.onFieldValueChange(e.getFieldId())}))},Vm.prototype._getFieldElement=function(){return pjQuery("#"+this._fieldId)},Vm.prototype._getFieldContainerElement=function(){return pjQuery("#fieldSpecContainer"+this._fieldId)},Vm.prototype._getHiddenFieldIndicatorElement=function(){return pjQuery("#"+this._fieldId+"_hidden")},Vm.prototype._triggerEvent=function(e){e=e||"change",this._getFieldElement().trigger(e)},Vm.prototype.onBeforeSubmit=function(){};const Bm=Vm;function Wm(){}Wm.registerDatasource=function(e,t){Wm._isDatasourceRegistered(e)||(Wm._datasources[e]=t)},Wm.getForField=function(e){var t=Wm._getDatasource(e);if(null!==t)return t;throw new Error("tryToAccessNonRegisteredDatasource: "+e)},Wm.cloneDatasourceForNewTableRow=function(e,t,n){var r=Wm.getForField(e).cloneForNewTableRow(t,n);Wm.registerDatasource(t,r)},Wm._getDatasource=function(e){return Wm._isDatasourceRegistered(e)?Wm._datasources[e]:null},Wm._isDatasourceRegistered=function(e){return e in Wm._datasources},Wm._datasources={};const Um=Wm;function Ym(e,t){if(Em.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(t))throw new Error("invalidValue: option text must be a valid string");this._optionId=e,this._optionText=t}Ym.TYPE="FieldOptionValueLegacy",Ym.prototype=Object.create(Em.prototype),Ym.prototype.getType=function(){return Ym.TYPE},Ym.prototype.toString=function(){return this._optionText},Ym.prototype.getOptionId=function(){return this._optionId},Ym.prototype.getOptionText=function(){return this._optionText};const Hm=Ym;function zm(e){if(Em.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options must be a non-empty array");var t=this;e.forEach((function(e,n){t._assertIsValidOption(e)})),this._options=e}zm.buildOption=function(e,t){return{id:e,text:t}},zm.TYPE="FieldMultipleOptionsValueLegacy",zm.prototype=Object.create(Em.prototype),zm.prototype.getType=function(){return zm.TYPE},zm.prototype.toString=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),"["+e.join(",")+"]"},zm.prototype.getOptionsIds=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.id)})),e},zm.prototype.getOptionsTexts=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),e},zm.prototype._assertIsValidOption=function(e){var t=e.id,n=e.text;if(!PortalString.isString(t))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(n))throw new Error("invalidValue: option text must be a valid string")};const Qm=zm;function qm(e){Bm.call(this,e),this._datasource=Um.getForField(e),pjQuery.each(this._datasource.getParentDependenciesFieldsIds(),(function(t,n){jm.registerFieldDependency(e,n,jm.TYPE_VALUES)}))}qm.prototype=Object.create(Bm.prototype),qm.prototype._getOptionsPage=function(){throw new Error("notImplementedError")},qm.prototype._getOptionsPageSize=function(){throw new Error("notImplementedError")},qm.prototype._createWithNewOptions=function(e){throw new Error("notImplementedError")},qm.prototype._updateFieldAfterParentFieldValueChange=function(e){if(this._datasource.isParentDependentField(e))this.isVisible()?(this._evaluateConditionalVisibilityAfterRelatedFieldValueChange(),this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback())):(this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback()),this._evaluateConditionalVisibilityAfterRelatedFieldValueChange());else{var t=this._evaluateConditionalVisibilityAfterRelatedFieldValueChange();this._onFieldUpdated(t)}},qm.prototype._getOnNewOptionsCallback=function(){var e=this;return function(t,n){var r=[],o=[],i=function(e,t){e.map((function(e){-1===pjQuery.inArray(e.id,r)&&(o.push({id:e.id,name:e.name,isSelected:t}),r.push(e.id))}))};i(n,!0),i(t,!1);var a=1===o.length;e.isRequired()&&a&&(o[0].isSelected=!0);var u=e._getSelectedOptionsIds();e._createWithNewOptions(o);var l=e._getSelectedOptionsIds(),s=JSON.stringify(u)!==JSON.stringify(l);e._onFieldUpdated(s)}},qm.prototype._cloneDatasourceForNewTableRow=function(e,t){Um.cloneDatasourceForNewTableRow(this._fieldId,e,t)},qm.prototype._getSelectedOptionsIds=function(){var e=this.getValue();if(e.isEmpty())return[];switch(e.getType()){case Hm.TYPE:return[PortalString.toInt(e.getOptionId())];case Qm.TYPE:return e.getOptionsIds().map((function(e){return PortalString.toInt(e)}))}return[]},qm.prototype._buildOptionHtmlId=function(e){return this._fieldId+"_"+e};const Gm=qm;function Jm(e){if(Em.call(this),!PortalString.isString(e))throw new Error("invalidValue: value must be a valid string");this._value=e}Jm.TYPE="FieldTextValueLegacy",Jm.prototype=Object.create(Em.prototype),Jm.prototype.getType=function(){return Jm.TYPE},Jm.prototype.toString=function(){return this._value},Jm.prototype.getValue=function(){return this._value};const Km=Jm;function $m(e){if(Em.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");this._optionId=e}$m.TYPE="FieldIdValueLegacy",$m.prototype=Object.create(Em.prototype),$m.prototype.getType=function(){return $m.TYPE},$m.prototype.toString=function(){return this._optionId},$m.prototype.getOptionId=function(){return this._optionId};const Zm=$m;var Xm=n(46918),eg=n.n(Xm),tg=n(50375),ng=n.n(tg);function rg(e,t,n,r,o,i,a,u,l,s,c,f){Gm.call(this,e),this._dropdownCssClass=t,this._placeholderText=n,this._minimumInputLength=r,this._ajaxDelayMs=o,this._visibleOptionsLimit=i,this._optionIdsToSearchLimit=a,this._dictionary=u,this._label=l,this._isRequired=s,this._isAccessible=c,this._keepTextInField=f}rg.TYPE="AutocompleteSelectFieldLegacy",rg.register=function(e,t,n,r,o,i,a,u,l,s,c,f){new rg(e,t,n,r,o,i,a,u,l,s,c,f).register()},rg.prototype=Object.create(Gm.prototype),rg.prototype._postRegister=function(){this._attachLazyPicker(),Gm.prototype._postRegister.call(this)},rg.prototype._getAllowedValueTypesToSet=function(){return[Zm.TYPE,Km.TYPE]},rg.prototype.getType=function(){return rg.TYPE},rg.prototype.getValue=function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new km;var t=e[0].id,n=e[0].text;return null===t||""===t?new km:new Hm(t,n)},rg.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return null!==e&&""!==e||(e=null),e},rg.prototype.setValue=function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Zm.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],this._buildOnFieldOptionsRetrieveCallback());break;case Km.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}},rg.prototype._buildOnFieldOptionsRetrieveCallback=function(){var e=this;return function(t){t=e._markOptionsFoundAsSelected(t),e._createWithNewOptions(t),Nm.onFieldValueChange(e.getFieldId())}},rg.prototype._markOptionsFoundAsSelected=function(e){return e&&Array.isArray(e)?(pjQuery.each(e,(function(t){e[t].isSelected=!0})),e):e},rg.prototype._getOptionsPage=function(){return 1},rg.prototype._getOptionsPageSize=function(){return 2},rg.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join("")),this._getFieldElement().trigger("change.select2")},rg.prototype._removeAllOptions=function(){this._getFieldElement().find("option:gt(0)").remove()},rg.prototype._attachLazyPicker=function(){var e=this._getFieldElement();e.select2(this._getLazyPickerProperties());var t=this._getEventCallbacksForLazyPicker();if(t.length)for(var n in t)t.hasOwnProperty(n)&&e.on(t[n].eventName,t[n].eventCallback);var r=this;pjQuery((function(){setTimeout((function(){e.trigger("select2-"+r.getFieldId()+"-ready")}),10)}))},rg.prototype._getLazyPickerProperties=function(){var e={placeholder:this._placeholderText,allowClear:!0,width:"100%",minimumInputLength:this._minimumInputLength,multiple:this._isMultiple(),containerCssClass:"select2Container"+this._fieldId,dropdownCssClass:this._dropdownCssClass,escapeMarkup:function(e){return e},dictionary:this._dictionary,label:this._label,fieldId:this._fieldId,isRequired:this._isRequired,isAccessible:this._isAccessible,closeOnSelect:!this._isMultiple()||!this._keepTextInField};if(this._datasource.isLocalDatasource())e.data=this._adaptDatasourceOptionsToSelect2LocalDataFormat(this._datasource.getOptions());else{var t=this,n=this._getCache();e.ajax={url:this._datasource.getOptionsSearchApiUrl(),type:"POST",delay:this._ajaxDelayMs,quietMillis:this._ajaxDelayMs,dataType:"json",data:this._getDataPayload.bind(this),transport:function(e,r,o){var i=t._generateCacheKey(e.data);return n.get(i).done(r).fail((function(){return pjQuery.ajax(e).done(r).done((function(e){n.set(i,e)})).fail(o)}))},processResults:function(e,n){return t._datasource.processLazyPickerAjaxResponseData(e)}}}return e},rg.prototype._getEventCallbacksForLazyPicker=function(){return[this._buildEventCallback(rg.ITEM_SELECTION_EVENT_NAME,(function(){pjQuery(this).focus()}))]},rg.prototype._buildEventCallback=function(e,t){return{eventName:e,eventCallback:t}},rg.prototype._adaptDatasourceOptionsToSelect2LocalDataFormat=function(e){return pjQuery.each(e,(function(t){e[t].hasOwnProperty("name")&&(e[t].text=e[t].name)})),e},rg.prototype._isMultiple=function(){return!1},rg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new rg(e,this._dropdownCssClass,this._placeholderText,this._minimumInputLength,this._ajaxDelayMs,this._visibleOptionsLimit,this._optionIdsToSearchLimit,pjQuery.extend(!0,{},this._dictionary),this._label,this._isRequired,this._isAccessible,this._keepTextInField)},rg.prototype._getDataPayload=function(e){var t=this._visibleOptionsLimit,n=e.searchIds;return n&&(n=n.split(","),t=this._optionIdsToSearchLimit),this._datasource.buildRequestDataFromParams(e.page||1,t,e.term,!1,n,null)},rg.prototype._getCache=function(){return eg().getInstance()},rg.prototype._generateCacheKey=function(e){return ng()(this._datasource.getOptionsSearchApiUrl()+JSON.stringify(e))},rg.ITEM_SELECTION_EVENT_NAME="select2:select";const og=rg;function ig(e){if(Em.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options IDs must be a non-empty array");e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string")})),this._optionsIds=e}ig.TYPE="FieldMultipleIdsValueLegacy",ig.prototype=Object.create(Em.prototype),ig.prototype.getType=function(){return ig.TYPE},ig.prototype.toString=function(){return"["+this._optionsIds.join(",")+"]"},ig.prototype.getOptionsIds=function(){return this._optionsIds};const ag=ig;function ug(e){if(Em.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: values must be a non-empty array");e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: inner values should be strings")})),this._values=e}ug.TYPE="FieldMultipleTextsValueLegacy",ug.prototype=Object.create(Em.prototype),ug.prototype.getType=function(){return ug.TYPE},ug.prototype.toString=function(){return"["+this._values.join(",")+"]"},ug.prototype.getOptionsTexts=function(){return this._values};const lg=ug;function sg(e,t,n,r,o,i,a,u,l,s,c){og.call(this,e,t,n,r,o,i,a,u,l,s,c)}sg.TYPE="AutocompleteMultipleSelectFieldLegacy",sg.register=function(e,t,n,r,o,i,a,u,l,s,c,f){new sg(e,t,n,r,o,i,a,u,l,s,c,f).register()},sg.prototype=Object.create(og.prototype),sg.prototype._getAllowedValueTypesToSet=function(){return[ag.TYPE,lg.TYPE]},sg.prototype.getType=function(){return sg.TYPE},sg.prototype.setValue=function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case ag.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),this._buildOnFieldOptionsRetrieveCallback());break;case lg.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}},sg.prototype.getValue=function(){var e=this._getFieldElement().select2("data");if(null===e||0===e.length)return new km;var t=[];return e.forEach((function(e,n){var r=e.id,o=e.text;null!==r&&""!==r&&t.push(Qm.buildOption(r,o))})),new Qm(t)},sg.prototype._removeAllOptions=function(){this._getFieldElement().empty()},sg.prototype._isMultiple=function(){return!0},sg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new sg(e,this._dropdownCssClass,this._placeholderText,this._minimumInputLength,this._ajaxDelayMs,this._visibleOptionsLimit,this._optionIdsToSearchLimit,pjQuery.extend(!0,{},this._dictionary),this._label,this._isRequired,this._isAccessible,this._keepTextInField)};const cg=sg;function fg(e){if(Em.call(this),"boolean"!=typeof e)throw new Error("invalidValue: value must be a valid boolean");this._isSelected=e}fg.TYPE="FieldBooleanValueLegacy",fg.prototype=Object.create(Em.prototype),fg.prototype.getType=function(){return fg.TYPE},fg.prototype.toString=function(){return this._isSelected.toString()},fg.prototype.isSelected=function(){return this._isSelected};const pg=fg;function dg(e){Bm.call(this,e)}dg.TYPE="CheckboxFieldLegacy",dg.register=function(e){new dg(e).register()},dg.prototype=Object.create(Bm.prototype),dg.prototype.getType=function(){return dg.TYPE},dg.prototype._getAllowedValueTypesToSet=function(){return[pg.TYPE]},dg.prototype.getValue=function(){var e=this._getFieldElement().prop("checked");return new pg(!!e)},dg.prototype.getValueForVisibilityCondition=function(){return this._getFieldElement().prop("checked")?this._getFieldElement().val():null},dg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().prop("checked",e.isSelected()),this._triggerEvent("change")},dg.prototype._buildClonedFieldForNewTableRow=function(e,t){return new dg(e)};const yg=dg;function hg(e){Gm.call(this,e)}hg.TYPE="CheckboxListFieldLegacy",hg.register=function(e){new hg(e).register()},hg.prototype=Object.create(Gm.prototype),hg.prototype._getAllowedValueTypesToSet=function(){return[ag.TYPE,lg.TYPE]},hg.prototype.getType=function(){return hg.TYPE},hg.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new km;var t=[];return e.each((function(){t.push(Qm.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new Qm(t)},hg.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},hg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="checkbox"]',this._getFieldElement()),n=this;switch(e.getType()){case ag.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;case lg.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},hg.prototype._getSelectedElements=function(){return this._getFieldElement().find("input:checked")},hg.prototype._getOptionsPage=function(){return null},hg.prototype._getOptionsPageSize=function(){return null},hg.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement(),r=n.find(".CheckBoxListFormField_more"),o=n.find(".CheckBoxListFormField_hiddenOptions"),i=r.data("numOptionsToShow");e.forEach((function(e,r){var a=t._buildOptionHtmlId(e.id),u=pjQuery("<input />").attr("id",a).attr("type","checkbox").attr("name",t._fieldId+"[]").attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&u.attr("checked","checked");var l=pjQuery("<label>").attr("for",a).append(u,e.name,pjQuery('<div class="cb" />'));!i||r<i?n.append(l):o.append(l)})),i&&e.length>i&&(r.css("display",""),o.css("display","none"))},hg.prototype._removeAllOptions=function(){this._getFieldElement().find("label, div.cb, div.cb-a11y").remove()},hg.prototype._postRegister=function(){Gm.prototype._postRegister.call(this),this._addClickToShowMoreLinkIfNeeded()},hg.prototype._addClickToShowMoreLinkIfNeeded=function(){var e=document.getElementById("showHiddenElements_"+this._fieldId);e&&(e.onclick=function(e){return this.nextSibling.style.display="inline",this.style.display="none",!1})},hg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new hg(e)};const vg=hg;function bg(e){Bm.call(this,e),this._registerFieldDependenciesForDependentFields(e,this._getDepedentFieldsMetadata())}bg.register=function(e){new bg(e).register()},bg.prototype=Object.create(Bm.prototype),bg.prototype._getDepedentFieldsMetadata=function(){throw new Error("notImplementedError")},bg.prototype._registerFieldDependenciesForDependentFields=function(e,t){if(!t||!Array.isArray(t))throw new Error("invalidArgumentException: not an array");for(var n in t)t.hasOwnProperty(n)&&FieldsDependenciesLegacy.registerFieldDependency(e,t[n].id,FieldsDependenciesLegacy.TYPE_VALUES)},bg.prototype.onRelatedFieldValueChange=function(e){Bm.prototype.onRelatedFieldValueChange.call(this,e),FieldsLegacy.onFieldValueChange(this._fieldId)},bg.prototype.cloneForNewTableRow=function(e,t){this._cloneDependentFieldsForNewTableRow(e,t),this._cloneCurrentFieldForNewTableRow(e,t)},bg.prototype._cloneCurrentFieldForNewTableRow=function(e,t){Bm.prototype.cloneForNewTableRow.call(this,e,t)},bg.prototype._cloneDependentFieldsForNewTableRow=function(e,t){var n=this._getDepedentFieldsMetadata();for(var r in n)if(n.hasOwnProperty(r)){var o=FieldsLegacy.getField(n[r].id),i=e+n[r].suffix;o.cloneForNewTableRow(i,t)}},bg.prototype._createFieldMetadata=function(e,t){return{id:e,suffix:t}};const mg=bg;function gg(e){this._assertIsValidPortalDateObject(e),Em.call(this),this._date=e}gg.TYPE="FieldDateValueLegacy",gg.prototype=Object.create(Em.prototype),gg.prototype.getType=function(){return gg.TYPE},gg.prototype.toString=function(){return this._date.format()},gg.prototype.getFormattedDateString=function(e){return this._date.format(e)},gg.prototype.getPortalDate=function(){return this._date},gg.prototype._assertIsValidPortalDateObject=function(e){if(!(e&&e instanceof PortalDate))throw new Error("invalidArgumentException: expected an instance of PortalDate")};const _g=gg;function wg(e){mg.call(this,e)}wg.register=function(e){new wg(e).register()},wg.prototype=Object.create(mg.prototype),wg.prototype._postRegister=function(){Nm.onFieldValueChange(this._fieldId),mg.prototype._postRegister.call(this)},wg.prototype._getAllowedValueTypesToSet=function(){return[_g.TYPE]},wg.prototype._createYearInput=function(e,t,n,r,o){var i=this,a=this._createSelectElement(e,"year",n,n),u=Um.getForField(this._fieldId+"_year");return this._populateSelectElementFromDatasource(a,u,t),a.fnt=function(){var t=document.getElementById(e+"_month");t=t?t.value:void 0,i._updateDayInput(e,t,r,o)},a.addEventListener?a.addEventListener("change",a.fnt,!1):a.attachEvent("onchange",a.fnt),a},wg.prototype._createMonthInput=function(e,t,n,r,o,i,a){var u=this,l=this._createSelectElement(e,"month",r),s=Um.getForField(this._fieldId+"_month");return this._populateSelectElementFromDatasource(l,s,t),l.fnt=function(){u._updateDayInput(e,l.value,o,i)},l.addEventListener?l.addEventListener("change",l.fnt,!1):l.attachEvent("onchange",l.fnt),l},wg.prototype._createDayInput=function(e,t,n,r,o,i,a,u){var l=this._createSelectElement(e,"day",o),s=Um.getForField(this._fieldId+"_day");return this._populateSelectElementFromDatasource(l,s,t),l},wg.prototype._updateDayInput=function(e,t,n,r){var o=document.getElementById(e+"_year");o=o?o.value:void 0;var i=this._clearSelectElementById(e+"_day"),a=Um.getForField(this._fieldId+"_day").getOptions(),u=parseInt(a[1].id,10),l="0"!==t?this._getMaxDaysForInput(a,t,o):0;n&&o===n.getFullYear()&&t===(n.getMonth()+1).toString()&&(u=n.getDate()),r&&o===r.getFullYear()&&t.toString()===(r.getMonth()+1).toString()&&(l=r.getDate()),this._populateSelectElement(i,u,l,void 0,0,"--")},wg.prototype._hideInput=function(e){var t;if(e){t=document.createElement("input"),e.getAttributeNames().filter((function(e){return-1===["data-hiddenType","data-required"].indexOf(e)})).forEach((function(n){t.setAttribute(n,e.getAttribute(n))})),t.type="hidden";var n=e.parentNode;n.removeChild(e),n.appendChild(t)}return t},wg.prototype._populateSelectElement=function(e,t,n,r,o,i){if(e){e.appendChild(this._createOptionElement(0,o,(function(e){return i})));for(var a=t;a<=n;++a)e.appendChild(this._createOptionElement(a,o,r))}},wg.prototype._populateSelectElementFromDatasource=function(e,t,n){if(e)for(var r=t.getOptions(),o=0;o<r.length;++o){var i=r[o];e.appendChild(this._createOptionElement(parseInt(i.id,10),n,(function(e){return i.name})))}},wg.prototype._createSelectElement=function(e,t,n){var r=document.createElement("select");return r.setAttribute("id",e+"_"+t),r.setAttribute("name",e+"_"+t),r.setAttribute("class",t+"Input"),r.setAttribute("tabindex",n),r},wg.prototype._createOptionElement=function(e,t,n){var r=document.createElement("option");return r.setAttribute("value",0===e?"":e),r.innerHTML=n?n(e):e,e===t&&r.setAttribute("selected","selected"),r},wg.prototype._getMaxDaysForInput=function(e,t,n){return e.length<31?parseInt(e[e.length-1].id,10):this._getDaysForMonthAndYear(t,n)},wg.prototype._getDaysForMonthAndYear=function(e,t){var n=!1;e=e?PortalString.toInt(e):1,t=t?PortalString.toInt(t):1;return e>7&&(e-=7,n=!0),2!==e||n?1===e||(e-2)%2==1?31:30:t%4==0?29:28},wg.prototype._clearSelectElementById=function(e){var t=document.getElementById(e);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);return t},wg.prototype._normalize=function(e){return PortalString.zeroPad(e,2)},wg.prototype._cloneDatasourceForNewTableRow=function(e,t,n){Um.cloneDatasourceForNewTableRow(this._fieldId+"_"+e,t+"_"+e,n)};const Og=wg;n(48825);function Sg(e,t,n,r,o,i,a){this._tabIndex=t,this._minDate=n,this._maxDate=r,this._accessibleLabelsDictionary=o,this._isAccessible=i,this._year=this._month=this._day=0,this._yearInput=this._monthInput=this._dayInput=null,this.isRequired=a,Og.call(this,e)}Sg.TYPE="FullDateFieldLegacy",Sg.register=function(e,t,n,r,o,i,a){new Sg(e,t,n,r,o,i,a).register()},Sg.prototype=Object.create(Og.prototype),Sg.prototype._postRegister=function(){this._createWidget(),Og.prototype._postRegister.call(this)},Sg.prototype.cloneForNewTableRow=function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)},Sg.prototype.getType=function(){return Sg.TYPE},Sg.prototype.getValue=function(){var e=this._getFieldElement().val();if(!e)return new FieldEmptyValueLegacy;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]),o=PortalString.toInt(t[2]);return new FieldFullDateValueLegacy(n,r,o)},Sg.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return e||""},Sg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM-dd")),this._triggerEvent("change")},Sg.prototype.show=function(){var e=this._getFieldContainerElement(),t=this._getFieldElement();e&&t&&this._valueDiffersForElement(t)&&t.val(t.val()),Og.prototype.show.call(this)},Sg.prototype.hide=function(){if(this.isVisible()){var e=this._getFieldElement();this._saveDateValueForField(e),Og.prototype.hide.call(this)}},Sg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new Sg(e,this._tabIndex,this._minDate,this._maxDate,this._accessibleLabelsDictionary,this._isAccessible)},Sg.prototype._valueDiffersForElement=function(e){var t=e.val(),n=this.getValue();return""!==t&&!n.isEmpty()&&n.getFormattedDateString("yyyy-MM-dd")!==t},Sg.prototype._saveDateValueForField=function(e){var t=this.getValue();if(!t.isEmpty()){var n=new Date(t.getFormattedDateString("yyyy-MM-dd")+"T00:00:00"),r=n.getFullYear(),o=this._addLeadingZeros(n.getMonth()+1),i=this._addLeadingZeros(n.getDate());e.val(r+"-"+o+"-"+i)}},Sg.prototype._addLeadingZeros=function(e){return e.toString().padStart(2,"0")},Sg.prototype._getDepedentFieldsMetadata=function(){return[]},Sg.prototype._createWidget=function(){var e=this;this._browserSupportsInputDate()||pjQuery((function(){e._createFallbackWidget()}))},Sg.prototype._browserSupportsInputDate=function(){return H5H.inputSupported("date")&&!(GLOBALS.BROWSER.name&&"Safari"==GLOBALS.BROWSER.name)},Sg.prototype._createFallbackWidget=function(){var e=this._hideInput(document.getElementById(this._fieldId));if(e){var t=new PortalDate(LuxonDateTime.fromFormat(this._minDate,"yyyy-MM-dd")).toDate(),n=new PortalDate(LuxonDateTime.fromFormat(this._maxDate,"yyyy-MM-dd")).toDate();this._initDefaultValues(e);var r=this._createInput(this._tabIndex,t,n);e.parentNode.appendChild(r)}},Sg.prototype._initDefaultValues=function(e){this._year=this._month=this._day=0;var t=e.value||e.getAttribute("data-hiddenValue");if(t){var n=t.split("-");this._year=PortalString.toInt(n[0]),this._month=PortalString.toInt(n[1]),this._day=PortalString.toInt(n[2])}},Sg.prototype._createInput=function(e,t,n){var r,o=this;return this._yearInput=this._createYearInput(this._fieldId,this._year,e,t,n),this._yearInput.onchange=function(){o._year=this.value,o._day=0,o._updateHiddenInputValue()},this._monthInput=this._createMonthInput(this._fieldId,this._month,this._year,e,t,n),this._monthInput.onchange=function(){o._month=this.value,o._day=0,o._updateHiddenInputValue()},this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e,t,n),this._dayInput.onchange=function(){o._day=this.value,o._updateHiddenInputValue()},this._isAccessible?(r=this._createWidgetWithLabelsFromInputs(this._yearInput,this._monthInput,this._dayInput),this._wrapFieldAsFieldSetWithLegend()):r=this._createWidgetWithoutLabelsFromInputs(this._yearInput,this._monthInput,this._dayInput),r},Sg.prototype._updateHiddenInputValue=function(){document.getElementById(this._fieldId).value=this._year>0||this._month>0||this._day>0?this._year+"-"+this._normalize(this._month)+"-"+this._normalize(this._day):"",Nm.onFieldValueChange(this._fieldId)},Sg.prototype._createWidgetWithLabelsFromInputs=function(e,t,n){var r=document.createElement("div"),o=document.createElement("div");o.className="FullDate_YearWrapper",o.appendChild(this._createLabelFor(e.id,this._accessibleLabelsDictionary.yearLabel)),o.appendChild(e);var i=document.createElement("div");i.className="FullDate_MonthWrapper",i.appendChild(this._createLabelFor(t.id,this._accessibleLabelsDictionary.monthLabel)),i.appendChild(t);var a=document.createElement("div");return a.className="FullDate_DayWrapper",a.appendChild(this._createLabelFor(n.id,this._accessibleLabelsDictionary.dayLabel)),a.appendChild(n),r.appendChild(o),r.appendChild(i),r.appendChild(a),r},Sg.prototype._createLabelFor=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility"),n.innerHTML=t,n},Sg.prototype._createWidgetWithoutLabelsFromInputs=function(e,t,n){var r=document.createElement("div");return r.appendChild(e),r.appendChild(t),r.appendChild(n),r},Sg.prototype._wrapFieldAsFieldSetWithLegend=function(){var e=pjQuery("#"+this._fieldId+"-accessibleContainer");e.children().appendTo(pjQuery("<fieldset/>").insertBefore(e)),e.remove();var t=this;pjQuery("#"+this._fieldId+"-label").replaceWith((function(){var e=this.textContent;e&&t.isRequired&&(e=e.substring(0,e.length-2),e+=pjQuery("<div/>",{}).append(pjQuery("<span/>",{"aria-hidden":!0,class:"labelRequiredIcon",text:" *"})).html());return pjQuery("<div/>",{}).append(pjQuery("<legend/>",{id:this.id,html:e})).html()}))},Sg.prototype._resetDayInput=function(e){this._day=0;var t=this.monthInput.parentNode;t.removeChild(this._dayInput),this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e),t.appendChild(this._dayInput);var n=this;this._dayInput.onchange=function(){n._day=this.value,n._updateHiddenInputValue()}};const Eg=Sg;function Pg(e){Bm.call(this,e)}Pg.TYPE="GenericFieldLegacy",Pg.register=function(e){new Pg(e).register()},Pg.prototype=Object.create(Bm.prototype),Pg.prototype.getType=function(){return Pg.TYPE},Pg.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Pg(e)},Pg.prototype._postRegister=function(){};const kg=Pg;function Tg(e){Bm.call(this,e)}Tg.TYPE="InputFieldLegacy",Tg.register=function(e){new Tg(e).register()},Tg.prototype=Object.create(Bm.prototype),Tg.prototype._getAllowedValueTypesToSet=function(){return[Km.TYPE]},Tg.prototype.getType=function(){return Tg.TYPE},Tg.prototype.getValue=function(){var e=this._getFieldElement().val();return e?new Km(e):new km},Tg.prototype.getValueForVisibilityCondition=function(){return this._getFieldElement().val()},Tg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")},Tg.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Tg(e)},Tg.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("input",(function(){this.onkeyup=null,Nm.onFieldValueChange(e.getFieldId())}))};const jg=Tg;function Ig(e,t,n){this._setCountry(e),this._setState(t),this._setCity(n),Em.call(this)}Ig.TYPE="FieldLocationValueLegacy",Ig.prototype=Object.create(Em.prototype),Ig.prototype.getType=function(){return Ig.TYPE},Ig.prototype.toString=function(){return JSON.stringify({country:this._country.toString(),state:this._state.toString(),city:this._city.toString()})},Ig.prototype.getCountry=function(){return this._country},Ig.prototype.getState=function(){return this._state},Ig.prototype.getCity=function(){return this._city},Ig.prototype._setCountry=function(e){Em.assertIsValid(e),this._country=e},Ig.prototype._setState=function(e){Em.assertIsValid(e),this._state=e},Ig.prototype._setCity=function(e){Em.assertIsValid(e),this._city=e};const Fg=Ig;function Cg(e){mg.call(this,e)}Cg.TYPE="LocationFieldLegacy",Cg.register=function(e){new Cg(e).register()},Cg.prototype=Object.create(mg.prototype),Cg.prototype._getAllowedValueTypesToSet=function(){return[Fg.TYPE]},Cg.prototype.getType=function(){return Cg.TYPE},Cg.prototype.getValue=function(){var e=Nm.getFieldValue(this._getCountryId()),t=Nm.getFieldValue(this._getStateId()),n=Nm.getFieldValue(this._getCityId());return e.isEmpty()||t.isEmpty()||n.isEmpty()?new km:new Fg(e,t,n)},Cg.prototype.getValueForVisibilityCondition=function(){return[pjQuery("#"+this._getCountryId()+" option:selected").text(),pjQuery("#"+this._getStateId()).is("select")?pjQuery("#"+this._getStateId()+" option:selected").text():pjQuery("#"+this._getStateId()).val(),pjQuery("#"+this._getCityId()).val()]},Cg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),Nm.setFieldValue(this._getCountryId(),e.getCountry()),Nm.setFieldValue(this._getStateId(),e.getState()),Nm.setFieldValue(this._getCityId(),e.getCity())},Cg.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Cg(e)},Cg.prototype._getDepedentFieldsMetadata=function(){return[this._createFieldMetadata(this._getCountryId(),this._getCountrySuffix()),this._createFieldMetadata(this._getStateId(),this._getStateSuffix()),this._createFieldMetadata(this._getCityId(),this._getCitySuffix())]},Cg.prototype._getCountryId=function(){return this.getFieldId()+this._getCountrySuffix()},Cg.prototype._getStateId=function(){return this.getFieldId()+this._getStateSuffix()},Cg.prototype._getCityId=function(){return this.getFieldId()+this._getCitySuffix()},Cg.prototype._getCountrySuffix=function(){return"_location_country"},Cg.prototype._getStateSuffix=function(){return"_location_state"},Cg.prototype._getCitySuffix=function(){return"_location_city"},Cg.prototype._attachOnChangeListener=function(){};const Dg=Cg;function Rg(e){Gm.call(this,e)}Rg.TYPE="MultipleSelectFieldLegacy",Rg.register=function(e){new Rg(e).register()},Rg.prototype=Object.create(Gm.prototype),Rg.prototype._getAllowedValueTypesToSet=function(){return[ag.TYPE,lg.TYPE]},Rg.prototype.getType=function(){return Rg.TYPE},Rg.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new km;var t=[];return e.each((function(){t.push(Qm.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new Qm(t)},Rg.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},Rg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case ag.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case lg.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},Rg.prototype._getSelectedElements=function(){return this._getFieldElement().find("option:selected")},Rg.prototype._getOptionsPage=function(){return null},Rg.prototype._getOptionsPageSize=function(){return null},Rg.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))},Rg.prototype._removeAllOptions=function(){this._getFieldElement().find("option").remove()},Rg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Rg(e)};const Ag=Rg;function Ng(e){this._assertIsValidNumberValue(e),Em.call(this),this._value=e}Ng.TYPE="FieldNumberValueLegacy",Ng.prototype=Object.create(Em.prototype),Ng.prototype.getType=function(){return Ng.TYPE},Ng.prototype.toString=function(){return this._value.toString()},Ng.prototype.getValue=function(){return this._value},Ng.prototype._assertIsValidNumberValue=function(e){if(!PortalNumber.isNumber(e))throw new Error("invalidArgumentException: expected number value")};const xg=Ng;function Lg(e){jg.call(this,e)}Lg.TYPE="NumberFieldLegacy",Lg.register=function(e){new Lg(e).register()},Lg.prototype=Object.create(jg.prototype),Lg.prototype._getAllowedValueTypesToSet=function(){return[xg.TYPE]},Lg.prototype.getType=function(){return Lg.TYPE},Lg.prototype.getValue=function(){var e=this._getFieldElement().val();return e?new xg(PortalString.toFloat(e)):new km},Lg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")},Lg.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Lg(e)};const Mg=Lg;function Vg(e){Gm.call(this,e)}Vg.TYPE="RadioButtonListFieldLegacy",Vg.register=function(e){new Vg(e).register()},Vg.prototype=Object.create(Gm.prototype),Vg.prototype._getAllowedValueTypesToSet=function(){return[Zm.TYPE,Km.TYPE]},Vg.prototype.getType=function(){return Vg.TYPE},Vg.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new FieldEmptyValueLegacy;var t=null,n=null;return e.each((function(){t=pjQuery(this).val(),n=pjQuery(this).data("option-name").toString()})),new Hm(t,n)},Vg.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},Vg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="radio"]',this._getFieldElement());switch(e.getType()){case Zm.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0).trigger("change")}));break;case Km.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0).trigger("change")}));break;default:throw new Error("modeNotSupported")}},Vg.prototype._getSelectedElements=function(){return this._getFieldElement().find("input:checked")},Vg.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("change","input",(function(){Nm.onFieldValueChange(e.getFieldId())}))},Vg.prototype._getOptionsPage=function(){return null},Vg.prototype._getOptionsPageSize=function(){return null},Vg.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement();e.forEach((function(e){var r=pjQuery("<input />").attr("id",t._buildOptionHtmlId(e.id)).attr("type","radio").attr("name",t._fieldId).attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&r.attr("checked","checked");var o=pjQuery("<label>").attr("for",t._buildOptionHtmlId(e.id)).append(r,e.name,pjQuery('<div class="cb" />'));n.append(o)})),this._attachOnChangeListener()},Vg.prototype._removeAllOptions=function(){this._getFieldElement().find("label, div.cb").remove()},Vg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Vg(e)};const Bg=Vg;function Wg(e,t){Gm.call(this,e),this._notSelectedOptionValue=t}Wg.TYPE="SelectFieldLegacy",Wg.register=function(e,t){new Wg(e,t).register()},Wg.prototype=Object.create(Gm.prototype),Wg.prototype._getAllowedValueTypesToSet=function(){return[Zm.TYPE,Km.TYPE]},Wg.prototype.getType=function(){return Wg.TYPE},Wg.prototype.getValue=function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new km:new Hm(e,pjQuery("#"+this._fieldId+" option:selected").text())},Wg.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return e!=this._notSelectedOptionValue?e:null},Wg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Zm.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Km.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).text()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},Wg.prototype._unsetOnHide=function(e){e.val(this._notSelectedOptionValue)},Wg.prototype._getOptionsPage=function(){return null},Wg.prototype._getOptionsPageSize=function(){return null},Wg.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))},Wg.prototype._removeAllOptions=function(){this._getFieldElement().find("option:gt(0)").remove()},Wg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Wg(e,this._notSelectedOptionValue)};const Ug=Wg;function Yg(e,t,n){this._setHours(e),this._setMinutes(t),this._setSeconds(n),Em.call(this)}Yg.TYPE="FieldTimeValueLegacy",Yg.prototype=Object.create(Em.prototype),Yg.prototype.getType=function(){return Yg.TYPE},Yg.prototype.toString=function(){return PortalString.zeroPad(this._hours.toString(),2)+":"+PortalString.zeroPad(this._minutes.toString(),2)+":"+PortalString.zeroPad(this._seconds.toString(),2)},Yg.prototype.getHours=function(){return this._hours},Yg.prototype.getMinutes=function(){return this._minutes},Yg.prototype.getSeconds=function(){return this._seconds},Yg.prototype._setHours=function(e){if(!PortalNumber.isNumber(e)||e<0||e>23)throw new Error("invalidArgumentException: Hours should be between 0 and 23");this._hours=e},Yg.prototype._setMinutes=function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Minutes should be between 0 and 59");this._minutes=e},Yg.prototype._setSeconds=function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Seconds should be between 0 and 59");this._seconds=e};const Hg=Yg;function zg(e){Ug.call(this,e,"-1")}zg.TYPE="SimpleTimeFieldLegacy",zg.register=function(e){new zg(e).register()},zg.prototype=Object.create(Ug.prototype),zg.prototype.getType=function(){return zg.TYPE},zg.prototype.getValue=function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new km:new Hg(PortalString.toInt(e),0,0)},zg.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return[e=e!=this._notSelectedOptionValue?e:null,0,0]},zg.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new zg(e)};const Qg=zg;function qg(e,t){mg.call(this,e),this.shouldUseMilitaryTimeFormat=t}qg.TYPE="TimeFieldLegacy",qg.register=function(e,t){new qg(e,t).register()},qg.prototype=Object.create(mg.prototype),qg.prototype.getType=function(){return qg.TYPE},qg.prototype._getAllowedValueTypesToSet=function(){return[Hg.TYPE]},qg.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=e.getHours(),n=null;this.shouldUseMilitaryTimeFormat||(n=t>=12?"PM":"AM",t>12?t-=12:0===t&&(t=12)),Nm.setFieldValue(this._getHoursId(),new Zm(t.toString())),Nm.setFieldValue(this._getMinutesId(),new Zm(e.getMinutes().toString())),n&&Nm.setFieldValue(this._getAMPMId(),new Km(n))},qg.prototype.getValue=function(){return Nm.hasValue(this._getHoursId())&&Nm.hasValue(this._getMinutesId())?new Hg(this._getHoursFieldValue(),this._getMinutesFieldValue(),0):new km},qg.prototype.getValueForVisibilityCondition=function(){return[this._getHoursFieldValue(),this._getMinutesFieldValue(),0]},qg.prototype._getHoursFieldValue=function(){var e=Nm.getFieldValueByType(this._getHoursId(),Hm.TYPE);if(e.isEmpty())return 0;var t=PortalString.toInt(e.getOptionId());return isNaN(t)?0:(t=PortalString.toInt(t,10),this.shouldUseMilitaryTimeFormat?t:this._adaptHoursToAMPMFormat(t))},qg.prototype._adaptHoursToAMPMFormat=function(e){var t=Nm.getFieldValueByType(this._getAMPMId(),Hm.TYPE);if(t.isEmpty())return e;var n=t.getOptionText();return"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),e},qg.prototype._getMinutesFieldValue=function(){var e=Nm.getFieldValueByType(this._getMinutesId(),Hm.TYPE);return e.isEmpty()?0:PortalString.toInt(e.getOptionId())||0},qg.prototype._buildClonedFieldForNewTableRow=function(e,t){return new qg(e,this.shouldUseMilitaryTimeFormat)},qg.prototype._getDepedentFieldsMetadata=function(){var e=[this._createFieldMetadata(this._getHoursId(),this._getHoursSuffix()),this._createFieldMetadata(this._getMinutesId(),this._getMinutesSuffix())];return this.shouldUseMilitaryTimeFormat||e.push(this._createFieldMetadata(this._getAMPMId(),this._getAMPMSuffix())),e},qg.prototype._getHoursId=function(){return this.getFieldId()+this._getHoursSuffix()},qg.prototype._getMinutesId=function(){return this.getFieldId()+this._getMinutesSuffix()},qg.prototype._getAMPMId=function(){return this.getFieldId()+this._getAMPMSuffix()},qg.prototype._getHoursSuffix=function(){return"_hours"},qg.prototype._getMinutesSuffix=function(){return"_minutes"},qg.prototype._getAMPMSuffix=function(){return"_ampm"};const Gg=qg;function Jg(e,t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){this.fieldId=e,this.dropdownCssClass=t,this.placeholderText=n,this.minimumInputLength=r,this.isMultiple=o,this.ajaxDelayMs=i,this.visibleOptionsLimit=a,this.optionsSearchApiUrl=u,this.dictionary=l,this.label=s,this.isRequired=c,this.isAccessible=f,this.requestedDataFieldId=p,this.jobId=d,this.contactOrJobIdEdit=y,this.wizardId=h,this.wizardFormId=v,this.schemaFieldId=b,this.optionFormatJson=m,this.alphabeticalOrder=g||!1,this.entityExtensionId=_}Jg.prototype.attachToFieldAndRefreshOptions=function(e){var t=this;pjQuery("#"+e).select2({placeholder:t.placeholderText,allowClear:!0,width:"100%",minimumInputLength:t.minimumInputLength,multiple:t.isMultiple,containerCssClass:"select2Container"+e,dropdownCssClass:t.dropdownCssClass,escapeMarkup:function(e){return e},dictionary:t.dictionary,label:t.label,fieldId:t.fieldId,isRequired:t.isRequired,isAccessible:t.isAccessible,ajax:{url:t.optionsSearchApiUrl,type:"POST",delay:t.ajaxDelayMs,quietMillis:t.ajaxDelayMs,dataType:"json",data:function(n){return t._buildAjaxRequestData(e,n)},processResults:function(e,n){return t._processAjaxResponseData(e,n)}}}),pjQuery("#"+e).on("select2:select",(function(e){pjQuery(this).focus()})),pjQuery("#"+e).trigger("select2-"+e+"-ready")},Jg.prototype._buildAjaxRequestData=function(e,t){var n={searchText:t.term,ids:t.searchIds,fieldId:this.requestedDataFieldId,jobId:this.jobId,page:t.page||1,limit:this.visibleOptionsLimit,wizardFormId:this.wizardFormId,optionFormat:this.optionFormatJson,schemaFieldId:this.schemaFieldId,alphabeticalOrder:this.alphabeticalOrder,entityExtensionId:this.entityExtensionId},r=this.wizardId;r&&(n.wizardId=r);var o=this.contactOrJobIdEdit;return o&&(n.contactOrJobIdEdit=o),JSON.stringify(n)},Jg.prototype._processAjaxResponseData=function(e,t){var n=e.results?e.results:e;Array.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;r++)n[r].value&&(n[r]=n[r].value);var i=!!e.more&&e.more;return t.page=t.page||1,{results:n.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name,category:e.category}})):null}})),pagination:{more:i}}};const Kg=Jg;function $g(){}$g.registerJobTemplateAutocompletableWidgetLazyPicker=function(e,t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){$g._lazyPickers[e]=new JobTemplateAutocompletableWidgetLazyPickerLegacy(e,t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_)},$g.refreshLazyPickerOptions=function(e){$g.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(e,e)},$g.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource=function(e,t){var n=$g._getLazyPicker(e);null!==n&&n.attachToFieldAndRefreshOptions(t)},$g._getLazyPicker=function(e){return $g._isLazyPickerRegistered(e)?$g._lazyPickers[e]:null},$g._isLazyPickerRegistered=function(e){return e in $g._lazyPickers},$g._lazyPickers={};const Zg=$g;function Xg(e,t,n){if(!PortalNumber.isNumber(n))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var r=PortalDate.fromParams(e,t,n);this._assertIsValidPortalDateObject(r),_g.call(this,r),this._day=n,this._month=t,this._year=e}Xg.TYPE="FieldFullDateValueLegacy",Xg.prototype=Object.create(_g.prototype),Xg.prototype.getType=function(){return Xg.TYPE},Xg.prototype.toString=function(){return this.getFormattedDateString("yyyy-MM-dd")},Xg.prototype.getDay=function(){return this._day},Xg.prototype.getMonth=function(){return this._month},Xg.prototype.getYear=function(){return this._year};const e_=Xg;var t_=n(46918);const n_=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.run=function(e,t,n){var r=t_.getInstance(),o=r.buildKey(e,t);r.get(o).fail((function(){var i=pjQuery.ajax({type:"POST",url:e,dataType:"json",data:t});r.set(o,i),i.done(n)})).done((function(e){e.done(n)}))}};function r_(e,t){this._fieldId=e,this._portalUrlPath=t,this._datasourcesCallRunner=new n_}r_.prototype.isLocalDatasource=function(){return!1},r_.prototype.getOptions=function(){return[]},r_.prototype.fetchNewOptions=function(e,t,n,r){throw new Error("notImplementedError")},r_.prototype.fetchOptionsById=function(e,t){throw new Error("notImplementedError")},r_.prototype.fetchOptionsByValue=function(e,t){throw new Error("notImplementedError")},r_.prototype.getParentDependenciesFieldsIds=function(){throw new Error("notImplementedError")},r_.prototype.isParentDependentField=function(e){throw new Error("notImplementedError")},r_.prototype.cloneForNewTableRow=function(e,t){throw new Error("notImplementedError")},r_.prototype.getOptionsSearchApiUrl=function(){throw new Error("notImplementedError")},r_.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){throw new Error("notImplementedError")},r_.prototype.processLazyPickerAjaxResponseData=function(e){throw new Error("notImplementedError")},r_.prototype._fetchOptions=function(e,t){var n=this._getDatasourcesCallRunnerOnSuccessCallback(t);this._datasourcesCallRunner.run(this.getOptionsSearchApiUrl(),e,n)},r_.prototype._getDatasourcesCallRunnerOnSuccessCallback=function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[],r=t.hasOwnProperty("currentOptionsFoundInResults")?t.currentOptionsFoundInResults:[];e(n,r)}},r_.prototype._getFieldId=function(){return this._fieldId};const o_=r_;function i_(e,t,n,r,o){o_.call(this,e,o),this._datasetFilters=r||[],this._optionFormatComponents=t,this._schemaFieldIdToUseForIndirectFiltering=n}i_.prototype=Object.create(o_.prototype),i_.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){throw new Error("notImplemented")},i_.prototype.getParentDependenciesFieldsIds=function(){var e=[];return pjQuery.each(this._datasetFilters,(function(t,n){"field"===n.type&&e.push(n.parentDependencyFieldId)})),e},i_.prototype.isParentDependentField=function(e){var t=!1;return pjQuery.each(this._datasetFilters,(function(n,r){if("field"===r.type&&r.parentDependencyFieldId===e)return t=!0,!1})),t},i_.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)},i_.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])},i_.prototype.fetchOptionsByValue=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e,!0,null,null);this._fetchOptions(n,t)}else t([])},i_.prototype._buildClonedFiltersForNewTableRow=function(e,t){for(var n=[],r=this._fieldId.split("-"),o=0;o<this._datasetFilters.length;o++){var i=pjQuery.extend(!0,{},this._datasetFilters[o]);if("field"===i.type&&i.parentDependencyFieldId.indexOf("-")>0){var a=i.parentDependencyFieldId.split("-");a[0]===r[0]&&(a[a.length-1]=t,i.parentDependencyFieldId=a.join("-"))}n.push(i)}return n},i_.prototype._buildFiltersWithCurrentFieldsValues=function(){for(var e=[],t=0;t<this._datasetFilters.length;t++){var n=pjQuery.extend(!0,{},this._datasetFilters[t]);if("field"===n.type){var r=n.parentDependencyFieldId;if(!Nm.isFieldRegistered(r))continue;var o=Nm.getFieldValue(r);if(this._shouldIgnoreFilterIfNoValueIsSelected()&&o.isEmpty())continue;switch(o.getType()){case km.TYPE:n.value=[];break;case Hm.TYPE:n.value=PortalString.toInt(o.getOptionId());break;case Qm.TYPE:n.value=o.getOptionsIds().map((function(e){return PortalString.toInt(e)}));break;default:throw new Error("invalidValue: dataset filtering requires a field with options to filter by")}n.type="fixed"}e.push(n)}return e};const a_=i_;function u_(e,t,n,r,o,i){this._datasetSchemaSpecId=i,a_.call(this,e,t,n,r,o)}u_.register=function(e,t,n,r,o,i){var a=new u_(e,t,n,r,o,i);Um.registerDatasource(e,a)},u_.prototype=Object.create(a_.prototype),u_.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){return!1},u_.prototype.cloneForNewTableRow=function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new u_(e,pjQuery.extend(!0,[],this._optionFormatComponents),this._schemaFieldIdToUseForIndirectFiltering,n,this._portalUrlPath,this._datasetSchemaSpecId)},u_.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalDatasetOptionsSearchApi"},u_.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){for(var a=this._buildFiltersWithCurrentFieldsValues(),u=[],l=0;l<a.length;++l)u.push({operator:a[l].operator,datasetSpecIdFilter:a[l].datasetSpecIdFilter||null,schemaFieldNumberFilter:a[l].schemaFieldNumberFilter||null,value:a[l].value||null,type:a[l].type});var s=this._optionFormatComponents,c=[];for(l=0;l<s.length;++l)c.push({type:s[l].type,order:s[l].order,fieldNumberOrText:s[l].fieldNumberOrText});var f={datasetSchemaSpecId:this._datasetSchemaSpecId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:c,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1};return JSON.stringify(f)},u_.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const l_=u_;function s_(e,t,n,r,o,i){this._datasetSchemaFieldId=i,a_.call(this,e,t,n,r,o)}s_.register=function(e,t,n,r,o,i){var a=new s_(e,t,n,r,o,i);Um.registerDatasource(e,a)},s_.prototype=Object.create(a_.prototype),s_.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){return!0},s_.prototype.cloneForNewTableRow=function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new s_(e,pjQuery.extend(!0,[],this._optionFormatComponents),this._schemaFieldIdToUseForIndirectFiltering,n,this._portalUrlPath,this._datasetSchemaFieldId)},s_.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalDatasetSingleColumnOptionsSearchApi"},s_.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a=this._buildFiltersWithCurrentFieldsValues().map((function(e){return{operator:e.operator,datasetSpecIdFilter:e.datasetSpecIdFilter||null,schemaFieldNumberFilter:e.schemaFieldNumberFilter||null,value:e.value||null,type:e.type}})),u=this._optionFormatComponents.map((function(e){return{type:e.type,order:e.order,fieldNumberOrText:e.fieldNumberOrText}}));return JSON.stringify({datasetFieldSchemaFieldId:this._datasetSchemaFieldId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:a,optionFormatComponents:u,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})},s_.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const c_=s_;function f_(e,t){this._setOptions(t),o_.call(this,e)}f_.register=function(e,t){var n=new f_(e,t);Um.registerDatasource(e,n)},f_.prototype=Object.create(o_.prototype),f_.prototype.isLocalDatasource=function(){return!0},f_.prototype.getOptions=function(){return this._options},f_.prototype.getParentDependenciesFieldsIds=function(){return[]},f_.prototype.isParentDependentField=function(e){return!1},f_.prototype.fetchNewOptions=function(e,t,n,r){var o=[],i=[];if(this._options.forEach((function(t){PortalArray.contains(t.id,e)&&i.push(t),o.push(t)})),null!==t&&null!==n){var a=(t-1)*n;o=o.slice(a,a+n)}r(o,i)},f_.prototype.fetchOptionsById=function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.id==e&&(n.push(t),!0)}))}),this),t(n)},f_.prototype.fetchOptionsByValue=function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.name==e&&(n.push(t),!0)}))}),this),t(n)},f_.prototype.cloneForNewTableRow=function(e,t){return new f_(e,this._options)},f_.prototype._setOptions=function(e){this._options=[],e&&Array.isArray(e)&&e.forEach((function(e){e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&this._options.push({id:e.id,name:e.name})}),this)};const p_=f_;function d_(e){p_.call(this,e)}d_.register=function(e){var t=new d_(e);Um.registerDatasource(e,t)},d_.prototype=Object.create(p_.prototype),d_.prototype.getParentDependenciesFieldsIds=function(){return[]},d_.prototype.isParentDependentField=function(e){return!1},d_.prototype.fetchNewOptions=function(e,t,n,r){return[]},d_.prototype.fetchOptionsById=function(e,t){var n=[];e.forEach((function(e){n.push({id:e})}),this),t(n)},d_.prototype.fetchOptionsByValue=function(e,t){var n=[];e.forEach((function(e){n.push({name:e})}),this),t(n)},d_.prototype.cloneForNewTableRow=function(e,t){return new d_(e)};const y_=d_;function h_(e,t,n,r,o,i,a,u){o_.call(this,e,t),this._jobId=n,this._contactOrJobIdEdit=r,this._wizardId=o,this._wizardFormId=i,this._schemaFieldId=a,this._optionFormatJson=u}h_.register=function(e,t,n,r,o,i,a,u){var l=new h_(e,t,n,r,o,i,a,u);Um.registerDatasource(e,l)},h_.prototype=Object.create(o_.prototype),h_.prototype.cloneForNewTableRow=function(e,t){return new h_(e,this._portalUrlPath,this._jobId,this._contactOrJobIdEdit,this._wizardId,this._includeDisabledUsers,this._wizardFormId,this._schemaFieldId,this._optionFormatJson)},h_.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalOptionSearchApi"},h_.prototype.getParentDependenciesFieldsIds=function(){return[]},h_.prototype.isParentDependentField=function(e){return!1},h_.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e),i=this;this._fetchOptions(o,(function(e){var t=i._buildApiAdaptedResults(e);r(t)}))},h_.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])},h_.prototype.fetchOptionsByValue=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0,null,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])},h_.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a={searchText:n,exactTextMatch:r,ids:o,fieldId:this._fieldId,jobId:this._jobId,page:e||1,limit:t,wizardFormId:this._wizardFormId,optionFormat:this._optionFormatJson,schemaFieldId:this._schemaFieldId,currentSelectedOptionsIds:i},u=this._wizardId;u&&(a.wizardId=u);var l=this._contactOrJobIdEdit;return l&&(a.contactOrJobIdEdit=l),JSON.stringify(a)},h_.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name}})):null}})),pagination:{more:e.more}}},h_.prototype._buildApiAdaptedResults=function(e){var t=[];return pjQuery.each(e,(function(e,n){n.children?pjQuery.each(n.children,(function(e,n){t.push({id:n.id,name:n.name})})):t.push({id:n.id,name:n.name})})),t};const v_=h_;function b_(e,t,n,r){o_.call(this,t,r),this._schemaFieldId=e,this._fieldId=t,this._isSearchMode=n}b_.register=function(e,t,n,r){var o=new b_(e,t,n,r);Um.registerDatasource(t,o)},b_.prototype=Object.create(o_.prototype),b_.prototype.cloneForNewTableRow=function(e,t){return new b_(this._schemaFieldId,e,this._isSearchMode,this._portalUrlPath)},b_.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalUserSearch"},b_.prototype.getParentDependenciesFieldsIds=function(){return[]},b_.prototype.isParentDependentField=function(e){return!1},b_.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)},b_.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,(function(e){t(e)}))}else t([])},b_.prototype.fetchOptionsByValue=function(e,t){throw new Error("notSupportedError: currently is not possible to set an option by value.")},b_.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a={schemaFieldId:this._schemaFieldId,key:n||"",searchIds:o||null,currentOptionsIds:i||[],isSearchMode:this._isSearchMode};return JSON.stringify(a)},b_.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const m_=b_;n(38270),n.g.MassiveActionService=o(),Ky.connect(),n.g.ApiCacheLegacy=n(46918),n(14895),n.g.md5=n(50375),n.g.AutocompleteSelectFieldLegacy=og,n.g.AutocompleteMultipleSelectFieldLegacy=cg,n.g.CheckboxFieldLegacy=yg,n.g.CheckboxListFieldLegacy=vg,n.g.CompoundFieldBaseLegacy=mg,n.g.DateFieldBaseLegacy=Og,n.g.FieldBaseLegacy=Bm,n.g.FieldsDependenciesLegacy=jm,n.g.FieldsLegacy=Nm,n.g.FullDateFieldLegacy=Eg,n.g.GenericFieldLegacy=kg,n.g.InputFieldLegacy=jg,n.g.LocationFieldLegacy=Dg,n.g.MultipleSelectFieldLegacy=Ag,n.g.NumberFieldLegacy=Mg,n.g.OptionsFieldBaseLegacy=Gm,n.g.RadioButtonListFieldLegacy=Bg,n.g.SelectFieldLegacy=Ug,n.g.SimpleTimeFieldLegacy=Qg,n.g.TimeFieldLegacy=Gg,n.g.VisibilityEvaluatorLegacy=Mm,n.g.JobTemplateAutocompletableWidgetLazyPickerLegacy=Kg,n.g.LazyPickersLegacy=Zg,n.g.FieldBooleanValueLegacy=pg,n.g.FieldDateValueLegacy=_g,n.g.FieldEmptyValueLegacy=km,n.g.FieldFullDateValueLegacy=e_,n.g.FieldIdValueLegacy=Zm,n.g.FieldLocationValueLegacy=Fg,n.g.FieldMultipleIdsValueLegacy=ag,n.g.FieldMultipleOptionsValueLegacy=Qm,n.g.FieldMultipleTextsValueLegacy=lg,n.g.FieldNumberValueLegacy=xg,n.g.FieldOptionValueLegacy=Hm,n.g.FieldTextValueLegacy=Km,n.g.FieldTimeValueLegacy=Hg,n.g.ValueBaseLegacy=Em,n.g.DatasourcesCallRunnerLegacy=n_,n.g.DatasetFieldOptionsDatasourceLegacy=l_,n.g.DatasetOptionsDatasourceBaseLegacy=a_,n.g.DatasetSingleColumnFieldOptionsDatasourceLegacy=c_,n.g.DatasourcesLegacy=Um,n.g.DummyDatasourceLegacy=y_,n.g.GeneralOptionsDatasourceLegacy=v_,n.g.LocalDatasourceLegacy=p_,n.g.OptionsDatasourceBaseLegacy=o_,n.g.UsersDatasourceLegacy=m_},50375:function(e,t,n){var r;n(63534),n(40590),n(64216),n(80115),n(18665),n(5086),n(29979),n(14602),function(o){"use strict";function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,o,a){return i(function(e,t){return e<<t|e>>>32-t}(i(i(t,e),i(r,a)),o),n)}function u(e,t,n,r,o,i,u){return a(t&n|~t&r,e,t,o,i,u)}function l(e,t,n,r,o,i,u){return a(t&r|n&~r,e,t,o,i,u)}function s(e,t,n,r,o,i,u){return a(t^n^r,e,t,o,i,u)}function c(e,t,n,r,o,i,u){return a(n^(t|~r),e,t,o,i,u)}function f(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,o,a,f,p=1732584193,d=-271733879,y=-1732584194,h=271733878;for(n=0;n<e.length;n+=16)r=p,o=d,a=y,f=h,p=u(p,d,y,h,e[n],7,-680876936),h=u(h,p,d,y,e[n+1],12,-389564586),y=u(y,h,p,d,e[n+2],17,606105819),d=u(d,y,h,p,e[n+3],22,-1044525330),p=u(p,d,y,h,e[n+4],7,-176418897),h=u(h,p,d,y,e[n+5],12,1200080426),y=u(y,h,p,d,e[n+6],17,-1473231341),d=u(d,y,h,p,e[n+7],22,-45705983),p=u(p,d,y,h,e[n+8],7,1770035416),h=u(h,p,d,y,e[n+9],12,-1958414417),y=u(y,h,p,d,e[n+10],17,-42063),d=u(d,y,h,p,e[n+11],22,-1990404162),p=u(p,d,y,h,e[n+12],7,1804603682),h=u(h,p,d,y,e[n+13],12,-40341101),y=u(y,h,p,d,e[n+14],17,-1502002290),p=l(p,d=u(d,y,h,p,e[n+15],22,1236535329),y,h,e[n+1],5,-165796510),h=l(h,p,d,y,e[n+6],9,-1069501632),y=l(y,h,p,d,e[n+11],14,643717713),d=l(d,y,h,p,e[n],20,-373897302),p=l(p,d,y,h,e[n+5],5,-701558691),h=l(h,p,d,y,e[n+10],9,38016083),y=l(y,h,p,d,e[n+15],14,-660478335),d=l(d,y,h,p,e[n+4],20,-405537848),p=l(p,d,y,h,e[n+9],5,568446438),h=l(h,p,d,y,e[n+14],9,-1019803690),y=l(y,h,p,d,e[n+3],14,-187363961),d=l(d,y,h,p,e[n+8],20,1163531501),p=l(p,d,y,h,e[n+13],5,-1444681467),h=l(h,p,d,y,e[n+2],9,-51403784),y=l(y,h,p,d,e[n+7],14,1735328473),p=s(p,d=l(d,y,h,p,e[n+12],20,-1926607734),y,h,e[n+5],4,-378558),h=s(h,p,d,y,e[n+8],11,-2022574463),y=s(y,h,p,d,e[n+11],16,1839030562),d=s(d,y,h,p,e[n+14],23,-35309556),p=s(p,d,y,h,e[n+1],4,-1530992060),h=s(h,p,d,y,e[n+4],11,1272893353),y=s(y,h,p,d,e[n+7],16,-155497632),d=s(d,y,h,p,e[n+10],23,-1094730640),p=s(p,d,y,h,e[n+13],4,681279174),h=s(h,p,d,y,e[n],11,-358537222),y=s(y,h,p,d,e[n+3],16,-722521979),d=s(d,y,h,p,e[n+6],23,76029189),p=s(p,d,y,h,e[n+9],4,-640364487),h=s(h,p,d,y,e[n+12],11,-421815835),y=s(y,h,p,d,e[n+15],16,530742520),p=c(p,d=s(d,y,h,p,e[n+2],23,-995338651),y,h,e[n],6,-198630844),h=c(h,p,d,y,e[n+7],10,1126891415),y=c(y,h,p,d,e[n+14],15,-1416354905),d=c(d,y,h,p,e[n+5],21,-57434055),p=c(p,d,y,h,e[n+12],6,1700485571),h=c(h,p,d,y,e[n+3],10,-1894986606),y=c(y,h,p,d,e[n+10],15,-1051523),d=c(d,y,h,p,e[n+1],21,-2054922799),p=c(p,d,y,h,e[n+8],6,1873313359),h=c(h,p,d,y,e[n+15],10,-30611744),y=c(y,h,p,d,e[n+6],15,-1560198380),d=c(d,y,h,p,e[n+13],21,1309151649),p=c(p,d,y,h,e[n+4],6,-145523070),h=c(h,p,d,y,e[n+11],10,-1120210379),y=c(y,h,p,d,e[n+2],15,718787259),d=c(d,y,h,p,e[n+9],21,-343485551),p=i(p,r),d=i(d,o),y=i(y,a),h=i(h,f);return[p,d,y,h]}function p(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function y(e){var t,n,r="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function h(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return p(f(d(e),8*e.length))}(h(e))}function b(e,t){return function(e,t){var n,r,o=d(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=f(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=f(i.concat(d(t)),512+8*t.length),p(f(a.concat(r),640))}(h(e),h(t))}function m(e,t,n){return t?n?b(t,e):function(e,t){return y(b(e,t))}(t,e):n?v(e):function(e){return y(v(e))}(e)}void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}()},18783:(e,t,n)=>{n(59581);var r=n(49245),o=n(17452);function i(){this._actionsFactory=new r,this._requestConfigFactory=new o}i.prototype.getListSelectedIds=function(e){return this._assertIsAValidList(e),pjQuery(this._getListSelectorString(e)+":checked").map((function(){return pjQuery(this).data("record-id")})).get()},i.prototype.getRequestConfigFactory=function(){return this._requestConfigFactory},i.prototype.getActionsFactory=function(){return this._actionsFactory},i.prototype._assertIsAValidList=function(e){if(!e)throw"invalidArgumentException: list ID not provided.";if(0===pjQuery(this._getListSelectorString(e)).length)throw"invalidList: No selector was found for the list with ID: "+e},i.prototype._getListSelectorString=function(e){return'[data-selector-type="massiveAction"][data-list-id="'+e+'"]'},e.exports=i},38232:e=>{MassiveActionActionBase=function(){},MassiveActionActionBase.prototype.getName=function(){throw"notImplementedException"},MassiveActionActionBase.prototype.getRequestObject=function(){throw"notImplementedException"},e.exports=MassiveActionActionBase},49245:(e,t,n)=>{var r=n(49625),o=n(37934);MassiveActionActionFactory=function(){},MassiveActionActionFactory.prototype.buildWorkflowForPeopleStepUpdateAction=function(e,t,n){return new r(e,t,n)},MassiveActionActionFactory.prototype.buildWorkflowForJobsStepUpdateAction=function(e,t){return new o(e,t)},e.exports=MassiveActionActionFactory},37934:(e,t,n)=>{n(97755);var r=n(38232);MassiveActionWorkflowForJobsStepUpdateAction=function(e,t){this._setOriginWorkflowStepId(e),this._setDestinationWorkflowStepId(t),r.call(this)},MassiveActionWorkflowForJobsStepUpdateAction.prototype=Object.create(r.prototype),MassiveActionWorkflowForJobsStepUpdateAction.prototype.getName=function(){return"workflowForJobsStepUpdate"},MassiveActionWorkflowForJobsStepUpdateAction.prototype.getRequestObject=function(){return{name:this.getName(),params:{originWorkflowStepId:this._originWorkflowStepId,destinationWorkflowStepId:this._destinationWorkflowStepId}}},MassiveActionWorkflowForJobsStepUpdateAction.prototype._setOriginWorkflowStepId=function(e){this._originWorkflowStepId=e},MassiveActionWorkflowForJobsStepUpdateAction.prototype._setDestinationWorkflowStepId=function(e){if(!e)throw"invalidArgumentException: the destination workflow step ID must be defined.";this._destinationWorkflowStepId=e},e.exports=MassiveActionWorkflowForJobsStepUpdateAction},49625:(e,t,n)=>{n(97755);var r=n(38232);MassiveActionWorkflowForPeopleStepUpdateAction=function(e,t,n){this._setOriginWorkflowStepId(e),this._setDestinationWorkflowStepId(t),this._setJobId(n),r.call(this)},MassiveActionWorkflowForPeopleStepUpdateAction.prototype=Object.create(r.prototype),MassiveActionWorkflowForPeopleStepUpdateAction.prototype.getName=function(){return"workflowForPeopleStepUpdate"},MassiveActionWorkflowForPeopleStepUpdateAction.prototype.getRequestObject=function(){return{name:this.getName(),params:{originWorkflowStepId:this._originWorkflowStepId,destinationWorkflowStepId:this._destinationWorkflowStepId,jobId:this._jobId}}},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setOriginWorkflowStepId=function(e){this._originWorkflowStepId=e},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setDestinationWorkflowStepId=function(e){if(!e)throw"invalidArgumentException: the destination workflow step ID must be defined.";this._destinationWorkflowStepId=e},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setJobId=function(e){this._jobId=e},e.exports=MassiveActionWorkflowForPeopleStepUpdateAction},17452:(e,t,n)=>{var r=n(56027);MassiveActionRequestConfigFactory=function(){},MassiveActionRequestConfigFactory.prototype.MassiveActionRecordsSubsetRequestConfig=r,MassiveActionRequestConfigFactory.prototype.buildRecordsSubsetRequestConfig=function(e,t,n){return new r(e,t,n)},e.exports=MassiveActionRequestConfigFactory},56027:(e,t,n)=>{n(4895),n(97755);var r=n(99316);function o(e,t,n){this._setRecordIds(e),r.call(this,t,n)}o.prototype=Object.create(r.prototype),o.prototype._getName=function(){return"recordsSubset"},o.prototype._getExtraTaskDataForRequestObject=function(){return{recordIds:this._recordIds}},o.prototype._setRecordIds=function(e){e&&Array.isArray(e)||(e=[]),this._recordIds=e},e.exports=o},99316:(e,t,n)=>{n(4895),n(53270);var r=n(38232);function o(e,t){this._setActions(e),this._setListId(t)}o.prototype.getEncodedRequestData=function(){return this._encodeObject(this._getRequestObject())},o.prototype._getName=function(){throw"notImplementedException"},o.prototype._getExtraTaskDataForRequestObject=function(){return{}},o.prototype._setActions=function(e){if(!e||!Array.isArray(e)||0==e.length)throw"invalidArgumentException: at least one action must be defined.";for(var t in this._actions=[],e)e.hasOwnProperty(t)&&this._addAction(e[t])},o.prototype._addAction=function(e){if(!(e&&e instanceof r))throw'invalidArgumentException: object not defined or not an instance of "MassiveActionActionBase"';this._actions.push(e.getRequestObject())},o.prototype._setListId=function(e){this._listId=e||null},o.prototype._getRequestObject=function(){return{task:{name:this._getName(),listId:this._listId,actions:this._actions,extraData:this._getExtraTaskDataForRequestObject()}}},o.prototype._encodeObject=function(e){return encodeURIComponent(JSON.stringify(e))},e.exports=o},80337:(e,t,n)=>{"use strict";n(63534),n(40590),n(27727),n(64216),n(49576),n(58476),n(18665),n(10557),n(14913),n(98741),n(31586),n(96982),n(97755),n(15852),n(41412),n(4632),n(5086),n(69193),n(87136),n(29979),n(58379),n(14602),n(18772);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),u=new D(r||[]);return a(i,"_invoke",{value:j(e,n,u)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var y="suspendedStart",h="suspendedYield",v="executing",b="completed",m={};function g(){}function _(){}function w(){}var O={};f(O,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(R([])));E&&E!==n&&i.call(E,l)&&(O=E);var P=w.prototype=g.prototype=Object.create(O);function k(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,a,u,l){var s=d(e[o],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,l)}),(function(e){n("throw",e,u,l)})):t.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,l)}))}l(s.arg)}var o;a(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function j(t,n,r){var o=y;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=I(u,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===y)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var s=d(t,n,r);if("normal"===s.type){if(o=r.done?b:h,s.arg===m)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=b,r.method="throw",r.arg=s.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return _.prototype=w,a(P,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},k(T.prototype),f(T.prototype,s,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(p(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(P),f(P,c,"Generator"),f(P,l,(function(){return this})),f(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function i(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,l,"next",e)}function l(e){i(a,r,o,u,l,"throw",e)}u(void 0)}))}}n(27118).A.getEventManager().attachToLoadEvent((function(){function e(e,t){var n=function(e,t){var n=e.getAttribute("data-width"),r=e.getAttribute("data-height"),o=e.getAttribute("data-lang"),i=e.getAttribute("data-is-moderator"),a=e.getAttribute("data-user-jwt"),u=function(e,t,n,r){var o=["microphone","camera","fullscreen","fodeviceselection","hangup","chat","settings","filmstrip","stats","shortcuts","tileview","raisehand","select-background","noisesuppression"];return e||o.push("desktop"),t&&(o.push("mute-everyone"),o.push("mute-video-everyone"),o.push("videoquality"),n&&o.push("recording"),r&&o.push("participants-pane")),o}(t,i,"1"===e.getAttribute("data-recording-enabled"),"1"===e.getAttribute("data-participants-pane-enabled")),l={roomName:e.getAttribute("data-room-name"),parentNode:e,userInfo:{email:e.getAttribute("data-user-name")+(t?"@mobile":""),displayName:e.getAttribute("data-display-name")},configOverwrite:{prejoinPageEnabled:"1"===e.getAttribute("data-prejoin-page-enabled"),toolbarButtons:u},toggleLobby:"1"===e.getAttribute("data-use-lobby-enabled"),noiseSuppressionEnabled:!1};return i&&a&&(l.jwt=a),n&&(l.width=n),r&&(l.height=r),o&&(l.configOverwrite.defaultLanguage=o),l}(t,e),r="1"===t.getAttribute("data-noise-suppression-enabled"),i=new JitsiMeetExternalAPI(t.getAttribute("data-jitsi-domain"),n);i.executeCommand("subject","‎"),i.executeCommand("localSubject","‎");var u=t.getAttribute("data-hangup-callback");u&&i.addListener("readyToClose",(function(){window[u]()})),r&&i.addListener("videoConferenceJoined",(function(e){i.isAudioMuted().then(function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t||i.executeCommand("setNoiseSuppressionEnabled",{enabled:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.addListener("audioMuteStatusChanged",function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,100)}));case 2:return e.next=4,i.isAudioMuted().then((function(e){t.muted||e||i.executeCommand("setNoiseSuppressionEnabled",{enabled:!0})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),i.addListener("participantRoleChanged",(function(e){"moderator"===e.role&&(n.toggleLobby&&n.jwt&&i.executeCommand("toggleLobby",!0),i.executeCommand("subject","‎")),i.executeCommand("localSubject","‎")}))}!function(){for(var t=/\b(iPhone|iPad|iPod|Android)\b/i.test(navigator.userAgent),n=document.body.getElementsByClassName("rtcPortalExtension"),r=0;r<n.length;++r)e(t,n[r])}()}))},68174:(e,t,n)=>{"use strict";n(17),n(14913),n(79389),n(5086),n(53270),n(7899),n(52231),n(87136),n(40173);var r=n(61691),o=n(70834),i=(0,r.Xs)("TimeslotsFreeTimePicker",r.x0);i.prototype.init=function(e,t,n,r,o,i,a){this.container=e,this.selectedDate=t,this.previousMonth=t.getMonth(),this.daysWithFreeTime=n,this.freeTimesForSelectedDate=r,this.slotDuration=o,this.relatedUserId=i,this.timezoneOffset=a,this.drawUI(),this.container&&this.container.appendChild(this.element)},i.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePicker"},[this.e("table",{class:"FreeTimePickerTable",cellPadding:0,cellSpacing:0},[this.e("tbody",null,[this.e("tr",null,[this.e("td",{class:"FreeTimePickerTableCell"},[this.datePicker=(0,r.b4)(new u(this.selectedDate,this.daysWithFreeTime),{onselectdate:this.caller("onSelectDate")})]),this.e("td",{class:"FreeTimePickerTableCell"},[this.timeSelector=new c(this.selectedDate,this.freeTimesForSelectedDate)])])])])])},i.prototype.onScheduleAppointmentClick=function(e){this.cancelEvent(e)},i.prototype.onSelectDate=function(e){this.selectedDate=e.date;var t=TimeSlotApiHelper.portalBaseUrl?TimeSlotApiHelper.getFreeTime(this.selectedDate):getFreeTime(this.selectedDate),n=this,r=new Date(this.selectedDate),o=new Date(this.selectedDate);o.setHours(23),o.setSeconds(59),o.setMinutes(59),t.done((function(e){for(var t=[],i=0;i<e.length;++i){var a=new Date(1e3*e[i].targetDate.timestamp);a>=r&&a<=o&&t.push({targetDate:a,slot:e[i]})}n.freeTimesForSelectedDate=t,n.datePicker.setDate(n.selectedDate),n.timeSelector.setDate(n.selectedDate,n.freeTimesForSelectedDate)}))};var a=(0,r.Xs)("Toolbar",r.x0);a.prototype.init=function(e){this.content=e,this.drawUI()},a.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePickerToolbar"},[this.content])};var u=(0,r.Xs)("DatePicker",r.x0);u.prototype.init=function(e,t){this.baseCssClassName="DatePicker",this.selectedDate=e,this.daysWithFreeTime=t,this.drawUI()},u.prototype.setDate=function(e){this.selectedDate=e,this.updateData()},u.prototype.drawUI=function(){this.element=this.e("tr",{class:"DatePicker"},[new a(this.e("div",null,[this.title=this.e("span"),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onNextClick")},[">"]),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onPrevClick")},["<"])])),this.e("div",{class:"DatePickerContent"},[this.e("table",{cellPadding:0,cellSpacing:0},[this.headersContainer=this.e("thead",null,this.getHeaders()),this.createWeeksTbody()])])]),this.updateData()},u.prototype.getHeaders=function(){return[this.e("tr",null,[this.e("th",null,[o.A.shortDayOfWeekNames[0].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[0].slice(1)]),this.e("th",null,[o.A.shortDayOfWeekNames[1].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[1].slice(1)]),this.e("th",null,[o.A.shortDayOfWeekNames[2].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[2].slice(1)]),this.e("th",null,[o.A.shortDayOfWeekNames[3].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[3].slice(1)]),this.e("th",null,[o.A.shortDayOfWeekNames[4].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[4].slice(1)]),this.e("th",null,[o.A.shortDayOfWeekNames[5].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[5].slice(1)]),this.e("th",null,[o.A.shortDayOfWeekNames[6].charAt(0).toUpperCase()+o.A.shortDayOfWeekNames[6].slice(1)])])]},u.prototype.createWeeksTbody=function(){function e(e){t.ondayheaderclick&&t.ondayheaderclick(e)}var t=this;this.weeks=[];for(var n,o=this.e("tbody"),i=0;i<=5;++i)(n=(0,r.b4)(new l(this,this.baseCssClassName),{onselectdate:this.caller("onSelectDate")})).ondayheaderclick=e,this.weeks.push(n),this.appendChild(o,n);return o},u.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},u.prototype.updateData=function(){this.removeAllChildren(this.title),this.appendChild(this.title,this.toTitleCase(o.A.getDayAndMonthFormat(this.selectedDate)));for(var e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth(),n=o.A.getLastDayInMonth(this.selectedDate),r=1-function(e){return(e=new Date(e.getFullYear(),e.getMonth(),1)).getDay()}(this.selectedDate),i=(u=new Date).getFullYear(),a=u.getMonth(),u=u.getDate(),l=!1,s=0;s<6;++s){this.weeks[s].element.style.display=r>n?"none":"";for(var c=0;c<7;++c){var f=new Date(e,t,r);this.weeks[s].days[c].setDay(f),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"Past",r<=0||r>n),!l&&r+1>=n&&(l=!0),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"Today",f.getDate()==u&&f.getFullYear()==i&&f.getMonth()==a),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"Selected",this.selectedDate.getDate()==f.getDate()&&this.selectedDate.getFullYear()==f.getFullYear()&&this.selectedDate.getMonth()==f.getMonth()),this.setHasClass(this.weeks[s].days[c].element,this.baseCssClassName+"HasFreeTime",this.dateHasFreeTime(f)),++r}}},u.prototype.dateHasFreeTime=function(e){for(var t=0;t<this.daysWithFreeTime.length;++t)if(this.daysWithFreeTime[t].getDate()==e.getDate()&&this.daysWithFreeTime[t].getFullYear()==e.getFullYear()&&this.daysWithFreeTime[t].getMonth()==e.getMonth())return!0;return!1},u.prototype.onPrevClick=function(e){this.cancelEvent(e),this.changeDate(-1)},u.prototype.onNextClick=function(e){this.cancelEvent(e),this.changeDate(1)},u.prototype.changeDate=function(e){var t=new r.eT,n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+2*e,0);t.date=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate()>n.getDate()?n.getDate():this.selectedDate.getDate());var o=TimeSlotApiHelper.portalBaseUrl?TimeSlotApiHelper.getSlotDays(t.date):getSlotDays(t.date),i=this;o.done((function(e){for(var n=e.days,r=[],o=0;o<=n.length;++o)r.push(new Date(t.date.getFullYear(),t.date.getMonth(),n[o]));i.daysWithFreeTime=r,i.dispatchEvent("selectdate",t)}))},u.prototype.onSelectDate=function(e){this.dispatchEvent("selectdate",e)};var l=(0,r.Xs)("DatePickerWeek",r.x0);l.prototype.init=function(e,t){var n=this;function o(e){n.ondayheaderclick&&n.ondayheaderclick(e)}this.monthView=e,this.baseCssClassName=t,this.days=[],this.element=this.e("tr",{class:this.baseCssClassName+"WeekHeader"});for(var i=0;i<7;++i){var a;(a=(0,r.b4)(new s(this.monthView,this.baseCssClassName),{onselectdate:this.dispatcher("selectdate")})).onheaderclick=o,this.days.push(a),this.appendChild(this.element,a)}return this.widget};var s=(0,r.Xs)("DatePickerCell",r.x0);s.prototype.init=function(e,t){this.monthView=e,this.baseCssClassName=t,this.element=this.e("td",{class:this.baseCssClassName+"DayHeaderTd"},[this.e("div",{class:"tdContainer"},[this.e("div",{class:this.baseCssClassName+"DayHeader",onclick:this.caller("onHeaderClick")},[this.dayText=document.createTextNode("")])])])},s.prototype.setDay=function(e){this.date=e,this.dayText.nodeValue=e.getDate()},s.prototype.onHeaderClick=function(){var e=new r.eT;e.date=this.date,this.dispatchEvent("selectdate",e)};var c=(0,r.Xs)("TimeSelector",r.x0);c.prototype.init=function(e,t,n){this.selectedDate=e,this.freeTimes=t,this.maxColumns=3,this.timezoneOffset=n,this.drawUI()},c.prototype.setDate=function(e,t){this.selectedDate=e,this.freeTimes=t,this.updateData()},c.prototype.drawUI=function(){this.element=this.element=this.e("div",{class:"TimeSelector"},[new a(this.e("div",null,["Availability for ",this.selectedDateTextContainer=this.e("span")])),this.e("div",{class:"TimeSelectorContent"},[this.checkboxsContainer=this.e("table",{class:"TimeSelectorTable",cellPadding:0,cellSpacing:0})])]),this.updateData()},c.prototype.getCheckboxs=function(){for(var e=parseInt(this.freeTimes.length/this.maxColumns)+1,t=e<2?1:e<4?2:3,n=(parseInt(this.freeTimes.length/t),[]),r=0;r<this.freeTimes.length;++r){for(var o=[],i=0;i<t&&r<this.freeTimes.length;++i)o.push(this.e("td",{class:"TimeSelectorCell"},[new f(this.freeTimes[r],this.timezoneOffset)])),++r;n.push(this.e("tr",null,o)),--r}return this.e("tbody",null,n)},c.prototype.updateData=function(){this.removeAllChildren(this.selectedDateTextContainer),this.appendChild(this.selectedDateTextContainer,this.toTitleCase(o.A.getLongDateFormat(this.selectedDate))),this.removeAllChildren(this.checkboxsContainer),this.appendChild(this.checkboxsContainer,this.getCheckboxs())},c.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var f=(0,r.Xs)("TimeSelectorOption",r.x0);f.prototype.init=function(e,t){var n=e.targetDate;this.startDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0),this.endDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()+e.slot.slotInMinutes,0),this.slot=e.slot,this.timezoneOffset=t,this.drawUI()},f.prototype.getValueForCheckbox=function(){return JSON.stringify({slotPartitionNumber:Object.keys(this.slot.availablePartitionNumbers)[0],targetDate:{date:this.startDate.getTime()/1e3,hasTime:!0},timeSlotId:this.slot.appUserTimeSlotId,title:"Event for timeslot id "+this.slot.appUserTimeSlotId,contactIdAssignee:null,durationInSeconds:60*this.slot.slotInMinutes,relatedObjects:{addedItems:[],removedItems:[]},typeId:2,timezoneOffset:this.timezoneOffset})},f.prototype.drawUI=function(){var e="";""!==this.slot.location&&null!==this.slot.location&&(e=" ("+this.slot.location+")"),this.element=this.e("label",null,[this.input=this.e("input",{type:"radio",name:"selectedTimeSlot",onchange:this.caller("onChange")}),o.A.getOnlyTimeFromDate(this.startDate)," - ",o.A.getOnlyTimeFromDate(this.endDate),this.e("span",{class:"timeSlotLocation"},[e])]),this.input.value=this.getValueForCheckbox()},f.prototype.onChange=function(){var e=this.input.checked;this.setHasClass(this.element,"TimeSelectorTimeSelected",e);var t=new r.eT;t.date=this.date,this.dispatchEvent("selecttime",t)};const p=i;var d=!1,y={load:function(e,t,n){y.portalBaseUrl=e,y.companiesSelector=n,y.selectedCompanySelector=n+" option:selected",","==t.slice(-1)&&(t=t.slice(0,-1)),y.entityIds=t},getFreeTime:function(e){return pjQuery.ajax({contentType:"application/json",data:'{ "year":'+e.getFullYear()+', "month":'+(e.getMonth()+1)+', "day": '+e.getDate()+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+e.getTimezoneOffset()+"}",dataType:"json",type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=2"})},getSlotDays:function(e){return pjQuery.ajax({contentType:"application/json",data:'{ "year":'+e.getFullYear()+', "month":'+(e.getMonth()+1)+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+e.getTimezoneOffset()+"}",dataType:"json",type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=1"})},getSlotDaysAndTodaysFreeTime:function(e,t,n){var r=new Date,o=e||r.getFullYear(),i=t||r.getMonth(),a=n||null;pjQuery.ajax({contentType:"application/json",data:'{ "year":'+o+', "month":'+(i+1)+', "day":'+a+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+r.getTimezoneOffset()+"}",dataType:"json",success:function(e){var t=[];if(e.days)for(var n=0;n<=e.days.length;++n)t.push(new Date(o,e.month-1,e.days[n]));var i=[],a=new Date;if(a.setFullYear(e.year,e.month-1,e.day),a.setHours(23,59,59,999),e.times)for(n=0;n<e.times.length;++n)r.getTime()<=1e3*e.times[n].targetDate.timestamp&&a.getTime()>=1e3*e.times[n].targetDate.timestamp&&i.push({targetDate:new Date(1e3*e.times[n].targetDate.timestamp),slot:e.times[n]});d||(d=!0,pjQuery(y.companiesSelector+" option").filter((function(){return-1==pjQuery.inArray(this.value,["0","-1"])})).remove(),pjQuery.each(e.companies,(function(e,t){pjQuery(y.companiesSelector).append(pjQuery("<option></option>").attr("value",t.entityId).text(t.entityName))}))),new p(document.getElementById("freeTimePickerContainer"),new Date(e.year,e.month-1,e.day?e.day:(new Date).getDate()),t,i,30,1,(new Date).getTimezoneOffset())},type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=4"})},_getEntityIds:function(){var e=y.entityIds;return""!=e&&y.companiesSelector?e=y.entityIds+","+pjQuery(y.selectedCompanySelector).val():y.companiesSelector&&(e=pjQuery(y.selectedCompanySelector).val()),e}};const h=y;n.g.TimeSlotApiHelper=h},15040:(e,t,n)=>{"use strict";n(63534),n(40590),n(64216),n(36611),n(18665),n(53270),n(87787),n(94009),n(15852),n(5086),n(29979),n(14602);var r=n(50375),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialize()}return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}],(n=[{key:"get",value:function(e){var t=pjQuery.Deferred();return this.cache[e]?t.resolve(this.cache[e]):t.reject(null),t.promise()}},{key:"set",value:function(e,t){var n=pjQuery.Deferred();return this.cache[e]=t,n.resolve(!0),n.promise()}},{key:"clear",value:function(e){var t=pjQuery.Deferred();return this.cache.hasOwnProperty(e)?(delete this.cache[e],t.resolve(!0)):t.reject(null),t.promise()}},{key:"purge",value:function(){var e=pjQuery.Deferred();return this._initialize(),e.resolve(!0),e.promise()}},{key:"buildKey",value:function(e,t){return t=t||{},o()(e+JSON.stringify(t))}},{key:"_initialize",value:function(){this.cache={}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const s=l;n(18636),n(18772);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var h=p((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));d(h,"WIZARD_FIELD_DESCRIPTION","WizardFieldDescription"),d(h,"WIZARD_FIELD_LABEL","WizardFieldLabel"),d(h,"WIZARD_FIELD_SUBFIELD_LABEL","WizardSubFieldLabel"),d(h,"WIZARD_FIELD_LINK","WizardFieldLink"),d(h,"WIZARD_FIELD_INPUT_CONTAINER","WizardFieldInputContainer"),d(h,"WIZARD_FIELD_INPUT","WizardFieldInput"),d(h,"WIZARD_FIELD_ERROR","WizardFieldError"),d(h,"WIZARD_FIELD_SUBFIELD_LABEL_TEMPLATES_CLASS","tc_formSublabel"),d(h,"WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS","tc_formField"),d(h,"WIZARD_FIELD_LABEL_TEMPLATES_CLASS","tc_formLabel"),d(h,"WIZARD_FORM_FIELD_BY_FIELD_BUTTON_TEMPLATES_CLASS","tc_formButton");const v=h;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"setWizardValidationAccessible",value:function(t){var n=pjQuery("<ul></ul>");pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).find(".errorMessage").each((function(e,t){var r=pjQuery(this),o=r.text(),i=r.attr("data-fieldLabel");if(i&&o){var a=o.split(")")[1].substr(1),u=pjQuery("<li></li>").text("".concat(i+": "+a));n.append(u)}}))})),n.find("li").length>0&&(pjQuery("#liveErrorsContainer").append("<p>"+t+"</p>").append(n),setTimeout((function(){e.cleanDuplicatedNotices(),e.appendToWizardFormVisibleNoticeOfFieldErrors(t)}),1e3))}},{key:"cleanDuplicatedNotices",value:function(){pjQuery("div.alert--error").remove(),pjQuery("div.message--error").remove()}},{key:"appendToWizardFormVisibleNoticeOfFieldErrors",value:function(e){pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).prepend(pjQuery("<div/>",{class:"alert alert--error "+v.WIZARD_FIELD_ERROR,"aria-hidden":"true"}).append([pjQuery("<i/>",{class:"fa fa-exclamation-circle"}),e]))}))}}],(n=null)&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const w=_;n(79389),n(64189),n(97755),n(10678),n(41412),n(4632),n(96088),n(34606),n(12091),n(79073),n(87136),n(6048),n(40173),n(19693),n(59581),n(68763),n(90345),n(69193),n(51037);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"assertIsValid",value:function(t){if(!(t&&t instanceof e))throw new Error("invalidArgumentException: invalid value. It must be an instance of ValueBase.")}}],(n=[{key:"getType",value:function(){throw new Error("notImplementedError")}},{key:"toString",value:function(){throw new Error("notImplementedError")}},{key:"isEmpty",value:function(){return!1}}])&&S(t.prototype,n),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const k=P;function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function I(e,t,n){return t=C(t),function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function R(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}var A,N,x,L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return""}},{key:"isEmpty",value:function(){return!0}}])&&j(n.prototype,r),o&&j(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);A=L,x="FieldEmptyValue",(N=R(N="TYPE"))in A?Object.defineProperty(A,N,{value:x,enumerable:!0,configurable:!0,writable:!0}):A[N]=x;const M=L;function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"registerFieldDependency",value:function(t,n,r){PortalHtml.elementExists(t)&&PortalHtml.elementExists(n)&&(r!==e.TYPE_DISPLAY&&r!==e.TYPE_VALUES&&r!==e.TYPE_EDIT||(e._existsFieldWithDependencies(n)||(e._fieldsDependencies[n]=[]),-1===e._fieldsDependencies[n].indexOf(t)&&(e._fieldsDependencies[n][t]=[]),-1===e._fieldsDependencies[n][t].indexOf(r)&&e._fieldsDependencies[n][t].push(r)))}},{key:"getChildDependentFieldsOf",value:function(t){return e._existsFieldWithDependencies(t)?e._fieldsDependencies[t]:[]}},{key:"_existsFieldWithDependencies",value:function(t){return t in e._fieldsDependencies}}],(n=null)&&B(t.prototype,n),r&&B(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();U.TYPE_DISPLAY="Display",U.TYPE_VALUES="Values",U.TYPE_EDIT="Edit",U._fieldsDependencies={};const Y=U;function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function Q(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}var q=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentDependencyFieldId=t,this._operator=n,this._value=r},(t=[{key:"getParentDependencyFieldId",value:function(){return this._parentDependencyFieldId}},{key:"getOperator",value:function(){return this._operator}},{key:"getValue",value:function(){return this._value}}])&&z(e.prototype,t),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const G=q;function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function $(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"isFieldRegistered",value:function(t){return t in e._fields}},{key:"registerField",value:function(t,n){return!(e.isFieldRegistered(t)||!PortalHtml.elementExists(t)||(e._fields[t]=n,0))}},{key:"unregisterField",value:function(t){e.isFieldRegistered(t)&&!PortalHtml.elementExists(t)&&delete e._fields[t]}},{key:"getFieldValue",value:function(t){return e._getFieldOrDie(t).getValue()}},{key:"getFieldValueByType",value:function(t,n){var r=e._getFieldOrDie(t).getValue();if(r.getType()!==n&&r.getType()!==M.TYPE)throw new Error("invalidValueError: field "+t+" returns "+r.getType()+" values");return r}},{key:"getFieldValueForCondition",value:function(t){return e._getFieldOrDie(t).getValueForCondition()}},{key:"setFieldValue",value:function(t,n){e._getFieldOrDie(t).setValue(n)}},{key:"hasValue",value:function(t){var n=e.getField(t);if(null!==n)return n.hasValue();e._throwFieldNotRegisteredException(t)}},{key:"cloneForNewTableRow",value:function(t,n,r){PortalString.isString(r)||(r="");var o=t+"-0"+r,i=t+"-"+n+r;if(null===e.getField(i)){var a=e.getField(o);null===a&&e._throwFieldNotRegisteredException(t),a.cloneForNewTableRow(i,n)}}},{key:"isVisible",value:function(t){var n=e.getField(t);return null!==n&&n.isVisible()}},{key:"setFieldVisibilityConditionsOperator",value:function(t,n){e.isFieldRegistered(t)&&e.getField(t).setVisibilityConditionsOperator(n)}},{key:"setFieldVisibilityConditionFromParams",value:function(t,n,r,o){if(e.isFieldRegistered(t)){var i=e.getField(t),a=new G(n,r,o);i.addVisibilityCondition(a)}}},{key:"setFieldEditConditionFromParams",value:function(t,n,r,o){if(e.isFieldRegistered(t)){var i=e.getField(t),a=new G(n,r,o);i.addEditCondition(a)}}},{key:"onFieldValueChange",value:function(t){if(e.isFieldRegistered(t)){var n,r,o,i=Y.getChildDependentFieldsOf(t);for(r in i)if(i.hasOwnProperty(r))for(n=0;n<i[r].length;n++)o=i[r][n],e._addFieldAsPendingToBeUpdated(r,o,t);var a=e._getFieldsPendingToBeUpdated(t);for(n=0;n<a.length;n++){r=a[n];var u=e.getField(r);null!==u&&(u.onRelatedFieldValueChange(t),e._removePendingToBeUpdatedField(r))}}}},{key:"evaluateEditRestrictions",value:function(t){var n=e.getField(t);null!==n&&n.evaluateEditRestrictions()}},{key:"fieldAcceptsValueType",value:function(t,n){return e._getFieldOrDie(t).fieldAcceptsValueType(n)}},{key:"isSomeFieldBeingUpdated",value:function(){for(var t in e._fields)if(e._fields.hasOwnProperty(t)&&e.getField(t).isBeingUpdated())return!0;return!1}},{key:"getField",value:function(t){return e.isFieldRegistered(t)?e._fields[t]:null}},{key:"dispatchBeforeSubmitAutoPartialSave",value:function(){var t=Object.values(e._fields).map((function(e){return e.onBeforeSubmitAutoPartialSave()}));return Promise.allSettled(t)}},{key:"_throwFieldNotRegisteredException",value:function(e){throw new Error("tryToAccessNonRegisteredField: "+e)}},{key:"_addFieldAsPendingToBeUpdated",value:function(t,n,r){(-1===e._fieldsPendingToBeUpdated.indexOf(t)||e._fieldsPendingToBeUpdated[t].dependencyType===Y.TYPE_DISPLAY&&n===Y.TYPE_VALUES)&&(e._fieldsPendingToBeUpdated[t]={dependencyType:n,parentFieldId:r})}},{key:"_getFieldsPendingToBeUpdated",value:function(t){var n=[];for(var r in e._fieldsPendingToBeUpdated)e._fieldsPendingToBeUpdated.hasOwnProperty(r)&&e._fieldsPendingToBeUpdated[r].parentFieldId===t&&n.push(r);return n}},{key:"_removePendingToBeUpdatedField",value:function(t){var n=e._fieldsPendingToBeUpdated.indexOf(t);n>-1&&e._fieldsPendingToBeUpdated.splice(n,1)}},{key:"_getFieldOrDie",value:function(t){var n=e.getField(t);if(null!==n)return n;e._throwFieldNotRegisteredException(t)}},{key:"_isCollapsible",value:function(t){var n=e.getField(t);return n&&n._getFieldContainerElement().hasClass("fieldSpec--collapsible")}}],(n=null)&&K(t.prototype,n),r&&K(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Z._fieldsPendingToBeUpdated=[],Z._fields={};const X=Z;n(27727),n(49576),n(58476),n(15195),n(47746),n(4895),n(80475),n(10557),n(14913),n(98741),n(31586),n(7918),n(96982),n(58379),n(23604),n(63555),n(7899),n(43148);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e,t,n){return(t=oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}var ie=ne((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));re(ie,"EQUAL","=="),re(ie,"NOT_EQUAL","!="),re(ie,"ANY","any"),re(ie,"ALL","all"),re(ie,"NONE","none"),re(ie,"IS_ATTACHED","isAttached"),re(ie,"IS_SET","isSet"),re(ie,"IS_COMPLETED","isCompleted"),re(ie,"IS_EMPTY","isEmpty"),re(ie,"IS_NOT_EMPTY","isNotEmpty"),re(ie,"TIME_SLOT_SELECTED","timeSlotSelected"),re(ie,"NO_TIME_SLOT_SELECTED","noTimeSlotSelected");const ae=ie;function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fe(r.key),r)}}function se(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e,t,n){return(t=fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}var pe=se((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));ce(pe,"AND","and"),ce(pe,"OR","or");const de=pe;function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function ve(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ye(t)?t:t+""}var be=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"areFieldConditionsSatisfied",value:function(e,t){var n=this,r=e.getConditions();if(0===r.length)return!0;switch(e.getOperator()){case de.AND:return r.every((function(e){return n._isFieldConditionSatisfied(e)}));case de.OR:return r.some((function(e){return n._isFieldConditionSatisfied(e)}));default:return!1}}},{key:"_isFieldConditionSatisfied",value:function(e){var t=e.getParentDependencyFieldId();try{var n=X.getFieldValueForCondition(t);return Array.isArray(n)?this._evaluateArrayedValue(n,e.getValue(),e.getOperator()):this._evaluateSimpleValue(n,e.getValue(),e.getOperator())}catch(e){return!1}}},{key:"_evaluateArrayedValue",value:function(e,t,n){switch(n){case ae.ALL:case ae.EQUAL:return this._arrayEquals(e,t);case ae.NOT_EQUAL:return!this._arrayEquals(e,t);case ae.ANY:return this._arrayContainsAny(e,t);case ae.NONE:return!this._arrayContainsAny(e,t);case ae.IS_EMPTY:return this._arrayIsEmpty(e);case ae.IS_NOT_EMPTY:return!this._arrayIsEmpty(e);default:return!1}}},{key:"_arrayContainsAny",value:function(e,t){var n=this;return e.some((function(e){return t.some((function(t){return n._parseValueForEvaluation(t)==n._parseValueForEvaluation(e)}))}))}},{key:"_arrayEquals",value:function(e,t){var n=this;return!(e.length<t.length)&&t.every((function(t){return e.some((function(e){return n._parseValueForEvaluation(t)==n._parseValueForEvaluation(e)}))}))}},{key:"_evaluateSimpleValue",value:function(e,t,n){switch(e=this._parseValueForEvaluation(e),t=null===t?"":t,n){case ae.EQUAL:return this._evaluateSimpleEqual(e,t);case ae.NOT_EQUAL:return e!=t;case ae.ANY:case ae.NONE:return this._evaluateArrayedValue([e],t,n);case ae.IS_SET:case ae.IS_ATTACHED:return this._evaluateValueIsSetOrFileIsAttached(e,t);case ae.IS_EMPTY:return!this._isValueSetOrFileAttached(e);case ae.IS_NOT_EMPTY:return this._isValueSetOrFileAttached(e);case ae.TIME_SLOT_SELECTED:case ae.NO_TIME_SLOT_SELECTED:return this._evaluateTimeSlotFieldValue(e,n);default:return!1}}},{key:"_evaluateSimpleEqual",value:function(e,t){return!(null===e&&null!==t||e!=t&&(e<t||e>t))}},{key:"_evaluateTimeSlotFieldValue",value:function(e,t){return e&&t===ae.TIME_SLOT_SELECTED||!e&&t===ae.NO_TIME_SLOT_SELECTED}},{key:"_evaluateValueIsSetOrFileIsAttached",value:function(e,t){return this._isSetOrIsAttachedConditionValue(t)?this._isValueSetOrFileAttached(e):!this._isValueSetOrFileAttached(e)}},{key:"_isValueSetOrFileAttached",value:function(e){return""!==e&&null!=e}},{key:"_arrayIsEmpty",value:function(e){return 0===e.length}},{key:"_isSetOrIsAttachedConditionValue",value:function(e){return 1===e||"1"===e}},{key:"_parseValueForEvaluation",value:function(e){return null===e?"":"string"==typeof e&&e.includes("JSNType")?(null===(t=JSON.parse(e).value)||void 0===t?void 0:t.id)||null:"object"===ye(e)&&e.value?e.value.id:e;var t}}],t&&he(e.prototype,t),n&&he(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const me=be;function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}function Oe(e,t,n){return t=Pe(t),function(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Se()?Reflect.construct(t,n||[],Pe(e).constructor):t.apply(e,n))}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}function Ee(){return Ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ee.apply(this,arguments)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}var Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(t,e),n=t,(r=[{key:"_isFieldConditionSatisfied",value:function(e){var n=e.getParentDependencyFieldId();return(X.isVisible(n)||X._isCollapsible(n))&&Ee(Pe(t.prototype),"_isFieldConditionSatisfied",this).call(this,e)}}])&&_e(n.prototype,r),o&&_e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(me);const je=Te;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}function Ce(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}function De(e,t,n){return t=Ne(t),function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Re()?Reflect.construct(t,n||[],Ne(e).constructor):t.apply(e,n))}function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}function Ae(){return Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ae.apply(this,arguments)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}var Le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(t,e),n=t,(r=[{key:"areFieldConditionsSatisfied",value:function(e,n){var r=e.getConditions();return(1!==r.length||r[0].getParentDependencyFieldId()!==n)&&Ae(Ne(t.prototype),"areFieldConditionsSatisfied",this).call(this,e,n)}}])&&Fe(n.prototype,r),o&&Fe(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(me);const Me=Le;function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,We(r.key),r)}}function We(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ve(t)?t:t+""}var Ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"registerValidator",value:function(t,n){e._isValidatorRegistered(t)||(e._validators[t]=[]),e._validators[t].push(n)}},{key:"getForField",value:function(t){var n=e.__getValidators(t);return null!==n?n:[]}},{key:"cloneValidatorForNewTableRow",value:function(t,n,r){for(var o=e.getForField(t),i=0;i<o.length;i++){var a=o[i].cloneForNewTableRow(n,r);e.registerValidator(n,a)}}},{key:"__getValidators",value:function(t){return e._isValidatorRegistered(t)?e._validators[t]:null}},{key:"_isValidatorRegistered",value:function(t){return t in e._validators}}],(n=null)&&Be(t.prototype,n),r&&Be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Ue._validators={};const Ye=Ue;function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ge(r.key),r)}}function Qe(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qe(e,t,n){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==He(t)?t:t+""}var Je=Qe((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));qe(Je,"DISPLAY_CONDITIONALLY","DisplayConditionally"),qe(Je,"SECTION_COLLAPSIBLE","SectionCollapsible"),qe(Je,"SHOW_FIELD_BY_FIELD","ShowFieldByField");const Ke=Je;function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xe(r.key),r)}}function Xe(e){var t=function(e,t){if("object"!=$e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$e(t)?t:t+""}var et=null,tt=!1,nt={},rt=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!tt)throw new Error("Constructor is private. Use getInstance() instead")}return t=e,r=[{key:"getInstance",value:function(){return et||(tt=!0,et=new e,tt=!1),et}}],(n=[{key:"addWizard",value:function(e,t){nt[e]=t}},{key:"getWizard",value:function(e){if(!nt[e])throw new Error("Wizard (ID: "+e+") does not exist.");return nt[e]}},{key:"getAll",value:function(){return Object.values(nt)}},{key:"registerAll",value:function(){Object.values(nt).forEach((function(e){return e.register()}))}}])&&Ze(t.prototype,n),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const ot=rt;n(92157);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ut(r.key),r)}}function ut(e){var t=function(e,t){if("object"!=it(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==it(t)?t:t+""}var lt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._assign.apply(this,arguments),this.prevented=!1,this.sourceWidget=null,this.currentWidget=null},(t=[{key:"_assign",value:function(e){if(e&&"object"!==it(e))throw new Error("Parameter must be an object.");for(var t in e)this[t]=e[t]}},{key:"preventDefault",value:function(){this.prevented=!0}},{key:"getDefaultPrevented",value:function(){return this.prevented}},{key:"setSourceWidget",value:function(e){this.sourceWidget=e}},{key:"getSourceWidget",value:function(){return this.sourceWidget}},{key:"setCurrentWidget",value:function(e){this.currentWidget=e}},{key:"getCurrentWidget",value:function(){return this.currentWidget}}])&&at(e.prototype,t),n&&at(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const st=lt;function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pt(r.key),r)}}function pt(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ct(t)?t:t+""}var dt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventListeners={},this._callers={}},t=[{key:"addListener",value:function(e,t){if(this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].includes(t))throw new Error("Adding repeated listener ("+e+")");t.callerObj&&t.callerObj.attachedTo.push({context:this,eventName:e}),this._eventListeners[e].push(t)}},{key:"addListenerOnce",value:function(e,t){var n=this;this.addListener(e,(function r(o){t(o),n.removeListener(e,r)}))}},{key:"dispatchEvent",value:function(e,t){return void 0===t&&(t=new st),t instanceof st&&(t.getSourceWidget()||t.setSourceWidget(this),t.setCurrentWidget(this)),this._eventListeners[e]&&this._eventListeners[e].slice().forEach((function(e){return e(t)})),t}},{key:"removeListener",value:function(e,t){if(this._eventListeners[e]&&this._eventListeners[e].length){var n=this._eventListeners[e].indexOf(t);-1!==n?(this._detachFromEvent(t,e),this._eventListeners[e].splice(n,1)):error.log("Cannot remove listener. Listener not added or already removed. Event: "+e+".")}else error.log("Cannot remove listener. Event has no listeners. Event: "+e+".")}},{key:"caller",value:function(e){return this._callers[e]?this._callers[e]:this._callers[e]=this._createCaller(e)}},{key:"_createCaller",value:function(e){var t=this;if(!this[e])throw new Error("missingCaller: "+e);return function(){return t[e].apply(t,arguments)}}},{key:"_detachFromEvent",value:function(e,t){var n=this;if(e.callerObj&&e.callerObj.attachedTo){var r=e.callerObj.attachedTo.findIndex((function(e){return e.context===n&&e.eventName===t}));e.callerObj.attachedTo.splice(r,1)}}}],t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const yt=dt;function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bt(r.key),r)}}function bt(e){var t=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ht(t)?t:t+""}var mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"registerDatasource",value:function(t,n){e.isDatasourceRegistered(t)||(e._datasources[t]=n)}},{key:"getForField",value:function(t){var n=e._getDatasource(t);if(null!==n)return n;throw new Error("tryToAccessNonRegisteredDefaultValueDatasource: "+t)}},{key:"cloneDatasourceForNewTableRow",value:function(t,n,r){var o=e.getForField(t).cloneForNewTableRow(n,r);e.registerDatasource(n,o)}},{key:"cloneDatasource",value:function(t,n){var r=e.getForField(t).clone(n);e.registerDatasource(n,r)}},{key:"_getDatasource",value:function(t){return e.isDatasourceRegistered(t)?e._datasources[t]:null}},{key:"isDatasourceRegistered",value:function(t){return t in e._datasources}}],(n=null)&&vt(t.prototype,n),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();mt._datasources={};const gt=mt;function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ot(r.key),r)}}function Ot(e){var t=function(e,t){if("object"!=_t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_t(t)?t:t+""}var St=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._conditions=[],this._operator=de.AND},(t=[{key:"getConditions",value:function(){return this._conditions}},{key:"addCondition",value:function(e){this._conditions.push(e)}},{key:"getOperator",value:function(){return this._operator}},{key:"setOperator",value:function(e){this._operator=e}}])&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Et=St;function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function kt(){kt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==Pt(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Pt(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||Ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function It(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ft(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ft(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rt(r.key),r)}}function Rt(e){var t=function(e,t){if("object"!=Pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pt(t)?t:t+""}function At(e,t,n){return t=xt(t),function(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Nt()?Reflect.construct(t,n||[],xt(e).constructor):t.apply(e,n))}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nt=function(){return!!e})()}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}function Lt(e,t){return Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lt(e,t)}var Mt=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=At(this,t))._fieldId=e,r._fieldSettings=n||{},r._visibilityConditions=new Et,r._editConditions=new Et,r._isBeingUpdated=!1,r._shouldReupdateAfterCurrentUpdate=!1,r._nextUpdateParentFieldId=null,r._visibilityConditionsEvaluator=new je,r._editConditionsEvaluator=new Me,gt.isDatasourceRegistered(e)&&(r._defaultValueDatasource=gt.getForField(e),pjQuery.each(r._defaultValueDatasource.getParentDependenciesFieldsIds(),(function(t,n){Y.registerFieldDependency(e,n,Y.TYPE_VALUES)}))),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lt(e,t)}(t,e),n=t,r=[{key:"register",value:function(){X.registerField(this._fieldId,this)&&(this._buildVisibilityStatus(),this._postRegister(),this._changeVisibilityIfNeeded(),this.evaluateEditRestrictions())}},{key:"getType",value:function(){throw new Error("notImplementedError")}},{key:"getValue",value:function(){throw new Error("notImplementedError")}},{key:"getValueForCondition",value:function(){throw new Error("notImplementedError")}},{key:"setValue",value:function(e){throw new Error("notImplementedError")}},{key:"hasValue",value:function(){return!this.getValue().isEmpty()}},{key:"hasValueOnLoad",value:function(){return this.hasValue()}},{key:"getLabel",value:function(){var e=pjQuery("#"+this._fieldId+"-label").text();return e&&this.isRequired()?e.replace(/\s\*$/,""):e}},{key:"_assertIsAllowedValueToSet",value:function(e){if(k.assertIsValid(e),!(this._getAllowedValueTypesToSet().indexOf(e.getType())>-1))throw new Error("invalidArgumentException: value to set must be an instance of: "+this._getAllowedValueTypesToSet().join(", "))}},{key:"_getAllowedValueTypesToSet",value:function(){throw new Error("notImplementedError")}},{key:"isRequired",value:function(){return this._getFieldContainerElement().find(".requiredField").length||this._getFieldContainerElement().find(".formrequiredField").length||this._getFieldContainerElement().find(".datasetrequiredField").length}},{key:"isContainerInvalid",value:function(){return this._getFieldContainerElement().hasClass("hasErrors")}},{key:"isValid",value:function(){if(!this._isActive())return!0;var e,n=Ye.getForField(this._fieldId),r=new Map,o=It(n);try{for(o.s();!(e=o.n()).done;){var i=e.value,a=i.isValid();if(!1===a)return this._addValidationErrorIfNeeded(i.getValidationErrorText()),this.dispatchEvent(t.EVENT_ON_VALIDATION_FAIL),!1;a instanceof Promise&&r.set(i,a)}}catch(e){o.e(e)}finally{o.f()}return r.size>0?this._runAsyncValidators(r):(this._removeValidationErrorIfNeeded(),!0)}},{key:"getFieldSettings",value:function(){return this._fieldSettings}},{key:"getSetting",value:function(e){return this._fieldSettings.hasOwnProperty(e)?this._fieldSettings[e]:null}},{key:"getWizard",value:function(){return this._wizard||(this._wizard=ot.getInstance().getWizard(this.getWizardId())),this._wizard}},{key:"getFormContainer",value:function(){return this.getWizard().getForm()}},{key:"getWizardId",value:function(){return this._wizardId||(this._wizardId=this._getFieldElement().closest(".wizard").data("id")),this._wizardId}},{key:"_addValidationErrorIfNeeded",value:function(e){if(pjQuery("#"+this._fieldId+"-errorMessage").length)pjQuery("#"+this._fieldId+"-errorMessage").text(e),pjQuery("#"+this._fieldId+"-errorMessage").prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!) "}));else{var t=pjQuery("<span/>",{id:this._fieldId+"-errorMessage",class:"errorMessage "+v.WIZARD_FIELD_ERROR,role:"alert","aria-live":"assertive","data-fieldlabel":pjQuery("#"+this._fieldId+"-label").text(),text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!) "}));pjQuery("#"+this._fieldId).parent().append(t)}}},{key:"_removeValidationErrorIfNeeded",value:function(){pjQuery("#"+this._fieldId+"-errorMessage").length&&pjQuery("#"+this._fieldId+"-errorMessage").remove()}},{key:"isBeingUpdated",value:function(){return this._isBeingUpdated||this._shouldReupdateAfterCurrentUpdate}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFieldForNewTableRow(e,t);this._addVisibilityConditionsToNewTableRow(n,t),this._addEditConditionsToNewTableRow(n,t),Ye.cloneValidatorForNewTableRow(this._fieldId,e,t),n.register()}},{key:"getFieldId",value:function(){return this._fieldId}},{key:"setVisibilityConditionsOperator",value:function(e){this._visibilityConditions.setOperator(e)}},{key:"addVisibilityCondition",value:function(e){null!==e&&(this._visibilityConditions.addCondition(e),Y.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),Y.TYPE_DISPLAY))}},{key:"addEditCondition",value:function(e){null!==e&&(this._editConditions.addCondition(e),Y.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),Y.TYPE_EDIT))}},{key:"shouldShowIf",value:function(e,t){var n=this.visibilityStatus[e];this.visibilityStatus[e]=t;var r=this._shouldShow();return this.visibilityStatus[e]=n,r}},{key:"isVisible",value:function(){var e=this._getFieldContainerElement();return null!==e&&!e.attr("hidden")}},{key:"focus",value:function(){pjQuery("#"+this._fieldId).focus()}},{key:"onRelatedFieldValueChange",value:function(e){this._isBeingUpdated?(this._shouldReupdateAfterCurrentUpdate=!0,this._nextUpdateParentFieldId=e):(this._isBeingUpdated=!0,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null,this._updateFieldAfterParentFieldValueChange(e))}},{key:"fieldAcceptsValueType",value:function(e){return this._getAllowedValueTypesToSet().indexOf(e)>-1}},{key:"evaluateEditRestrictions",value:function(){var e=this._editConditionsEvaluator.areFieldConditionsSatisfied(this._editConditions,this._fieldId);this._changeEditRestrictionsIfNeeded(e)}},{key:"_postRegister",value:function(){if(this._attachOnChangeListener(),this._hasInitialValue=this.hasValueOnLoad(),this.hasValue()){var e=this._fieldId;pjQuery((function(){X.onFieldValueChange(e)}))}}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){this.evaluateEditRestrictions();var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}},{key:"_onFieldUpdated",value:function(e){if(e&&X.onFieldValueChange(this._fieldId),this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate){this._shouldReupdateAfterCurrentUpdate=!1;var t=this._nextUpdateParentFieldId;this._nextUpdateParentFieldId=null,this.onRelatedFieldValueChange(t)}}},{key:"_updateFieldVisibilityAfterParentFieldValueChange",value:function(){var e=this._visibilityConditionsEvaluator.areFieldConditionsSatisfied(this._visibilityConditions),t=this.isVisible();return this.setVisibilityStatusByType(Ke.DISPLAY_CONDITIONALLY,e),t!==this.isVisible()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._buildClonedField(e)}},{key:"_buildClonedField",value:function(e){throw new Error("notImplementedError")}},{key:"_addVisibilityConditionsToNewTableRow",value:function(e,t){var n=this,r=this._visibilityConditions.getConditions();0!==r.length&&(e.setVisibilityConditionsOperator(this._visibilityConditions.getOperator()),r.forEach((function(r){e.addVisibilityCondition(n._buildFieldConditionForNewTableRow(r,t))})))}},{key:"_addEditConditionsToNewTableRow",value:function(e,t){var n=this,r=this._editConditions.getConditions();0!==r.length&&r.forEach((function(r){e.addEditCondition(n._buildFieldConditionForNewTableRow(r,t))}))}},{key:"_buildFieldConditionForNewTableRow",value:function(e,t){return new G(e.getParentDependencyFieldId().replace(/^((\d+-)+)\d+$/,"$1"+t),e.getOperator(),e.getValue())}},{key:"_unsetField",value:function(e){e.val("")}},{key:"_deactivateChildren",value:function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._deactivate(pjQuery("#"+n.id))}))}},{key:"_activateChildren",value:function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._activate(pjQuery("#"+n.id))}))}},{key:"_addHiddenElementIndicator",value:function(){this._getFieldContainerElement().append('<input id="'+this._fieldId+'_hidden" name="'+this._fieldId+'_hidden" type="hidden" value="true" />')}},{key:"_removeHiddenElementIndicator",value:function(){pjQuery("#"+this._fieldId+"_hidden").remove()}},{key:"_shouldHaveHiddenElementIndicator",value:function(){return!0}},{key:"_setElementType",value:function(e,t){if(e.prop("type")!==t)switch(t){case"select-one":e[0].multiple=!1;break;case"select-multiple":e[0].multiple=!0;break;default:this._elementAllowsChangingType(e[0])&&e.prop("type",t)}}},{key:"_runAsyncValidators",value:(i=kt().mark((function e(n){var r,o,i,a,u;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=It(n.entries()),e.prev=1,r.s();case 3:if((o=r.n()).done){e.next=14;break}return i=Tt(o.value,2),a=i[0],u=i[1],e.next=7,u;case 7:if(!1!==e.sent){e.next=12;break}return this._addValidationErrorIfNeeded(a.getValidationErrorText()),this.dispatchEvent(t.EVENT_ON_VALIDATION_FAIL),e.abrupt("return",!1);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e,this,[[1,16,19,22]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){jt(o,n,r,a,u,"next",e)}function u(e){jt(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"_elementAllowsChangingType",value:function(e){var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"type");return t&&"function"==typeof t.set}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("change",(function(){X.onFieldValueChange(e.getFieldId())}))}},{key:"_getFieldElement",value:function(){return pjQuery("#"+this._fieldId)}},{key:"_getFieldContainerElement",value:function(){return pjQuery("#fieldSpecContainer"+this._fieldId)}},{key:"_buildVisibilityStatus",value:function(){var e=this._getFieldContainerElement();this.visibilityStatus=[],this.visibilityStatus[Ke.DISPLAY_CONDITIONALLY]="1"!==e.attr("data-displayConditionallyHidden"),this.visibilityStatus[Ke.SECTION_COLLAPSIBLE]="1"!==e.attr("data-sectionCollapsibleHidden"),this.visibilityStatus[Ke.SHOW_FIELD_BY_FIELD]=!0,e.removeAttr("data-displayConditionallyHidden"),e.removeAttr("data-sectionCollapsibleHidden")}},{key:"setVisibilityStatusByType",value:function(e,t){this.visibilityStatus[e]=t,this._changeVisibilityIfNeeded()}},{key:"_changeVisibilityIfNeeded",value:function(){this._shouldShow()?this._show():this._hide()}},{key:"_shouldShow",value:function(){for(var e in this.visibilityStatus)if(!this.visibilityStatus[e])return!1;return!0}},{key:"_show",value:function(){this._shouldActivate()&&(this._activate(this._getFieldElement()),this._removeHiddenElementIndicator()),this._getFieldContainerElement().attr("hidden",!1)}},{key:"_hide",value:function(){this._getFieldContainerElement().attr("hidden",!0),this._shouldDeactivate()&&(this._deactivate(this._getFieldElement()),this._addHiddenElementIndicator())}},{key:"_shouldActivate",value:function(){return!0===this.visibilityStatus[Ke.DISPLAY_CONDITIONALLY]&&!this._isActive()&&this._shouldHaveHiddenElementIndicator()}},{key:"_shouldDeactivate",value:function(){return!1===this.visibilityStatus[Ke.DISPLAY_CONDITIONALLY]&&this._isActive()&&this._shouldHaveHiddenElementIndicator()}},{key:"_isActive",value:function(){return 0===pjQuery("#"+this._fieldId+"_hidden").length}},{key:"_activate",value:function(e){if(e){var t=e.attr("data-required");t&&(e.prop("required",t),e.attr("aria-required",t));var n=e.data("hiddentype");n&&(this._setElementType(e,n),this._activateAttributesMetadata(e),e.removeAttr("data-hiddenType"));var r=this._getDataHiddenValue(e);void 0!==r&&r.length>0&&"file"!==n&&(e.val(r),JSON.stringify(r)!==JSON.stringify(e.val())&&this._unsetField(e),e.removeAttr("data-hiddenValue")),this._activateChildren(e)}}},{key:"_getDataHiddenValue",value:function(e){return e.attr("data-hiddenValue")}},{key:"_deactivate",value:function(e){if(e&&0!==e.length){e.removeAttr("required"),e.removeAttr("aria-required"),e.attr("data-hiddenType",e.prop("type"));var t=e.val();t&&e.attr("data-hiddenValue",t),this._setElementType(e,"hidden"),this._inactivateAttributesMetadata(e),this._unsetField(e),this._deactivateChildren(e)}}},{key:"_triggerEvent",value:function(e){e=e||"change",this._getFieldElement().trigger(e)}},{key:"_activateAttributesMetadata",value:function(e){this._getAttributesToFix().forEach((function(t){void 0!==e.attr("data-"+t)&&(e.attr(t,e.attr("data-"+t)),e.removeAttr("data-"+t))}))}},{key:"_inactivateAttributesMetadata",value:function(e){this._getAttributesToFix().forEach((function(t){void 0!==e.attr(t)&&(e.attr("data-"+t,e.attr(t)),e.removeAttr(t))}))}},{key:"_getAttributesToFix",value:function(){return["placeholder","min","max"]}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){e?(this._getFieldContainerElement().removeClass("fieldSpec--readonly"),this._getFieldContainerElement().removeClass("WizardFieldRestrictEditing"),this._getFieldContainerElement().removeAttr("aria-disabled"),this._getFieldElement().removeAttr("readonly")):(this._getFieldContainerElement().addClass("fieldSpec--readonly"),this._getFieldContainerElement().addClass("WizardFieldRestrictEditing"),this._getFieldContainerElement().attr("aria-disabled",!e),this._canBeMarkedAsReadOnly()&&this._getFieldElement().attr("readonly",!e))}},{key:"_canBeMarkedAsReadOnly",value:function(){return["INPUT","TEXTAREA"].includes(this._getFieldElement().prop("tagName"))}},{key:"_getOnNewDefaultValueCallback",value:function(){var e=this;return function(t){if(t){var n=!1;if(!e._hasInitialValue){var r=e.getValue();e.setValue(e._buildDefaultValueToSet(t[0]));var o=e.getValue();n=!e._areValuesEquals(r,o)}e._onFieldUpdated(n)}}}},{key:"_buildDefaultValueToSet",value:function(e){return new M}},{key:"_areValuesEquals",value:function(e,t){return e.getType()===t.getType()&&e.toString()===t.toString()}},{key:"changeHiddenField",value:function(e,t){t?e.addClass("WizardFieldHidden"):e.removeClass("WizardFieldHidden")}},{key:"onBeforeSubmitAutoPartialSave",value:function(){return Promise.resolve()}},{key:"onFormStepVisibilityChange",value:function(){}},{key:"isAutocomplete",value:function(){return!1}}],r&&Dt(n.prototype,r),o&&Dt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(yt);Mt.EVENT_ON_VALIDATION_FAIL="onValidationFail";const Vt=Mt;function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qt(r.key),r)}}function Ut(e,t,n){return t=Ht(t),function(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yt()?Reflect.construct(t,n||[],Ht(e).constructor):t.apply(e,n))}function Yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yt=function(){return!!e})()}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}function zt(e,t){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zt(e,t)}function Qt(e){var t=function(e,t){if("object"!=Bt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bt(t)?t:t+""}var qt=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Ut(this,t),!PortalString.isString(e))throw new Error("invalidValue: value must be a valid string");return n._value=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._value}},{key:"getValue",value:function(){return this._value}}])&&Wt(n.prototype,r),o&&Wt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Qt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qt,"TYPE","FieldTextValue");const Gt=qt;function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tn(r.key),r)}}function $t(e,t,n){return t=Xt(t),function(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zt()?Reflect.construct(t,n||[],Xt(e).constructor):t.apply(e,n))}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function en(e,t){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},en(e,t)}function tn(e){var t=function(e,t){if("object"!=Jt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jt(t)?t:t+""}var nn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$t(this,t))._value=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._value.toString()}},{key:"getValue",value:function(){return this._value}}])&&Kt(n.prototype,r),o&&Kt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=tn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nn,"TYPE","FieldNumberValue");const rn=nn;function on(e){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(e)}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pn(r.key),r)}}function un(e,t,n){return t=cn(t),function(e,t){if(t&&("object"===on(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ln()?Reflect.construct(t,n||[],cn(e).constructor):t.apply(e,n))}function ln(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ln=function(){return!!e})()}function sn(){return sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},sn.apply(this,arguments)}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}function fn(e,t){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fn(e,t)}function pn(e){var t=function(e,t){if("object"!=on(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=on(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==on(t)?t:t+""}var dn=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=un(this,t,[e,n]))._formula=r||o.getSetting("formula"),o._currentValue=0,o._parentsFieldsIdsInFormula=[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fn(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){this._setNewFormula(this._formula),this._printFieldValue(this._currentValue),sn(cn(t.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){return null!==this._currentValue?new rn(this._currentValue):new M}},{key:"getValueForCondition",value:function(){return this._currentValue}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._setNewFormula(e.getValue()),this._evaluateFormula()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){var r=this._replaceRowIndexInFormula(this._formula,n);return new t(e,this.getFieldSettings(),r)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){this._evaluateFormula(),sn(cn(t.prototype),"_updateFieldAfterParentFieldValueChange",this).call(this,e)}},{key:"_setNewFormula",value:function(e){this._formula=e,this._getFieldElement().attr("data-formula",e),this._reevaluateFormulaDependentFields()}},{key:"_printFieldValue",value:function(e){this._getFieldElement().text(e)}},{key:"_evaluateFormula",value:function(){this._currentValue=this._recalculateFieldValue(),this._printFieldValue(this._currentValue),X.onFieldValueChange(this._fieldId)}},{key:"_reevaluateFormulaDependentFields",value:function(){var e,t=/\{([\d-]+)\}/,n=this._formula;for(this._parentsFieldsIdsInFormula=[];e=t.exec(n);){var r=e[0],o=e[1];this._parentsFieldsIdsInFormula.push(o),Y.registerFieldDependency(this._fieldId,o,Y.TYPE_VALUES),n=n.replace(r,"")}}},{key:"_replaceRowIndexInFormula",value:function(e,t){for(var n,r=e,o=/\{([\d-]+)-\d\}/;n=o.exec(e);){var i=n[0],a=n[1],u=new RegExp(a+"-\\d","g"),l=a+"-"+t;r=r.replace(u,l),e=e.replace(i,"")}return r}},{key:"_recalculateFieldValue",value:function(){var e,t=this,n=this._formula;return pjQuery.each(this._parentsFieldsIdsInFormula,(function(e,r){var o=t._getNumericFieldValueById(r);n=n.replace("{"+r+"}",o)})),null!==(e=math.evaluate(n))&&void 0!==e?e:null}},{key:"_getNumericFieldValueById",value:function(e){var t=X.getFieldValue(e);if(t.isEmpty())return 0;var n=parseFloat(t.toString());return isNaN(n)?0:n}}],r&&an(n.prototype,r),o&&an(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=pn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dn,"TYPE","ArithmeticField");const yn=dn;function hn(e){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(e)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wn(r.key),r)}}function bn(e,t,n){return t=gn(t),function(e,t){if(t&&("object"===hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mn()?Reflect.construct(t,n||[],gn(e).constructor):t.apply(e,n))}function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mn=function(){return!!e})()}function gn(e){return gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gn(e)}function _n(e,t){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_n(e,t)}function wn(e){var t=function(e,t){if("object"!=hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hn(t)?t:t+""}var On=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=bn(this,t),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");return n._optionId=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_n(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._optionId}},{key:"getOptionId",value:function(){return this._optionId}}])&&vn(n.prototype,r),o&&vn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=wn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(On,"TYPE","FieldIdValue");const Sn=On;function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fn(r.key),r)}}function kn(e,t,n){return t=jn(t),function(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tn()?Reflect.construct(t,n||[],jn(e).constructor):t.apply(e,n))}function Tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tn=function(){return!!e})()}function jn(e){return jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jn(e)}function In(e,t){return In=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},In(e,t)}function Fn(e){var t=function(e,t){if("object"!=En(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==En(t)?t:t+""}var Cn=function(e){function t(e,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=kn(this,t),"string"!=typeof e)throw new Error("invalidValue: option ID must be a valid string");if("string"!=typeof n)throw new Error("invalidValue: option text must be a valid string");return r._optionId=e,r._optionText=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&In(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._optionText}},{key:"getOptionId",value:function(){return this._optionId}},{key:"getOptionText",value:function(){return this._optionText}}])&&Pn(n.prototype,r),o&&Pn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Fn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cn,"TYPE","FieldOptionValue");const Dn=Cn;function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vn(r.key),r)}}function Nn(e,t,n){return t=Ln(t),function(e,t){if(t&&("object"===Rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xn()?Reflect.construct(t,n||[],Ln(e).constructor):t.apply(e,n))}function xn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xn=function(){return!!e})()}function Ln(e){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ln(e)}function Mn(e,t){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mn(e,t)}function Vn(e){var t=function(e,t){if("object"!=Rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rn(t)?t:t+""}var Bn=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Nn(this,t),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options must be a non-empty array");var r=n;return e.forEach((function(e,t){r._assertIsValidOption(e)})),n._options=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mn(e,t)}(t,e),n=t,o=[{key:"buildOption",value:function(e,t){return{id:e,text:t}}}],(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),"["+e.join(",")+"]"}},{key:"getOptionsIds",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.id)})),e}},{key:"getOptionsTexts",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),e}},{key:"_assertIsValidOption",value:function(e){var t=e.id,n=e.text;if(!PortalString.isString(t))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(n))throw new Error("invalidValue: option text must be a valid string")}}])&&An(n.prototype,r),o&&An(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Vn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bn,"TYPE","FieldMultipleOptionsValue");const Wn=Bn;function Un(e){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(e)}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hn(r.key),r)}}function Hn(e){var t=function(e,t){if("object"!=Un(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Un(t)?t:t+""}var zn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"registerDatasource",value:function(t,n){e._isDatasourceRegistered(t)||(e._datasources[t]=n)}},{key:"getForField",value:function(t){var n=e._getDatasource(t);if(null!==n)return n;throw new Error("tryToAccessNonRegisteredDatasource: "+t)}},{key:"cloneDatasourceForNewTableRow",value:function(t,n,r){var o=e.getForField(t).cloneForNewTableRow(n,r);e.registerDatasource(n,o)}},{key:"cloneDatasource",value:function(t,n){var r=e.getForField(t).clone(n);e.registerDatasource(n,r)}},{key:"_getDatasource",value:function(t){return e._isDatasourceRegistered(t)?e._datasources[t]:null}},{key:"_isDatasourceRegistered",value:function(t){return t in e._datasources}}],(n=null)&&Yn(t.prototype,n),r&&Yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();zn._datasources={};const Qn=zn;function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jn(r.key),r)}}function Jn(e){var t=function(e,t){if("object"!=qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qn(t)?t:t+""}function Kn(e,t,n){return t=Xn(t),function(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$n()?Reflect.construct(t,n||[],Xn(e).constructor):t.apply(e,n))}function $n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($n=function(){return!!e})()}function Zn(){return Zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Zn.apply(this,arguments)}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}function er(e,t){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},er(e,t)}var tr=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Kn(this,t,[e,n]))._datasource=Qn.getForField(r||e),pjQuery.each(o._datasource.getParentDependenciesFieldsIds(),(function(t,n){Y.registerFieldDependency(e,n,Y.TYPE_VALUES)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&er(e,t)}(t,e),n=t,(r=[{key:"_postRegister",value:function(){this._isPrePopulateEnabled()&&this._prePopulateIfOnlyOneOption(),Zn(Xn(t.prototype),"_postRegister",this).call(this)}},{key:"_getOptionsPage",value:function(){throw new Error("notImplementedError")}},{key:"_getOptionsPageSize",value:function(){throw new Error("notImplementedError")}},{key:"_createWithNewOptions",value:function(e){throw new Error("notImplementedError")}},{key:"_isPrePopulateEnabled",value:function(){throw new Error("notImplementedError")}},{key:"_prePopulateIfOnlyOneOption",value:function(){throw new Error("notImplementedError")}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){if(this.evaluateEditRestrictions(),this._isParentDependentField(e))this.isVisible()?(this._updateFieldVisibilityAfterParentFieldValueChange(),this._fetchNewOptionsUsingDatasource(e)):(this._fetchNewOptionsUsingDatasource(e),this._updateFieldVisibilityAfterParentFieldValueChange());else{var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}}},{key:"_isParentDependentField",value:function(e){return this._datasource.isParentDependentField(e)||this._defaultValueDatasource&&this._defaultValueDatasource.isParentDependentField(e)}},{key:"_fetchNewOptionsUsingDatasource",value:function(e){this._datasource.isParentDependentField(e)&&this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback()),this._defaultValueDatasource&&this._defaultValueDatasource.isParentDependentField(e)&&this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback())}},{key:"_getOnNewOptionsCallback",value:function(){var e=this;return function(t,n){var r=[],o=[],i=function(e,t){e.map((function(e){-1===pjQuery.inArray(e.id,r)&&(o.push({id:e.id,name:e.name,isSelected:t}),r.push(e.id))}))};i(n,!0),i(t,!1);var a=1===o.length;(e.isRequired()||e._isPrePopulateEnabled())&&a&&(o[0].isSelected=!0);var u=e._getSelectedOptionsIds();e._createWithNewOptions(o);var l=e._getSelectedOptionsIds(),s=JSON.stringify(u)!==JSON.stringify(l);e._onFieldUpdated(s)}}},{key:"_areValuesEquals",value:function(e,t){if(e.getType()!==t.getType())return!1;switch(e.getType()){case Dn.TYPE:return e.getOptionId()===t.getOptionId();case M.TYPE:return!0;default:return!1}}},{key:"_buildDefaultValueToSet",value:function(e){return new Sn(e.name)}},{key:"_getOnPrePopulateOptionsCallback",value:function(){var e=this;return function(t){1===t.length&&e.setValue(new Sn(t[0].id.toString()))}}},{key:"_cloneDatasourceForNewTableRow",value:function(e,t){Qn.cloneDatasourceForNewTableRow(this._fieldId,e,t),this._defaultValueDatasource&&gt.cloneDatasourceForNewTableRow(this._fieldId,e,t)}},{key:"_cloneDatasource",value:function(e){Qn.cloneDatasource(this._fieldId,e),this._defaultValueDatasource&&gt.cloneDatasource(this._fieldId,e)}},{key:"_getSelectedOptionsIds",value:function(){var e=this.getValue();if(e.isEmpty())return[];switch(e.getType()){case Dn.TYPE:return[PortalString.toInt(e.getOptionId())];case Wn.TYPE:return e.getOptionsIds().map((function(e){return PortalString.toInt(e)}))}return[]}},{key:"_buildOptionHtmlId",value:function(e){return this._fieldId+"_"+e}}])&&Gn(n.prototype,r),o&&Gn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);const nr=tr;var rr=n(96402);function or(e){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},or(e)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fr(r.key),r)}}function ar(e,t,n){return t=sr(t),function(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ur()?Reflect.construct(t,n||[],sr(e).constructor):t.apply(e,n))}function ur(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ur=function(){return!!e})()}function lr(){return lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},lr.apply(this,arguments)}function sr(e){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(e)}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function fr(e){var t=function(e,t){if("object"!=or(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==or(t)?t:t+""}var pr=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ar(this,t,[e,n,r]))._dropdownCssClass=o.getSetting("dropdownCssClass"),o._placeholderText=o.getSetting("placeholderText"),o._minimumInputLength=o.getSetting("minimumInputLength")||0,o._ajaxDelayMs=o.getSetting("ajaxDelayMs"),o._visibleOptionsLimit=o.getSetting("visibleOptionsLimit")||100,o._optionIdsToSearchLimit=o.getSetting("optionIdsToSearchLimit"),o._dictionary=o.getSetting("dictionary"),o._label=o.getSetting("label")||"",o._isRequired=o.getSetting("isRequired")||!1,o._isAccessible=o.getSetting("isAccessible"),o._keepTextInField=o.getSetting("keepTextInField"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){this._attachLazyPicker(),lr(sr(t.prototype),"_postRegister",this).call(this),this._setOnResetFormListener()}},{key:"_getAllowedValueTypesToSet",value:function(){return[Sn.TYPE,Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new M;var t=e[0].id,n=e[0].text;return null===t||""===t?new M:new Dn(t,n)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return null==e||0===e.length?null:e}},{key:"setPlaceholderText",value:function(e){this._placeholderText=e}},{key:"setValue",value:function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Sn.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],this._buildOnFieldOptionsRetrieveCallback());break;case Gt.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}}},{key:"_buildOnFieldOptionsRetrieveCallback",value:function(){var e=this;return function(t){t=e._markOptionsFoundAsSelected(t),e._createWithNewOptions(t),X.onFieldValueChange(e.getFieldId())}}},{key:"_markOptionsFoundAsSelected",value:function(e){return e&&Array.isArray(e)?(pjQuery.each(e,(function(t){e[t].isSelected=!0})),e):e}},{key:"_getOptionsPage",value:function(){return 1}},{key:"_getOptionsPageSize",value:function(){return 2}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join("")),this._getFieldElement().trigger("change.select2")}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option:gt(0)").remove()}},{key:"_attachLazyPicker",value:function(){var e=this._getFieldElement();e.select2(this._getLazyPickerProperties());var t=this._getEventCallbacksForLazyPicker();if(t.length)for(var n in t)t.hasOwnProperty(n)&&e.on(t[n].eventName,t[n].eventCallback);var r=this;pjQuery((function(){setTimeout((function(){e.trigger("select2-"+r.getFieldId()+"-ready")}),10)}))}},{key:"_getLazyPickerProperties",value:function(){var e=new rr.default,t={placeholder:this._placeholderText,allowClear:!0,width:"100%",minimumInputLength:this._minimumInputLength,multiple:this._isMultiple(),containerCssClass:"select2Container"+this._fieldId,dropdownCssClass:this._dropdownCssClass,escapeMarkup:function(e){return e},dictionary:this._dictionary,label:this._label,fieldId:this._fieldId,isRequired:this._isRequired,isAccessible:this._isAccessible,closeOnSelect:!this._isMultiple()||!this._keepTextInField,dropdownParent:e.get("avature.portal.mobile")?document.getElementById("ui-widget_"+this._fieldId):null};if(this._datasource.isLocalDatasource())t.data=this._adaptDatasourceOptionsToSelect2LocalDataFormat(this._datasource.getOptions());else{var n=this,r=this._getCache();t.ajax={url:this._datasource.getOptionsSearchApiUrl(),type:"POST",delay:this._ajaxDelayMs,quietMillis:this._ajaxDelayMs,dataType:"json",data:this._getDataPayload.bind(this),transport:function(e,t,o){var i=n._generateCacheKey(e.data);return r.get(i).done(t).fail((function(){return pjQuery.ajax(e).done(t).done((function(e){r.set(i,e)})).fail(o)}))},processResults:function(e,t){return n._datasource.processLazyPickerAjaxResponseData(e)}}}return t}},{key:"_getEventCallbacksForLazyPicker",value:function(){var e=this;return[this._buildEventCallback(t.ITEM_SELECTION_EVENT_NAME,(function(t){pjQuery(this).focus(),e.dispatchEvent("selectedAutocompleteValueEvent",t)})),this._buildEventCallback(t.ITEM_SELECTING_EVENT_NAME,(function(t){pjQuery(this).focus(),e.dispatchEvent("selectingAutocompleteValueEvent",t)}))]}},{key:"_buildEventCallback",value:function(e,t){return{eventName:e,eventCallback:t}}},{key:"_adaptDatasourceOptionsToSelect2LocalDataFormat",value:function(e){return pjQuery.each(e,(function(t){e[t].hasOwnProperty("name")&&(e[t].text=e[t].name)})),e}},{key:"_isMultiple",value:function(){return!1}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings(),this.getFieldId())}},{key:"_getDataPayload",value:function(e){var t=this._visibleOptionsLimit,n=e.searchIds;return n&&(n=n.split(","),t=this._optionIdsToSearchLimit),this._datasource.buildRequestDataFromParams(e.page||1,t,e.term,!1,n,null)}},{key:"_getCache",value:function(){return s.getInstance()}},{key:"_generateCacheKey",value:function(e){return o()(this._datasource.getOptionsSearchApiUrl()+JSON.stringify(e))}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).parent().attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnPrePopulateOptionsCallback())}},{key:"_getClearButton",value:function(){return document.querySelector(".select2Container".concat(this._fieldId," .select2-selection__clear"))}},{key:"_setOnResetFormListener",value:function(){var e,t=this,n=this.getValue();null===(e=this.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._resetValue(n)}))}},{key:"_resetValue",value:function(e){try{var t=e.getType()===M.TYPE?"":e.getOptionId();this.setValue(new Sn(t))}catch(t){this.setValue(new Gt(e.toString()))}}},{key:"isAutocomplete",value:function(){return!0}}],r&&ir(n.prototype,r),i&&ir(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(nr);!function(e,t,n){(t=fr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pr,"TYPE","AutocompleteSelectField"),pr.ITEM_SELECTION_EVENT_NAME="select2:select",pr.ITEM_SELECTING_EVENT_NAME="select2:selecting";const dr=pr;function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_r(r.key),r)}}function vr(e,t,n){return t=mr(t),function(e,t){if(t&&("object"===yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,br()?Reflect.construct(t,n||[],mr(e).constructor):t.apply(e,n))}function br(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(br=function(){return!!e})()}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}function gr(e,t){return gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gr(e,t)}function _r(e){var t=function(e,t){if("object"!=yr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yr(t)?t:t+""}var wr=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=vr(this,t),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options IDs must be a non-empty array");return e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string")})),n._optionsIds=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gr(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return"["+this._optionsIds.join(",")+"]"}},{key:"getOptionsIds",value:function(){return this._optionsIds}}])&&hr(n.prototype,r),o&&hr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=_r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wr,"TYPE","FieldMultipleIdsValue");const Or=wr;function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ir(r.key),r)}}function Pr(e,t,n){return t=Tr(t),function(e,t){if(t&&("object"===Sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kr()?Reflect.construct(t,n||[],Tr(e).constructor):t.apply(e,n))}function kr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kr=function(){return!!e})()}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}function jr(e,t){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jr(e,t)}function Ir(e){var t=function(e,t){if("object"!=Sr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sr(t)?t:t+""}var Fr=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Pr(this,t),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: values must be a non-empty array");return e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: inner values should be strings")})),n._values=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jr(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return"["+this._values.join(",")+"]"}},{key:"getOptionsTexts",value:function(){return this._values}}])&&Er(n.prototype,r),o&&Er(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Ir(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fr,"TYPE","FieldMultipleTextsValue");const Cr=Fr;var Dr=n(49990);function Rr(e){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nr(r.key),r)}}function Nr(e){var t=function(e,t){if("object"!=Rr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rr(t)?t:t+""}var xr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"addEmptyHiddenInputBeforeSubmit",value:function(e,t){var n=this;Dr.default.getInstance().addActionBeforeSubmit((function(){var r=e.getFieldId();if(e.getValue().isEmpty()&&!n._existsInputWithName(r)){var o=document.createElement("input");o.hidden=!0,o.value=null,o.name=r,t.insertAdjacentElement("beforebegin",o)}}),e.getFormContainer())}},{key:"_existsInputWithName",value:function(e){return null!==document.querySelector('input[name="'+e+'"]')}}])&&Ar(e.prototype,t),n&&Ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Lr=xr;function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hr(r.key),r)}}function Br(e,t,n){return t=Ur(t),function(e,t){if(t&&("object"===Mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wr()?Reflect.construct(t,n||[],Ur(e).constructor):t.apply(e,n))}function Wr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wr=function(){return!!e})()}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ur(e)}function Yr(e,t){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yr(e,t)}function Hr(e){var t=function(e,t){if("object"!=Mr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mr(t)?t:t+""}var zr=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=Br(this,t,[e,n,r]),(new Lr).addEmptyHiddenInputBeforeSubmit(o,o._getFieldElement()[0]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yr(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Or.TYPE,Cr.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"setValue",value:function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Or.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),this._buildOnFieldOptionsRetrieveCallback());break;case Cr.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}}},{key:"getValue",value:function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new M;var t=[];return e.forEach((function(e,n){var r=e.id,o=e.text;null!==r&&""!==r&&t.push(Wn.buildOption(r,o))})),new Wn(t)}},{key:"_removeAllOptions",value:function(){this._getFieldElement().empty()}},{key:"_isMultiple",value:function(){return!0}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings(),this.getFieldId())}},{key:"_getDataHiddenValue",value:function(e){var t=e.attr("data-hiddenValue");return t?t.split(","):[]}},{key:"_resetValue",value:function(e){try{var t=e.getType()===M.TYPE?[""]:e.getOptionsIds();this.setValue(new Or(t))}catch(t){var n=e.getType()===M.TYPE?[""]:e.getOptionsTexts();this.setValue(new Cr(n))}}}],r&&Vr(n.prototype,r),o&&Vr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(dr);!function(e,t,n){(t=Hr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zr,"TYPE","AutocompleteMultipleSelectField");const Qr=zr;n(17),n(52231);function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jr(r.key),r)}}function Jr(e){var t=function(e,t){if("object"!=qr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qr(t)?t:t+""}var Kr=null,$r=!1,Zr={},Xr=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!$r)throw new Error("Constructor is private. Use getInstance() instead")}return t=e,r=[{key:"getInstance",value:function(){return Kr||($r=!0,Kr=new e,$r=!1),Kr}}],(n=[{key:"addFieldsetStepper",value:function(e,t){Zr[e]=t}},{key:"getAllFieldsetSteppers",value:function(){return Object.values(Zr)}}])&&Gr(t.prototype,n),r&&Gr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const eo=Xr;n(70863),n(30789),n(58565),n(60933),n(78636);function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ro(r.key),r)}}function ro(e){var t=function(e,t){if("object"!=to(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=to(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==to(t)?t:t+""}var oo=function(){return e=function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldsContainerId=t,this._textsDictionary=n,this._shouldUseBuiltinButtons=r,this._hasToHideWizardButtons=o,this._shouldIncludePreviousButton=i,this._initialFieldIndex=a||0},t=[{key:"generate",value:function(){this._addIndicatorClass(),this._hideUnimplementedFields(),this._setupFieldByFieldDisplayFormat(this._initialFieldIndex),this._updateCurrentStepIndicatorClass(),this._updateElementsVisibility(),this._removeSeparators(),this._showFieldSet(),this._addToFieldsetStepperManager()}},{key:"getFieldsStatus",value:function(){var e=this,t=[];return this._getFieldsContainers().forEach((function(n){var r=parseInt(n.getAttribute("data-field-index"),10),o=n.getAttribute("data-field-id"),i=X.getField(o);t.push({index:r,id:o,name:i.getLabel(),isCurrent:r===e._getCurrentFieldIndex()})})),t}},{key:"goToNextField",value:function(){this._hasCurrentFieldValidationErrors()||this._goToField(this._getNextFieldIndexToShow(this._getCurrentFieldIndex()))}},{key:"goToPreviousField",value:function(){this._goToField(this._getPrevFieldIndexToShow(this._getCurrentFieldIndex()))}},{key:"hasBuiltinButtonBar",value:function(){return this._shouldUseBuiltinButtons}},{key:"_showFieldSet",value:function(){var e;this._getFieldSetContainer().classList.remove("fieldSpec--loading","wizard--loading"),this._getFieldSetContainer().removeAttribute("hidden"),null===(e=this._getFieldSetContainer().parentElement.querySelector(".form__loader"))||void 0===e||e.remove()}},{key:"_addIndicatorClass",value:function(){this._getFieldSetContainer().classList.add("shownFieldByField")}},{key:"_setupFieldByFieldDisplayFormat",value:function(e){this._generateFieldsHelperData(),this._buildCurrentFieldIndex(),this._shouldUseBuiltinButtons&&(this._buildBuiltinButtonsContainer(),this._shouldIncludePreviousButton&&this._buildBuiltinPreviousButton(),this._buildBuiltinNextButton()),e=this._hasValidationErrors()?this._getFirstFieldIndexWithValidationError():this._getNextFieldIndexToShow(e-1),this._setCurrentFieldIndex(e)}},{key:"_generateFieldsHelperData",value:function(){var e=this;this._getFieldsContainers().forEach((function(t,n){t.setAttribute("data-field-index",n.toString()),t.setAttribute("data-field-id",e._getFieldIdFromFieldContainer(t))}))}},{key:"_buildCurrentFieldIndex",value:function(){var e=document.createElement("input");e.setAttribute("id",this._fieldsContainerId+"_currentFieldIndex"),e.setAttribute("name",this._fieldsContainerId+"_currentFieldIndex"),e.setAttribute("type","hidden"),this._getFieldSetContainer().append(e)}},{key:"_buildBuiltinButtonsContainer",value:function(){var e=document.createElement("div");e.setAttribute("id",this._fieldsContainerId+"_formContainerButtons"),e.setAttribute("class","button-bar__wrap"),e.setAttribute("role","navigation");var t=document.createElement("div");t.setAttribute("id","fieldSpecButtonContainer"+this._fieldsContainerId),t.setAttribute("class","formfieldSpec button-bar formfieldSpecPadder"),t.append(e);var n=document.createElement("div");n.setAttribute("id","schemaFieldButtonContainer"+this._fieldsContainerId),n.setAttribute("class","schemaFieldButtonContainer"),n.append(t),this._getFieldSetContainer().append(n)}},{key:"_buildBuiltinPreviousButton",value:function(){var e=this,t=document.createElement("a");t.innerText=this._textsDictionary.prevButtonText,t.setAttribute("id",this._fieldsContainerId+"_formContainerPrevButton"),t.setAttribute("href","#"),t.addEventListener("click",(function(e){e.preventDefault()})),t.setAttribute("class","button button--secondary "+v.WIZARD_FORM_FIELD_BY_FIELD_BUTTON_TEMPLATES_CLASS+" formContainerPrevButton"),t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",this._textsDictionary.prevButtonAriaLabel),t.addEventListener("click",(function(){return e.goToPreviousField()})),document.getElementById(this._fieldsContainerId+"_formContainerButtons").append(t)}},{key:"_buildBuiltinNextButton",value:function(){var e=this,t=document.createElement("a");t.innerText=this._textsDictionary.nextButtonText,t.setAttribute("id",this._fieldsContainerId+"_formContainerNextButton"),t.setAttribute("href","#"),t.addEventListener("click",(function(e){return e.preventDefault()})),t.setAttribute("class","button button--primary "+v.WIZARD_FORM_FIELD_BY_FIELD_BUTTON_TEMPLATES_CLASS+" formContainerNextButton"),t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",this._textsDictionary.nextButtonAriaLabel),t.addEventListener("click",(function(){return e.goToNextField()})),document.getElementById(this._fieldsContainerId+"_formContainerButtons").append(t)}},{key:"_goToField",value:function(e){this._setCurrentFieldIndex(e),this._updateElementsVisibility(),this._focusInputInCurrentField()}},{key:"_updateElementsVisibility",value:function(){this._updatesFieldsVisibility(),this._updateNextButtonVisibility(),this._updatePreviousButtonVisibility(),this._hasToHideWizardButtons&&(this._updateSaveAndNextWizardButtonsVisibility(),this._updatePreviousWizardButtonVisibility()),this._getFieldSetContainer().dispatchEvent(new Event("form:refreshFormStepVisibility"))}},{key:"_removeSeparators",value:function(){this._getFieldSetContainer().querySelectorAll(".Separator").forEach((function(e){return e.remove()}))}},{key:"_hideUnimplementedFields",value:function(){this._getFieldsContainers().forEach((function(e){e.querySelectorAll(".WizardFieldUnimplemented").length>0&&e.setAttribute("hidden",!0)}))}},{key:"_updatesFieldsVisibility",value:function(){var e=this;this._getFieldsContainers().forEach((function(t,n){var r=t.getAttribute("data-field-id"),o=X.getField(r),i=n===e._getCurrentFieldIndex();o.setVisibilityStatusByType(Ke.SHOW_FIELD_BY_FIELD,i),o.onFormStepVisibilityChange(!i)}))}},{key:"_updateNextButtonVisibility",value:function(){this._getNextButton().hidden=this._isCurrentFieldTheLastField()}},{key:"_isCurrentFieldTheLastField",value:function(){return this._getNextFieldIndexToShow(this._getCurrentFieldIndex())===this._getCurrentFieldIndex()}},{key:"_updatePreviousButtonVisibility",value:function(){this._getPrevButton().hidden=this._isCurrentFieldTheFirstField()}},{key:"_isCurrentFieldTheFirstField",value:function(){return 0===this._getCurrentFieldIndex()||this._getPrevFieldIndexToShow(this._getCurrentFieldIndex())===this._getCurrentFieldIndex()}},{key:"_updateSaveAndNextWizardButtonsVisibility",value:function(){var e=this._areFieldsetsInLastField();this._getClosestWizard().querySelectorAll("button.saveButton, button.nextButton, button.submitButton").forEach((function(t){return t.hidden=!e}))}},{key:"_areFieldsetsInLastField",value:function(){var e=!0,t=this._shouldUseBuiltinButtons?".formContainerNextButton":"button.formNextButton";return this._getClosestWizard().querySelectorAll(t).forEach((function(t){return e=e&&t.hasAttribute("hidden")})),e}},{key:"_updatePreviousWizardButtonVisibility",value:function(){var e=this._areFieldsetsInFirstField();this._getClosestWizard().querySelectorAll("button.previousButton").forEach((function(t){return t.hidden=!e}))}},{key:"_areFieldsetsInFirstField",value:function(){var e=!0,t=this._shouldUseBuiltinButtons?".formContainerPrevButton":"button.formPreviousButton";return this._getClosestWizard().querySelectorAll(t).forEach((function(t){return e=e&&t.hasAttribute("hidden")})),e}},{key:"_addToFieldsetStepperManager",value:function(){eo.getInstance().addFieldsetStepper(this._fieldsContainerId,this)}},{key:"_getNextFieldIndexToShow",value:function(e){var t,n=e;do{if(n++,!(t=this._getFieldIdByFieldIndex(n))){n--;break}}while(!this._shouldShowField(t));return n}},{key:"_getPrevFieldIndexToShow",value:function(e){var t,n=e;do{if(--n<0)return e;if(!(t=this._getFieldIdByFieldIndex(n))){n++;break}}while(!this._shouldShowField(t));return n}},{key:"_shouldShowField",value:function(e){var t;return(null===(t=X.getField(e))||void 0===t?void 0:t.shouldShowIf(Ke.SHOW_FIELD_BY_FIELD,!0))||!1}},{key:"_updateCurrentStepIndicatorClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._getFieldSetContainer(),n=this._getCurrentStepIndicatorClass();n&&t.classList.remove(n),t.classList.add("shownFieldByField--step"+(e+1))}},{key:"_getCurrentStepIndicatorClass",value:function(){return Array.from(this._getFieldSetContainer().classList).filter((function(e){return e.match(/^shownFieldByField--step\d+/gm)})).join("")}},{key:"_getFieldIdFromFieldContainer",value:function(e){return e.id.replace(/^[a-z]+(\d+(?:-\d+)*)$/i,"$1")}},{key:"_hasValidationErrors",value:function(){return this._getFieldSetContainer().querySelectorAll(".hasErrors").length>0}},{key:"_hasCurrentFieldValidationErrors",value:function(){var e=this._getFieldIdByFieldIndex(this._getCurrentFieldIndex());return!X.getField(e).isValid()}},{key:"_getFirstFieldIndexWithValidationError",value:function(){var e=Array.from(this._getFieldsContainers()).findIndex((function(e){return e.querySelectorAll(".hasErrors").length>0}));return-1===e?null:e}},{key:"_getFieldSetContainer",value:function(){return document.getElementById(this._fieldsContainerId)}},{key:"_getFieldsContainers",value:function(){return this._getFieldSetContainer().querySelectorAll(".fieldSpec:not(.ButtonBarField):not(.fieldSpec--in-dataset), .schemaFieldContainer:not([hidden])")}},{key:"_getClosestWizard",value:function(){return this._getFieldSetContainer().closest(".wizard")}},{key:"_getCurrentFieldIndex",value:function(){return parseInt(document.getElementById(this._fieldsContainerId+"_currentFieldIndex").value,10)}},{key:"_getNextButton",value:function(){return(this._shouldUseBuiltinButtons?this._getFieldSetContainer().querySelector(".formContainerNextButton"):this._getClosestWizard().querySelector("button.formNextButton"))||document.createElement("div")}},{key:"_getPrevButton",value:function(){return(this._shouldUseBuiltinButtons?this._getFieldSetContainer().querySelector(".formContainerPrevButton"):this._getClosestWizard().querySelector("button.formPreviousButton"))||document.createElement("div")}},{key:"_getFieldIdByFieldIndex",value:function(e){var t=this._getFieldSetContainer().querySelector('[data-field-index="'+e+'"]');return t?t.getAttribute("data-field-id"):null}},{key:"_focusInputInCurrentField",value:function(){X.getField(this._getFieldIdByFieldIndex(this._getCurrentFieldIndex())).focus(),this._updateCurrentStepIndicatorClass(this._getCurrentFieldIndex())}},{key:"_setCurrentFieldIndex",value:function(e){document.getElementById(this._fieldsContainerId+"_currentFieldIndex").value=e}}],t&&no(e.prototype,t),n&&no(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const io=oo;function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,co(r.key),r)}}function lo(e,t,n){return t&&uo(e.prototype,t),n&&uo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function so(e,t,n){return(t=co(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e){var t=function(e,t){if("object"!=ao(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ao(t)?t:t+""}var fo=lo((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));so(fo,"FIELD","Field"),so(fo,"VALUES_DATASOURCE","ValuesDatasource"),so(fo,"DEFAULT_VALUES_DATASOURCE","DefaultValuesDatasource"),so(fo,"VALIDATOR","Validator");const po=fo;function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_o(r.key),r)}}function vo(e,t,n){return t=mo(t),function(e,t){if(t&&("object"===yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bo()?Reflect.construct(t,n||[],mo(e).constructor):t.apply(e,n))}function bo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bo=function(){return!!e})()}function mo(e){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mo(e)}function go(e,t){return go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},go(e,t)}function _o(e){var t=function(e,t){if("object"!=yo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yo(t)?t:t+""}var wo=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=vo(this,t),"boolean"!=typeof e)throw new Error("invalidValue: value must be a valid boolean");return n._isSelected=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&go(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._isSelected.toString()}},{key:"isSelected",value:function(){return this._isSelected}}])&&ho(n.prototype,r),o&&ho(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=_o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wo,"TYPE","FieldBooleanValue");const Oo=wo;function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Io(r.key),r)}}function Po(e,t,n){return t=To(t),function(e,t){if(t&&("object"===So(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ko()?Reflect.construct(t,n||[],To(e).constructor):t.apply(e,n))}function ko(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ko=function(){return!!e})()}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},To(e)}function jo(e,t){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jo(e,t)}function Io(e){var t=function(e,t){if("object"!=So(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=So(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==So(t)?t:t+""}var Fo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Po(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jo(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[Oo.TYPE]}},{key:"getValue",value:function(){var e=this._getFieldElement().prop("checked");return new Oo(!!e)}},{key:"getValueForCondition",value:function(){return this._getFieldElement().prop("checked")?this._getFieldElement().val():null}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().prop("checked",e.isSelected()),this._triggerEvent("change")}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}],r&&Eo(n.prototype,r),o&&Eo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=Io(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fo,"TYPE","CheckboxField");const Co=Fo;function Do(e){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(e)}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vo(r.key),r)}}function Ao(e,t,n){return t=Lo(t),function(e,t){if(t&&("object"===Do(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,No()?Reflect.construct(t,n||[],Lo(e).constructor):t.apply(e,n))}function No(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(No=function(){return!!e})()}function xo(){return xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},xo.apply(this,arguments)}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}function Mo(e,t){return Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mo(e,t)}function Vo(e){var t=function(e,t){if("object"!=Do(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Do(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Do(t)?t:t+""}var Bo=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Ao(this,t,[e,n]),(new Lr).addEmptyHiddenInputBeforeSubmit(r,r._getFieldElement()[0]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mo(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){xo(Lo(t.prototype),"_postRegister",this).call(this),this._addClickToShowMoreLinkIfNeeded()}},{key:"_addClickToShowMoreLinkIfNeeded",value:function(){var e=document.getElementById("showHiddenElements_"+this._fieldId);e&&(e.onclick=function(e){return this.nextSibling.style.display="inline",this.style.display="none",!1})}},{key:"_getAllowedValueTypesToSet",value:function(){return[Or.TYPE,Cr.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElements();if(0===e.length)return new M;var t=[];return e.each((function(){t.push(Wn.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new Wn(t)}},{key:"getValueForCondition",value:function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="checkbox"]',this._getFieldElement()),n=this;switch(e.getType()){case Or.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;case Cr.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElements",value:function(){return this._getFieldElement().find("input:checked")}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement(),r=n.find(".CheckBoxListFormField_more"),o=n.find(".CheckBoxListFormField_hiddenOptions"),i=r.data("numOptionsToShow");e.forEach((function(e,r){var a=t._buildOptionHtmlId(e.id),u=pjQuery("<input />").attr("id",a).attr("type","checkbox").attr("name",t._fieldId+"[]").attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&u.attr("checked","checked");var l=pjQuery("<label>",{class:v.WIZARD_FIELD_INPUT}).attr("for",a).append(u,e.name,pjQuery('<div class="cb" />'));!i||r<i?n.append(l):o.append(l)})),i&&e.length>i&&(r.css("display",""),o.css("display","none"))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("label, div.cb, div.cb-a11y").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),this._setIdMoreButtonElement(e),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),this._setIdMoreButtonElement(e),new t(e,this.getFieldSettings())}},{key:"_setIdMoreButtonElement",value:function(e){pjQuery("#"+e).find(".CheckBoxListFormField_more").attr("id","showHiddenElements_"+e)}},{key:"_isPrePopulateEnabled",value:function(){return!1}},{key:"_prePopulateIfOnlyOneOption",value:function(){}}],r&&Ro(n.prototype,r),o&&Ro(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(nr);!function(e,t,n){(t=Vo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bo,"TYPE","CheckboxListField");const Wo=Bo;function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ho(r.key),r)}}function Ho(e){var t=function(e,t){if("object"!=Uo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uo(t)?t:t+""}function zo(e,t,n){return t=qo(t),function(e,t){if(t&&("object"===Uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qo()?Reflect.construct(t,n||[],qo(e).constructor):t.apply(e,n))}function Qo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qo=function(){return!!e})()}function qo(e){return qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qo(e)}function Go(e,t){return Go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Go(e,t)}var Jo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zo(this,t,[e,ae.EQUAL,null])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Go(e,t)}(t,e),n=t,(r=[{key:"getValue",value:function(){return X.getFieldValueForCondition(this._parentDependencyFieldId)}}])&&Yo(n.prototype,r),o&&Yo(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(G);const Ko=Jo;n(10121);function $o(e){return $o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xo(r.key),r)}}function Xo(e){var t=function(e,t){if("object"!=$o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$o(t)?t:t+""}function ei(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function ti(e,t){return e.get(ri(e,t))}function ni(e,t,n){return e.set(ri(e,t),n),n}function ri(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var oi=new WeakMap,ii=new WeakMap,ai=new WeakMap,ui=new WeakMap,li=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ei(this,oi,void 0),ei(this,ii,void 0),ei(this,ai,void 0),ei(this,ui,void 0),ni(oi,this,t),ni(ii,this,n),ni(ai,this,r),ni(ui,this,o)},(t=[{key:"getFieldId",value:function(){return ti(oi,this)}},{key:"getValue",value:function(){return ti(ii,this)}},{key:"getPlaceholderText",value:function(){return ti(ai,this)}},{key:"getTabIndex",value:function(){return ti(ui,this)}}])&&Zo(e.prototype,t),n&&Zo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const si=li;function ci(e){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ci(e)}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pi(r.key),r)}}function pi(e){var t=function(e,t){if("object"!=ci(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ci(t)?t:t+""}var di=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"clone",value:function(e,t){throw new Error("Unimplemented method: clone()")}}])&&fi(e.prototype,t),n&&fi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function yi(e){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(e)}function hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vi(r.key),r)}}function vi(e){var t=function(e,t){if("object"!=yi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yi(t)?t:t+""}function bi(e,t,n){return t=gi(t),function(e,t){if(t&&("object"===yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mi()?Reflect.construct(t,n||[],gi(e).constructor):t.apply(e,n))}function mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mi=function(){return!!e})()}function gi(e){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gi(e)}function _i(e,t){return _i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_i(e,t)}var wi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bi(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_i(e,t)}(t,e),n=t,(r=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){throw new Error("Unimplemented method: _fixPlaceholderTextInClonedHtmlNode()")}},{key:"_executeAfterCloningTasks",value:function(e,t,n){}},{key:"clone",value:function(e,t){var n=t.getFieldId(),r=this._cloneFieldHtmlElement(e.getFieldId(),t,null!==t.getValue());this._insertClonedHtml(r,n);var o=this._createClonedField(e,n);return this._executeAfterCloningTasks(e,o,t),o}},{key:"_insertClonedHtml",value:function(e,t){document.getElementById(t).replaceWith(e)}},{key:"_createClonedField",value:function(e,t){return e._buildClonedField(t)}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=this._cloneHtml(e);return this._fixIdInClonedHtmlNode(r,e,t.getFieldId()),this._fixValueInClonedHtmlNodeIfNeeded(n,r,t.getValue()),this._fixPlaceholderTextInClonedHtmlNode(r,t.getPlaceholderText()),this._fixTabIndexInClonedHtmlNode(r,t.getTabIndex()),r}},{key:"_cloneHtml",value:function(e){return document.getElementById(e).cloneNode(!1)}},{key:"_fixIdInClonedHtmlNode",value:function(e,t,n){var r=document.getElementById(t),o=new RegExp(t,"g");e.getAttributeNames().forEach((function(t){var r=e.getAttribute(t);if(o.test(r)){var i=r.replace(o,n);e.setAttribute(t,i)}})),e.innerHTML=r.innerHTML.replace(o,n)}},{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){e&&(t.value=n)}},{key:"_fixTabIndexInClonedHtmlNode",value:function(e,t){e.tabIndex=t}}])&&hi(n.prototype,r),o&&hi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(di);const Oi=wi;function Si(e){return Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Si(e)}function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pi(r.key),r)}}function Pi(e){var t=function(e,t){if("object"!=Si(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Si(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Si(t)?t:t+""}function ki(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ti(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var ji=new WeakSet,Ii=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ki(this,ji)},(t=[{key:"linkFields",value:function(e,t){Ti(ji,this,Fi).call(this,e,t),Ti(ji,this,Ci).call(this,e,t),Ti(ji,this,Di).call(this,e,t),Ti(ji,this,Di).call(this,t,e)}}])&&Ei(e.prototype,t),n&&Ei(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Fi(e,t){var n=e.shouldBeMasked.bind(e),r=t.shouldBeMasked.bind(t),o=function(e){return n(e)&&r(e)};e.shouldBeMasked=o,t.shouldBeMasked=o}function Ci(e,t){var n=e.setIsMaskedWithoutPermissionsRole.bind(e),r=t.setIsMaskedWithoutPermissionsRole.bind(t),o=function(e){n(e),r(e)};e.setIsMaskedWithoutPermissionsRole=o,t.setIsMaskedWithoutPermissionsRole=o}function Di(e,t){e.addListener("unmaskedClicked",(function(){return t.unmaskField()})),e.addListener("unmaskedLostFocus",(function(){return t.maskField()})),e.addListener("fieldWasUnmasked",(function(){return t.unmaskField()}))}const Ri=Ii;function Ai(e){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(e)}function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xi(r.key),r)}}function xi(e){var t=function(e,t){if("object"!=Ai(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ai(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ai(t)?t:t+""}function Li(e,t,n){return t=Vi(t),function(e,t){if(t&&("object"===Ai(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mi()?Reflect.construct(t,n||[],Vi(e).constructor):t.apply(e,n))}function Mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mi=function(){return!!e})()}function Vi(e){return Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vi(e)}function Bi(e,t){return Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bi(e,t)}var Wi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Li(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bi(e,t)}(t,e),n=t,(r=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}}])&&Ni(n.prototype,r),o&&Ni(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Oi);const Ui=Wi;function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}var Hi;function zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qi(r.key),r)}}function Qi(e){var t=function(e,t){if("object"!=Yi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yi(t)?t:t+""}function qi(e,t,n){return t=$i(t),function(e,t){if(t&&("object"===Yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Gi()?Reflect.construct(t,n||[],$i(e).constructor):t.apply(e,n))}function Gi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gi=function(){return!!e})()}function Ji(e,t){return Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ji(e,t)}function Ki(){return Ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$i(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ki.apply(this,arguments)}function $i(e){return $i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$i(e)}function Zi(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xi(e,t){return e.get(ea(e,t))}function ea(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var ta=new WeakMap,na=new WeakSet,ra=function(e){function t(e){var n,r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){Zi(e,t),t.add(e)}(n=qi(this,t),na),function(e,t,n){Zi(e,t),t.set(e,n)}(n,ta,void 0),o=n,i=e,(r=ta).set(ea(r,o),i),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ji(e,t)}(t,e),n=t,(r=[{key:"_executeAfterCloningTasks",value:function(e,n,r){Ki($i(t.prototype),"_executeAfterCloningTasks",this).call(this,e,n,r),Xi(ta,this)._executeAfterCloningTasks(e,n,r),(new Ri).linkFields(e,n),n._postRegister()}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=Fields.getField(e),o=Xi(ta,this)._cloneFieldHtmlElement(e,t,n&&!r.isMaskedValue());if(!r||!r.hasToShowValueMasked())return o;var i=document.createElement("div"),a=ea(na,this,oa).call(this,r,t,n);return i.appendChild(a),i.appendChild(o),i}},{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){}},{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}},{key:"_fixTabIndexInClonedHtmlNode",value:function(e,t){}}])&&zi(n.prototype,r),o&&zi(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Oi);function oa(e,t,n){var r=new si(t.getFieldId()+e.getSuffixMaskedField(),t.getPlaceholderText(),t.getTabIndex()),o=e.getFieldId()+e.getSuffixMaskedField(),i=Ki($i(Hi.prototype),"_cloneFieldHtmlElement",this).call(this,o,r,n);return Ki($i(Hi.prototype),"_fixValueInClonedHtmlNodeIfNeeded",this).call(this,Xi(ta,this)instanceof Ui,i,i.getAttribute("value")),i}Hi=ra;const ia=ra;function aa(e){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(e)}function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,la(r.key),r)}}function la(e){var t=function(e,t){if("object"!=aa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aa(t)?t:t+""}function sa(e,t,n){return t=fa(t),function(e,t){if(t&&("object"===aa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ca()?Reflect.construct(t,n||[],fa(e).constructor):t.apply(e,n))}function ca(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ca=function(){return!!e})()}function fa(e){return fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fa(e)}function pa(e,t){return pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pa(e,t)}var da=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sa(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pa(e,t)}(t,e),n=t,(r=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){if(t){var n=Array.from(e.children).filter((function(e){return e instanceof HTMLOptionElement})),r=n.length>0?n[0]:null;r&&!r.value&&(r.textContent=t)}}}])&&ua(n.prototype,r),o&&ua(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Oi);const ya=da;n(80115);function ha(e){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(e)}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ba(r.key),r)}}function ba(e){var t=function(e,t){if("object"!=ha(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ha(t)?t:t+""}function ma(e,t,n){return t=wa(t),function(e,t){if(t&&("object"===ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ga()?Reflect.construct(t,n||[],wa(e).constructor):t.apply(e,n))}function ga(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ga=function(){return!!e})()}function _a(){return _a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wa(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_a.apply(this,arguments)}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wa(e)}function Oa(e,t){return Oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oa(e,t)}function Sa(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ea(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var Pa=new WeakSet,ka=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Sa(e=ma(this,t,[].concat(r)),Pa),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oa(e,t)}(t,e),n=t,(r=[{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){}},{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}},{key:"_executeAfterCloningTasks",value:function(e,n,r){_a(wa(t.prototype),"_executeAfterCloningTasks",this).call(this,e,n,r),Ea(Pa,this,Ia).call(this,n,r.getPlaceholderText()),Ea(Pa,this,ja).call(this,n,r.getValue())}},{key:"_cloneFieldHtmlElement",value:function(e,n,r){var o=_a(wa(t.prototype),"_cloneFieldHtmlElement",this).call(this,e,n,r),i=document.getElementById(e).parentElement,a=Ea(Pa,this,Ta).call(this,i,e,n.getFieldId()),u=document.getElementById(e+"-liveContainer"),l=Ea(Pa,this,Ta).call(this,u,e,n.getFieldId());return a.appendChild(l),a.appendChild(o),a}}])&&va(n.prototype,r),o&&va(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Oi);function Ta(e,t,n){var r=new RegExp(t),o=e.cloneNode(!1),i=o.getAttribute("id").replace(r,n);return o.setAttribute("id",i),o}function ja(e,t){null!==t&&e.setValue(new Sn(t))}function Ia(e,t){t&&e.setPlaceholderText(t)}const Fa=ka;function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}function Da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ra(r.key),r)}}function Ra(e){var t=function(e,t){if("object"!=Ca(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ca(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ca(t)?t:t+""}function Aa(e,t,n){return t=xa(t),function(e,t){if(t&&("object"===Ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Na()?Reflect.construct(t,n||[],xa(e).constructor):t.apply(e,n))}function Na(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Na=function(){return!!e})()}function xa(e){return xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xa(e)}function La(e,t){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},La(e,t)}var Ma=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Aa(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&La(e,t)}(t,e),n=t,(r=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){e.placeholder=t,e.setAttribute("data-placeholder",t)}}])&&Da(n.prototype,r),o&&Da(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Oi);const Va=Ma;function Ba(e){return Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(e)}function Wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ua(r.key),r)}}function Ua(e){var t=function(e,t){if("object"!=Ba(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ba(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ba(t)?t:t+""}var Ya=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"create",value:function(e){switch(e.getType()){case EncryptedAutocompleteSelectField.TYPE:return new ia(new Fa);case EncryptedSelectField.TYPE:return new ia(new ya);case EncryptedFullDateField.TYPE:return new ia(new Ui);case EncryptedTextField.TYPE:return new ia(new Va);default:return new Va}}}])&&Wa(e.prototype,t),n&&Wa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Ha=Ya;function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$a(r.key),r)}}function qa(e,t,n){return t=Ja(t),function(e,t){if(t&&("object"===za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ga()?Reflect.construct(t,n||[],Ja(e).constructor):t.apply(e,n))}function Ga(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ga=function(){return!!e})()}function Ja(e){return Ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ja(e)}function Ka(e,t){return Ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ka(e,t)}function $a(e){var t=function(e,t){if("object"!=za(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==za(t)?t:t+""}var Za=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=qa(this,t,[e,n]))._fieldToConfirmId=r.getSetting("fieldToConfirmId"),r._placeholderText=r.getSetting("placeholderText"),r._tabIndex=r.getSetting("tabIndex"),r._confirmationField=null,r.getWizard().addListenerOnce(Tj.EVENT_AFTER_FIELDS_REGISTER,r.caller("_cloneFieldToConfirm")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ka(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){return this._confirmationField?this._confirmationField.getValue():new M}},{key:"setValue",value:function(e){this._confirmationField&&this._confirmationField.setValue(e)}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){var t;null===(t=this._confirmationField)||void 0===t||t._changeEditRestrictionsIfNeeded(e)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_cloneFieldToConfirm",value:function(){var e=new Ha,t=new si(this.getFieldId(),this._getValueToSet(),this._placeholderText,this._tabIndex);try{var n=X.getField(this._fieldToConfirmId),r=e.create(n);this._confirmationField=r.clone(n,t),this._addHiddenInputIfNeeded(n),this._buildConditionForFieldToConfirm()}catch(e){console.error(e),this._getFieldContainerElement().remove(),X.unregisterField(this.getFieldId())}}},{key:"_addHiddenInputIfNeeded",value:function(e){!e._isActive()&&this._isActive()&&(this._addHiddenElementIndicator(),this.setVisibilityStatusByType(Ke.DISPLAY_CONDITIONALLY,!1))}},{key:"_buildConditionForFieldToConfirm",value:function(){this.addVisibilityCondition(new Ko(this._fieldToConfirmId))}},{key:"_getValueToSet",value:function(){return document.getElementsByClassName("WizardFieldError").length?this.getSetting("value"):null}}],r&&Qa(n.prototype,r),o&&Qa(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=$a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Za,"TYPE","ConfirmationField");const Xa=Za;function eu(e){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(e)}function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,au(r.key),r)}}function nu(e,t,n){return t=ou(t),function(e,t){if(t&&("object"===eu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ru()?Reflect.construct(t,n||[],ou(e).constructor):t.apply(e,n))}function ru(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ru=function(){return!!e})()}function ou(e){return ou=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ou(e)}function iu(e,t){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iu(e,t)}function au(e){var t=function(e,t){if("object"!=eu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eu(t)?t:t+""}var uu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iu(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e?new Gt(e):new M}},{key:"getValueForCondition",value:function(){return this._getFieldElement().val()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("input",(function(){this.onkeyup=null,X.onFieldValueChange(e.getFieldId())}))}}],r&&tu(n.prototype,r),o&&tu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=au(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(uu,"TYPE","InputField");const lu=uu;function su(e){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(e)}function cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hu(r.key),r)}}function fu(e,t,n){return t=du(t),function(e,t){if(t&&("object"===su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pu()?Reflect.construct(t,n||[],du(e).constructor):t.apply(e,n))}function pu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pu=function(){return!!e})()}function du(e){return du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},du(e)}function yu(e,t){return yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yu(e,t)}function hu(e){var t=function(e,t){if("object"!=su(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==su(t)?t:t+""}var vu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yu(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[rn.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e?new rn(PortalString.toFloat(e)):new M}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}],r&&cu(n.prototype,r),o&&cu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);!function(e,t,n){(t=hu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vu,"TYPE","CurrencyField");const bu=vu;function mu(e){return mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(e)}function gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_u(r.key),r)}}function _u(e){var t=function(e,t){if("object"!=mu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mu(t)?t:t+""}function wu(e,t,n){return t=Eu(t),function(e,t){if(t&&("object"===mu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ou()?Reflect.construct(t,n||[],Eu(e).constructor):t.apply(e,n))}function Ou(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ou=function(){return!!e})()}function Su(){return Su="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Su.apply(this,arguments)}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eu(e)}function Pu(e,t){return Pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pu(e,t)}var ku=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=wu(this,t,[e,n]))._registerFieldDependenciesForDependentFields(e,r._getDepedentFieldsMetadata()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pu(e,t)}(t,e),n=t,(r=[{key:"_getDepedentFieldsMetadata",value:function(){throw new Error("notImplementedError")}},{key:"_registerFieldDependenciesForDependentFields",value:function(e,t){if(!t||!Array.isArray(t))throw new Error("invalidArgumentException: not an array");for(var n in t)t.hasOwnProperty(n)&&Y.registerFieldDependency(e,t[n].id,Y.TYPE_VALUES)}},{key:"onRelatedFieldValueChange",value:function(e){Su(Eu(t.prototype),"onRelatedFieldValueChange",this).call(this,e),e!==this._fieldId&&X.onFieldValueChange(this._fieldId)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneDependentFieldsForNewTableRow(e,t),this._cloneCurrentFieldForNewTableRow(e,t)}},{key:"_cloneCurrentFieldForNewTableRow",value:function(e,n){Su(Eu(t.prototype),"cloneForNewTableRow",this).call(this,e,n)}},{key:"_cloneDependentFieldsForNewTableRow",value:function(e,t){var n=this._getDepedentFieldsMetadata();for(var r in n)if(n.hasOwnProperty(r)){var o=X.getField(n[r].id),i=e+n[r].suffix;o.cloneForNewTableRow(i,t)}}},{key:"_createFieldMetadata",value:function(e,t){return{id:e,suffix:t}}}])&&gu(n.prototype,r),o&&gu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);const Tu=ku;function ju(e){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(e)}function Iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Au(r.key),r)}}function Fu(e,t,n){return t=Du(t),function(e,t){if(t&&("object"===ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cu()?Reflect.construct(t,n||[],Du(e).constructor):t.apply(e,n))}function Cu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cu=function(){return!!e})()}function Du(e){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Du(e)}function Ru(e,t){return Ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ru(e,t)}function Au(e){var t=function(e,t){if("object"!=ju(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ju(t)?t:t+""}var Nu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fu(this,t))._assertIsValidPortalDateObject(e),n._date=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ru(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._date.format()}},{key:"getFormattedDateString",value:function(e){return this._date.format(e)}},{key:"getPortalDate",value:function(){return this._date}},{key:"_assertIsValidPortalDateObject",value:function(e){if(!(e&&e instanceof PortalDate))throw new Error("invalidArgumentException: expected an instance of PortalDate")}}])&&Iu(n.prototype,r),o&&Iu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Au(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Nu,"TYPE","FieldDateValue");const xu=Nu;function Lu(e){return Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(e)}function Mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vu(r.key),r)}}function Vu(e){var t=function(e,t){if("object"!=Lu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lu(t)?t:t+""}function Bu(e,t,n){return t=Yu(t),function(e,t){if(t&&("object"===Lu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wu()?Reflect.construct(t,n||[],Yu(e).constructor):t.apply(e,n))}function Wu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wu=function(){return!!e})()}function Uu(){return Uu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Uu.apply(this,arguments)}function Yu(e){return Yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yu(e)}function Hu(e,t){return Hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hu(e,t)}var zu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hu(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){X.onFieldValueChange(this._fieldId),Uu(Yu(t.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[xu.TYPE]}},{key:"_createYearInput",value:function(e,t,n,r,o){var i=this,a=this._createSelectElement(e,"year",n,n),u=Qn.getForField(this._fieldId+"_year");return this._populateSelectElementFromDatasource(a,u,t,r,o,"year"),a.fnt=function(){var t=document.getElementById(e+"_month");t=t?t.value:void 0,i._updateDayInputIfNeeded(e,t,r,o)},a.addEventListener?a.addEventListener("change",a.fnt,!1):a.attachEvent("onchange",a.fnt),a}},{key:"_createMonthInput",value:function(e,t,n,r,o,i,a){var u=this,l=this._createSelectElement(e,"month",r),s=Qn.getForField(this._fieldId+"_month");return this._populateSelectElementFromDatasource(l,s,t,o,i,"month"),l.fnt=function(){u._updateDayInputIfNeeded(e,l.value,o,i)},l.addEventListener?l.addEventListener("change",l.fnt,!1):l.attachEvent("onchange",l.fnt),l}},{key:"_createDayInput",value:function(e,t,n,r,o,i,a,u){var l=this._createSelectElement(e,"day",o),s=Qn.getForField(this._fieldId+"_day");return this._populateSelectElementFromDatasource(l,s,t,i,a,"day"),l}},{key:"_updateDayInputIfNeeded",value:function(e,t,n,r){if(document.getElementById(e+"_day")){var o=document.getElementById(e+"_year");o=o?o.value:void 0;var i=this._clearSelectElementById(e+"_day"),a=Qn.getForField(this._fieldId+"_day").getOptions(),u=parseInt(a[1].id,10),l="0"!==t?this._getMaxDaysForInput(a,t,o):0;n&&o===n.getFullYear()&&t===(n.getMonth()+1).toString()&&(u=n.getDate()),r&&o===r.getFullYear()&&t.toString()===(r.getMonth()+1).toString()&&(l=r.getDate()),this._populateSelectElement(i,u,l,void 0,0,a[0].name)}}},{key:"_hideInput",value:function(e){var t;if(e){t=document.createElement("input"),e.getAttributeNames().filter((function(e){return-1===["data-hiddentype","data-required"].indexOf(e)})).forEach((function(n){t.setAttribute(n,e.getAttribute(n))})),t.type="hidden";var n=e.parentNode;n.removeChild(e),n.appendChild(t)}return t}},{key:"_populateSelectElement",value:function(e,t,n,r,o,i){if(e){e.appendChild(this._createOptionElement(0,o,(function(e){return i})));for(var a=t;a<=n;++a)e.appendChild(this._createOptionElement(a,o,r))}}},{key:"_populateSelectElementFromDatasource",value:function(e,t,n,r,o,i){if(e)for(var a=t.getOptions(),u=0;u<a.length;++u){var l=a[u];e.appendChild(this._createOptionElement(parseInt(l.id,10),n,(function(e){return l.name})))}}},{key:"_createSelectElement",value:function(e,t,n){var r=document.createElement("select");return r.setAttribute("id",e+"_"+t),r.setAttribute("name",e+"_"+t),r.setAttribute("class",t+"Input "+v.WIZARD_FIELD_INPUT_CONTAINER+" "+v.WIZARD_FIELD_INPUT),r.setAttribute("tabindex",n),this.isRequired()&&(r.setAttribute("aria-required","true"),r.setAttribute("data-required","true"),r.setAttribute("required","true")),this.isContainerInvalid()&&r.setAttribute("aria-invalid","true"),r}},{key:"_createOptionElement",value:function(e,t,n){var r=document.createElement("option");return r.setAttribute("value",0===e?"":e),r.setAttribute("class",v.WIZARD_FIELD_INPUT),r.innerHTML=n?n(e):e,e===t&&r.setAttribute("selected","selected"),r}},{key:"_getMaxDaysForInput",value:function(e,t,n){return e.length<31?parseInt(e[e.length-1].id,10):this._getDaysForMonthAndYear(t,n)}},{key:"_getDaysForMonthAndYear",value:function(e,t){var n=!1;return e=e?PortalString.toInt(e):1,t=t?PortalString.toInt(t):1,e>7&&(e-=7,n=!0),2!==e||n?1===e||(e-2)%2==1?31:30:1===t||t%4==0?29:28}},{key:"_clearSelectElementById",value:function(e){var t=document.getElementById(e);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);return t}},{key:"_normalize",value:function(e){return PortalString.zeroPad(e,2)}},{key:"_cloneDatasourceForNewTableRow",value:function(e,t,n){Qn.cloneDatasourceForNewTableRow(this._fieldId+"_"+e,t+"_"+e,n)}},{key:"_cloneDatasource",value:function(e,t){Qn.cloneDatasource(this._fieldId+"_"+e,t+"_"+e)}},{key:"_inputSupported",value:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t.type===e}},{key:"_isSafariBrowser",value:function(e){var t="undefined"!=typeof window&&window.navigator.userAgent;if(t){var n=/Version\/([0-9]+\.[0-9]+).*Mobile.*Safari/i.test(t)||/Version\/([0-9]+\.[0-9]+).*Safari/i.test(t)||/Safari\/([0-9]+\.[0-9]+)/i.test(t),r=/Chrome\/([0-9]+\.[0-9]+)/i.test(t)||/Chromium\/([0-9]+\.[0-9]+)/i.test(t);return n&&!r}return!1}},{key:"_buildDateTime",value:function(e,t){return LuxonDateTime.fromSeconds(e.timestamp,{zone:e.timezone,locale:null!=t?t:"en-US"})}},{key:"_addMinAndMaxAttributes",value:function(e,t,n){var r=this._buildDateTime(e),o=this._buildDateTime(t),i=document.getElementById(this.getFieldId());i.setAttribute(e.attribute,r.toFormat(n)),i.setAttribute(t.attribute,o.toFormat(n))}}],r&&Mu(n.prototype,r),o&&Mu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Tu);const Qu=zu;function qu(e){return qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(e)}function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xu(r.key),r)}}function Ju(e,t,n){return t=$u(t),function(e,t){if(t&&("object"===qu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ku()?Reflect.construct(t,n||[],$u(e).constructor):t.apply(e,n))}function Ku(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ku=function(){return!!e})()}function $u(e){return $u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$u(e)}function Zu(e,t){return Zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zu(e,t)}function Xu(e){var t=function(e,t){if("object"!=qu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qu(t)?t:t+""}var el=function(e){function t(e,n,r){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!PortalNumber.isNumber(r))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(n))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");return(o=Ju(this,t,[PortalDate.fromParams(e,n,r)]))._day=r,o._month=n,o._year=e,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zu(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("yyyy-MM-dd")}},{key:"getDay",value:function(){return this._day}},{key:"getMonth",value:function(){return this._month}},{key:"getYear",value:function(){return this._year}}])&&Gu(n.prototype,r),o&&Gu(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(xu);!function(e,t,n){(t=Xu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(el,"TYPE","FieldFullDateValue");const tl=el;function nl(e){return nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(e)}function rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sl(r.key),r)}}function ol(e,t,n){return t=ul(t),function(e,t){if(t&&("object"===nl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,il()?Reflect.construct(t,n||[],ul(e).constructor):t.apply(e,n))}function il(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(il=function(){return!!e})()}function al(){return al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ul(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},al.apply(this,arguments)}function ul(e){return ul=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ul(e)}function ll(e,t){return ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ll(e,t)}function sl(e){var t=function(e,t){if("object"!=nl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nl(t)?t:t+""}var cl=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ol(this,t,[e,n]))._datePickerElementId=r||o.getSetting("datePickerElementId"),o._locale=o.getSetting("locale"),o._dateFormat=o.getSetting("dateFormat"),o._luxonDateFormat=o.getSetting("luxonDateFormat"),o._nextMonthText=o.getSetting("nextMonthText"),o._previousMonthText=o.getSetting("previousMonthText"),o._yearRange=o.getSetting("yearRange"),o._minDate=o.getSetting("minDate"),o._maxDate=o.getSetting("maxDate"),o._altField=o.getSetting("altField"),o._defaultDate=o.getSetting("defaultDate"),o._firstDay=o.getSetting("firstDay"),o._includeBaseCss=pjQuery("#"+e).data("include-base-css")||!1,o._displayInline=pjQuery("#"+e).data("display-inline")||!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ll(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_postRegister",value:function(){var e={dateFormat:this._dateFormat,nextText:this._nextMonthText,prevText:this._previousMonthText,changeMonth:!0,changeYear:!0,yearRange:this._yearRange,firstDay:this._firstDay},n=this._locale.replace("_","-");void 0!==this._minDate&&null!==this._minDate&&(e.minDate=this._buildDateTime(this._minDate,n).toFormat(this._luxonDateFormat)),void 0!==this._maxDate&&null!==this._maxDate&&(e.maxDate=this._buildDateTime(this._maxDate,n).toFormat(this._luxonDateFormat)),void 0!==this._altField&&null!==this._altField&&(e.altField=this._altField),void 0!==this._defaultDate&&null!==this._defaultDate&&(e.defaultDate=this._defaultDate),this._setDatePickerLocale(this._locale),this._includeBaseCssIfNecessary(e),pjQuery("#"+this._datePickerElementId).datepicker(e),al(ul(t.prototype),"_postRegister",this).call(this)}},{key:"_includeBaseCssIfNecessary",value:function(e){this._includeBaseCss&&(this._displayInline?pjQuery("#"+this._datePickerElementId).addClass("ui-base-css"):e.beforeShow=function(e,t){pjQuery(t.dpDiv).parent().hasClass("ui-base-css")||pjQuery(t.dpDiv).wrap("<div class='ui-base-css'></div>")})}},{key:"getValue",value:function(){var e=pjQuery.datepicker.parseDate(this._dateFormat,this._getFieldElement().val());return e?new tl(e.getFullYear(),e.getMonth()+1,e.getDate()):new M}},{key:"getValueForCondition",value:function(){var e=pjQuery.datepicker.parseDate(this._dateFormat,this._getFieldElement().val());return e?e.getFullYear()+"-"+PortalString.zeroPad(e.getMonth()+1,2)+"-"+PortalString.zeroPad(e.getDate(),2):""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().datepicker("setDate",e.getPortalDate().toDate()),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){var r=this._datePickerElementId.replace(/^((\d+-)+)\d+(_datepicker)*$/,"$1"+n+"$3");return new t(e,this.getFieldSettings(),r)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_attachOnChangeListener",value:function(){var e=this.getFieldId();this._getFieldElement().datepicker("option","onSelect",(function(t){X.onFieldValueChange(e)}))}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_setDatePickerLocale",value:function(e){if(!pjQuery.datepicker.regional[e]){var t=PortalDate.getPortalDateInfo();pjQuery.datepicker.regional[e]={monthNames:t.getMonthsFullName(e),monthNamesShort:t.getMonthsShortName(e),dayNames:t.getDaysFullName(e,!0),dayNamesShort:t.getDaysShortName(e,!0),dayNamesMin:t.getDaysMinName(e,!0)}}pjQuery.datepicker.setDefaults(pjQuery.datepicker.regional[e])}}],r&&rl(n.prototype,r),o&&rl(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qu);!function(e,t,n){(t=sl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(cl,"TYPE","CustomFormatDateField");const fl=cl;function pl(e){return pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(e)}function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gl(r.key),r)}}function yl(e,t,n){return t=bl(t),function(e,t){if(t&&("object"===pl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hl()?Reflect.construct(t,n||[],bl(e).constructor):t.apply(e,n))}function hl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hl=function(){return!!e})()}function vl(){return vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},vl.apply(this,arguments)}function bl(e){return bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bl(e)}function ml(e,t){return ml=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ml(e,t)}function gl(e){var t=function(e,t){if("object"!=pl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pl(t)?t:t+""}var _l=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=yl(this,t,[e,n]))._fixedYear=r.getSetting("fixedYear"),r._tabIndex=r.getSetting("tabIndex"),r._dayPlaceholder=r.getSetting("dayPlaceholder"),r._monthPlaceholder=r.getSetting("monthPlaceholder"),r._dayLabel=r.getSetting("dayLabel"),r._monthLabel=r.getSetting("monthLabel"),Y.registerFieldDependency(e,r._getMonthId(),Y.TYPE_VALUES),Y.registerFieldDependency(e,r._getDayId(),Y.TYPE_VALUES),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ml(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){this._createWidget(),vl(bl(t.prototype),"_postRegister",this).call(this)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new M;var t=e.split("-"),n=PortalString.toInt(t[1]),r=PortalString.toInt(t[0]);return new FieldDayAndMonthValue(r,n)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e?this._fixedYear+"-"+e:""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("MM-dd")),this._setElementComponentsValues(e.getPortalDate().toDate()),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow("day",e,n),this._cloneDatasourceForNewTableRow("month",e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),new t(e,this.getFieldSettings())}},{key:"_setElementComponentsValues",value:function(e){X.setFieldValue(this._getMonthId(),new FieldIdValue((e.getMonth()+1).toString())),X.setFieldValue(this._getDayId(),new FieldIdValue(e.getDate().toString()))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getMonthId(),this._getMonthSuffix()),this._createFieldMetadata(this._getDayId(),this._getDaySuffix())]}},{key:"_getMonthId",value:function(){return this.getFieldId()+this._getMonthSuffix()}},{key:"_getDayId",value:function(){return this.getFieldId()+this._getDaySuffix()}},{key:"_getMonthSuffix",value:function(){return"_month"}},{key:"_getDaySuffix",value:function(){return"_day"}},{key:"_createWidget",value:function(){var e=this._hideInput(document.getElementById(this._fieldId));this._initDefaultValues(e.value),e.parentNode.appendChild(this._createMonthAndDayInputs())}},{key:"_elementAllowsChangingType",value:function(e){return!1}},{key:"_initDefaultValues",value:function(e){if(this._month=this._day=0,e){var t=e.split("-");this._month=PortalString.toInt(t[0]),this._day=PortalString.toInt(t[1])}}},{key:"_createMonthAndDayInputs",value:function(){var e=this;return this._monthInput=this._createMonthInput(this._fieldId,this._month,this._fixedYear,this._tabIndex,null,null,this._monthPlaceholder),this._monthInput.onchange=function(){e._month=this.value,e._day=0,e._updateHiddenInputValue()},this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._fixedYear,this._tabIndex,null,null,this._dayPlaceholder),this._dayInput.onchange=function(){e._day=this.value,e._updateHiddenInputValue()},this._dayLabel||this._monthLabel?this._createWidgetWithLabelsFromInputs(this._dayInput,this._monthInput):this._createWidgetWithoutLabelsFromInputs(this._dayInput,this._monthInput)}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._normalize(this._month)+"-"+this._normalize(this._day),X.onFieldValueChange(this._fieldId)}},{key:"_createWidgetWithoutLabelsFromInputs",value:function(e,t){var n=document.createElement("div");return n.appendChild(t),n.appendChild(e),n}},{key:"_createWidgetWithLabelsFromInputs",value:function(e,t){var n=document.createElement("div");n.className=v.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS;var r=document.createElement("div");r.className="DayAndMont_MonthWrapper",r.appendChild(this._createLabelFor(t.id,this._monthLabel)),r.appendChild(t);var o=document.createElement("div");return o.className="DayAndMont_DayWrapper",o.appendChild(this._createLabelFor(e.id,this._dayLabel)),o.appendChild(e),n.appendChild(r),n.appendChild(o),n}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.className="WizardSubFieldLabel "+v.WIZARD_FIELD_SUBFIELD_LABEL_TEMPLATES_CLASS,n.setAttribute("for",e),n.textContent=t,n}}],r&&dl(n.prototype,r),o&&dl(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qu);!function(e,t,n){(t=gl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_l,"TYPE","DayAndMonthDateField");const wl=_l;function Ol(e){return Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(e)}function Sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,El(r.key),r)}}function El(e){var t=function(e,t){if("object"!=Ol(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ol(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ol(t)?t:t+""}var Pl=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t,this._onClick=n,this._primary=r},(t=[{key:"getText",value:function(){return this._text}},{key:"getOnClick",value:function(){return this._onClick}},{key:"isPrimary",value:function(){return this._primary}}])&&Sl(e.prototype,t),n&&Sl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const kl=Pl;function Tl(e){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(e)}function jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Il(r.key),r)}}function Il(e){var t=function(e,t){if("object"!=Tl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tl(t)?t:t+""}var Fl=function(){return e=function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t,this._description=n,this._buttons=r,this._appendTo=o,this._beforeClose=i,this._closeText=a,this.BUTTON_CLASS_COMMON="upload-large-files__button",this.BUTTON_CLASS_PRIMARY="upload-large-files__button--primary",this.BUTTON_CLASS_NOT_PRIMARY="upload-large-files__button--secondary",this.DIALOG_CLASS="largeFileUploadJqueryUiModal"},(t=[{key:"show",value:function(){var e=this,t='<div title="'+this._title+'"><p>'+this._description+"</p></div>",n=this._buttons.map((function(t){return{text:t.getText(),click:t.getOnClick(),class:e.BUTTON_CLASS_COMMON+" "+(t.isPrimary()?e.BUTTON_CLASS_PRIMARY:e.BUTTON_CLASS_NOT_PRIMARY)}}));pjQuery(t).dialog({modal:!0,appendTo:this._appendTo,closeOnEscape:!1,dialogClass:this.DIALOG_CLASS,width:"439",buttons:n,beforeClose:this._beforeClose,closeText:this._closeText})}}])&&jl(e.prototype,t),n&&jl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Cl=Fl;function Dl(e){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(e)}function Rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nl(r.key),r)}}function Al(e,t,n){return(t=Nl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nl(e){var t=function(e,t){if("object"!=Dl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dl(t)?t:t+""}var xl=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Al(this,"_encryptedField",void 0),Al(this,"_isMaskedValue",void 0),this._encryptedField=t,this._isMaskedValue=n},(t=[{key:"load",value:function(){this._setAttributesFromRegistrars(),this.setDataUnreadableUnmaskableAttribute(),this._setOnClickInputListener(),this._addActionBeforeSubmit(),this._setOnResetFormListener(),this._setEventWhenUnmaskedFieldIsClicked()}},{key:"onFocusIsLost",value:function(e){this._encryptedField.shouldBeMasked(null==e?void 0:e.relatedTarget)&&(this.maskField(),this._encryptedField.dispatchEvent("unmaskedLostFocus"))}},{key:"onClickInputListener",value:function(e){if(this._encryptedField.hasToShowValueMasked())if(this._encryptedField.isMaskedWithoutPermissionsRole()){e.preventDefault();var t=this,n=new kl(this._encryptedField.getDictionary().deleteButton,(function(){pjQuery(this).dialog("close"),t.unmaskField(),t._encryptedField.dispatchEvent("fieldWasUnmasked"),t.focusAfterTasks(),t._encryptedField.setIsMaskedWithoutPermissionsRole(!1)}),!0),r=new kl(this._encryptedField.getDictionary().cancelButton,(function(){pjQuery(this).dialog("close")}),!1);new Cl(this._encryptedField.getDictionary().titleDialog,this._encryptedField.getDictionary().descriptionDialog,[n,r],"",null,this._encryptedField.getDictionary().closeText).show()}else this.unmaskField(),this._encryptedField.dispatchEvent("fieldWasUnmasked"),this.focusAfterTasks()}},{key:"unmaskField",value:function(){this._hasUnmaskedFieldCreated()&&(this._encryptedField.setIsMaskedValue(!1),this._encryptedField.changeHiddenField(this._encryptedField.getMaskedField(),!0),this._encryptedField.changeHiddenField(this._encryptedField.getField(),!1))}},{key:"maskField",value:function(){var e=!this._encryptedField.getValue().isEmpty();this._hasUnmaskedFieldCreated()&&this._encryptedField.hasToShowValueMasked()&&e&&(this._encryptedField.updateMaskedValue(),this._encryptedField.changeHiddenField(this._encryptedField.getMaskedField(),!1),this._encryptedField.changeHiddenField(this._encryptedField.getField(),!0))}},{key:"focusAfterTasks",value:function(){var e=this;setTimeout((function(){return e._encryptedField.getFocusableInput().focus()}))}},{key:"setOnFocusIsLostListener",value:function(){var e=this._encryptedField.getFocusableInput();null==e||e.addEventListener("blur",this.onFocusIsLost.bind(this))}},{key:"setDataUnreadableUnmaskableAttribute",value:function(){var e=this._encryptedField.hasToShowValueMasked()&&!this._encryptedField.isMaskedWithoutPermissionsRole(),t=this._encryptedField._getFieldContainerElement().hasClass("WizardFieldRestrictEditing");this._encryptedField._getFieldContainerElement().attr("data-readonly-unmaskable",e&&t)}},{key:"_setAttributesFromRegistrars",value:function(){this._encryptedField.setIsMaskedValue(void 0!==this._isMaskedValue?this._isMaskedValue:this._encryptedField.getSetting("isMaskedValue")),this._encryptedField._hasToShowValueMasked=this._encryptedField.getSetting("hasToShowValueMasked"),this._encryptedField.setIsMaskedWithoutPermissionsRole(this._encryptedField.getSetting("maskedWithoutPermissionsRole")),this._encryptedField._dictionary=this._encryptedField.getSetting("dictionary"),this._encryptedField._suffixMaskedField=this._encryptedField.getSetting("suffixMaskedField")}},{key:"_setOnClickInputListener",value:function(){var e=this._encryptedField.getMaskedFieldElement();null==e||e.addEventListener("mousedown",this._encryptedField.caller("onClickInputListener"))}},{key:"_addActionBeforeSubmit",value:function(){var e=this;Dr.default.getInstance().addActionBeforeSubmit((function(){e._encryptedField.isMaskedValue()&&e._preventFieldFromBeingSentOnSubmitRequest()}),this._encryptedField.getFormContainer())}},{key:"_preventFieldFromBeingSentOnSubmitRequest",value:function(){var e=this._encryptedField._getFieldElement();e.length&&e.get(0).removeAttribute("name")}},{key:"_setOnResetFormListener",value:function(){var e,t=this;null===(e=this._encryptedField.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._setAttributesFromRegistrars(),t.maskField()}))}},{key:"_setEventWhenUnmaskedFieldIsClicked",value:function(){var e,t=this;null===(e=this._encryptedField.getFieldElement())||void 0===e||e.addEventListener("mousedown",(function(e){return t._encryptedField.dispatchEvent("unmaskedClicked",e)}))}},{key:"_hasUnmaskedFieldCreated",value:function(){return Boolean(this._encryptedField.getMaskedFieldElement())}}])&&Rl(e.prototype,t),n&&Rl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Ll=xl;function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}var Vl;function Bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gl(r.key),r)}}function Wl(e,t,n){return t=Hl(t),function(e,t){if(t&&("object"===Ml(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ul()?Reflect.construct(t,n||[],Hl(e).constructor):t.apply(e,n))}function Ul(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ul=function(){return!!e})()}function Yl(){return Yl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yl.apply(this,arguments)}function Hl(e){return Hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hl(e)}function zl(e,t){return zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zl(e,t)}function Ql(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ql(e,t,n){return(t=Gl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gl(e){var t=function(e,t){if("object"!=Ml(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ml(t)?t:t+""}function Jl(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var Kl=new WeakSet,$l=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ql(i=Wl(this,t,[e,n,r]),Kl),ql(i,"_suffixMaskedField",void 0),ql(i,"_maskedWithoutPermissionsRole",void 0),ql(i,"_hasToShowValueMasked",void 0),ql(i,"_isMaskedValue",void 0),ql(i,"_dictionary",void 0),ql(i,"_encryptedFieldHandler",void 0),i._encryptedFieldHandler=new Ll(i,o),i._encryptedFieldHandler.load(),Jl(Kl,i,Xl).call(i),i.getField().addClass("EncryptedInput"),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zl(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){Yl(Hl(t.prototype),"_changeEditRestrictionsIfNeeded",this).call(this,e),this._encryptedFieldHandler.setDataUnreadableUnmaskableAttribute()}},{key:"_postRegister",value:function(){var e=this;Yl(Hl(t.prototype),"_postRegister",this).call(this),Jl(Kl,this,Zl).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings(),this.getFieldId(),!1)}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings(),this.getFieldId())}},{key:"_attachOnChangeListener",value:function(){var e=this;this._getFieldElement().on("change",(function(){X.onFieldValueChange(e.getFieldId()),setTimeout((function(){var t;null===(t=e._getClearButton())||void 0===t||t.addEventListener("blur",(function(t){e.onFocusIsLost(t)}))}))}))}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldOption",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField+"_1")}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"getMaskedFieldOptionElement",value:function(){return this.getMaskedFieldOption().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return pjQuery("#"+t.PREFIX_UI_WIDGET+this._fieldId)}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return document.querySelector(".select2Container"+this._fieldId)}},{key:"shouldBeMasked",value:function(e){var t=this._getClearButton();return e!==this.getFocusableInput()&&(e!==t||null===t)&&null===document.querySelector("#select2-".concat(this._fieldId,"-results"))}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){this.getMaskedFieldElement().querySelector("option").textContent=t.MASKED_VALUE}}])&&Bl(n.prototype,r),o&&Bl(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(dr);function Zl(){var e=this;this.getMaskedField().on("keydown keypress",(function(t){t.keyCode!==Vl.KEY_CODE_ENTER&&t.keyCode!==Vl.KEY_CODE_SPACE||e._encryptedFieldHandler.onClickInputListener(t),t.preventDefault()})),this.getMaskedField().on("paste",(function(e){return e.preventDefault()}))}function Xl(){var e=this;this._getFieldElement().on("select2:close",(function(){return e._encryptedFieldHandler.focusAfterTasks()}))}Vl=$l,ql($l,"TYPE","EncryptedAutocompleteSelectField"),ql($l,"PREFIX_UI_WIDGET","ui-widget_"),ql($l,"MASKED_VALUE","********"),$l.KEY_CODE_ENTER=13,$l.KEY_CODE_SPACE=32;const es=$l;n(48825);function ts(e){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ts(e)}function ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ls(r.key),r)}}function rs(e,t,n){return t=as(t),function(e,t){if(t&&("object"===ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,os()?Reflect.construct(t,n||[],as(e).constructor):t.apply(e,n))}function os(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(os=function(){return!!e})()}function is(){return is="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=as(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},is.apply(this,arguments)}function as(e){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},as(e)}function us(e,t){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},us(e,t)}function ls(e){var t=function(e,t){if("object"!=ts(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ts(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ts(t)?t:t+""}var ss=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=rs(this,t,[e,n]))._tabIndex=r.getSetting("tabIndex"),r._accessibleLabelsDictionary=r.getSetting("accessibleLabelsDictionary"),r._isAccessible=r.getSetting("isAccessible"),r._isRequired=r.getSetting("isRequired"),r._year=r._month=r._day=0,r._yearInput=r._monthInput=r._dayInput=null;var o=r.getSetting("minDate"),i=r.getSetting("maxDate");return r._addMinAndMaxAttributes(o,i,"yyyy-LL-dd"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&us(e,t)}(t,e),n=t,r=[{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new M;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]),o=PortalString.toInt(t[2]);return new tl(n,r,o)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e||""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM-dd")),this._triggerEvent("change")}},{key:"_show",value:function(){if(this._shouldActivate()){var e=this._getFieldContainerElement(),n=this._getFieldElement();e&&n&&this._valueDiffersForElement(n)&&n.val(n.val())}is(as(t.prototype),"_show",this).call(this)}},{key:"_hide",value:function(){if(this._shouldDeactivate()){var e=this._getFieldElement();this._saveDateValueForField(e)}is(as(t.prototype),"_hide",this).call(this)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_valueDiffersForElement",value:function(e){var t=e.val(),n=this.getValue();return""!==t&&!n.isEmpty()&&n.getFormattedDateString("yyyy-MM-dd")!==t}},{key:"_saveDateValueForField",value:function(e){var t=this.getValue();if(!t.isEmpty()){var n=new Date(t.getFormattedDateString("yyyy-MM-dd")+"T00:00:00"),r=n.getFullYear(),o=this._addLeadingZeros(n.getMonth()+1),i=this._addLeadingZeros(n.getDate());e.val(r+"-"+o+"-"+i)}}},{key:"_addLeadingZeros",value:function(e){return e.toString().padStart(2,"0")}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}}],r&&ns(n.prototype,r),o&&ns(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qu);!function(e,t,n){(t=ls(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ss,"TYPE","FullDateField");const cs=ss;var fs;n(61890);function ps(e){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps(e)}function ds(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ws(r.key),r)}}function ys(e,t,n){return t=bs(t),function(e,t){if(t&&("object"===ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hs()?Reflect.construct(t,n||[],bs(e).constructor):t.apply(e,n))}function hs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hs=function(){return!!e})()}function vs(){return vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},vs.apply(this,arguments)}function bs(e){return bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bs(e)}function ms(e,t){return ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ms(e,t)}function gs(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function _s(e,t,n){return(t=ws(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ws(e){var t=function(e,t){if("object"!=ps(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ps(t)?t:t+""}var Os=new WeakSet,Ss=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gs(o=ys(this,t,[e,n]),Os),_s(o,"_suffixMaskedField",void 0),_s(o,"_maskedWithoutPermissionsRole",void 0),_s(o,"_hasToShowValueMasked",void 0),_s(o,"_isMaskedValue",void 0),_s(o,"_dictionary",void 0),_s(o,"_encryptedFieldHandler",void 0),_s(o,"_maskedType",void 0),_s(o,"_amountOfCharactersUnmasked",void 0),_s(o,"_accessibleDescriptionText",void 0),o._maskedType=o.getSetting("maskedType"),o._amountOfCharactersUnmasked=o.getSetting("amountOfCharactersUnmasked"),o._accessibleDescriptionText=o.getSetting("accessibleDescriptionText"),o._encryptedFieldHandler=new Ll(o,r),o._encryptedFieldHandler.load(),o._lastUnmaskedValue=o.getFieldElement().value,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ms(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){var e=this;vs(bs(t.prototype),"_postRegister",this).call(this),function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(Os,this,Es).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"getType",value:function(){return t.TYPE}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){vs(bs(t.prototype),"_changeEditRestrictionsIfNeeded",this).call(this,e),this._encryptedFieldHandler.setDataUnreadableUnmaskableAttribute()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return new t(e,this.getFieldSettings(),!1)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){var e=this.getFieldElement().value;if(this._lastUnmaskedValue!==e){var n;this._lastUnmaskedValue=e;var r="";if(0===this._amountOfCharactersUnmasked)n=t.FULL_MASKED_TEXT;else if(this._maskedType===t.ENCRYPTION_MASK_TYPE_POSITION_FIRST){var o=Math.min(this._amountOfCharactersUnmasked,e.length);n=(r=e.substring(0,o))+t.FULL_MASKED_TEXT}else{var i=Math.max(e.length-this._amountOfCharactersUnmasked,0);r=e.substring(i),n=t.FULL_MASKED_TEXT+r}this.getMaskedFieldElement().value=n,this._updateMaskedValueAriaLabel(r)}}},{key:"_updateMaskedValueAriaLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-aria-description");t&&this._accessibleDescriptionText&&0!==this._amountOfCharactersUnmasked&&(t.textContent=this._accessibleDescriptionText.replace("{$unmaskedCharacters}",e))}}],r&&ds(n.prototype,r),o&&ds(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);function Es(){var e=this;this.getMaskedField().on("keypress",(function(t){t.keyCode!==fs.KEY_CODE_ENTER&&t.keyCode!==fs.KEY_CODE_SPACE||(e._encryptedFieldHandler.onClickInputListener(t),e.getFieldElement().select()),t.preventDefault()})),this.getMaskedField().on("paste",(function(e){return e.preventDefault()}))}fs=Ss,_s(Ss,"TYPE","EncryptedTextField"),_s(Ss,"ENCRYPTION_MASK_TYPE_POSITION_FIRST",2),_s(Ss,"ENCRYPTION_MASK_TYPE_POSITION_LAST",1),_s(Ss,"FULL_MASKED_TEXT","*".repeat(8)),Ss.KEY_CODE_ENTER=13,Ss.KEY_CODE_SPACE=32;const Ps=Ss;function ks(e){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(e)}function Ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ns(r.key),r)}}function js(e,t,n){return t=Cs(t),function(e,t){if(t&&("object"===ks(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Is()?Reflect.construct(t,n||[],Cs(e).constructor):t.apply(e,n))}function Is(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Is=function(){return!!e})()}function Fs(){return Fs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fs.apply(this,arguments)}function Cs(e){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cs(e)}function Ds(e,t){return Ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ds(e,t)}function Rs(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function As(e,t,n){return(t=Ns(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ns(e){var t=function(e,t){if("object"!=ks(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ks(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ks(t)?t:t+""}var xs=new WeakSet,Ls=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rs(o=js(this,t,[e,n]),xs),As(o,"_suffixMaskedField",void 0),As(o,"_maskedWithoutPermissionsRole",void 0),As(o,"_hasToShowValueMasked",void 0),As(o,"_isMaskedValue",void 0),As(o,"_dictionary",void 0),As(o,"_encryptedFieldHandler",void 0),As(o,"_isYearMasked",void 0),As(o,"_isMonthMasked",void 0),As(o,"_isDayMasked",void 0),o._isYearMasked=o.getSetting("isYearMasked"),o._isMonthMasked=o.getSetting("isMonthMasked"),o._isDayMasked=o.getSetting("isDayMasked"),o._accessibleDescriptionText=o.getSetting("accessibleDescriptionText"),o._encryptedFieldHandler=new Ll(o,r),o._encryptedFieldHandler.load(),o._lastUnmaskedValue=o.getFieldElement().value,o._isDayMasked&&o._isMonthMasked&&o._isYearMasked?o._partialMasked=!1:(o._isDayMasked||o._isMonthMasked||o._isYearMasked)&&(o._partialMasked=!0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ds(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){Fs(Cs(t.prototype),"_changeEditRestrictionsIfNeeded",this).call(this,e),this._encryptedFieldHandler.setDataUnreadableUnmaskableAttribute()}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"_postRegister",value:function(){var e=this;(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")})(xs,this,Ms).call(this),this.getMaskedFieldElement()&&this._formatMaskedValueToFormatDateLocal(),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()})),Fs(Cs(t.prototype),"_postRegister",this).call(this)}},{key:"_formatMaskedValueToFormatDateLocal",value:function(){var e=this._getTextFormMaskedValue("yyyy"),t=this._getTextFormMaskedValue("mm"),n=this._getTextFormMaskedValue("dd"),r=LuxonDateTime.local(2e3,12,30).toLocaleString(LuxonDateTime.DATE_SHORT);r=(r=(r=r.replace(12..toString(),t)).replace(30..toString(),n)).replace(2e3.toString(),e),this.getMaskedFieldElement().value=r}},{key:"_getTextFormMaskedValue",value:function(e){var t="yyyy-mm-dd".indexOf(e),n=t+e.length;return this.getMaskedFieldElement().value.substring(t,n)}},{key:"updateMaskedValue",value:function(){var e=this.getFieldElement().value;if(this._lastUnmaskedValue!==e){this._lastUnmaskedValue=e;var t,n=e;this._isYearMasked&&(n=n.replace(/\d{4}/,"****")),this._isMonthMasked&&(n=n.replace(/-\d{2}-/,"-**-")),this._isDayMasked&&(n=n.replace(/-\d{2}$/,"-**")),this.getMaskedFieldElement().value=n,this._formatMaskedValueToFormatDateLocal(),t=this._partialMasked?this.getMaskedFieldElement().value:"",this._updateMaskedValueAriaLabel(t)}}},{key:"_updateMaskedValueAriaLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-aria-description");t&&this._accessibleDescriptionText&&0!==this._amountOfCharactersUnmasked&&(t.textContent=this._accessibleDescriptionText.replace("{$unmaskedCharacters}",e))}}],r&&Ts(n.prototype,r),o&&Ts(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(cs);function Ms(){var e=this;this.getMaskedField().on("keypress",(function(t){t.keyCode!==Ps.KEY_CODE_ENTER&&t.keyCode!==Ps.KEY_CODE_SPACE||(t.preventDefault(),e._encryptedFieldHandler.onClickInputListener(t),e.getFieldElement().select())})),this.getMaskedField().on("paste",(function(e){return e.preventDefault()}))}As(Ls,"TYPE","EncryptedFullDateField"),Ls.KEY_CODE_ENTER=13,Ls.KEY_CODE_SPACE=32;const Vs=Ls;function Bs(e){return Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bs(e)}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qs(r.key),r)}}function Us(e,t,n){return t=Hs(t),function(e,t){if(t&&("object"===Bs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ys()?Reflect.construct(t,n||[],Hs(e).constructor):t.apply(e,n))}function Ys(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ys=function(){return!!e})()}function Hs(e){return Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hs(e)}function zs(e,t){return zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zs(e,t)}function Qs(e){var t=function(e,t){if("object"!=Bs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bs(t)?t:t+""}var qs=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Us(this,t,[e,n]))._notSelectedOptionValue=r.getSetting("notSelectedOptionValue")||"",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zs(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Sn.TYPE,Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new M:new Dn(e,pjQuery("#"+this._fieldId+" option:selected").text())}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e!=this._notSelectedOptionValue?e:null}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Sn.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Gt.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).text()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_unsetField",value:function(e){e.val(this._notSelectedOptionValue)}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option:gt(0)").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){var e=pjQuery("#"+this.getFieldId()).find('option:not([value="'+this._notSelectedOptionValue+'"])');1===e.length&&this.setValue(new Sn(e[0].value))}}],r&&Ws(n.prototype,r),o&&Ws(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(nr);!function(e,t,n){(t=Qs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qs,"TYPE","SelectField");const Gs=qs;function Js(e){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Js(e)}var Ks;function $s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ic(r.key),r)}}function Zs(e,t,n){return t=tc(t),function(e,t){if(t&&("object"===Js(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xs()?Reflect.construct(t,n||[],tc(e).constructor):t.apply(e,n))}function Xs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xs=function(){return!!e})()}function ec(){return ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ec.apply(this,arguments)}function tc(e){return tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tc(e)}function nc(e,t){return nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nc(e,t)}function rc(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function oc(e,t,n){return(t=ic(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ic(e){var t=function(e,t){if("object"!=Js(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Js(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Js(t)?t:t+""}var ac=new WeakSet,uc=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rc(o=Zs(this,t,[e,n]),ac),oc(o,"_suffixMaskedField",void 0),oc(o,"_maskedWithoutPermissionsRole",void 0),oc(o,"_hasToShowValueMasked",void 0),oc(o,"_isMaskedValue",void 0),oc(o,"_dictionary",void 0),oc(o,"_encryptedFieldHandler",void 0),oc(o,"_elementThatKeepsFieldUnmasked",void 0),o._encryptedFieldHandler=new Ll(o,r),o._encryptedFieldHandler.load(),o.getField().addClass("EncryptedInput"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nc(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){ec(tc(t.prototype),"_changeEditRestrictionsIfNeeded",this).call(this,e),this._encryptedFieldHandler.setDataUnreadableUnmaskableAttribute()}},{key:"_postRegister",value:function(){var e=this;ec(tc(t.prototype),"_postRegister",this).call(this),function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(ac,this,lc).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings(),!1)}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldOption",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField+"_1")}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"getMaskedFieldOptionElement",value:function(){return this.getMaskedFieldOption().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){this.getMaskedFieldOptionElement().text=t.MASKED_VALUE}}],r&&$s(n.prototype,r),o&&$s(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Gs);function lc(){var e=this;this.getMaskedField().on("keydown keypress",(function(t){t.keyCode!==Ks.KEY_CODE_ENTER&&t.keyCode!==Ks.KEY_CODE_SPACE||(t.preventDefault(),e._encryptedFieldHandler.onClickInputListener(t))})),this.getMaskedField().on("paste",(function(e){return e.preventDefault()}))}Ks=uc,oc(uc,"TYPE","EncryptedSelectField"),oc(uc,"MASKED_VALUE","********"),uc.KEY_CODE_ENTER=13,uc.KEY_CODE_SPACE=32;const sc=uc;function cc(e){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(e)}function fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vc(r.key),r)}}function pc(e,t,n){return t=yc(t),function(e,t){if(t&&("object"===cc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dc()?Reflect.construct(t,n||[],yc(e).constructor):t.apply(e,n))}function dc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dc=function(){return!!e})()}function yc(e){return yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yc(e)}function hc(e,t){return hc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hc(e,t)}function vc(e){var t=function(e,t){if("object"!=cc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cc(t)?t:t+""}var bc=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=pc(this,t),!e||0===e.length)throw new Error("invalidValue: value must be a valid input files object");return n._value=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hc(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._value[0].name}},{key:"getValue",value:function(){return this._value[0]}}])&&fc(n.prototype,r),o&&fc(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=vc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bc,"TYPE","FieldFileValue");const mc=bc;function gc(e){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(e)}function _c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pc(r.key),r)}}function wc(e,t,n){return t=Sc(t),function(e,t){if(t&&("object"===gc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Oc()?Reflect.construct(t,n||[],Sc(e).constructor):t.apply(e,n))}function Oc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oc=function(){return!!e})()}function Sc(e){return Sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sc(e)}function Ec(e,t){return Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ec(e,t)}function Pc(e){var t=function(e,t){if("object"!=gc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gc(t)?t:t+""}var kc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=wc(this,t))._fieldNumber=e,r._uploadedFileName=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ec(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this._uploadedFileName}},{key:"getValue",value:function(){return this._fieldNumber}}])&&_c(n.prototype,r),o&&_c(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Pc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kc,"TYPE","FieldFileUploadedValue");const Tc=kc;function jc(e){return jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(e)}function Ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fc(r.key),r)}}function Fc(e){var t=function(e,t){if("object"!=jc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jc(t)?t:t+""}var Cc=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t},(t=[{key:"cleanAll",value:function(){this.emptyFileInput(),this.removeUploadedFileInfo(),this.removeHiddenFileNameForScreenReader(),this.cleanExternalFileInfo()}},{key:"cleanExternalFileInfo",value:function(){this._cleanGoogleDriveFileInfo(),this._cleanDropboxFileInfo()}},{key:"_cleanGoogleDriveFileInfo",value:function(){this._emptyInputValueIfItExists("#driveFileName_"+this._fieldId),this._emptyInputValueIfItExists("#driveFileSize_"+this._fieldId),this._emptyInputValueIfItExists("#driveFileId_"+this._fieldId),this._emptyInputValueIfItExists("#driveAccessToken_"+this._fieldId),this._removeElementIfItExists("#fileInput_"+this._fieldId+" .drivePickerUploadFile")}},{key:"_cleanDropboxFileInfo",value:function(){this._emptyInputValueIfItExists("#dropboxFileName_"+this._fieldId),this._emptyInputValueIfItExists("#dropboxLink_"+this._fieldId),this._emptyInputValueIfItExists("#dropboxFileSize_"+this._fieldId),this._removeElementIfItExists("#dropboxInfo_"+this._fieldId),this._removeElementIfItExists("#dropboxRemove_"+this._fieldId)}},{key:"emptyFileInput",value:function(){this._emptyInputValueIfItExists('input[name="file_'+this._fieldId+'"]')}},{key:"removeUploadedFileInfo",value:function(){this._removeElementIfItExists("#fileInput_"+this._fieldId+" > .uploadedFile")}},{key:"removeHiddenFileNameForScreenReader",value:function(){this._removeElementIfItExists("#fileName-fileInput_"+this._fieldId)}},{key:"_removeElementIfItExists",value:function(e){var t=document.querySelector(e);t&&t.remove()}},{key:"_emptyInputValueIfItExists",value:function(e){var t=document.querySelector(e);t&&(t.value="")}}])&&Ic(e.prototype,t),n&&Ic(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Dc=Cc;function Rc(e){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(e)}function Ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nc(r.key),r)}}function Nc(e){var t=function(e,t){if("object"!=Rc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rc(t)?t:t+""}function xc(e,t,n){Lc(e,t),t.set(e,n)}function Lc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mc(e,t){return e.get(Bc(e,t))}function Vc(e,t,n){return e.set(Bc(e,t),n),n}function Bc(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var Wc=new WeakMap,Uc=new WeakMap,Yc=new WeakMap,Hc=new WeakSet,zc=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){Lc(e,t),t.add(e)}(this,Hc),xc(this,Wc,void 0),xc(this,Uc,void 0),xc(this,Yc,void 0),Vc(Wc,this,t),Vc(Uc,this,n),Vc(Yc,this,r),this._clickEventListener=o,this._fileInfoCleaner=new Dc(Mc(Wc,this))},(t=[{key:"addRemoveButton",value:function(e){e=void 0===e?"":e;var t=Bc(Hc,this,Qc).call(this);t.innerText=e,t.appendChild(Bc(Hc,this,qc).call(this,e)),this.addClickEventListenerToRemoveButton()}},{key:"isThereRemoveButton",value:function(){return Boolean(document.getElementById("removeFileButton_"+Mc(Wc,this)))}},{key:"addClickEventListenerToRemoveButton",value:function(){var e=this;if(this.isThereRemoveButton()){var t=document.getElementById("removeFileButton_"+Mc(Wc,this)),n=document.getElementById(Mc(Wc,this));t.addEventListener("click",(function(t){Bc(Hc,e,Gc).call(e),Bc(Hc,e,Jc).call(e),e._fileInfoCleaner.removeUploadedFileInfo(),e._fileInfoCleaner.removeHiddenFileNameForScreenReader(),n.dispatchEvent(new Event("change")),e._clickEventListener(),t.preventDefault()}))}}}])&&Ac(e.prototype,t),n&&Ac(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Qc(){var e=document.getElementById("fileInput_"+Mc(Wc,this)),t=document.querySelector("#fileInput_"+Mc(Wc,this)+" > .uploadedFile");return t||((t=document.createElement("div")).className="uploadedFile",e.appendChild(t)),t}function qc(e){var t=document.createElement("button");return t.setAttribute("id","removeFileButton_"+Mc(Wc,this)),t.setAttribute("type","button"),t.setAttribute("class","removeFile"),t.setAttribute("aria-label",Mc(Yc,this).replace("{$fileName}",e)),t.innerText=Mc(Uc,this),t}function Gc(){var e=document.getElementById("fileInput_"+Mc(Wc,this));if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","removedFile_"+Mc(Wc,this)),e.append(t)}}function Jc(){var e=document.querySelector('input[name="file_'+Mc(Wc,this)+'_fileNumber"]');e&&(e.value="")}const Kc=zc;n(77249);function $c(e){return $c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(e)}function Zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xc(r.key),r)}}function Xc(e){var t=function(e,t){if("object"!=$c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$c(t)?t:t+""}var ef=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._allowedFileExtensions=[],this._hasPhotoPreview=!1,this._removeText="",this._removeFileText="",this._chooserText=""},t=[{key:"allowedFileExtensions",get:function(){return this._allowedFileExtensions},set:function(e){this._allowedFileExtensions=e||[]}},{key:"hasPhotoPreview",get:function(){return this._hasPhotoPreview},set:function(e){this._hasPhotoPreview=Boolean(e)}},{key:"removeText",get:function(){return this._removeText},set:function(e){this._removeText=e||""}},{key:"removeFileText",get:function(){return this._removeFileText},set:function(e){this._removeFileText=e||""}},{key:"chooserText",get:function(){return this._chooserText},set:function(e){this._chooserText=e||""}}],t&&Zc(e.prototype,t),n&&Zc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const tf=ef;function nf(e){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(e)}function rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,of(r.key),r)}}function of(e){var t=function(e,t){if("object"!=nf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nf(t)?t:t+""}var af=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n||new tf,this._fileInfoCleaner=new Dc(t)},(t=[{key:"onFileSelected",value:function(e){throw Error("onFileSelected() method unimplemented")}},{key:"_buildRemoveExternalUploadedFileButton",value:function(e){var t=this,n=document.createElement("button");return n.type="button",n.innerText=this._configuration.removeText,n.setAttribute("aria-label",this._configuration.removeFileText.replace("{$fileName}",e)),n.addEventListener("click",(function(e){e.preventDefault(),t._removeExternalUploadedFile()})),n}},{key:"_removeExternalUploadedFile",value:function(){!0===this._configuration.hasPhotoPreview?Fields.getField(this._fieldId)._resetPreviewAndFileLoaders():this._fileInfoCleaner.cleanExternalFileInfo()}}])&&rf(e.prototype,t),n&&rf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const uf=af;function lf(e){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(e)}function sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cf(r.key),r)}}function cf(e){var t=function(e,t){if("object"!=lf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lf(t)?t:t+""}function ff(e,t,n){return t=yf(t),function(e,t){if(t&&("object"===lf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pf()?Reflect.construct(t,n||[],yf(e).constructor):t.apply(e,n))}function pf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pf=function(){return!!e})()}function df(){return df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},df.apply(this,arguments)}function yf(e){return yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yf(e)}function hf(e,t){return hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hf(e,t)}var vf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ff(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hf(e,t)}(t,e),n=t,r=[{key:"onFileSelected",value:function(e){if(e){var t=this._getPhotoFieldWithPreview();this._fileInfoCleaner.cleanAll(),this._setDropboxFileNameValue(e.name),this._setDropboxFileLinkValue(e.link),this._setDropboxFileSizeValue(e.bytes),this._buildFileNameSpanElement(e.name);var n=this._buildRemoveExternalUploadedFileButton(e.name),r=this._getDropboxButton();r&&r.before(n),t&&(t._setPreview(e.link),t._onPhotoFileInputNewPhotoSelected())}}},{key:"_buildRemoveExternalUploadedFileButton",value:function(e){var n=df(yf(t.prototype),"_buildRemoveExternalUploadedFileButton",this).call(this,e);return n.id="dropboxRemove_"+this._fieldId,n}},{key:"_getPhotoFieldWithPreview",value:function(){return!0!==this._hasPhotoPreview?null:X.getField(this._fieldId)}},{key:"_setDropboxFileNameValue",value:function(e){var t=document.getElementById("dropboxFileName_"+this._fieldId);t&&(t.value=e)}},{key:"_setDropboxFileSizeValue",value:function(e){var t=document.getElementById("dropboxFileSize_"+this._fieldId);t&&(t.value=e)}},{key:"_setDropboxFileLinkValue",value:function(e){var t=document.getElementById("dropboxLink_"+this._fieldId);t&&(t.value=e)}},{key:"_buildFileNameSpanElement",value:function(e){var t=document.createElement("span"),n=document.createTextNode(e);t.id="dropboxInfo_"+this._fieldId,t.appendChild(n);var r=this._getDropboxButton();r&&r.before(t)}},{key:"_getDropboxButton",value:function(){var e=document.getElementById("fileInput_"+this._fieldId),t=e?e.getElementsByClassName("dropbox-dropin-btn"):[];return t&&t.length>0?t[0]:null}}],r&&sf(n.prototype,r),o&&sf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(uf);const bf=vf;function mf(e){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(e)}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kf(r.key),r)}}function _f(e,t,n){return t=Sf(t),function(e,t){if(t&&("object"===mf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wf()?Reflect.construct(t,n||[],Sf(e).constructor):t.apply(e,n))}function wf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wf=function(){return!!e})()}function Of(){return Of="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Of.apply(this,arguments)}function Sf(e){return Sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sf(e)}function Ef(e,t){return Ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ef(e,t)}function Pf(e,t,n){return(t=kf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kf(e){var t=function(e,t){if("object"!=mf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mf(t)?t:t+""}var Tf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_f(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ef(e,t)}(t,e),n=t,(r=[{key:"onFileSelected",value:function(e){Of(Sf(t.prototype),"onFileSelected",this).call(this,{name:t.FAKE_FILE_NAME,link:t.FAKE_FILE_LINK,bytes:t.FAKE_FILE_SIZE})}}])&&gf(n.prototype,r),o&&gf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(bf);Pf(Tf,"FAKE_FILE_LINK","https://dl.dropboxusercontent.com/fakeLink"),Pf(Tf,"FAKE_FILE_NAME","dropboxFile.txt"),Pf(Tf,"FAKE_FILE_SIZE","1");const jf=Tf;var If=n(18035);function Ff(e){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(e)}function Cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Df(r.key),r)}}function Df(e){var t=function(e,t){if("object"!=Ff(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ff(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ff(t)?t:t+""}var Rf=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n,this._useMocks=r},(t=[{key:"load",value:function(){var e=document.getElementById("fileInput_"+this._fieldId);if(this._isDropboxApiAvailable()&&e){var t=this._useMocks?new jf(this._fieldId,this._configuration):new bf(this._fieldId,this._configuration),n={success:function(e){return t.onFileSelected(e&&e.length>0?e[0]:null)},linkType:"direct",extensions:this._configuration.allowedFileExtensions};e.appendChild(this._buildChooseFileButton(n))}}},{key:"_buildChooseFileButton",value:function(e){var t=null;return this._useMocks?t=this._mockDropboxButton(e):(t=Dropbox.createChooseButton(e)).innerHTML=t.innerHTML.replace(t.textContent,this._configuration.chooserText),t}},{key:"_mockDropboxButton",value:function(e){var t=document.createElement("a");return t.innerText=this._configuration.chooserText,t.setAttribute("href","#"),t.className=" dropbox-dropin-btn dropbox-dropin-default",t.addEventListener("click",(function(){return e.success()})),t}},{key:"_isDropboxApiAvailable",value:function(){var e=new If.A;return this._useMocks?!!e.get("enableDropboxDummyApi"):"undefined"!=typeof Dropbox}}])&&Cf(e.prototype,t),n&&Cf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Af=Rf;function Nf(e){return Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(e)}function xf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lf(r.key),r)}}function Lf(e){var t=function(e,t){if("object"!=Nf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nf(t)?t:t+""}function Mf(e,t,n){return t=Bf(t),function(e,t){if(t&&("object"===Nf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vf()?Reflect.construct(t,n||[],Bf(e).constructor):t.apply(e,n))}function Vf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vf=function(){return!!e})()}function Bf(e){return Bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bf(e)}function Wf(e,t){return Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wf(e,t)}var Uf=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Mf(this,t))._chooseFromDriveText="",e._appKey="",e._clientId="",e._exportType="",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wf(e,t)}(t,e),n=t,r=[{key:"chooseFromDriveText",get:function(){return this._chooseFromDriveText},set:function(e){this._chooseFromDriveText=e||""}},{key:"appKey",get:function(){return this._appKey},set:function(e){this._appKey=e||""}},{key:"clientId",get:function(){return this._clientId},set:function(e){this._clientId=e||""}},{key:"scope",get:function(){return this._scope},set:function(e){this._scope=e}},{key:"exportType",get:function(){return this._exportType},set:function(e){this._exportType=e||""}}],r&&xf(n.prototype,r),o&&xf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(tf);const Yf=Uf;function Hf(e){return Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(e)}function zf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$f(r.key),r)}}function Qf(e,t,n){return t=Jf(t),function(e,t){if(t&&("object"===Hf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qf()?Reflect.construct(t,n||[],Jf(e).constructor):t.apply(e,n))}function qf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qf=function(){return!!e})()}function Gf(){return Gf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Gf.apply(this,arguments)}function Jf(e){return Jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jf(e)}function Kf(e,t){return Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kf(e,t)}function $f(e){var t=function(e,t){if("object"!=Hf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hf(t)?t:t+""}var Zf=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qf(this,t,[e,n]))._shouldHideFileInputByDefault=r.getSetting("shouldHideFileInputByDefault"),r._maxFileSize=r.getSetting("maxFileSize"),r._errorToShowIfSizeExceeded=r.getSetting("errorToShowIfSizeExceeded"),r._initRemoveButtonBuilder(),r._addDropboxExternalChooser(),r._addGoogleDriveExternalChooser(),r._fileInfoCleaner=new Dc(e),r._addReuseUploadedFilesWidget(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kf(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFileNumberInput();if(e&&e.value)return new Tc(parseInt(e.value,10),this._getUploadedFileName());var t=this._getCurrentFiles();return t&&0!==t.length?new mc(t):new M}},{key:"getValueForCondition",value:function(){return this._getFieldElement().val()||this._getUploadedFileName()}},{key:"addRemoveButton",value:function(){var e=document.getElementById(this.getFieldId());e&&e.files.length&&this._removeButtonBuilder&&this._removeButtonBuilder.addRemoveButton(e.files[0].name)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_onFileChanged",value:function(){if(this._isFileOverSized())alert(this._errorToShowIfSizeExceeded),this._getFieldElement().val("");else{var e=this._getFileNumberInput();e&&(e.value="");var t=this.getValue();t.isEmpty()?this._removeHiddenFileNameForScreenReader():(this._fileInfoCleaner.removeUploadedFileInfo(),this._fileInfoCleaner.removeHiddenFileNameForScreenReader(),this._fileInfoCleaner.cleanExternalFileInfo(),this._addHiddenFileNameForScreenReader(t))}}},{key:"_isFileOverSized",value:function(){var e=0,t=this._getCurrentFiles();return t&&t.length>0&&(e=t[0].size),e>0&&e>this._maxFileSize}},{key:"_attachOnChangeListener",value:function(){var e=this;if(!this._shouldHideFileInputByDefault){var t=document.getElementById(this._fieldId);t&&t.addEventListener("change",(function(){e._onFileChanged(),X.onFieldValueChange(e.getFieldId())}))}}},{key:"_getCurrentFiles",value:function(){return this._getFieldElement().prop("files")}},{key:"_getFileNumberInput",value:function(){return document.querySelector('input[name="file_'+this._fieldId+'_fileNumber"]')}},{key:"_getUploadedFileName",value:function(){var e=this._getUploadedFileDiv();return e&&e.childNodes&&e.childNodes.length>0?e.childNodes[0].textContent:""}},{key:"_getUploadedFileDiv",value:function(){return document.querySelector("#fileInput_"+this._fieldId+" > .uploadedFile")}},{key:"_addHiddenFileNameForScreenReader",value:function(e){this._removeHiddenFileNameForScreenReader();var t=document.getElementById(this.getFieldId()+"-label");if(t){var n=document.createElement("span");n.setAttribute("id","fileName-fileInput_"+this.getFieldId()),n.setAttribute("class","screenReaderVisibility"),n.innerText=e.toString(),t.insertAdjacentElement("afterend",n)}}},{key:"_unsetField",value:function(e){Gf(Jf(t.prototype),"_unsetField",this).call(this,e),this._removeHiddenFileNameForScreenReader()}},{key:"_removeHiddenFileNameForScreenReader",value:function(){var e=document.getElementById("fileName-fileInput_"+this.getFieldId());e&&e.remove()}},{key:"_preventOpeningFileUploadWindow",value:function(){var e=document.getElementById(this._fieldId);e&&(e.onclick=function(e){e.preventDefault(),e.stopPropagation()})}},{key:"_getRemoveButtonClickEventListener",value:function(){return function(){}}},{key:"_initRemoveButtonBuilder",value:function(){this.getSetting("hasRemoveButton")&&(this._removeButtonBuilder=new Kc(this.getFieldId(),this.getSetting("removeButtonText"),this.getSetting("removeButtonAriaText"),this._getRemoveButtonClickEventListener()),this._removeButtonBuilder.addClickEventListenerToRemoveButton())}},{key:"_addDropboxExternalChooser",value:function(){if(this.getSetting("dropbox.isEnabled")){var e=new tf;e.allowedFileExtensions=this.getSetting("dropbox.allowedFileExtensions"),e.hasPhotoPreview=this.getSetting("hasPhotoPreviewByDefault"),e.removeText=this.getSetting("removeButtonText"),e.removeFileText=this.getSetting("removeButtonAriaText"),e.chooserText=this.getSetting("dropbox.chooserText"),new Af(this.getFieldId(),e,this.getSetting("useMocks")).load()}}},{key:"_addGoogleDriveExternalChooser",value:function(){if(this.getSetting("googleDrive.isEnabled")){var e=new Yf;e.appKey=this.getSetting("googleDrive.appKey"),e.clientId=this.getSetting("googleDrive.clientId"),e.scope=this.getSetting("googleDrive.scope"),e.chooseFromDriveText=this.getSetting("googleDrive.chooseFromDriveText"),e.exportType=this.getSetting("googleDrive.exportMimeType"),e.allowedFileExtensions=this.getSetting("googleDrive.allowedFileExtensions"),e.hasPhotoPreview=this.getSetting("hasPhotoPreviewByDefault"),e.removeText=this.getSetting("removeButtonText"),e.removeFileText=this.getSetting("removeButtonAriaText"),new GoogleDriveChooserLoader(this.getFieldId(),e,this.getSetting("useMocks")).load()}}},{key:"_addReuseUploadedFilesWidget",value:function(){this.getSetting("reuseUploadedFilesWidgetAttachments")&&ReuseUploadedFilesWidget.prepareFileFieldToReuseUploadedFiles(this.getFieldId(),this.getSetting("reuseUploadedFilesWidgetDictionary"),this.getSetting("reuseUploadedFilesWidgetAttachments"))}}],r&&zf(n.prototype,r),o&&zf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=$f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zf,"TYPE","FileField");const Xf=Zf;function ep(e){return ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ap(r.key),r)}}function np(e,t,n){return t=op(t),function(e,t){if(t&&("object"===ep(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rp()?Reflect.construct(t,n||[],op(e).constructor):t.apply(e,n))}function rp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rp=function(){return!!e})()}function op(e){return op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},op(e)}function ip(e,t){return ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ip(e,t)}function ap(e){var t=function(e,t){if("object"!=ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ep(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ep(t)?t:t+""}var up=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=np(this,t,[e,n])).getSetting("hasToShowFieldByField")&&(r._fieldsetStepper=r._buildFieldsetStepper()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ip(e,t)}(t,e),n=t,(r=[{key:"_postRegister",value:function(){this._fieldsetStepper&&this._fieldsetStepper.generate()}},{key:"_buildFieldsetStepper",value:function(){return new io(this.getFieldId(),{nextButtonText:this.getSetting("nextButtonText"),nextButtonAriaLabel:this.getSetting("nextButtonAriaLabel"),prevButtonText:this.getSetting("prevButtonText"),prevButtonAriaLabel:this.getSetting("prevButtonAriaLabel")},this.getSetting("shouldUseBuiltinButtons"),this.getSetting("hasToHideWizardButtons"),this.getSetting("isAllowedNavigateBetweenFields"),this.getSetting("initialFieldIndex"))}},{key:"getFieldsStatus",value:function(){return this._fieldsetStepper||console.error('Method "getFieldsStatus()" is invalid. Form Field ID #'+this.getFieldId()+" is not being show field by field."),this._fieldsetStepper.getFieldsStatus()}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){return new M}},{key:"getValueForCondition",value:function(){return null}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}])&&tp(n.prototype,r),o&&tp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=ap(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(up,"TYPE","FormField");const lp=up;n(68329),n(40460);function sp(e){return sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(e)}function cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hp(r.key),r)}}function fp(e,t,n){return t=dp(t),function(e,t){if(t&&("object"===sp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pp()?Reflect.construct(t,n||[],dp(e).constructor):t.apply(e,n))}function pp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pp=function(){return!!e})()}function dp(e){return dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dp(e)}function yp(e,t){return yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yp(e,t)}function hp(e){var t=function(e,t){if("object"!=sp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sp(t)?t:t+""}var vp=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fp(this,t,[e,n])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yp(e,t)}(t,e),n=t,(r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._defaultValueDatasource&&gt.cloneDatasourceForNewTableRow(this._fieldId,e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._defaultValueDatasource&&gt.cloneDatasource(this._fieldId,e),new t(e,this.getFieldSettings())}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){if(this.evaluateEditRestrictions(),this._defaultValueDatasource&&this._defaultValueDatasource.isParentDependentField(e))this.isVisible()?(this._updateFieldVisibilityAfterParentFieldValueChange(),this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback())):(this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback()),this._updateFieldVisibilityAfterParentFieldValueChange());else{var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}}},{key:"_buildDefaultValueToSet",value:function(e){return new Gt(e.name)}}])&&cp(n.prototype,r),o&&cp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);!function(e,t,n){(t=hp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vp,"TYPE","TextField");const bp=vp;function mp(e){return mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(e)}function gp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kp(r.key),r)}}function _p(e,t,n){return t=Sp(t),function(e,t){if(t&&("object"===mp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wp()?Reflect.construct(t,n||[],Sp(e).constructor):t.apply(e,n))}function wp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wp=function(){return!!e})()}function Op(){return Op="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Op.apply(this,arguments)}function Sp(e){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sp(e)}function Ep(e,t){return Ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ep(e,t)}function Pp(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function kp(e){var t=function(e,t){if("object"!=mp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mp(t)?t:t+""}function Tp(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var jp=new WeakSet,Ip=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pp(r=_p(this,t,[e,n]),jp),r._languageFilename=r.getSetting("languageFilename"),r._hasTinyMCEBeingInitialized=!1,r._showImageAndFileButtons=r.getSetting("showImageAndFileButtons"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ep(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"_postRegister",value:function(){var e=this;tinymce.init({selector:"#"+e.getFieldId(),menubar:e._getMenuBar(),language:e._getLanguage(),plugins:["link lists hr help"+e._getImagePlugin(),"searchreplace visualblocks visualchars code fullscreen insertdatetime ","directionality"],toolbar:"undo redo | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | link"+e._getImagePlugin()+" | forecolor backcolor",branding:!1,convert_urls:!1,setup:function(t){t.on("init",(function(t){e._hasTinyMCEBeingInitialized=!0,e._prependLabelToTitle(),bp.prototype._postRegister.call(e)})),t.on("paste keyUp",(function(){X.onFieldValueChange(e.getFieldId())}))},init_instance_callback:function(){var t=e._getFieldContainerElement().hasClass("WizardFieldRestrictEditing");Tp(jp,e,Fp).call(e,!t)}})}},{key:"getValue",value:function(){var e=this._getTinyMCEContainer(),t=null;return this._hasTinyMCEBeingInitialized&&e&&(t=e.getContent({format:"text"})),t?new Gt(t):new M}},{key:"_prependLabelToTitle",value:function(){var e=this._getTinyMCEContainer();if(e){var t=e.iframeElement,n=t.getAttribute("title");n=this.getLabel()+": "+n,t.setAttribute("title",n)}}},{key:"getValueForCondition",value:function(){var e=this._getTinyMCEContainer(),t=null;return this._hasTinyMCEBeingInitialized&&e&&(t=e.getContent({format:"text"}),t=this.sanitizeValue(t)),t}},{key:"sanitizeValue",value:function(e){return(e=e.replaceAll(/(\n\n\n|\n\n)/g,"\n")).trim()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=this._getTinyMCEContainer();if(t)return t.setContent(e.getValue());this._triggerEvent("input")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._defaultValueDatasource&&gt.cloneDatasourceForNewTableRow(this._fieldId,e,t),this._buildClonedField(e)}},{key:"_buildClonedField",value:function(e){return this._defaultValueDatasource&&gt.cloneDatasource(this._fieldId,e),new t(e,this.getFieldSettings())}},{key:"_getTinyMCEContainer",value:function(){return tinyMCE.get(this._fieldId)}},{key:"onBeforeSubmitAutoPartialSave",value:function(){return new Promise((function(e){tinyMCE.triggerSave(),e()}))}},{key:"_attachOnChangeListener",value:function(){}},{key:"hasValueOnLoad",value:function(){return!!this._getFieldElement().val()}},{key:"_getLanguage",value:function(){return this._languageFilename}},{key:"_getImagePlugin",value:function(){return this._showImageAndFileButtons?" image":""}},{key:"_getMenuBar",value:function(){return(this._showImageAndFileButtons?"file ":"")+"edit view insert format tools help"}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){Op(Sp(t.prototype),"_changeEditRestrictionsIfNeeded",this).call(this,e),Tp(jp,this,Fp).call(this,e)}}],r&&gp(n.prototype,r),o&&gp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(bp);function Fp(e){var t;null===(t=this._getTinyMCEContainer().getBody())||void 0===t||t.setAttribute("contenteditable",e)}!function(e,t,n){(t=kp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ip,"TYPE","FormattedTextField");const Cp=Ip;function Dp(e){return Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(e)}function Rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mp(r.key),r)}}function Ap(e,t,n){return t=xp(t),function(e,t){if(t&&("object"===Dp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Np()?Reflect.construct(t,n||[],xp(e).constructor):t.apply(e,n))}function Np(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Np=function(){return!!e})()}function xp(e){return xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xp(e)}function Lp(e,t){return Lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lp(e,t)}function Mp(e){var t=function(e,t){if("object"!=Dp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dp(t)?t:t+""}var Vp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ap(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lp(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){}}])&&Rp(n.prototype,r),o&&Rp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=Mp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vp,"TYPE","GenericField");const Bp=Vp;function Wp(e){return Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(e)}function Up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qp(r.key),r)}}function Yp(e,t,n){return t=zp(t),function(e,t){if(t&&("object"===Wp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hp()?Reflect.construct(t,n||[],zp(e).constructor):t.apply(e,n))}function Hp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hp=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zp(e)}function Qp(e,t){return Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qp(e,t)}function qp(e){var t=function(e,t){if("object"!=Wp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wp(t)?t:t+""}var Gp=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Yp(this,t,[e,n]))._setValidationBeforeSubmit(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qp(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_setValidationBeforeSubmit",value:function(){var e=this;Dr.default.getInstance().addValidationBeforeSubmit((function(){return e.isValid()}),this.getFormContainer())}},{key:"_getFieldLabel",value:function(){return pjQuery("#"+this.getFieldId()+"-label").text()}}])&&Up(n.prototype,r),o&&Up(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);!function(e,t,n){(t=qp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Gp,"TYPE","KeywordsField");const Jp=Gp;function Kp(e){return Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(e)}function $p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,od(r.key),r)}}function Zp(e,t,n){return t=td(t),function(e,t){if(t&&("object"===Kp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xp()?Reflect.construct(t,n||[],td(e).constructor):t.apply(e,n))}function Xp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xp=function(){return!!e})()}function ed(){return ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=td(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ed.apply(this,arguments)}function td(e){return td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},td(e)}function nd(e,t){return nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nd(e,t)}function rd(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function od(e){var t=function(e,t){if("object"!=Kp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kp(t)?t:t+""}function id(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var ad=new WeakMap,ud=new WeakMap,ld=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rd(r=Zp(this,t,[e,n]),ad,"semantic-suggestions-header"),rd(r,ud,"semantic-suggestions-header--noresults"),r.delayBeforeRequestMs=r.getSetting("delayBeforeRequestMs"),r.minimumLengthToSearch=r.getSetting("minimumLengthToSearch"),r.isSemanticSuggestionsEnabled=r.getSetting("isSemanticSuggestionsEnabled"),r.translations=r.getSetting("translations"),r._datasource=Qn.getForField(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nd(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_postRegister",value:function(){this._createWidget(),ed(td(t.prototype),"_postRegister",this).call(this)}},{key:"_createWidget",value:function(){var e=this;pjQuery("#"+this._fieldId).autocomplete({minLength:this.minimumLengthToSearch,delay:this.delayBeforeRequestMs,source:function(t,n){e._datasource._fetchOptions(e._datasource.buildRequestDataFromParams(1,10,t.term,!1,[],null),(function(t){e.isSemanticSuggestionsEnabled&&!e._isHeaderItemAlreadyPresent(t)&&t.unshift(e._buildHeaderItem(t)),n(t)}))},select:function(t,n){if(9===t.which)return null;setTimeout((function(){e.isSemanticSuggestionsEnabled?(e._getFieldElement().val(n.item.name),e.focus()):window.location.href=n.item.detailUrl}),0)},create:function(){pjQuery(this).data("ui-autocomplete")._renderItem=function(t,n){if(t.attr("id",e._fieldId+"-live-search-results").attr("role","listbox").addClass("live-search"),n)return e._buildItemTemplate(n).appendTo(t)},pjQuery(this).data("ui-autocomplete")._renderMenu=function(t,n){var r=this;n.forEach((function(e){return r._renderItemData(t,e)})),setTimeout((function(){n.length>1&&t.find(".".concat(id(ad,e))).removeClass("ui-menu-item")}),0)}},focus:function(t,n){e._resetActiveItem();var r=e._fieldId+"-"+n.item.id;if(document.getElementById(r).classList.contains(id(ud,e)))return!1;pjQuery("#"+e._fieldId).attr("aria-activedescendant",r),pjQuery("#"+r).addClass("live-search__item_active")},open:function(t,n){pjQuery("#"+e._fieldId).addClass("live-search--open").attr("aria-expanded","true")},close:function(t,n){e._resetActiveItem(),pjQuery("#"+e._fieldId).removeClass("live-search--open").attr("aria-expanded","false")}})}},{key:"_buildHeaderItem",value:function(e){var t=0===e.length;return{name:t?this.translations.semanticNoResults:this.translations.semanticResults,extraCssClasses:id(ad,this)+(t?" "+id(ud,this):"")}}},{key:"_isHeaderItemAlreadyPresent",value:function(e){return e.length>0&&e[0].name===this.translations.semanticResults}},{key:"_buildItemTemplate",value:function(e){var t=this._fieldId+"-"+e.id,n="live-search__item"+(e.extraCssClasses?" "+e.extraCssClasses:""),r=e.name||"",o=this.getValue().getValue(),i=r.toLowerCase().indexOf(o.toLowerCase()),a=r,u=null;if(e.fieldValues){var l=[];for(var s in e.fieldValues)e.fieldValues.hasOwnProperty(s)&&l.push(e.fieldValues[s]);if(l.length>0){u=pjQuery("<div/>",{class:"live-search__item__details",tabindex:-1});for(var c=0;c<l.length;++c)u.append(pjQuery("<span/>",{class:"live-search__item__details__"+(c+1),text:l[c],"aria-hidden":!0}))}}i>=0&&(a=pjQuery("<span>"+r.substring(0,i)+'<span class="live-search__item__title__match">'+r.substring(i,i+o.length)+"</span>"+r.substring(i+o.length)+"</span>"));var f=pjQuery("<div/>",{class:"live-search__item__title",tabindex:-1}).append(a);return pjQuery("<li/>",{class:n,role:"option",id:t}).append(f).append(u)}},{key:"_resetActiveItem",value:function(){document.getElementById(this._fieldId+"-live-search-results").getElementsByTagName("li").forEach((function(e){e.classList.contains("live-search__item_active")&&e.classList.remove("live-search__item_active")})),pjQuery("#"+this._fieldId).attr("aria-activedescendant","")}}],r&&$p(n.prototype,r),o&&$p(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Jp);!function(e,t,n){(t=od(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ld,"TYPE","InstantSearchField");const sd=ld;function cd(e){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(e)}function fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pd(r.key),r)}}function pd(e){var t=function(e,t){if("object"!=cd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cd(t)?t:t+""}var dd=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"_isValidValue",value:function(e){throw new Error("Unimplemented method: _isValidValue()")}},{key:"restrictInput",value:function(e){e.addEventListener("beforeinput",this._handleBeforeInput.bind(this))}},{key:"_handleBeforeInput",value:function(e){if(null!=e.data&&""!==e.data){var t=e.data,n=e.currentTarget,r=n.selectionStart,o=n.selectionEnd,i=n.value,a=i.slice(0,r)+t+i.slice(o);this._isValidValue(a)||e.preventDefault()}}}])&&fd(e.prototype,t),n&&fd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const yd=dd;function hd(e){return hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(e)}function vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bd(r.key),r)}}function bd(e){var t=function(e,t){if("object"!=hd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hd(t)?t:t+""}function md(e,t,n){return t=_d(t),function(e,t){if(t&&("object"===hd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gd()?Reflect.construct(t,n||[],_d(e).constructor):t.apply(e,n))}function gd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gd=function(){return!!e})()}function _d(e){return _d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_d(e)}function wd(e,t){return wd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wd(e,t)}var Od=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),md(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wd(e,t)}(t,e),n=t,r=[{key:"_isValidValue",value:function(e){return!0===/^\d+$/.test(e)}}],r&&vd(n.prototype,r),o&&vd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(yd);const Sd=Od;function Ed(e){return Ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(e)}function Pd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dd(r.key),r)}}function kd(e,t,n){return t=Id(t),function(e,t){if(t&&("object"===Ed(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Td()?Reflect.construct(t,n||[],Id(e).constructor):t.apply(e,n))}function Td(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Td=function(){return!!e})()}function jd(){return jd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Id(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},jd.apply(this,arguments)}function Id(e){return Id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Id(e)}function Fd(e,t){return Fd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fd(e,t)}function Cd(e,t,n){return(t=Dd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dd(e){var t=function(e,t){if("object"!=Ed(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ed(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ed(t)?t:t+""}var Rd=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cd(r=kd(this,t,[e,n]),"_inputRestrictor",void 0),r._inputRestrictor=new Sd,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fd(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[rn.TYPE]}},{key:"_postRegister",value:function(){jd(Id(t.prototype),"_postRegister",this).call(this),this._inputRestrictor.restrictInput(this._getFieldElement().get(0))}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}])&&Pd(n.prototype,r),o&&Pd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);Cd(Rd,"TYPE","JobIdField");const Ad=Rd;function Nd(e){return Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(e)}function xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wd(r.key),r)}}function Ld(e,t,n){return t=Vd(t),function(e,t){if(t&&("object"===Nd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Md()?Reflect.construct(t,n||[],Vd(e).constructor):t.apply(e,n))}function Md(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Md=function(){return!!e})()}function Vd(e){return Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vd(e)}function Bd(e,t){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bd(e,t)}function Wd(e){var t=function(e,t){if("object"!=Nd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nd(t)?t:t+""}var Ud=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ld(this,t,[e,n])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bd(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}])&&xd(n.prototype,r),o&&xd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);!function(e,t,n){(t=Wd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ud,"TYPE","JobRefField");const Yd=Ud;function Hd(e){return Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(e)}function zd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kd(r.key),r)}}function Qd(e,t,n){return t=Gd(t),function(e,t){if(t&&("object"===Hd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qd()?Reflect.construct(t,n||[],Gd(e).constructor):t.apply(e,n))}function qd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qd=function(){return!!e})()}function Gd(e){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gd(e)}function Jd(e,t){return Jd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jd(e,t)}function Kd(e){var t=function(e,t){if("object"!=Hd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hd(t)?t:t+""}var $d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qd(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jd(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"getValueForCondition",value:function(){return JSON.parse(this._getFieldElement().val())}}])&&zd(n.prototype,r),o&&zd(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);!function(e,t,n){(t=Kd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($d,"TYPE","JobVariableField");const Zd=$d;function Xd(e){return Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(e)}function ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ty(r.key),r)}}function ty(e){var t=function(e,t){if("object"!=Xd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xd(t)?t:t+""}function ny(e,t,n){return t=oy(t),function(e,t){if(t&&("object"===Xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ry()?Reflect.construct(t,n||[],oy(e).constructor):t.apply(e,n))}function ry(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ry=function(){return!!e})()}function oy(e){return oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oy(e)}function iy(e,t){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iy(e,t)}var ay=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ny(this,t,[e,n]))._requiredFieldText=r.getSetting("requiredFieldText"),r._radiusDefaultOption=r.getSetting("radiusDefaultOption"),r._setValidationBeforeSubmit(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t)}(t,e),n=t,r=[{key:"getValueForCondition",value:function(){var e=document.getElementById(this.getRadiusId());return["SELECT"===e.tagName?e.selectedOptions[0].text:e.value]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),X.setFieldValue(this.getRadiusId(),e.getRadius())}},{key:"_postRegister",value:function(){Tu.prototype._postRegister.call(this),X.getField(this.getSearchFieldId()).addListener("selectedAutocompleteValueEvent",this.caller("onSelectedSearchField"))}},{key:"onSelectedSearchField",value:function(){var e=X.getField(this.getRadiusId());e.getValue().isEmpty()&&e.setValue(new Sn(this._radiusDefaultOption))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this.getRadiusId(),this._getRadiusSuffix())]}},{key:"getRadiusId",value:function(){return this.getFieldId()+this._getRadiusSuffix()}},{key:"_getRadiusSuffix",value:function(){return this._getFieldSuffix()+"_radius"}},{key:"_getFieldSuffix",value:function(){throw new Error("notImplementedError")}},{key:"getSearchFieldId",value:function(){return""}},{key:"_setValidationBeforeSubmit",value:function(){var e=this;Dr.default.getInstance().addValidationBeforeSubmit((function(){return e._validateValuesAndAddValidationErrorIfNeeded()}),this.getFormContainer())}},{key:"_validateValuesAndAddValidationErrorIfNeeded",value:function(){var e=X.getField(this.getSearchFieldId()),t=X.getField(this.getRadiusId()),n=!0;return this._isValidSearchField()?e._removeValidationErrorIfNeeded():(e._addValidationErrorIfNeeded(this._requiredFieldText),n=!1),this._isValidRadius()?t._removeValidationErrorIfNeeded():(t._addValidationErrorIfNeeded(this._requiredFieldText),n=!1),n}},{key:"_isValidSearchField",value:function(){var e=X.getFieldValue(this.getSearchFieldId()),t=X.getFieldValue(this.getRadiusId());return!(e.isEmpty()&&!t.isEmpty())}},{key:"_isValidRadius",value:function(){var e=X.getFieldValue(this.getSearchFieldId()),t=X.getFieldValue(this.getRadiusId());return!(!e.isEmpty()&&t.isEmpty())}}],r&&ey(n.prototype,r),o&&ey(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Tu);const uy=ay;function ly(e){return ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ly(e)}function sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cy(r.key),r)}}function cy(e){var t=function(e,t){if("object"!=ly(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ly(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ly(t)?t:t+""}function fy(e,t,n){return t=dy(t),function(e,t){if(t&&("object"===ly(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,py()?Reflect.construct(t,n||[],dy(e).constructor):t.apply(e,n))}function py(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(py=function(){return!!e})()}function dy(e){return dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dy(e)}function yy(e,t){return yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yy(e,t)}var hy=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fy(this,t))._setRadius(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yy(e,t)}(t,e),n=t,(r=[{key:"getRadius",value:function(){return this._radius}},{key:"_setRadius",value:function(e){k.assertIsValid(e),this._radius=e}}])&&sy(n.prototype,r),o&&sy(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);const vy=hy;function by(e){return by="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(e)}function my(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sy(r.key),r)}}function gy(e,t,n){return t=wy(t),function(e,t){if(t&&("object"===by(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_y()?Reflect.construct(t,n||[],wy(e).constructor):t.apply(e,n))}function _y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_y=function(){return!!e})()}function wy(e){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wy(e)}function Oy(e,t){return Oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oy(e,t)}function Sy(e){var t=function(e,t){if("object"!=by(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=by(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==by(t)?t:t+""}var Ey=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=gy(this,t,[n]))._setPlace(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oy(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return JSON.stringify({place:this._place.toString(),radius:this._radius.toString()})}},{key:"getPlace",value:function(){return this._place}},{key:"_setPlace",value:function(e){k.assertIsValid(e),this._place=e}}])&&my(n.prototype,r),o&&my(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(vy);!function(e,t,n){(t=Sy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ey,"TYPE","FieldLocationDistanceValue");const Py=Ey;function ky(e){return ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(e)}function Ty(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ry(r.key),r)}}function jy(e,t,n){return t=Cy(t),function(e,t){if(t&&("object"===ky(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Iy()?Reflect.construct(t,n||[],Cy(e).constructor):t.apply(e,n))}function Iy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iy=function(){return!!e})()}function Fy(){return Fy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fy.apply(this,arguments)}function Cy(e){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cy(e)}function Dy(e,t){return Dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dy(e,t)}function Ry(e){var t=function(e,t){if("object"!=ky(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ky(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ky(t)?t:t+""}var Ay=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=jy(this,t,[e,n]))._coordinates=r.getSetting("coordinates"),r._placeAriaLabel=r.getSetting("placeAriaLabel"),r._includeOptionGetLocationFromBrowser=r.getSetting("includeOptionGetLocationFromBrowser"),r._currentLocationText=r.getSetting("currentLocationText"),r._useMocks=r.getSetting("useMocks"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dy(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Py.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=X.getFieldValue(this._getPlaceId()),t=X.getFieldValue(this.getRadiusId());return e.isEmpty()||t.isEmpty()?new M:new Py(e,t)}},{key:"getValueForCondition",value:function(){return[document.getElementById(this._getPlaceId()).selectedOptions[0].text].concat(Fy(Cy(t.prototype),"getValueForCondition",this).call(this))}},{key:"setValue",value:function(e){Fy(Cy(t.prototype),"setValue",this).call(this,e),X.setFieldValue(this._getPlaceId(),e.getPlace())}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){var e=this;Fy(Cy(t.prototype),"_postRegister",this).call(this),this._createLocationFromBrowserLinkIfNeeded(),this._createHiddenCoordinatesInput(),document.getElementById(this._getPlaceId()).onchange=function(){var t=Qn.getForField(e._getPlaceId()),n=X.getFieldValue(e._getPlaceId());document.getElementById(e._getCoordinatesInputId()).value=n.getType()!==M.TYPE?JSON.stringify(t.getOptionLatAndLonById(n.getOptionId())):null},this._replaceAriaLabelledByAttribute()}},{key:"_createHiddenCoordinatesInput",value:function(){var e=document.createElement("input");e.setAttribute("id",this._getCoordinatesInputId()),e.setAttribute("name",this._getCoordinatesInputId()),e.setAttribute("class","coordinates"),e.setAttribute("hidden",!0),e.value=this._coordinates,document.getElementById(this.getFieldId()).append(e)}},{key:"_createLocationFromBrowserLinkIfNeeded",value:function(){var e;if(this._includeOptionGetLocationFromBrowser){var t=document.createElement("span");t.setAttribute("class","useMyCurrentLocation__icon"),t.setAttribute("aria-hidden","true");var n=document.createElement("span");n.setAttribute("class","useMyCurrentLocation__text"),n.innerText=this.getSetting("locationLinkText");var r=document.createElement("a");r.setAttribute("href","#"),r.addEventListener("click",(function(e){return e.preventDefault()})),r.setAttribute("role","button"),r.setAttribute("class","useMyCurrentLocation"),r.appendChild(t),r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","holder holder--useMyCurrentLocation"),o.appendChild(r),this._attachLocationFromBrowserEvent(r),null===(e=document.getElementById(this._getPlaceId()))||void 0===e||e.parentElement.append(o)}}},{key:"_attachLocationFromBrowserEvent",value:function(e){var t=this;e.onclick=function(){t._useMocks?t._mockGeolocation():navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){return t._setCurrentLocation(e)}))}}},{key:"_setCurrentLocation",value:function(e){var t=e.coords.latitude,n=e.coords.longitude;document.getElementById(this._getCoordinatesInputId()).value=JSON.stringify([t,n]),this._addCurrentLocationOptionToPlaceSubfield(),this._setCurrentLocationToPlaceSubfield(),this.onSelectedSearchField()}},{key:"_addCurrentLocationOptionToPlaceSubfield",value:function(){this._removeAllOptions();var e=new Option(this._currentLocationText,this._currentLocationText,!1,!1);document.getElementById(this._getPlaceId()).append(e)}},{key:"_setCurrentLocationToPlaceSubfield",value:function(){document.getElementById(this._getPlaceId()).value=this._currentLocationText;var e=document.getElementById("select2-"+this._getPlaceId()+"-container");e.innerText=this._currentLocationText,e.title=this._currentLocationText}},{key:"_replaceAriaLabelledByAttribute",value:function(){var e=document.getElementsByClassName("select2Container"+this._getPlaceId())[0];e&&(e.removeAttribute("aria-labelledby"),e.setAttribute("aria-label",this._placeAriaLabel))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getPlaceId(),this._getPlaceSuffix())].concat(Fy(Cy(t.prototype),"_getDepedentFieldsMetadata",this).call(this))}},{key:"_getPlaceId",value:function(){return this.getFieldId()+this._getPlaceSuffix()}},{key:"_getPlaceSuffix",value:function(){return this._getFieldSuffix()+"_place"}},{key:"getSearchFieldId",value:function(){return this._getPlaceId()}},{key:"_getCoordinatesInputId",value:function(){return this.getFieldId()+this._getFieldSuffix()+"_coordinates"}},{key:"_getFieldSuffix",value:function(){return"_location"}},{key:"_mockGeolocation",value:function(){this._setCurrentLocation({coords:{latitude:25.987314,longitude:-80.23227}})}},{key:"_removeAllOptions",value:function(){pjQuery("#"+this._getPlaceId()).find("option:gt(0)").remove()}}],r&&Ty(n.prototype,r),o&&Ty(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(uy);!function(e,t,n){(t=Ry(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ay,"TYPE","LocationDistanceSearchField");const Ny=Ay;function xy(e){return xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(e)}function Ly(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uy(r.key),r)}}function My(e,t,n){return t=By(t),function(e,t){if(t&&("object"===xy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vy()?Reflect.construct(t,n||[],By(e).constructor):t.apply(e,n))}function Vy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vy=function(){return!!e})()}function By(e){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},By(e)}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wy(e,t)}function Uy(e){var t=function(e,t){if("object"!=xy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xy(t)?t:t+""}var Yy=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=My(this,t))._setCountry(e),o._setState(n),o._setCity(r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return JSON.stringify({country:this._country.toString(),state:this._state.toString(),city:this._city.toString()})}},{key:"getCountry",value:function(){return this._country}},{key:"getState",value:function(){return this._state}},{key:"getCity",value:function(){return this._city}},{key:"_setCountry",value:function(e){k.assertIsValid(e),this._country=e}},{key:"_setState",value:function(e){k.assertIsValid(e),this._state=e}},{key:"_setCity",value:function(e){k.assertIsValid(e),this._city=e}}],r&&Ly(n.prototype,r),o&&Ly(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=Uy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Yy,"TYPE","FieldLocationValue");const Hy=Yy;function zy(e){return zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(e)}function Qy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qy(r.key),r)}}function qy(e){var t=function(e,t){if("object"!=zy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zy(t)?t:t+""}var Gy=function(){return e=function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stateFieldId=t,this._stateFieldPlaceholderText=n,this._stateFieldNotRequiredText=r,this._datasource=o},t=[{key:"attachOnCountryChangeHandler",value:function(e,t){var n=this,r=document.getElementById(e),o=document.getElementById(this._stateFieldId);null!==o&&(this._hasElementValue(o)||this._resetStateInputToNotRequiredState(this._stateFieldId),null!==r?(r.onchange=function(){n._updateStateByCountry(r.value)},this._hasElementValue(r)&&!this._hasCountryValueWithoutState(r,o)||this._updateStateByCountry(this._valueIsValid(r.value)?r.value:r.getAttribute("data-hiddenvalue"))):this._updateStateByCountry(t,o.value))}},{key:"attachOnCountryChangeSearchHandler",value:function(e,t){var n=this,r=document.querySelector('[name="'+e+'"]');null!==r&&(r.onchange=function(){n._updateStateByCountryFromDatasource(r.value)},this._valueIsValid(r.value)&&this._updateStateByCountryFromDatasource(r.value,t))}},{key:"attachOnCountryChangeCreateHandler",value:function(e,t,n){var r=this,o=document.querySelector('.countryFieldSelect[data-country-type="'+e+'"]');if(null!==o){var i=document.getElementById(this._stateFieldId);null!==i&&(this._hasElementValue(i)||this._resetStateInputToNotRequiredState(this._stateFieldId),o.onchange=function(){r._updateStateByCountry(o.value)},this._valueIsValid(o.value)&&this._updateStateByCountry(o.value,t))}else this._updateStateByCountry(n,t)}},{key:"_updateStateByCountry",value:function(e,t){null==e||"0"===e||""===e?this._updateDropdownWithOptions([],t):this._updateStateByCountryFromDatasource(e,t)}},{key:"_updateStateByCountryFromDatasource",value:function(e,t){var n=this;this._datasource.fetchOptionsById([e],(function(e){n._updateDropdownWithOptions(e,t)}))}},{key:"_updateDropdownWithOptions",value:function(e,t){var n=document.getElementById(this._stateFieldId);if(null!==n){this._removeOptions(n);var r=this._createOption("",this._stateFieldPlaceholderText);r.setAttribute("selected","selected"),n.append(r);for(var o=0;o<e.length;o++){var i=this._createOption(e[o].id,e[o].name);e[o].id===parseInt(t,10)&&i.setAttribute("selected","selected"),n.append(i)}this._updateAttributesForValidatingRequiredIfNeeded(n,e),this._updateDisableAttributeIfNeeded(n,e)}}},{key:"_updateDisableAttributeIfNeeded",value:function(e,t){if(t.length>0)e.removeAttribute("disabled");else if(0===t.length){e.setAttribute("disabled",!0),this._removeOptions(e);var n=this._createOption("",this._stateFieldNotRequiredText);n.setAttribute("selected","selected"),e.append(n)}}},{key:"_createOption",value:function(e,t){var n=document.createElement("option");return n.setAttribute("class",v.WIZARD_FIELD_INPUT),n.value=e,n.textContent=t,n}},{key:"_removeOptions",value:function(e){for(;e.firstChild;)e.removeChild(e.lastChild)}},{key:"_updateAttributesForValidatingRequiredIfNeeded",value:function(e,t){this._shouldAddAttributesForValidatingRequired(e,t)?(e.setAttribute("aria-required","true"),e.setAttribute("required","")):this._shouldRemoveAttributesForValidatingRequired(e,t)&&(e.removeAttribute("aria-required"),e.removeAttribute("required"))}},{key:"_shouldAddAttributesForValidatingRequired",value:function(e,t){return void 0!==e.getAttribute("aria-labelledby")&&void 0!==e.getAttribute("required")}},{key:"_shouldRemoveAttributesForValidatingRequired",value:function(e,t){return void 0!==e.getAttribute("aria-labelledby")&&void 0===e.getAttribute("required")}},{key:"_resetStateInputToNotRequiredState",value:function(e){var t=document.getElementById(e);this._updateAttributesForValidatingRequiredIfNeeded(t,[]),this._updateDisableAttributeIfNeeded(t,[])}},{key:"_hasCountryValueWithoutState",value:function(e,t){return this._hasElementValue(e)&&!this._hasElementValue(t)}},{key:"_hasElementValue",value:function(e){return this._valueIsValid(e.value)||this._valueIsValid(e.getAttribute("data-hiddenvalue"))}},{key:"_valueIsValid",value:function(e){return null!=e&&"0"!==e&&""!==e}}],t&&Qy(e.prototype,t),n&&Qy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Jy=Gy;function Ky(e){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(e)}function $y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nh(r.key),r)}}function Zy(e,t,n){return t=eh(t),function(e,t){if(t&&("object"===Ky(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xy()?Reflect.construct(t,n||[],eh(e).constructor):t.apply(e,n))}function Xy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xy=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eh(e)}function th(e,t){return th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},th(e,t)}function nh(e){var t=function(e,t){if("object"!=Ky(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ky(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ky(t)?t:t+""}var rh=function(e){function t(e,n,r){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Zy(this,t,[e,n])).getSetting("isStandardized")&&X.isFieldRegistered(o._getStateId())){var i=new Jy(o._getStateId(),o.getSetting("stateFieldPlaceholderText"),o.getSetting("stateFieldNotRequiredText"),Qn.getForField(o._getStateId())),a=void 0!==r?r:o.getSetting("savedCountryId");i.attachOnCountryChangeHandler(o._getCountryId(),a)}return o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&th(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Hy.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){try{var e=X.getFieldValue(this._getCountryId()),t=X.getFieldValue(this._getStateId()),n=X.getFieldValue(this._getCityId());return e.isEmpty()||t.isEmpty()||n.isEmpty()?new M:new Hy(e,t,n)}catch(e){return new M}}},{key:"getValueForCondition",value:function(){return[pjQuery("#"+this._getCountryId()+" option:selected").text(),pjQuery("#"+this._getStateId()).is("select")?pjQuery("#"+this._getStateId()+" option:selected").text():pjQuery("#"+this._getStateId()).val(),pjQuery("#"+this._getCityId()).val()]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),X.setFieldValue(this._getCountryId(),e.getCountry()),X.setFieldValue(this._getStateId(),e.getState()),X.setFieldValue(this._getCityId(),e.getCity())}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return new t(e,this.getFieldSettings(),null)}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){var e=[];return X.isFieldRegistered(this._getCountryId())&&e.push(this._createFieldMetadata(this._getCountryId(),this._getCountrySuffix())),X.isFieldRegistered(this._getStateId())&&e.push(this._createFieldMetadata(this._getStateId(),this._getStateSuffix())),X.isFieldRegistered(this._getCityId())&&e.push(this._createFieldMetadata(this._getCityId(),this._getCitySuffix())),e}},{key:"_getCountryId",value:function(){return this.getFieldId()+this._getCountrySuffix()}},{key:"_getStateId",value:function(){return this.getFieldId()+this._getStateSuffix()}},{key:"_getCityId",value:function(){return this.getFieldId()+this._getCitySuffix()}},{key:"_getCountrySuffix",value:function(){return"_location_country"}},{key:"_getStateSuffix",value:function(){return"_location_state"}},{key:"_getCitySuffix",value:function(){return"_location_city"}},{key:"_attachOnChangeListener",value:function(){}}],r&&$y(n.prototype,r),o&&$y(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Tu);!function(e,t,n){(t=nh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(rh,"TYPE","LocationField");const oh=rh;function ih(e){return ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(e)}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fh(r.key),r)}}function uh(e,t,n){return t=sh(t),function(e,t){if(t&&("object"===ih(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lh()?Reflect.construct(t,n||[],sh(e).constructor):t.apply(e,n))}function lh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lh=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sh(e)}function ch(e,t){return ch=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ch(e,t)}function fh(e){var t=function(e,t){if("object"!=ih(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ih(t)?t:t+""}var ph=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=uh(this,t,[e,n]),new Jy(r.getFieldId(),r.getSetting("stateFieldPlaceholderText"),r.getSetting("stateFieldNotRequiredText"),r._datasource).attachOnCountryChangeCreateHandler(r.getSetting("stateTypeId"),r.getSetting("currentStateSelectedValue"),r.getSetting("savedCountryId")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ch(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}}])&&ah(n.prototype,r),o&&ah(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Gs);!function(e,t,n){(t=fh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ph,"TYPE","LocationStateCreateField");const dh=ph;function yh(e){return yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(e)}function hh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_h(r.key),r)}}function vh(e,t,n){return t=mh(t),function(e,t){if(t&&("object"===yh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bh()?Reflect.construct(t,n||[],mh(e).constructor):t.apply(e,n))}function bh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bh=function(){return!!e})()}function mh(e){return mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mh(e)}function gh(e,t){return gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gh(e,t)}function _h(e){var t=function(e,t){if("object"!=yh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yh(t)?t:t+""}var wh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=vh(this,t,[e,n]),new Jy(r.getFieldId(),r.getSetting("stateFieldSelectAnOptionText"),r.getSetting("stateFieldNotRequiredText"),r._datasource).attachOnCountryChangeSearchHandler(r.getSetting("countryInputName"),r.getSetting("currentStateSelectedValue")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gh(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}}])&&hh(n.prototype,r),o&&hh(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Gs);!function(e,t,n){(t=_h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wh,"TYPE","LocationStateSearchField");const Oh=wh;function Sh(e){return Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(e)}function Eh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ih(r.key),r)}}function Ph(e,t,n){return t=Th(t),function(e,t){if(t&&("object"===Sh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kh()?Reflect.construct(t,n||[],Th(e).constructor):t.apply(e,n))}function kh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kh=function(){return!!e})()}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Th(e)}function jh(e,t){return jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jh(e,t)}function Ih(e){var t=function(e,t){if("object"!=Sh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sh(t)?t:t+""}var Fh=function(e){function t(e,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!PortalNumber.isNumber(n))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");return(r=Ph(this,t,[PortalDate.fromParams(e,n,1)]))._month=n,r._year=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jh(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("yyyy-MM")}},{key:"getMonth",value:function(){return this._month}},{key:"getYear",value:function(){return this._year}}])&&Eh(n.prototype,r),o&&Eh(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(xu);!function(e,t,n){(t=Ih(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fh,"TYPE","FieldMonthAndYearValue");const Ch=Fh;function Dh(e){return Dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(e)}function Rh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ah(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ah(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wh(r.key),r)}}function xh(e,t,n){return t=Vh(t),function(e,t){if(t&&("object"===Dh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lh()?Reflect.construct(t,n||[],Vh(e).constructor):t.apply(e,n))}function Lh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lh=function(){return!!e})()}function Mh(){return Mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vh(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Mh.apply(this,arguments)}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vh(e)}function Bh(e,t){return Bh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bh(e,t)}function Wh(e){var t=function(e,t){if("object"!=Dh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dh(t)?t:t+""}var Uh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=xh(this,t,[e,n]))._fixedDay=r.getSetting("fixedDay"),r._tabIndex=r.getSetting("tabIndex"),r._minDate=r.getSetting("minDate"),r._maxDate=r.getSetting("maxDate"),r._hasDynamicValidation=r.getSetting("hasDynamicValidation"),r._accessibleLabelsDictionary=r.getSetting("accessibleLabelsDictionary"),r._isAccessible=r.getSetting("isAccessible"),r._isRequired=r.getSetting("isRequired"),r._year=null,r._month=null,r._yearInput=null,r._monthInput=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bh(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){this._browserSupportsInputMonth()?this._addMinAndMaxAttributes(this._minDate,this._maxDate,"yyyy-LL"):this._createWidget(),Mh(Vh(t.prototype),"_postRegister",this).call(this)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new M;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]);return new Ch(n,r)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e?e+"-"+PortalString.zeroPad(this._fixedDay,2):""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM")),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow("year",e,n),this._cloneDatasourceForNewTableRow("month",e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("year",e),this._cloneDatasource("month",e),new t(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_createWidget",value:function(){var e=this;pjQuery((function(){e._createFallbackWidget()}))}},{key:"_browserSupportsInputMonth",value:function(){return this._inputSupported("month")&&!this._isSafariBrowser()}},{key:"_elementAllowsChangingType",value:function(e){return Vt.prototype._elementAllowsChangingType.call(this,e)&&this._browserSupportsInputMonth()}},{key:"_createFallbackWidget",value:function(){var e=this._hideInput(document.getElementById(this._fieldId));if(e){var t=new PortalDate(this._buildDateTime(this._minDate)).toDate(),n=new PortalDate(this._buildDateTime(this._maxDate)).toDate();this._initDefaultValues(e);var r=this._createInput(t,n);e.parentNode.appendChild(r)}}},{key:"_initDefaultValues",value:function(e){this._year=this._month=0;var t=e.value||e.getAttribute("data-hiddenValue");if(t){var n=t.split("-");this._year=PortalString.toInt(n[0]),this._month=PortalString.toInt(n[1])}}},{key:"_createInput",value:function(e,t){var n,r=this;return this._yearInput=this._createYearInput(this._fieldId,this._year,this._tabIndex,e,t),this._yearInput.onchange=function(){r._year=this.value,r._updateHiddenInputValue()},this._monthInput=this._createMonthInput(this._fieldId,this._month,this._year,this._tabIndex,e,t),this._monthInput.onchange=function(){r._month=this.value,r._updateHiddenInputValue()},this._isAccessible?(n=this._createWidgetWithLabelsFromInputs(this._yearInput,this._monthInput),this._wrapFieldAsFieldSetWithLegend()):n=this._createWidgetWithoutLabelsFromInputs(this._yearInput,this._monthInput),n}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._year+"-"+this._normalize(this._month),X.onFieldValueChange(this._fieldId)}},{key:"_createWidgetWithLabelsFromInputs",value:function(e,t){var n=document.createElement("div");n.className=v.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS;var r=document.createElement("div");r.className="MonthAndYear_MonthWrapper",r.appendChild(this._createLabelFor(t.id,this._accessibleLabelsDictionary.monthLabel)),r.appendChild(t);var o=document.createElement("div");return o.className="MonthAndYear_YearWrapper",o.appendChild(this._createLabelFor(e.id,this._accessibleLabelsDictionary.yearLabel)),o.appendChild(e),n.appendChild(o),n.appendChild(r),n}},{key:"_wrapFieldAsFieldSetWithLegend",value:function(){var e=pjQuery("#"+this._fieldId+"-accessibleContainer");e.children().appendTo(pjQuery("<fieldset/>").insertBefore(e)),e.remove();var t=this;pjQuery("#"+this._fieldId+"-label").replaceWith((function(){var e=this.textContent;e&&t._isRequired&&(e=e.substring(0,e.length-2),e+=pjQuery("<div/>",{}).append(pjQuery("<span/>",{"aria-hidden":!0,class:"labelRequiredIcon",text:" *"})).html());var n=v.WIZARD_FIELD_LABEL+" "+v.WIZARD_FIELD_LABEL_TEMPLATES_CLASS;return pjQuery("<div/>",{}).append(pjQuery("<legend/>",{id:this.id,class:n,html:e})).html()}))}},{key:"_createWidgetWithoutLabelsFromInputs",value:function(e,t){var n=document.createElement("div");return n.appendChild(e),n.appendChild(t),n}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility "+v.WIZARD_FIELD_SUBFIELD_LABEL+" "+v.WIZARD_FIELD_SUBFIELD_LABEL_TEMPLATES_CLASS),n.textContent=t,n}},{key:"_populateSelectElementFromDatasource",value:function(e,t,n,r,o,i){var a=this;if(e){var u,l=t.getOptions(),s=Rh(l=this._filterOptionsIfNeeded(l,r,o,i));try{var c=function(){var t=u.value;e.appendChild(a._createOptionElement(parseInt(t.id),n,(function(){return t.name})))};for(s.s();!(u=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}}}},{key:"_filterOptionsIfNeeded",value:function(e,t,n,r){if(!this._hasDynamicValidation)return e;switch(r){case"year":var o=t.getFullYear(),i=n.getFullYear();return e.filter((function(e){return 0===e.id||e.id>=o&&e.id<=i}));case"month":var a=t.getMonth()+1,u=n.getMonth()+1;return e.filter((function(e){return 0===e.id||e.id>=a&&e.id<=u}));default:return e}}}],r&&Nh(n.prototype,r),o&&Nh(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qu);!function(e,t,n){(t=Wh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Uh,"TYPE","MonthAndYearDateField");const Yh=Uh;function Hh(e){return Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(e)}function zh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kh(r.key),r)}}function Qh(e,t,n){return t=Gh(t),function(e,t){if(t&&("object"===Hh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qh()?Reflect.construct(t,n||[],Gh(e).constructor):t.apply(e,n))}function qh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qh=function(){return!!e})()}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gh(e)}function Jh(e,t){return Jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jh(e,t)}function Kh(e){var t=function(e,t){if("object"!=Hh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hh(t)?t:t+""}var $h=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Qh(this,t,[e,n]),(new Lr).addEmptyHiddenInputBeforeSubmit(r,r._getFieldElement()[0]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jh(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Or.TYPE,Cr.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElements();if(0===e.length)return new M;var t=[];return e.each((function(){t.push(Wn.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new Wn(t)}},{key:"getValueForCondition",value:function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Or.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Cr.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElements",value:function(){return this._getFieldElement().find("option:selected")}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>",{class:v.WIZARD_FIELD_INPUT}).attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return!1}},{key:"_prePopulateIfOnlyOneOption",value:function(){}},{key:"_getDataHiddenValue",value:function(e){var t=e.attr("data-hiddenValue");return t?t.split(","):[]}}],r&&zh(n.prototype,r),o&&zh(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(nr);!function(e,t,n){(t=Kh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($h,"TYPE","MultipleSelectField");const Zh=$h;function Xh(e){return Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(e)}function ev(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tv(r.key),r)}}function tv(e){var t=function(e,t){if("object"!=Xh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xh(t)?t:t+""}function nv(e,t,n){return t=ov(t),function(e,t){if(t&&("object"===Xh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rv()?Reflect.construct(t,n||[],ov(e).constructor):t.apply(e,n))}function rv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rv=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ov(e)}function iv(e,t){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iv(e,t)}var av=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nv(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}(t,e),n=t,r=[{key:"_isValidValue",value:function(e){return!0===/^-?\d*(\.\d*)?$/.test(e)}}],r&&ev(n.prototype,r),o&&ev(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(yd);const uv=av;function lv(e){return lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(e)}function sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vv(r.key),r)}}function cv(e,t,n){return t=dv(t),function(e,t){if(t&&("object"===lv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fv()?Reflect.construct(t,n||[],dv(e).constructor):t.apply(e,n))}function fv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fv=function(){return!!e})()}function pv(){return pv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},pv.apply(this,arguments)}function dv(e){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dv(e)}function yv(e,t){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yv(e,t)}function hv(e,t,n){return(t=vv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vv(e){var t=function(e,t){if("object"!=lv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lv(t)?t:t+""}var bv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hv(r=cv(this,t,[e,n]),"_inputRestrictor",void 0),r._inputRestrictor=r._buildInputRestrictor(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yv(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_postRegister",value:function(){pv(dv(t.prototype),"_postRegister",this).call(this),this._updateInputTypeIfFirefox(),this._inputRestrictor.restrictInput(this._getFieldElement().get(0))}},{key:"_buildInputRestrictor",value:function(){return new uv}},{key:"_updateInputTypeIfFirefox",value:function(){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(document.getElementById(this.getFieldId()).type="text")}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}])&&sv(n.prototype,r),o&&sv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(bu);hv(bv,"TYPE","NumberField");const mv=bv;function gv(e){return gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(e)}function _v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wv(r.key),r)}}function wv(e){var t=function(e,t){if("object"!=gv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gv(t)?t:t+""}function Ov(e,t,n){return t=Ev(t),function(e,t){if(t&&("object"===gv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sv()?Reflect.construct(t,n||[],Ev(e).constructor):t.apply(e,n))}function Sv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Sv=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ev(e)}function Pv(e,t){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pv(e,t)}var kv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ov(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pv(e,t)}(t,e),n=t,(r=[{key:"_isValidValue",value:function(e){return!0}},{key:"restrictInput",value:function(e){}}])&&_v(n.prototype,r),o&&_v(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(yd);const Tv=kv;function jv(e){return jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(e)}function Iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fv(r.key),r)}}function Fv(e){var t=function(e,t){if("object"!=jv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jv(t)?t:t+""}function Cv(e,t,n){return t=Av(t),function(e,t){if(t&&("object"===jv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dv()?Reflect.construct(t,n||[],Av(e).constructor):t.apply(e,n))}function Dv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dv=function(){return!!e})()}function Rv(){return Rv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Av(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Rv.apply(this,arguments)}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Av(e)}function Nv(e,t){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nv(e,t)}var xv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Cv(this,t,[e,n]))._rangeMinValue=r.getSetting("rangeMinValue"),r._rangeMaxValue=r.getSetting("rangeMaxValue"),r._clearText=r.getSetting("clearText"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nv(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){this._createCustomWidgetAndHideNumberInput(),this.getValue()&&!this.getValue().isEmpty()&&this._setValue(this.getValue().getValue()),Rv(Av(t.prototype),"_postRegister",this).call(this)}},{key:"_createCustomWidgetAndHideNumberInput",value:function(){this._hideInput(pjQuery("#"+this._fieldId)).parent().append(this._createCustomGraphicInput())}},{key:"_createCustomGraphicInput",value:function(){throw new Error("notImplementedError")}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._setValue(e.getValue())}},{key:"_setValue",value:function(){throw new Error("notImplementedError")}},{key:"_setValueToOriginalInput",value:function(e){Rv(Av(t.prototype),"setValue",this).call(this,new rn(e))}},{key:"_hideInput",value:function(e){var t;if(e){t=pjQuery("<input/>");var n=["data-hiddenType","data-required"];pjQuery.each(e[0].attributes,(function(r,o){n.includes(o.name)||t.attr(o.name,e.attr(o.name))})),t.attr("type","hidden"),t.attr("hidden","hidden");var r=e.parent();e.remove(),r.append(t)}return t}},{key:"_createDivElement",value:function(e,t){return pjQuery("<div/>",{class:e,tabindex:t})}},{key:"_buildInputRestrictor",value:function(){return new Tv}}],r&&Iv(n.prototype,r),o&&Iv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(mv);const Lv=xv;function Mv(e){return Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(e)}function Vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zv(r.key),r)}}function Bv(e,t,n){return t=Yv(t),function(e,t){if(t&&("object"===Mv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wv()?Reflect.construct(t,n||[],Yv(e).constructor):t.apply(e,n))}function Wv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wv=function(){return!!e})()}function Uv(){return Uv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Uv.apply(this,arguments)}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yv(e)}function Hv(e,t){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hv(e,t)}function zv(e){var t=function(e,t){if("object"!=Mv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mv(t)?t:t+""}var Qv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bv(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hv(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_createCustomGraphicInput",value:function(){var e=this._createDivElement(v.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS),t=this._createDivElement("progress-bar "+v.WIZARD_FIELD_INPUT_CONTAINER);return t.append(this._createInput()),t.append(this._createLegendElements()),e.append(t),e.append(this._createClearElement()),e}},{key:"_createInput",value:function(){var e=this,t=pjQuery("<input/>",{id:this._fieldId+"_range",type:"range",class:"progress-bar__selector "+v.WIZARD_FIELD_INPUT,min:this._rangeMinValue,max:this._rangeMaxValue,value:this._isEmpty()?this._rangeMinValue:Math.round(this.getValue().getValue()),"aria-labelledby":this._fieldId+"-label"});return t.on("input",(function(){e._updateLegendValues(pjQuery(this).val())})),t.on("change",(function(){e._setValueFromRangeValue(pjQuery(this).val()),e._updateLegendValues(pjQuery(this).val())})),t}},{key:"_createClearElement",value:function(){var e=this,t=pjQuery("<a/>",{id:this._fieldId+"_clear",href:"#",class:"link "+v.WIZARD_FIELD_LINK,text:this._clearText,tabindex:0,role:"button"});return t.click((function(t){t.preventDefault(),e._clearValue()})),t}},{key:"_createLegendElements",value:function(){var e={id:this._fieldId+"_legend",class:"progress-bar__indicator",tabindex:0};return this._isEmpty()&&(e.hidden="hidden"),pjQuery("<div/>",e).append(this._createProgressLegend(),this._createTotalLegend())}},{key:"_createProgressLegend",value:function(){return pjQuery("<span/>",{id:this._fieldId+"_progressLegend",class:"progress-bar__indicator__current",text:this.getValue()&&!this.getValue().isEmpty()?this.getValue().getValue()+"%":""})}},{key:"_createTotalLegend",value:function(){return pjQuery("<span/>",{id:this._fieldId+"_totalLegend",class:"progress-bar__indicator__total",text:this._rangeMaxValue})}},{key:"_clearValue",value:function(){this._getFieldElement().val(null),pjQuery("#"+this._fieldId+"_range").val(this._rangeMinValue),this._updateLegendValues(null)}},{key:"_setValue",value:function(e){pjQuery("#"+this._fieldId+"_range").val(e),pjQuery("#"+this._fieldId+"_range").change()}},{key:"_setValueFromRangeValue",value:function(e){Uv(Yv(t.prototype),"_setValueToOriginalInput",this).call(this,this._roundValue(e))}},{key:"_updateLegendValues",value:function(e){e=this._roundValue(e),pjQuery("#"+this._fieldId+"_progressLegend").text(this._isEmpty()?"":e);var t=document.getElementById(this._fieldId+"_legend");t.style.left=this._isEmpty()?null:"calc("+e+"% + "+(8-.15*e)+"px)",this._isEmpty()?t.setAttribute("hidden","hidden"):t.removeAttribute("hidden")}},{key:"_roundValue",value:function(e){return(e=Math.round(e))<this._rangeMinValue?this._rangeMinValue:e}},{key:"_getPercentageByNumberValue",value:function(e){return Math.round(100*e/this._rangeMaxValue)}},{key:"_isEmpty",value:function(){return!this.getValue()||this.getValue().isEmpty()}}],r&&Vv(n.prototype,r),o&&Vv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Lv);!function(e,t,n){(t=zv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Qv,"TYPE","NumberProgressField");const qv=Qv;n(34867);function Gv(e){return Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(e)}function Jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tb(r.key),r)}}function Kv(e,t,n){return t=Xv(t),function(e,t){if(t&&("object"===Gv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$v()?Reflect.construct(t,n||[],Xv(e).constructor):t.apply(e,n))}function $v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($v=function(){return!!e})()}function Zv(){return Zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Zv.apply(this,arguments)}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xv(e)}function eb(e,t){return eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eb(e,t)}function tb(e){var t=function(e,t){if("object"!=Gv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gv(t)?t:t+""}var nb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Kv(this,t,[e,n]))._numRatings=r.getSetting("numRatings"),r._numDecimals=r.getSetting("numDecimals"),r._starsText=r.getSetting("starsText"),r._value=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eb(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_createCustomGraphicInput",value:function(){var e=this._createDivElement(this._fieldId+"_graphicContainer "+v.WIZARD_DIV_AFTER_DESCRIPTION_TEMPLATES_CLASS);return e.append(this._createIcons()),e.append(this._createClearElement()),e.attr("aria-labelledby",this._fieldId+"-label"),e.attr("tabindex",0),e}},{key:"_createIcons",value:function(){for(var e=this._createDivElement(this._fieldId+"_containerIcons stars-rating",-1),t=this._numRatings;t>=0;t--){var n=this._createIconElement(t);e.append(n.children())}return e}},{key:"_createIconElement",value:function(e){var t=this,n=this._createDivElement("iconContainer"),r=pjQuery("<input/>",{id:this._fieldId+"_icon_"+e,type:"radio",name:this._fieldId+"_radioIconStar",value:e,class:"visibility--hidden--visually",tabindex:0});r.change((function(){this.checked&&t._setValueFromRatingValue(pjQuery(this).val())}));var o=pjQuery("<label/>",{id:this._fieldId+"_iconLabel_"+e,for:this._fieldId+"_icon_"+e,class:e?"stars-rating__star "+v.WIZARD_FIELD_INPUT:"stars-rating__star--zero",tabindex:-1}).append(pjQuery("<span/>",{text:this._getNumberValueFromRating(e)+" "+this._starsText,class:e?"visibility--hidden--visually":"stars-rating__star--zero--hidden"}));return n.append(r,o),n}},{key:"_createClearElement",value:function(){var e=this,t=pjQuery("<a/>",{id:this._fieldId+"_clear",href:"#",class:"link "+v.WIZARD_FIELD_LINK,text:this._clearText,tabindex:0,role:"button"});return t.click((function(t){t.preventDefault(),e._clearValue()})),t}},{key:"_isEmptyValue",value:function(){return void 0===this._value||null===this._value}},{key:"_setValueFromRatingValue",value:function(e){this._value=this._getNumberValueFromRating(e),Zv(Xv(t.prototype),"_setValueToOriginalInput",this).call(this,Number(this._value))}},{key:"_setValue",value:function(e){var t=this._getRatingFromNumberValue(e);t>=0&&(pjQuery("#"+this._fieldId+"_icon_"+t).prop("checked",!0),pjQuery("#"+this._fieldId+"_icon_"+t).change())}},{key:"_clearValue",value:function(){this._value=null,this._getFieldElement().val(null),pjQuery("#"+this._fieldId+"_icon_0").prop("checked",!0),this._triggerEvent("input")}},{key:"_getNumberValueFromRating",value:function(e){var t=e/this._numRatings*(this._rangeMaxValue-this._rangeMinValue);return null===(t=Number(this._rangeMinValue)+t)?t:this._removeInsignificantTrailingDecimals(Number(t).toFixed(this._numDecimals))}},{key:"_getRatingFromNumberValue",value:function(e){if(null===e)return e;var t=Number(e),n=Number(this._rangeMinValue),r=Number(this._rangeMaxValue),o=Number(this._numRatings);if(t<=n)return n;var i=Math.abs(n-t);return i=i/(r-n)*o,Math.round(i)}},{key:"_removeInsignificantTrailingDecimals",value:function(e){return Number(e).toString()}}],r&&Jv(n.prototype,r),o&&Jv(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Lv);!function(e,t,n){(t=tb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nb,"TYPE","NumberStarsField");const rb=nb;function ob(e){return ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(e)}function ib(){ib=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==ob(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ob(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ab(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function ub(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ab(i,r,o,a,u,"next",e)}function u(e){ab(i,r,o,a,u,"throw",e)}a(void 0)}))}}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,db(r.key),r)}}function sb(e,t,n){return t=fb(t),function(e,t){if(t&&("object"===ob(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cb()?Reflect.construct(t,n||[],fb(e).constructor):t.apply(e,n))}function cb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cb=function(){return!!e})()}function fb(e){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fb(e)}function pb(e,t){return pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pb(e,t)}function db(e){var t=function(e,t){if("object"!=ob(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ob(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ob(t)?t:t+""}var yb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=sb(this,t,[e,n]))._filename=r.getSetting("filename"),r._readyToSubmit=!1,r._setActionBeforeSubmit(),r._preventOpeningFileUploadWindow(),r._initLastPdfSaved(),r._setValidationsBeforeSubmit(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pb(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"onBeforeSubmitAutoPartialSave",value:(a=ub(ib().mark((function e(){var t;return ib().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._saveCurrentPdfFile();case 2:(t=e.sent)&&this._hasFileBeenChanged(t)&&(this._setFileValueInFileInput(t),this._lastPdfSaved=t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getPdfDocument",value:function(){var e=this._getPdfViewerApplication();return e?e.pdfDocument:null}},{key:"onPdfDocumentIsReady",value:function(){var e=this;return new Promise((function(t){if(e.getPdfDocument())return t();e._onPdfApplicationIsReady().then((function(){return e._getPdfViewerApplication().initializedPromise})).then((function(){return e._getPdfViewerApplication().pdfLoadingTask.promise})).then(t)}))}},{key:"_onPdfApplicationIsReady",value:function(){var e=this;return new Promise((function(t){if(e._getPdfViewerApplication())return t();document.addEventListener("webviewerloaded",t)}))}},{key:"_setValidationsBeforeSubmit",value:function(){var e=this;Dr.default.getInstance().addValidationBeforeSubmit((function(){return e.isValid()}),this.getFormContainer())}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_setActionBeforeSubmit",value:function(){Dr.default.getInstance().addActionBeforeSubmit(this.onBeforeSubmitAutoPartialSave.bind(this),this.getFormContainer())}},{key:"_saveCurrentPdfFile",value:function(){var e=this,t=this.getPdfDocument();return t?t.saveDocument().then((function(t){return e._createFileFromArrayBuffer(t)})):Promise.resolve(null)}},{key:"_getPdfViewerApplication",value:function(){if(!this._pdfViewerApplication){var e=document.getElementById(this.getFieldId()+"-iframe");this._pdfViewerApplication=e?e.contentWindow.PDFViewerApplication:null}return this._pdfViewerApplication}},{key:"_createFileFromArrayBuffer",value:function(e){var t=new Blob([e],{type:"application/pdf"});return new File([t],this._filename,{type:"application/pdf"})}},{key:"_setFileValueInFileInput",value:function(e){var t=new DataTransfer;t.items.add(e);var n=document.getElementById(this.getFieldId());n&&(n.files=t.files)}},{key:"_initLastPdfSaved",value:(i=ub(ib().mark((function e(){return ib().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onPdfDocumentIsReady();case 2:return e.next=4,this._saveCurrentPdfFile();case 4:this._lastPdfSaved=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_hasFileBeenChanged",value:function(e){return!this._lastPdfSaved||e.size!==this._lastPdfSaved.size}}],r&&lb(n.prototype,r),o&&lb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(Xf);!function(e,t,n){(t=db(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yb,"TYPE","PdfEditor");const hb=yb;function vb(e){return vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vb(e)}function bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eb(r.key),r)}}function mb(e,t,n){return t=wb(t),function(e,t){if(t&&("object"===vb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gb()?Reflect.construct(t,n||[],wb(e).constructor):t.apply(e,n))}function gb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gb=function(){return!!e})()}function _b(){return _b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wb(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_b.apply(this,arguments)}function wb(e){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wb(e)}function Ob(e,t){return Ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ob(e,t)}function Sb(e,t,n){return(t=Eb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eb(e){var t=function(e,t){if("object"!=vb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vb(t)?t:t+""}var Pb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sb(r=mb(this,t,[e,n]),"_inputRestrictor",void 0),r._inputRestrictor=new Sd,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ob(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[rn.TYPE]}},{key:"_postRegister",value:function(){_b(wb(t.prototype),"_postRegister",this).call(this),this._inputRestrictor.restrictInput(this._getFieldElement().get(0))}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}}])&&bb(n.prototype,r),o&&bb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(lu);Sb(Pb,"TYPE","PersonIdField");const kb=Pb;function Tb(e){return Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(e)}function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ab(r.key),r)}}function Ib(e,t,n){return t=Db(t),function(e,t){if(t&&("object"===Tb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fb()?Reflect.construct(t,n||[],Db(e).constructor):t.apply(e,n))}function Fb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fb=function(){return!!e})()}function Cb(){return Cb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Db(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Cb.apply(this,arguments)}function Db(e){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Db(e)}function Rb(e,t){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rb(e,t)}function Ab(e){var t=function(e,t){if("object"!=Tb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tb(t)?t:t+""}var Nb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ib(this,t,[e,n]))._hasPhotoPreviewByDefault=r.getSetting("hasPhotoPreviewByDefault"),r._isSocialLoginWithPhoto=r.getSetting("isSocialLoginWithPhoto"),r._cancelPhotoUploadText=r.getSetting("cancelPhotoUploadText"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rb(e,t)}(t,e),n=t,(r=[{key:"_postRegister",value:function(){this._hasPhotoPreviewByDefault&&!this._shouldHideFileInputByDefault&&this._addFileInputListeners(),this._isSocialLoginWithPhoto&&this._showPhotoFileInputCancelButton(),this._resetPreviewAndFileLoaders(),Cb(Db(t.prototype),"_postRegister",this).call(this)}},{key:"getType",value:function(){return t.TYPE}},{key:"setSocialLoginPhoto",value:function(e){if(this._hasPreviewEnabled()){var t=document.getElementById("fileInputContainer_"+this._fieldId),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("id","photoDefaultPreviewImage_"+this._fieldId),n.setAttribute("value",e);var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("class","photoFieldIsSocialLogin"),r.setAttribute("value","1"),t&&(t.append(n),t.append(r)),this._setPreview(e),this._showPhotoFileInputCancelButton()}}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_hasDefaultPreviewImage",value:function(){return this._getDefaultPreviewImageElement()}},{key:"_getDefaultPreviewImageElement",value:function(){return document.getElementById("photoDefaultPreviewImage_"+this._fieldId)}},{key:"_getDefaultPreviewValue",value:function(){var e=this._getDefaultPreviewImageElement();return e?e.getAttribute("value"):null}},{key:"_getPreviewContainerElement",value:function(){return document.getElementById("photoPreviewContainer_"+this._fieldId)}},{key:"_setPreviewAsUnselected",value:function(){var e=this._getPreviewContainerElement();e&&(e.classList.remove("photoPreviewSelected"),e.classList.add("photoPreviewUnselected"))}},{key:"_setPreviewAsSelected",value:function(){var e=this._getPreviewContainerElement();e&&(e.classList.remove("photoPreviewUnselected"),e.classList.add("photoPreviewSelected"))}},{key:"_onFileChanged",value:function(){var e=this,t=0,n=this._getCurrentFiles();if(n&&n.length>0&&(t=n[0].size),t>0&&t>this._maxFileSize&&alert(this._errorToShowIfSizeExceeded),n&&n[0]){this._resetPreviewAndFileLoaders(!1),this._showPhotoFileInputCancelButton(),this._onPhotoFileInputNewPhotoSelected();var r=new FileReader;r.onload=function(t){return e._setPreview(t.target.result)},r.readAsDataURL(n[0])}}},{key:"_resetPreviewAndFileLoaders",value:function(e){void 0===e&&(e=!0),e&&this._removePhotoFileInputUploadedFile(),this._fileInfoCleaner.cleanExternalFileInfo(),this._hasDefaultPreviewImage()?this._setPreview(this._getDefaultPreviewValue()):(this._setPreviewAsUnselected(),this._removePreviewImg())}},{key:"_removePhotoFileInputUploadedFile",value:function(){this._getFieldElement().val(null),this._hidePhotoFileInputCancelButton()}},{key:"_hidePhotoFileInputCancelButton",value:function(){if(!this._existsSocialLoginLoadedPhoto()){var e=this._getCancelButtonElement();e&&(e.style.display="none")}}},{key:"_existsSocialLoginLoadedPhoto",value:function(){return document.querySelector(".photoFieldIsSocialLogin")&&this._hasDefaultPreviewImage()}},{key:"_removePreviewImg",value:function(){var e=this._getPhotoPreviewImgElement();e&&e.remove()}},{key:"_setPreview",value:function(e){this._setPreviewAsSelected(),this._removePreviewImg();var t=document.createElement("img");t.setAttribute("id","photoPreview_"+this._fieldId),t.setAttribute("class","photoInputPreview"),t.setAttribute("src",e),t.setAttribute("alt","User photo preview");var n=this._getPreviewContainerElement();n&&n.append(t)}},{key:"_getCancelButtonElement",value:function(){var e,t=document.getElementById("fileInputCancelButton_"+this._fieldId);return t||this._shouldHideFileInputByDefault||(t=this._buildCancelButtonElement(),null===(e=document.querySelector("#fileInputContainer_".concat(this._fieldId," .photoInputPreviewWrapper")))||void 0===e||e.append(t)),t}},{key:"_buildCancelButtonElement",value:function(){var e=document.createElement("button");return e.id="fileInputCancelButton_"+this._fieldId,e.className="fileInputCancelButton",e.type="button",e.innerText=this._cancelPhotoUploadText,e}},{key:"_showPhotoFileInputCancelButton",value:function(){var e=this._getCancelButtonElement();e&&(e.style.display="")}},{key:"_onPhotoFileInputNewPhotoSelected",value:function(){this._existsSocialLoginLoadedPhoto()&&this._disableSocialLoginPhotoAutoImportAndRemoveDefaultImage();var e=this._getUploadedFileDiv();e&&(e.style.display="none")}},{key:"_disableSocialLoginPhotoAutoImportAndRemoveDefaultImage",value:function(){var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","photoFieldSocialAutoImportPhotoRemoved"),e.setAttribute("value","1");var t=document.getElementById("fileInputContainer_"+this._fieldId);t&&t.append(e),document.querySelectorAll(".photoFieldIsSocialLogin").forEach((function(e){return e.remove()}));var n=this._getDefaultPreviewImageElement();n&&n.remove()}},{key:"_addFileInputListeners",value:function(){var e=this,t=this._getCancelButtonElement();t&&t.addEventListener("click",(function(){return e._onPhotoFileInputCancelButtonClicked()})),this._getFieldElement().on("click",(function(){return e._resetPreviewAndFileLoaders()}))}},{key:"_getPhotoPreviewValue",value:function(){var e=this._getPhotoPreviewImgElement();return e?e.getAttribute("src"):""}},{key:"_onPhotoFileInputCancelButtonClicked",value:function(){this._existsSocialLoginLoadedPhoto()&&this._currentPhotoPreviewIsTheSameAsTheDefaultOne()&&this._disableSocialLoginPhotoAutoImportAndRemoveDefaultImage(),this._resetPreviewAndFileLoaders();var e=this._getUploadedFileDiv();e&&(e.style.display="block")}},{key:"_currentPhotoPreviewIsTheSameAsTheDefaultOne",value:function(){return this._getPhotoPreviewImgElement()&&this._getDefaultPreviewValue()==this._getPhotoPreviewValue()}},{key:"_getPhotoPreviewImgElement",value:function(){return document.getElementById("photoPreview_"+this._fieldId)}},{key:"_hasPreviewEnabled",value:function(){return this._getPreviewContainerElement()}},{key:"_getRemoveButtonClickEventListener",value:function(){var e=this;return function(){var t;e._setPreviewAsUnselected();var n=e._getPreviewContainerElement();null===(t=e._getDefaultPreviewImageElement())||void 0===t||t.remove(),n&&(n.innerHTML="")}}}])&&jb(n.prototype,r),o&&jb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Xf);!function(e,t,n){(t=Ab(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Nb,"TYPE","PhotoField");const xb=Nb;function Lb(e){return Lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(e)}function Mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yb(r.key),r)}}function Vb(e,t,n){return t=Wb(t),function(e,t){if(t&&("object"===Lb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bb()?Reflect.construct(t,n||[],Wb(e).constructor):t.apply(e,n))}function Bb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bb=function(){return!!e})()}function Wb(e){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wb(e)}function Ub(e,t){return Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ub(e,t)}function Yb(e){var t=function(e,t){if("object"!=Lb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lb(t)?t:t+""}var Hb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vb(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ub(e,t)}(t,e),n=t,(r=[{key:"_shouldHaveHiddenElementIndicator",value:function(){return!1}},{key:"getType",value:function(){return this.TYPE}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){}}])&&Mb(n.prototype,r),o&&Mb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=Yb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Hb,"TYPE","PlainTextField");const zb=Hb;function Qb(e){return Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(e)}function qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zb(r.key),r)}}function Gb(e,t,n){return t=Kb(t),function(e,t){if(t&&("object"===Qb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jb()?Reflect.construct(t,n||[],Kb(e).constructor):t.apply(e,n))}function Jb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jb=function(){return!!e})()}function Kb(e){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kb(e)}function $b(e,t){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$b(e,t)}function Zb(e){var t=function(e,t){if("object"!=Qb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qb(t)?t:t+""}var Xb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Gb(this,t,[n]))._setPostalCode(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$b(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return JSON.stringify({postalCode:this._postalCode.toString(),radius:this._radius.toString()})}},{key:"getPostalCode",value:function(){return this._postalCode}},{key:"_setPostalCode",value:function(e){k.assertIsValid(e),this._postalCode=e}}])&&qb(n.prototype,r),o&&qb(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(vy);!function(e,t,n){(t=Zb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Xb,"TYPE","FieldPostalCodeRadiusValue");const em=Xb;function tm(e){return tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(e)}function nm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lm(r.key),r)}}function rm(e,t,n){return t=am(t),function(e,t){if(t&&("object"===tm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,om()?Reflect.construct(t,n||[],am(e).constructor):t.apply(e,n))}function om(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(om=function(){return!!e})()}function im(){return im="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=am(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},im.apply(this,arguments)}function am(e){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},am(e)}function um(e,t){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},um(e,t)}function lm(e){var t=function(e,t){if("object"!=tm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tm(t)?t:t+""}var sm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rm(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&um(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[em.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=X.getFieldValue(this._getPostalCodeId()),t=X.getFieldValue(this.getRadiusId());return e.isEmpty()||t.isEmpty()?new M:new em(e,t)}},{key:"getValueForCondition",value:function(){return[document.getElementById(this._getPostalCodeId()).selectedOptions[0].text].concat(im(am(t.prototype),"getValueForCondition",this).call(this))}},{key:"setValue",value:function(e){im(am(t.prototype),"setValue",this).call(this,e),X.setFieldValue(this._getPostalCodeId(),e.getPostalCode())}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getPostalCodeId(),this._getPostalCodeSuffix())].concat(im(am(t.prototype),"_getDepedentFieldsMetadata",this).call(this))}},{key:"_getPostalCodeId",value:function(){return this.getFieldId()+this._getPostalCodeSuffix()}},{key:"_getPostalCodeSuffix",value:function(){return this._getFieldSuffix()+"_postalCode"}},{key:"_getFieldSuffix",value:function(){return""}},{key:"getSearchFieldId",value:function(){return this._getPostalCodeId()}}],r&&nm(n.prototype,r),o&&nm(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(uy);!function(e,t,n){(t=lm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sm,"TYPE","PostalCodeRadiusField");const cm=sm;function fm(e){return fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(e)}function pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bm(r.key),r)}}function dm(e,t,n){return t=hm(t),function(e,t){if(t&&("object"===fm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ym()?Reflect.construct(t,n||[],hm(e).constructor):t.apply(e,n))}function ym(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ym=function(){return!!e})()}function hm(e){return hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hm(e)}function vm(e,t){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vm(e,t)}function bm(e){var t=function(e,t){if("object"!=fm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fm(t)?t:t+""}var mm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dm(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vm(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[Sn.TYPE,Gt.TYPE]}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElement();if(null===e||""===e.value)return new M;var t=e.value,n=e.dataset.optionName.toString();return new Dn(t,n)}},{key:"getValueForCondition",value:function(){return this._getSelectedElement().value}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="radio"]',this._getFieldElement());switch(e.getType()){case Sn.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0).trigger("change")}));break;case Gt.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0).trigger("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElement",value:function(){return document.getElementById(this.getFieldId()).querySelector("input[type=radio]:checked")}},{key:"_getOptionElements",value:function(){return document.getElementById(this.getFieldId()).querySelectorAll("input[type=radio]")}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("change","input",(function(){e._updateAccessibilityAttributesOnSelect(),X.onFieldValueChange(e.getFieldId())}))}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement();e.forEach((function(e){var r=pjQuery("<input />").attr("id",t._buildOptionHtmlId(e.id)).attr("type","radio").attr("role","radio").attr("name",t._fieldId).attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&r.attr("checked","checked");var o=pjQuery("<label>").attr("for",t._buildOptionHtmlId(e.id)).append(r,e.name,pjQuery('<div class="cb" />'));n.append(o)})),this._attachOnChangeListener()}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("label, div.cb").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){var e=this._getOptionElements();1===e.length&&this.setValue(new Sn(e[0].value))}},{key:"_updateAccessibilityAttributesOnSelect",value:function(){var e=this._getOptionElements(),t=this._getSelectedElement();e.forEach((function(e){e.setAttribute("aria-checked","false")})),t.setAttribute("aria-checked","true"),this._getFieldElement()[0].setAttribute("aria-activedescendant",t.id)}}],r&&pm(n.prototype,r),o&&pm(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(nr);!function(e,t,n){(t=bm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(mm,"TYPE","RadioButtonListField");const gm=mm;var _m=n(79758);function wm(e){return wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(e)}function Om(){}Om.prototype.element=function(e,t,n){var r=document.createElement(e);for(var o in t){var i=t[o];if("style"==o&&"object"===wm(i))for(var a in i){var u=a.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}));r.style[u]=i[a]}else"function"==typeof i&&"on"===o.substr(0,2)?r.addEventListener(o.substr(2),i,!1):r.setAttribute(o,i)}if(n){var l=this;n.map((function(e){r.appendChild(l._getDomNodeFromChild(e))}))}return r},Om.prototype._getDomNodeFromChild=function(e){return"string"==typeof e?document.createTextNode(e):e.getDomNode?e.getDomNode():e};const Sm=Om;function Em(e){return Em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Em(e)}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,km(r.key),r)}}function km(e){var t=function(e,t){if("object"!=Em(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Em(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Em(t)?t:t+""}function Tm(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function jm(e,t){return e.get(Fm(e,t))}function Im(e,t,n){return e.set(Fm(e,t),n),n}function Fm(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var Cm=new WeakMap,Dm=new WeakMap,Rm=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tm(this,Cm,void 0),Tm(this,Dm,void 0),Im(Cm,this,t),Im(Dm,this,Promise.resolve())},t=[{key:"play",value:function(){var e=this;Im(Dm,this,jm(Dm,this).then((function(){return jm(Cm,e).play()})))}},{key:"pause",value:function(){var e=this;jm(Dm,this).then((function(){return jm(Cm,e).pause()}))}},{key:"load",value:function(){var e=this;jm(Dm,this).then((function(){return jm(Cm,e).load()}))}},{key:"setSrcObject",value:function(e){var t=this;jm(Dm,this).then((function(){return jm(Cm,t).srcObject=e}))}},{key:"setSrc",value:function(e){var t=this;jm(Dm,this).then((function(){return jm(Cm,t).src=e}))}}],t&&Pm(e.prototype,t),n&&Pm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Am=Rm;function Nm(e,t,n,r){this.callback=e,this.title=t,this.label=n,this.extraCssClass=r,this.domNode=this._render()}Nm.prototype=new Sm,Nm.prototype.getDomNode=function(){return this.domNode},Nm.prototype.setTitle=function(e){this._getAnchorElement().innerHTML=e},Nm.prototype.setLabel=function(e){this._getAnchorElement().ariaLabel=e},Nm.prototype.onClick=function(e){e.preventDefault(),this.callback()},Nm.prototype._render=function(){return this.element("div",{class:"ControlsItem "+this.extraCssClass},[this.element("a",{href:"javascript:;",onclick:this.onClick.bind(this),class:"Button",role:"button",ariaLabel:this.label},[this.title])])},Nm.prototype._getAnchorElement=function(){return this.domNode.firstElementChild};const xm=Nm;function Lm(e,t,n){this.labels=e,this.onNoRecAgainClick=t,this.onConfirmRecAgainClick=n,this.domNode=this._render()}Lm.prototype=new Sm,Lm.prototype.getDomNode=function(){return this.domNode},Lm.prototype.getVerifyRecordButtons=function(){var e=new xm(this.onNoRecAgainClick,this.labels.noRecAgainTitle,this.labels.noRecAgainTitle,"NoRecAgainBtn"),t=new xm(this.onConfirmRecAgainClick,this.labels.confirmRecAgainTitle,this.labels.confirmRecAgainTitle,"ConfirmRecAgain");return this.element("div",{class:"VerifyRecAgainBtns"},[e,t])},Lm.prototype._render=function(){var e=this.element("div",{class:"ControlsItem VerifyRecAgainText"},[document.createTextNode(this.labels.verifyRecAgainText)]),t=this.getVerifyRecordButtons();return this.element("div",{class:"RecordAgain"},[this.element("div",{class:"ControlContainer"},[e,t])])};const Mm=Lm;function Vm(e){this.maxSeconds=e,this.domNode=this._render()}Vm.prototype=new Sm,Vm.prototype.getDomNode=function(){return this.domNode},Vm.prototype.start=function(){this.startTime=(new Date).getTime(),this.endTime=null,this.timerStarted||(this.timerStarted=!0,this.interval=setInterval(this._onInterval.bind(this),100))},Vm.prototype.stop=function(){this.endTime=(new Date).getTime(),this.timerStarted=!1,clearInterval(this.interval)},Vm.prototype._onInterval=function(){if(this.startTime){var e=this.endTime?this.endTime-this.startTime:(new Date).getTime()-this.startTime,t=Math.floor(e/1e3);this.elapsedText.nodeValue=this._formatDuration(t),this.remainingText.nodeValue=this._formatDuration(Math.max(0,this.maxSeconds-t))}else this.elapsedText.nodeValue="",this.remainingText.nodeValue=""},Vm.prototype._render=function(){return this.elapsedText=document.createTextNode(""),this.remainingText=document.createTextNode(""),this.element("div",{class:"ControlsItem Timer"},[this.element("div",{class:"ElapsedTime",role:"timer"},[this.elapsedText]),this.element("div",{class:"RemainingTime",role:"timer"},[this.remainingText])])},Vm.prototype._formatDuration=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t+":"+n+":"+r};const Bm=Vm;function Wm(){this.domNode=this._render()}Wm.prototype=new Sm,Wm.prototype.getDomNode=function(){return this.domNode},Wm.prototype._render=function(){return this.element("div",{class:"CloseButton"},[this.element("a",{href:"javascript:;",class:"closeModalBtn",role:"button"},[])])};const Um=Wm;function Ym(){this.domNode=this._render()}Ym.prototype=new Sm,Ym.prototype.getDomNode=function(){return this.domNode},Ym.prototype._render=function(){return this.element("a",{class:"SettingsModalHorizontalLine"})};const Hm=Ym;function zm(e,t,n){var r;this.extraClassCss=e,this.dropdownOptions=t,this.selectedOption=null===(r=n.getSelectedWebcam())||void 0===r?void 0:r.label.replace(/\s*\(.*?\)\s*/g,""),this.videoInputInstance=n,this.domNode=this._render(),document.addEventListener("click",this.handleEventListener.bind(this),!1)}zm.prototype=new Sm,zm.prototype.getDomNode=function(){return this.domNode},zm.prototype.handleEventListener=function(e){var t=document.getElementById("SettingsModalDropdownContent-".concat(this.videoInputInstance.getRunTimeSufix()));t&&this._isOutsideScope(e,t)&&(t.style.display="none",zm.prototype._updateClassList(this.videoInputInstance.getRunTimeSufix()))},zm.prototype._isOutsideScope=function(e,t){var n=document.getElementById("SettingsModalDpd-".concat(this.videoInputInstance.getRunTimeSufix()));return"flex"===t.style.display&&e.target!==t&&e.target!==n},zm.prototype.onClick=function(){var e=document.getElementById("SettingsModalDropdownContent-".concat(this.videoInputInstance.getRunTimeSufix()));"flex"===e.style.display?e.style.display="none":(this._deployContent(e),e.style.display="flex"),zm.prototype._updateClassList(this.videoInputInstance.getRunTimeSufix())},zm.prototype.updateDropdown=function(e,t){document.getElementById("SettingsModalDpd-".concat(t)).textContent=e},zm.prototype._deployContent=function(e){var t=40*this.dropdownOptions.length;e.style.height=t.toString()+"px"},zm.prototype._updateClassList=function(e){var t=this._isDeployed(e);document.getElementById("SettingsModalDpdArrow-".concat(e)).classList.toggle("DropdownDeployed",t)},zm.prototype._isDeployed=function(e){return"flex"===document.getElementById("SettingsModalDropdownContent-".concat(e)).style.display},zm.prototype._getVideoInputElement=function(){return this.domNode.firstElementChild},zm.prototype._getDropdownContent=function(){var e=this.element("div",{class:"SettingsModalDropdownContent",id:"SettingsModalDropdownContent-".concat(this.videoInputInstance.getRunTimeSufix())},this.dropdownOptions);return this._deployContent(e),e},zm.prototype._getDropdownSelected=function(){var e=this.selectedOption?this.selectedOption:this.dropdownOptions[0].textContent;return this.element("div",{class:"SettingsModalDropdownSelected"},[this.element("a",{href:"javascript:;",onclick:this.onClick.bind(this),class:"SettingsModalDpd",id:"SettingsModalDpd-".concat(this.videoInputInstance.getRunTimeSufix()),role:"button"},[e]),this.element("a",{href:"javascript:;",class:"SettingsModalDpdArrow",id:"SettingsModalDpdArrow-".concat(this.videoInputInstance.getRunTimeSufix())})])},zm.prototype._render=function(){var e=this._getDropdownSelected(),t=this._getDropdownContent();return this.element("div",{class:"Dropdown "+this.extraClassCss},[e,t])};const Qm=zm;function qm(e){return qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(e)}function Gm(){Gm=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==qm(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(qm(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Jm(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function Km(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Jm(i,r,o,a,u,"next",e)}function u(e){Jm(i,r,o,a,u,"throw",e)}a(void 0)}))}}function $m(e){this.videoInputInstance=e,this.domNode=this._render()}$m.prototype=new Sm,$m.prototype.getDomNode=function(){return this.domNode},$m.prototype._getTitle=function(){return this.element("a",{class:"SettingsModalVideoOptionsTitle"},["Video"])},$m.prototype._getCameraContent=function(){return this.element("div",{class:"SettingsModalVideoOptionsCamera"},["Camera",new Qm("SettingsModalVideoDpd",this._getDropdownOptions(),this.videoInputInstance)])},$m.prototype._getDropdownOptions=function(){return fg.prototype.getVideoDevices().map(function(e){var t=document.createElement("option");return t.textContent=e.label.replace(/\s*\(.*?\)\s*/g,""),t.deviceId=e.deviceId,t.className="SettingsModalDropdownItem",t.onclick=Km(Gm().mark((function n(){return Gm().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Qm.prototype.updateDropdown(t.textContent,this.videoInputInstance.getRunTimeSufix()),this.videoInputInstance.restartWebcam(e);case 2:case"end":return n.stop()}}),n,this)}))).bind(this),t}.bind(this))},$m.prototype._render=function(){return this.element("div",{class:"SettingsModalVideoOptions"},[this._getTitle(),new Hm,this._getCameraContent()])};const Zm=$m;function Xm(e){this.videoInputInstance=e,this.domNode=this._render(),document.addEventListener("click",this.handleEventListener.bind(this),!1)}Xm.prototype=new Sm,Xm.prototype.getDomNode=function(){return this.domNode},Xm.prototype.handleEventListener=function(e){var t=document.getElementById("Modal-".concat(this.videoInputInstance.getRunTimeSufix()));t&&this._isOutsideScope(e)&&(document.getElementById("VideoInput-".concat(this.videoInputInstance.getRunTimeSufix())).removeChild(t),document.removeEventListener("click",this.handleEventListener),document.removeEventListener("click",Qm.prototype.handleEventListener))},Xm.prototype._isOutsideScope=function(e){var t=document.getElementById("BtnSettings-".concat(this.videoInputInstance.getRunTimeSufix()));return!e.target.className.includes("SettingsModal")&&e.target!==t},Xm.prototype.setDisplay=function(e){document.getElementById("Modal-".concat(this.videoInputInstance.getRunTimeSufix())).style.display=e},Xm.prototype._divTitle=function(){return this.element("div",{class:"SettingsModalTitleContainer"},[this.element("a",{class:"SettingsModalTitle"},["Settings"]),new Um])},Xm.prototype._render=function(){var e=this._divTitle();return this.element("div",{class:"Modal",id:"Modal-".concat(this.videoInputInstance.getRunTimeSufix())},[this.element("div",{class:"SettingsModal"},[e,new Zm(this.videoInputInstance)])])};const eg=Xm;function tg(e){this.videoInputInstance=e,this.domNode=this._render()}tg.prototype=new Sm,tg.prototype.getDomNode=function(){return this.domNode},tg.prototype.onClick=function(e){var t=new eg(this.videoInputInstance);document.getElementById("VideoInput-".concat(this.videoInputInstance.getRunTimeSufix())).appendChild(t.getDomNode())},tg.prototype._render=function(){return this.element("div",{class:"ControlsItem SettingsButton"},[this.element("a",{href:"javascript:;",onclick:this.onClick.bind(this),class:"BtnSettings",id:"BtnSettings-".concat(this.videoInputInstance.getRunTimeSufix()),role:"button"},[])])};const ng=tg;function rg(e,t,n,r,o,i,a,u){this.labels=e,this.maxSeconds=t,this._hasRecording=n,this.onRecClick=r,this.onStopClick=o,this.onPlayClick=i,this.RecordAgain=a,this.videoInputInstance=u,this.domNode=this._render(),this._updateRecordButtonText()}rg.prototype=new Sm,rg.prototype.getDomNode=function(){return this.domNode},rg.prototype.setHasRecording=function(e){this._hasRecording=e,this._updateRecordButtonText()},rg.prototype.onClick=function(e){e.preventDefault(),this.callback()},rg.prototype._updateRecordButtonText=function(){this.recButton.setTitle(this._getRecordButtonTitle())},rg.prototype._getRecordButtonTitle=function(){return this._hasRecording?this.labels.recAgainButtonTitle:this.labels.recButtonTitle},rg.prototype.startTimer=function(){this.videoTimer.start()},rg.prototype.stopTimer=function(){this.videoTimer.stop()},rg.prototype._render=function(){this.recButton=new xm(this.onRecClick,this._getRecordButtonTitle(),this._getRecordButtonTitle(),"RecVideo"),this.stopButton=new xm(this.onStopClick,this.labels.stopButtonTitle,this.labels.stopButtonTitle,"StopVideo"),this.playButton=new xm(this.onPlayClick,this.labels.playButtonTitle,this.labels.playButtonTitle,"PlayVideo"),this.settingsButton=new ng(this.videoInputInstance),this.videoTimer=new Bm(this.maxSeconds);var e=this.RecordAgain.getVerifyRecordButtons();return this.element("div",{class:"Toolbar"},[this.element("div",{class:"ControlsContainer"},[this.playButton,this.recButton,this.stopButton,this.videoTimer,this.settingsButton,e])])};const og=rg;function ig(e){return ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(e)}function ag(){ag=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==ig(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ig(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ug(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function lg(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ug(i,r,o,a,u,"next",e)}function u(e){ug(i,r,o,a,u,"throw",e)}a(void 0)}))}}function sg(e,t,n,r,o){this.runTimeSufix=Math.floor(1e4*Math.random()),this.labels=e,this.onRecordedDataReady=t,this.maxSeconds=n,this.blobUrl=r,this.downloadUrl=r,this.dontAllowToReRecord=!!o,this.domNode=this._render(),this.webmType="video/webm;codecs=vp8,opus";this.mimeType=MediaRecorder.isTypeSupported(this.webmType)?this.webmType:"video/mp4;codecs:avc1.42E01F",this.shortMimeType=this.mimeType.replace(/;.*/,""),this.mediaReady=null,this._videoInputPlayer=new Am(this.videoElement),this._verifyRecord=!1,this.selectedWebcam=null,r&&(this.paused=!0,this._playRecording(!0)),this._updateClassList()}var cg=[];sg.prototype=new Sm,sg.startedInput=null,sg.prototype._isVisible=function(e){return"none"!==window.getComputedStyle(e).getPropertyValue("display")&&(!e.parentNode||e===document.body||this._isVisible(e.parentNode))},sg.prototype.getRunTimeSufix=function(){return this.runTimeSufix},sg.prototype.getSelectedWebcam=function(){var e=localStorage.getItem("selectedWebcam"),t=null;return this.getVideoDevices().map((function(n){n.deviceId===e&&(t=n)})),t},sg.prototype.setSelectedWebcam=function(e){localStorage.setItem("selectedWebcam",e)},sg.prototype.startWebcamIfInDomAndNobodyElseHasIt=function(){this.downloadUrl||!document.body.contains(this.domNode)||!this._isVisible(this.domNode)||sg.startedInput&&sg.startedInput.videoElement.srcObject||this.startWebcam(localStorage.getItem("selectedWebcam")||void 0)},sg.prototype.removeVideo=function(){this.stopRecording(),this.stopWebcam(),this.downloadUrl=null,this.blobUrl=null,this._videoInputPlayer.pause(),this.videoElement.removeAttribute("src"),this._videoInputPlayer.load(),this.toolbar.setHasRecording(!1),this.startWebcamIfInDomAndNobodyElseHasIt(),this._updateClassList()},sg.prototype.stopWebcam=function(){this.videoElement.srcObject&&(this._videoInputPlayer.setSrcObject(null),this.webcamStarted=!1,this.mediaReady=null)},sg.prototype.restartWebcam=function(e){this.startWebcam(e.deviceId),this.setSelectedWebcam(e.deviceId)},sg.prototype.handleHide=function(){this.stopRecording(),this.stopWebcam(),this._videoInputPlayer.pause()},sg.prototype.handleShow=function(){var e=this;setTimeout((function(){e.startWebcamIfInDomAndNobodyElseHasIt()}),0)},sg.prototype.isRecording=function(){return!!this.mediaRecorder},sg.prototype.getDomNode=function(){return this.domNode},sg.prototype._setCutOffTimeout=function(){this.cutOffTimeout=setTimeout(this._onCutOffTimeout.bind(this),1e3*this.maxSeconds)},sg.prototype._clearCutOffTimeout=function(){this.cutOffTimeout&&(clearTimeout(this.cutOffTimeout),this.cutOffTimeout=null)},sg.prototype._onCutOffTimeout=function(){this.cutOffTimeout=null,this.stopRecording()},sg.prototype._onDataAvailable=function(e){e.data.size>0&&(this.blob=e.data,this.blobUrl=URL.createObjectURL(this.blob),this.onRecordedDataReady(this.blob,this.mimeType===this.webmType?"webm":"mp4",this.shortMimeType),this._updateClassList())},sg.prototype._startRecording=lg(ag().mark((function e(){return ag().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasRecording()){e.next=6;break}if(!this.dontAllowToReRecord){e.next=3;break}return e.abrupt("return");case 3:this._verifyRecordAgain(!0),e.next=11;break;case 6:if(this.isRecording()){e.next=11;break}return e.next=9,this.startWebcam(localStorage.getItem("selectedWebcam")||void 0);case 9:this.mediaReady?this._continueStartingRecording():this.continueRecordingOnMediaReady=!0,this._updateClassList();case 11:this.domNode.dispatchEvent(new Event("startrecording"));case 12:case"end":return e.stop()}}),e,this)}))),sg.prototype._continueStartingRecording=function(){this.continueRecordingOnMediaReady=!1,this._removeBlobUrl();var e={audioBitsPerSecond:96e3,videoBitsPerSecond:4e5,mimeType:this.mimeType};this.mediaRecorder=new MediaRecorder(this.stream,e),this.mediaRecorder.ondataavailable=this._onDataAvailable.bind(this),this.mediaRecorder.ignoreMutedMedia=!0,this.mediaRecorder.start(),this.toolbar.startTimer(),this._setCutOffTimeout(),this._updateClassList()},sg.prototype._removeBlobUrl=function(){this.blobUrl&&(URL.revokeObjectURL(this.blobUrl),this.blobUrl=null)},sg.prototype._verifyRecordAgain=function(e){this._verifyRecord=e,this._updateClassList()},sg.prototype._onNoRecAgainClick=function(){this._verifyRecordAgain(!1)},sg.prototype._onConfirmRecAgainClick=function(){this._verifyRecordAgain(!1),this._hasVideo()&&this.removeVideo(),this.toolbar.setHasRecording(!1),this._removeBlobUrl(),this._updateClassList()},sg.prototype._hasRecording=function(){return!!this.blobUrl},sg.prototype._hasVideo=function(){return this.videoElement.hasAttribute("src")},sg.prototype._updateClassList=function(){var e=this._hasRecording(),t=e&&!this.isRecording()&&!this.videoElement.srcObject&&!this.videoElement.ended&&!this.paused,n=this._getVideoInputElement().classList;n.toggle("HasRecording",e),n.toggle("IsRecording",this.isRecording()),n.toggle("IsPlaying",t),n.toggle("IsIdle",!t&&!this.isRecording()),n.toggle("isBusy",!1===this.mediaReady),n.toggle("RecordNotAllowed",e&&this.dontAllowToReRecord),n.toggle("VerifyRecord",this._verifyRecord)},sg.prototype.stopRecording=function(){this.continueRecordingOnMediaReady=!1,this.isRecording()&&(this._clearCutOffTimeout(),this.toolbar.stopTimer(),this.mediaRecorder.stop(),this.mediaRecorder=null,this.toolbar.setHasRecording(!0),this._updateClassList())},sg.prototype._playRecording=function(e){this.continueRecordingOnMediaReady=!1,this.stopWebcam(),this.videoElement.controls=!0,this._videoInputPlayer.setSrc(this.blobUrl),this.videoElement.muted=!1,e||this._videoInputPlayer.play(),this._updateClassList()},sg.prototype.startWebcam=function(e){sg.startedInput&&sg.startedInput!==this&&sg.startedInput.videoElement.srcObject&&sg.startedInput.stopWebcam(),sg.startedInput=this,this._getVideoInputElement().classList.add("isBusy"),this.mediaReady=!1,this.webcamStarted=!0;var t={audio:!0,video:{width:640,height:360,facingMode:"user",deviceId:{exact:e}}};return navigator.mediaDevices.getUserMedia(t).then(this._onMediaReady.bind(this)).catch(this._onMediaError.bind(this))},sg.prototype.isMediaReady=function(){return this.mediaReady},sg.prototype._onMediaReady=function(e){this.stream=e,this.videoElement.controls=!1,this.videoElement.muted=!0,this._videoInputPlayer.setSrcObject(this.stream),this._videoInputPlayer.play(),this.mediaReady=!0,this.initVideoDevices(),this._updateClassList(),this.continueRecordingOnMediaReady&&this._continueStartingRecording()},sg.prototype._onMediaError=function(e){console.error(e),alert(this.labels.cannotStartWebcam),this.mediaReady=!1},sg.prototype.addListener=function(e,t){this.domNode.addEventListener(e,t)},sg.prototype._createVideoElement=function(){var e=this;return this.element("video",{playsinline:"",class:"VideoInputVideo",onended:function(){e._updateClassList()},onpause:function(){e.paused=!0,e._updateClassList()},onplay:function(){e.paused=!1,e._updateClassList()}})},sg.prototype._getVideoInputElement=function(){return this.domNode.firstElementChild},sg.prototype._getAllowPermissionsDiv=function(){return this.element("div",{class:"AllowPermissions"},[this.element("a",{class:"AllowPermissionsText"},[this.labels.allowPermissionsText])])},sg.prototype.getDevices=function(e){return navigator.mediaDevices.enumerateDevices().then((function(t){return t.filter((function(t){return t.kind===e}))})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}))},sg.prototype.initVideoDevices=lg(ag().mark((function e(){return ag().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sg.prototype.getDevices("videoinput").then((function(e){cg=e}));case 2:case"end":return e.stop()}}),e)}))),sg.prototype.getVideoDevices=function(){return cg},sg.prototype._render=function(){var e=this._getAllowPermissionsDiv();return this.videoElement=this._createVideoElement(),this.recordAgainDiv=new Mm(this.labels,this._onNoRecAgainClick.bind(this),this._onConfirmRecAgainClick.bind(this)),this.toolbar=new og(this.labels,this.maxSeconds,!!this.blobUrl,this._startRecording.bind(this),this.stopRecording.bind(this),this._playRecording.bind(this),this.recordAgainDiv,this),this.element("div",{class:"VideoContainer",id:"VideoContainer-".concat(this.runTimeSufix)},[this.element("div",{class:"VideoInput",id:"VideoInput-".concat(this.runTimeSufix)},[e,this.videoElement,this.toolbar,this.recordAgainDiv])])};const fg=sg;function pg(e){return pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(e)}function dg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wg(r.key),r)}}function vg(e,t,n){return t=gg(t),function(e,t){if(t&&("object"===pg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bg()?Reflect.construct(t,n||[],gg(e).constructor):t.apply(e,n))}function bg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bg=function(){return!!e})()}function mg(){return mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},mg.apply(this,arguments)}function gg(e){return gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gg(e)}function _g(e,t){return _g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_g(e,t)}function wg(e){var t=function(e,t){if("object"!=pg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pg(t)?t:t+""}var Og=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vg(this,t,[e,n]))._translations=r.getSetting("translations"),r._regularUploadMaxFileSize=r.getSetting("regularUploadMaxFileSize"),r._maxSeconds=r.getSetting("maxSeconds"),r._isLargeFilesUploadAllowed=r.getSetting("isLargeFilesUploadAllowed"),r._savedVideoUrl=r.getSetting("savedVideoUrl"),r._delayedLabelSettings=r.getSetting("delayedLabelSettings"),r._isLabelVisible=!r._delayedLabelSettings,r._file=null,r._videoInput=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_g(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"addRemoveButton",value:function(){this._removeButtonBuilder&&this._removeButtonBuilder.addRemoveButton()}},{key:"_getRemoveButtonClickEventListener",value:function(){var e=this;return function(){return e._videoInput.removeVideo()}}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_mustUseStandardFileInput",value:function(){return!window.MediaRecorder||!navigator.mediaDevices}},{key:"_postRegister",value:function(){if(!this._mustUseStandardFileInput()){var e=this._getFileInput();this._videoInput=new fg(this._translations,this._onRecordingAvailable.bind(this),this._maxSeconds,this._savedVideoUrl,!!this._delayedLabelSettings),this._videoInput.addListener("startrecording",this._onStartRecording.bind(this)),e.parentNode.insertBefore(this._videoInput.getDomNode(),e),this._videoInput.startWebcamIfInDomAndNobodyElseHasIt(),this._preventOpeningFileUploadWindow(),this._stopRecordingBeforeSubmit(),mg(gg(t.prototype),"_postRegister",this).call(this)}}},{key:"_getFileInput",value:function(){return this._getFieldElement()[0]}},{key:"_onRecordingAvailable",value:function(e,t,n){this._file=new File([e],"recording."+t,{type:n,lastModified:(new Date).getTime()});var r=this._getFileInput();if(this._file.size>this._regularUploadMaxFileSize||this._isLargeFilesUploadAllowed)r.uploadThisFileAsBig=this._file;else{var o=new DataTransfer;o.items.add(this._file),r.files=o.files}this._triggerEvent("change")}},{key:"_onStartRecording",value:function(){if(this._delayedLabelSettings&&!this._isLabelVisible){var e=document.getElementById("fieldSpecContainer"+this.getFieldId());e&&(this._setDelayedLabel(e),this._setDelayedDescription(e,["formdescription","description"]),this._isLabelVisible=!0)}}},{key:"_setDelayedLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-label");t&&(e.classList.remove("FileSchemaFieldRecordVideo--waiting"),t.innerText=this._b64DecodeUnicode(this._delayedLabelSettings.obfuscatedLabel))}},{key:"_setDelayedDescription",value:function(e,t){var n,r=dg(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=e.getElementsByClassName(o);if(i.length>0)return i[0].prepend(this._b64DecodeUnicode(this._delayedLabelSettings.obfuscatedDescription)),!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"_getCurrentFiles",value:function(){if(this._videoInput&&this._file){var e=[];return this._file&&e.push(this._file),e}return mg(gg(t.prototype),"_getCurrentFiles",this).call(this)}},{key:"_hide",value:function(){mg(gg(t.prototype),"_hide",this).call(this),this._videoInput&&this._videoInput.stopRecording()}},{key:"onFormStepVisibilityChange",value:function(e){this._videoInput&&(e?this._videoInput.handleHide():this._videoInput.handleShow())}},{key:"_stopRecordingBeforeSubmit",value:function(){var e=this;Dr.default.getInstance().addActionBeforeSubmit((function(){if(!e._videoInput||!e._videoInput.isRecording())return null;var t=e._buildOnStopRecordingPromise();return e._stopRecording(),t}),this.getFormContainer(),_m.A.PRIORITY_HIGH)}},{key:"_buildOnStopRecordingPromise",value:function(){var e=document.getElementById(this.getFieldId());return e?new Promise((function(t,n){e.onchange=function(e){t()}})):null}},{key:"_stopRecording",value:function(){this._videoInput&&this._videoInput.stopRecording()}},{key:"_b64DecodeUnicode",value:function(e){return decodeURIComponent(atob(e).replace(/0x([0-9A-F]{2})/g,"%$1"))}}])&&hg(n.prototype,r),o&&hg(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Xf);!function(e,t,n){(t=wg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Og,"TYPE","RecordVideoField");const Sg=Og;n(533);var Eg=n(41169);function Pg(e){return Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(e)}function kg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rg(r.key),r)}}function Tg(e,t,n){return t=Fg(t),function(e,t){if(t&&("object"===Pg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jg()?Reflect.construct(t,n||[],Fg(e).constructor):t.apply(e,n))}function jg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jg=function(){return!!e})()}function Ig(){return Ig="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fg(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ig.apply(this,arguments)}function Fg(e){return Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fg(e)}function Cg(e,t){return Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cg(e,t)}function Dg(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Rg(e){var t=function(e,t){if("object"!=Pg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pg(t)?t:t+""}var Ag=new WeakSet,Ng=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dg(r=Tg(this,t,[e,n]),Ag),r._fieldId=e,r._datePickerContainerId=r.getSetting("datePickerContainerId"),r._companySelectorId=r.getSetting("companySelectorId"),r._prevMonthText=r.getSetting("prevMonthText"),r._nextMonthText=r.getSetting("nextMonthText"),r._relatedJobId=r.getSetting("relatedJobId"),function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(Ag,r,xg).call(r),r._locale=r.getSetting("locale"),r._eventsApiUrl=r.getSetting("eventsApiUrl"),r._isAccessibilityEnabled=r.getSetting("isAccessibilityEnabled"),r._showUserSchedulingTimezoneLabel=r.getSetting("showUserSchedulingTimezoneLabel"),r._showUserSchedulingTimezoneOffset=r.getSetting("showUserSchedulingTimezoneOffset"),r._showTimeSlotOrEventSchedulingTimezoneLabel=r.getSetting("showTimeSlotOrEventSchedulingTimezoneLabel"),r._showTimeSlotOrEventSchedulingTimezoneOffset=r.getSetting("showTimeSlotOrEventSchedulingTimezoneOffset"),r._currentSelectedDateText=r.getSetting("currentSelectedDateText"),r._currentSelectedSlotText=r.getSetting("currentSelectedSlotText"),r._slotDescriptionText=r.getSetting("slotDescriptionText"),r._timeslotsAvailableText=r.getSetting("timeslotsAvailableText"),r._noTimeslotsAvailableText=r.getSetting("noTimeslotsAvailableText"),r._useMilitaryTimeFormat=r.getSetting("useMilitaryTimeFormat"),r._firstDay=r.getSetting("firstDay"),r._isDynamicMaximumDateValueInHours=r.getSetting("isDynamicMaximumDateValueInHours"),r._dates=[],r._keepCurrentValue=!1,r._widget=null,r._datePicker=null,r._lastSelectedDateText=null,r._lastFetchedMonth=null,r._lastFetchedYear=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cg(e,t)}(t,e),n=t,r=[{key:"_getAllowedValueTypesToSet",value:function(){return[]}},{key:"getType",value:function(){return t.TYPE}},{key:"_postRegister",value:function(){var e=this;this._locale=this._locale.toLowerCase().replace("_","-"),e._initWidget(),""!==this._companySelectorId&&pjQuery("#"+this._companySelectorId).change((function(){e._applyCompanyFilter()})),this._setOnResetFormListener(),Ig(Fg(t.prototype),"_postRegister",this).call(this)}},{key:"getValue",value:function(){return new Gt("")}},{key:"getValueForCondition",value:function(){return this._isTimeSlotSelected()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e)}},{key:"_isTimeSlotSelected",value:function(){return Boolean(this._getValueId()&&this._getValueTimestamp()&&this._getValueSlotPartitionNumber())}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_checkAvailableDays",value:function(e){var t=Eg.c9.fromJSDate(e).toISODate();return[!0,this._getDayAvailabilityCssClass(t)]}},{key:"_getDayAvailabilityCssClass",value:function(e){return this._dates[e]?"selectable-day":"not-selectable-day"}},{key:"_updateAvailabilityForText",value:function(e){var t=Eg.c9.fromFormat(e,"yyyy-MM-dd").setLocale(this._locale).toFormat("DDDD");pjQuery("#"+this._datePickerContainerId).parent().find(".results .currentDay").html(t)}},{key:"_updateResults",value:function(e){this._updateAvailabilityForText(e),this._showLoading(),this._fetchItemsByDay(e)}},{key:"_fetchItemsByDay",value:function(e){var t=e.split("-"),n=t[2],r=t[1];this._widget.find(".results .resultsList").html("");var o=this._widget.find('.schedulerDatePicker td[data-month="'+(r-1)+'"]:contains("'+n+'")').filter((function(){return pjQuery(this).text()==n})),i=this._dates[e]&&this._dates[e].length>0;o.length>0&&!i?this._showNoResults():(this._drawItems(this._dates[e],n,r),this._focusOnResultsList())}},{key:"_showLoading",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events","none"),this._widget.find(".availability").attr("hidden",!0),this._widget.find(".results .resultsList").attr("hidden",!0),this._widget.find(".results .noResults").attr("hidden",!0),this._widget.find(".form__loader").removeAttr("hidden")}},{key:"_showNoResults",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events",""),this._widget.find(".availability").removeAttr("hidden"),this._widget.find(".results .resultsList").attr("hidden",!0),this._widget.find(".results .noResults").removeAttr("hidden"),this._widget.find(".form__loader").attr("hidden",!0),this._resetValue(),this._triggerEvent("change")}},{key:"_showResults",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events",""),this._widget.find(".availability").removeAttr("hidden"),this._widget.find(".results .resultsList").removeAttr("hidden"),this._widget.find(".results .noResults").attr("hidden",!0),this._widget.find(".form__loader").attr("hidden",!0)}},{key:"_generateRow",value:function(e){var t=pjQuery('<div class="resultItem"/>');if(t.attr("id",this._fieldId+"-"+e.id+"-"+e.timestamp),t.attr("item_id",e.id),t.attr("item_timestamp",e.timestamp),e.availablePartitionNumbers){var n=Object.keys(e.availablePartitionNumbers);n.length>0&&t.attr("item_slotPartitionNumber",n[0])}if(this._keepCurrentValue&&e.id==this._getValueId()&&e.timestamp==this._getValueTimestamp()&&(t.addClass("selected"),this._keepCurrentValue=!1),t.append(pjQuery('<p class="title">'+e.title+"</p>")),e.hasTime){var r="";if(e.timeZone&&(this._showTimeSlotOrEventSchedulingTimezoneLabel||this._showTimeSlotOrEventSchedulingTimezoneOffset)){var o=this._showTimeSlotOrEventSchedulingTimezoneLabel?' <span class="timeZoneLabel">'+e.timeZone+"</span>":"",i=this._showTimeSlotOrEventSchedulingTimezoneOffset?' <span class="timeZoneOffset">'+e.timeZoneGMTMode+"</span>":"";r=pjQuery('<span class="timeZone"> '+e.initTimeWithZone+" - "+e.endTimeWithZone+o+i+"</span>")[0].outerHTML}var a=Eg.c9.fromMillis(1e3*e.initTimestamp).toFormat(this._getTimeFormat()),u=Eg.c9.fromMillis(1e3*e.endTimestamp).toFormat(this._getTimeFormat()),l="";if(this._showUserSchedulingTimezoneLabel||this._showUserSchedulingTimezoneOffset){var s=Eg.c9.now();l='<span class="localTimeZone">'+(this._showUserSchedulingTimezoneLabel?'<span class="localTimeZoneLabel">'+s.toFormat("z").replace("/"," - ")+"</span>":"")+(this._showUserSchedulingTimezoneOffset?'<span class="localTimeZoneOffset"> (GMT '+s.toFormat("ZZ")+")</span>":"")+"</span>"}t.append(pjQuery('<p class="time"><span class="timeLocal">'+a+" - "+u+" "+l+"</span> "+r+"</p>")),e.initTime=a,e.endTime=u}else{var c=pjQuery(this._widget.find(".results .allDay")[0].outerHTML).removeAttr("hidden");t.append(c)}return e.location&&t.append(pjQuery('<p class="location">'+e.location+"</p>")),this._makeResultItemRowAccessibleIfNeeded(t,e),t}},{key:"_drawItems",value:function(e,t,n){this._keepCurrentValue||this._resetValue();var r=this._datePicker.datepicker("getDate");if(r.getDate()==t&&r.getMonth()+1==n)if(e&&0!==e.length){for(var o in e)if(e.hasOwnProperty(o)&&(!this._isDynamicMaximumDateValueInHours||e[o].timestamp<this._maxDate.toSeconds())){var i=this._generateRow(e[o]);this._widget.find(".results .resultsList").append(i)}this._setClicksOnItems(),this._showResults()}else this._showNoResults()}},{key:"_focusOnResultsList",value:function(){this._addAccessibilityAttributes(),this._isAccessibilityEnabled&&(this._widget.find(".results .resultsList").focus(),this._widget.find(".results .resultsList").click()),this._triggerEvent("change")}},{key:"_setClicksOnItems",value:function(){var e=this,t=e._widget.find(".results .resultsList .resultItem");t.click((function(){var n=pjQuery(this);pjQuery(this).hasClass("selected")?(e._unselectItem(t),n.parent().attr("aria-activedescendant",""),e._resetValue()):(e._unselectItem(t),e._setSelectedValue(n.attr("item_id"),n.attr("item_timestamp"),n.attr("item_slotPartitionNumber")),n.addClass("selected"),n.attr("aria-selected","true"),n.parent().attr("aria-activedescendant",n.attr("id"))),e._triggerEvent("change")}))}},{key:"_setSelectedValue",value:function(e,t,n){pjQuery("#"+this._fieldId+"id").val(e),pjQuery("#"+this._fieldId+"timestamp").val(t),pjQuery("#"+this._fieldId+"slotPartitionNumber").val(n)}},{key:"_resetValue",value:function(){pjQuery("#"+this._fieldId+"id").val(""),pjQuery("#"+this._fieldId+"timestamp").val(""),pjQuery("#"+this._fieldId+"slotPartitionNumber").val("")}},{key:"_unselectItem",value:function(e){e.removeClass("selected"),e.attr("aria-selected","false")}},{key:"_setOnResetFormListener",value:function(){var e,t=this;null===(e=this.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._resetValue();var e=t._getFieldElement().find(".selected");t._unselectItem(e),e.parent().attr("aria-activedescendant","")}))}},{key:"_getValueId",value:function(){return pjQuery("#"+this._fieldId+"id").val()}},{key:"_getValueTimestamp",value:function(){var e=pjQuery("#"+this._fieldId+"timestamp").val();return parseInt(e)}},{key:"_getValueSlotPartitionNumber",value:function(){var e=pjQuery("#"+this._fieldId+"slotPartitionNumber").val();return parseInt(e)}},{key:"_fetchItemsByMonth",value:function(e,t,n){this._lastFetchedMonth=e,this._lastFetchedYear=t;var r=this,o=this._buildStartTimestamp(t,e,1),i=this._buildEndTimestamp(t,e,0);pjQuery.ajax(r._buildCalendarApiRequestPayload(o,i)).done((function(e){r._saveMonthItems(e)})).fail((function(){r._saveMonthItems([])})).always((function(){n()}))}},{key:"_saveMonthItems",value:function(e){this._dates=e.reduce((function(e,t){var n=Eg.c9.fromSeconds(t.timestamp).toFormat("yyyy-MM-dd");return void 0===e[n]&&(e[n]=[]),e[n].push(t),e}),[])}},{key:"_setDatePickerLanguage",value:function(){this._setDatePickerLocale(this._locale)}},{key:"_initDatePicker",value:function(e){var t=e.toJSDate();this._setCurrentSelectedDateInTitle(t),this._widget=pjQuery("#"+this._datePickerContainerId).parent(),this._currentMonth=t.getMonth()+1,this._currentYear=t.getFullYear();var n=this;this._setDatePickerLanguage(),this._datePicker=pjQuery("#"+this._datePickerContainerId).datepicker({defaultDate:e.toJSDate(),dateFormat:"yy-mm-dd",nextText:n._nextMonthText,prevText:n._prevMonthText,showOtherMonths:!0,minDate:n._minDateStr,maxDate:n._maxDateStr,firstDay:n._firstDay,onSelect:function(e){n._setCurrentSelectedDateInTitle(new Date(e)),n._lastSelectedDateText=e,n._updateResults(e),setTimeout((function(){n._addAccessibilityAttributes()}),0)},onChangeMonthYear:function(e,t){n._currentMonth=t,n._currentYear=e,n._fetchItemsByMonth(t,e,(function(){n._addAccessibilityAttributes(),setTimeout((function(){pjQuery(".ui-state-hover").removeClass("ui-state-hover")}),0)})),setTimeout((function(){n._addAccessibilityAttributes()}),0)},beforeShowDay:function(e){return n._checkAvailableDays(e)}}),this._addAccessibilityAttributes()}},{key:"_refreshDatePicker",value:function(){pjQuery("#"+this._datePickerContainerId).datepicker("refresh")}},{key:"_initWidget",value:function(){var e,t,n=null,r=this;if(""!=this._getValueId()){var o=this._getValueTimestamp();e=(n=Eg.c9.fromSeconds(o)).month,t=n.year,this._keepCurrentValue=!0}else if(""!=this._initialYear)e=this._initialMonth,t=this._initialYear;else{var i=Eg.c9.now();e=i.month,t=i.year}this._fetchItemsByMonth(e,t,(function(){if(null==n){var e=Object.keys(r._dates);n=0===e.length?r._minDateStr?Eg.c9.fromFormat(r._minDateStr,"yyyy-MM-dd"):Eg.c9.now():Eg.c9.fromFormat(e[0],"yyyy-MM-dd")}r._initDatePicker(n),r._lastSelectedDateText=n.toFormat("yyyy-MM-dd"),r._updateResults(r._lastSelectedDateText)}))}},{key:"_applyCompanyFilter",value:function(){var e=this;e._fetchItemsByMonth(e._lastFetchedMonth,e._lastFetchedYear,(function(){e._refreshDatePicker(),e._updateResults(e._lastSelectedDateText),setTimeout((function(){e._addAccessibilityAttributes()}),0)}))}},{key:"_isRegionLocale",value:function(e){return e.indexOf("-")>=0}},{key:"_getCountryLocale",value:function(e){return e.split("-")[0]}},{key:"_setDatePickerLocale",value:function(e){if(!pjQuery.datepicker.regional[e]){var t=PortalDate.getPortalDateInfo();pjQuery.datepicker.regional[e]={monthNames:t.getMonthsFullName(e),monthNamesShort:t.getMonthsShortName(e),dayNames:t.getDaysFullName(e,!0),dayNamesShort:t.getDaysShortName(e,!0),dayNamesMin:t.getDaysMinName(e,!0)}}pjQuery.datepicker.setDefaults(pjQuery.datepicker.regional[e])}},{key:"_addAccessibilityAttributes",value:function(){this._isAccessibilityEnabled&&(this._addHeadingRoleToMonthAndYearTitle(),this._makeMonthNavigationAccessible(),this._makeDayNavigationAccessible())}},{key:"_addHeadingRoleToMonthAndYearTitle",value:function(){var e=document.getElementById(this._fieldId+"_datepicker_scheduling").querySelector(".ui-datepicker-title");e&&(e.setAttribute("role","heading"),e.setAttribute("aria-level","2"))}},{key:"_makeMonthNavigationAccessible",value:function(){var e=pjQuery("#"+this._datePickerContainerId),t=["a.ui-datepicker-prev.ui-corner-all","a.ui-datepicker-next.ui-corner-all"],n=Eg.c9.fromFormat(this._currentYear+"-"+this._currentMonth+"-01","yyyy-M-dd").plus({months:1}),r=Eg.c9.fromFormat(this._currentYear+"-"+this._currentMonth+"-01","yyyy-M-dd").minus({months:1});t.forEach((function(o){var i=e.find(o);"click"===i.attr("data-event")&&(i.attr("tabindex",0),i.attr("role","button"));var a=-1!==o.indexOf("prev")?r.toFormat("LLLL yyyy"):n.toFormat("LLLL yyyy");i.attr("aria-label",i.attr("title")+": "+a),i.keypress((function(n){13===n.keyCode&&(this.click(),setTimeout((function(){var n=e.find(o);if("click"===n.attr("data-event"))n.focus();else{var r=t[0]===o?1:0;e.find(t[r]).focus()}}),0))}))}))}},{key:"_makeDayNavigationAccessible",value:function(){var e=this;pjQuery("#"+this._datePickerContainerId).find(".ui-state-default").each((function(){var t=pjQuery(this),n=t.parent(),r=n.attr("data-month"),o=n.attr("data-year");if(r&&o){r=parseInt(r,10)+1;var i=parseInt(t.text()),a=Eg.c9.fromFormat(o+"-"+r+"-"+i,"yyyy-M-d"),u=a.toFormat("yyyy-MM-dd"),l=e._dates.hasOwnProperty(u),s=l?e._timeslotsAvailableText.replace("{$amount}",e._dates[u].length):e._noTimeslotsAvailableText;t.attr("aria-label",a.toFormat("DDDD")+". "+s),t.attr("aria-disabled",l?"false":"true"),n.addClass(e._getDayAvailabilityCssClass(u))}}))}},{key:"_setCurrentSelectedDateInTitle",value:function(e){var t=pjQuery("#"+this._fieldId+"_schedulingTitle");t.attr("aria-label",t.text()+": "+this._currentSelectedDateText+" "+Eg.c9.fromJSDate(e).toFormat("DDDD"))}},{key:"_makeResultItemRowAccessibleIfNeeded",value:function(e,t){this._isAccessibilityEnabled&&(e.attr("tabindex",0),e.attr("role","option"),e.attr("aria-selected","false"),e.attr("aria-label",this._formatAriaLabelDescriptionForSlotData(t)),e.keypress((function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this.click())})))}},{key:"_formatAriaLabelDescriptionForSlotData",value:function(e){var t=this._slotDescriptionText.replace("{$title}",e.title);return t=e.location?(t=(t=t.replace("{$location}",e.location)).replace("[#location]","")).replace("[#endLocation]",""):t.replace(/\[#location\].*\[#endLocation\]/,""),e.hasTime?(t=(t=(t=(t=(t=t.replace(/\[#allDay\].*\[#endAllDay\]/,"")).replace("{$startTime}",e.initTime)).replace("{$endTime}",e.endTime)).replace("[#time]","")).replace("[#endTime]",""),t=e.timeZone?(t=(t=(t=(t=t.replace("{$startTimeCustomTimeZone}",e.initTimeWithZone)).replace("{$endTimeCustomTimeZone}",e.endTimeWithZone)).replace("{$customTimeZone}",e.timeZone+" "+e.timeZoneGMTMode)).replace("[#customTimeZone]","")).replace("[#endCustomTimeZone]",""):t.replace(/\[#customTimeZone\].*\[#endCustomTimeZone\]/,"")):t=(t=(t=(t=t.replace(/\[#time\].*\[#endTime\]/,"")).replace(/\[#customTimeZone\].*\[#endCustomTimeZone\]/,"")).replace("[#allDay]","")).replace("[#endAllDay]",""),t}},{key:"_getTimeFormat",value:function(){return this._useMilitaryTimeFormat?"HH:mm":"h:mm a"}},{key:"_buildStartTimestamp",value:function(e,t,n){var r=new Date(e,t-1,n);return Math.floor(r.getTime()/1e3)}},{key:"_buildEndTimestamp",value:function(e,t,n){var r=new Date(e,t,n,23,59,59);return Math.floor(r.getTime()/1e3)}},{key:"_buildCalendarApiRequestPayload",value:function(e,t){var n=new Date,r=this._buildCompanyFilter();return{contentType:"application/json",data:'{ "id": '+this._fieldId+', "jobId": '+this._relatedJobId+', "from": '+e+', "to": '+t+', "timezoneOffset": '+n.getTimezoneOffset()+r+"}",dataType:"json",type:"POST",url:this._eventsApiUrl}}},{key:"_buildCompanyFilter",value:function(){var e="";return""!==this._companySelectorId&&(e=', "companyFilter": '+pjQuery("#"+this._companySelectorId).val()),e}}],r&&kg(n.prototype,r),o&&kg(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);function xg(){var e=this.getSetting("minimumDateToDisplay"),t=this.getSetting("maximumDateToDisplay"),n=Eg.c9.fromSeconds(e.timestamp,{zone:e.timezone});this._minDateStr=n.toISODate(),this._maxDate=t?Eg.c9.fromSeconds(t.timestamp,{zone:t.timezone}):null,this._maxDateStr=this._maxDate?this._maxDate.toISODate():null;var r=this.getSetting("initialMonth");this._initialMonth=n&&r<n.month?n.month:r,this._initialYear=this.getSetting("initialYear")}!function(e,t,n){(t=Rg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ng,"TYPE","SchedulingField");const Lg=Ng;function Mg(e){return Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(e)}function Vg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Bg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qg(r.key),r)}}function Ug(e,t,n){return t=Hg(t),function(e,t){if(t&&("object"===Mg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yg()?Reflect.construct(t,n||[],Hg(e).constructor):t.apply(e,n))}function Yg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yg=function(){return!!e})()}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hg(e)}function zg(e,t){return zg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zg(e,t)}function Qg(e,t,n){return(t=qg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qg(e){var t=function(e,t){if("object"!=Mg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mg(t)?t:t+""}var Gg=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ug(this,t,[e,n]))._collapseButtonLabel=r.getSetting("collapseButtonLabel"),r._expandButtonLabel=r.getSetting("expandButtonLabel"),r._collapseExpandButtonLocation=r.getSetting("collapseExpandButtonLocation");var o=document.getElementById(e);return null!==o&&(r._section=o.closest(".Section"),r._addCollapseExpandButtonIfNeeded(),r.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,r.caller("_addEventListenerToCollapsibleFields")),r.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,r.caller("_openSectionIfFieldHasErrors"))),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zg(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){return new M}},{key:"getValueForCondition",value:function(){return null}},{key:"_shouldHaveHiddenElementIndicator",value:function(){return!1}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_addCollapseExpandButtonIfNeeded",value:function(){this._isSectionCollapsible()&&(this._button=this._getButton(),null!==this._button&&this._attachCollapseExpandEvent(this._button))}},{key:"_getButton",value:function(){return this._section.querySelector(".Section__toggle")}},{key:"_attachCollapseExpandEvent",value:function(e){var t=this;e.onclick=function(){var n;t._expandOrCollapseSection(),t._showOrHideFields(),t._updateButtonText(e),t._isButtonLocationBottom()&&(null===(n=t._getFirstFocusableElement())||void 0===n||n.focus())}}},{key:"_showOrHideFields",value:function(){var e=this;this._getCollapsibleFields().forEach((function(t){var n=X.getField(e._getFieldIdFromFieldContainerId(t.id));n&&n.setVisibilityStatusByType(Ke.SECTION_COLLAPSIBLE,e._isSectionExpanded())}))}},{key:"_isButtonLocationBottom",value:function(){return this._collapseExpandButtonLocation===t.COLLAPSE_BUTTON_LOCATION_BOTTOM}},{key:"_getFieldIdFromFieldContainerId",value:function(e){return e.substring(18)}},{key:"_updateButtonText",value:function(e){var t=e.querySelector(".toggle__text");null!==t&&(t.textContent=this._getButtonText())}},{key:"_getCollapsibleFields",value:function(){return this._section.getElementsByClassName("fieldSpec--collapsible")}},{key:"_getFirstFocusableElement",value:function(){var e,t=Vg(this._getCollapsibleFields());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this._getAllFocusableElements(n);if(r.length>0)return r[0]}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"_getAllFocusableElements",value:function(e){return e?e.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)'):[]}},{key:"_expandOrCollapseSection",value:function(){this._toggleClass("Section--collapsible--open"),this._toggleAriaExpandedAttribute()}},{key:"_addEventListenerToCollapsibleFields",value:function(){var e=this;this._getCollapsibleFields().forEach((function(t){var n=X.getField(e._getFieldIdFromFieldContainerId(t.id));n&&n.addListener(Vt.EVENT_ON_VALIDATION_FAIL,e.caller("_openSection"))}))}},{key:"_openSectionIfFieldHasErrors",value:function(){this._sectionHasFieldWithError()&&this._openSection()}},{key:"_openSection",value:function(){this._isSectionExpanded()||this._button.click()}},{key:"_sectionHasFieldWithError",value:function(){return this._section.hasAttribute("data-hasFieldWithError")&&"1"===this._section.getAttribute("data-hasFieldWithError")}},{key:"_isSectionExpanded",value:function(){return this._section.classList.contains("Section--collapsible--open")}},{key:"_isSectionCollapsible",value:function(){return this._section.classList.contains("Section--collapsible")}},{key:"_getButtonText",value:function(){return this._isSectionExpanded()?this._collapseButtonLabel:this._expandButtonLabel}},{key:"_toggleClass",value:function(e){this._section.classList.contains(e)?this._section.classList.remove(e):this._section.classList.add(e)}},{key:"_toggleAriaExpandedAttribute",value:function(){var e=this._section.querySelector(".toggle");null!==e&&("true"===e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true"))}}])&&Wg(n.prototype,r),o&&Wg(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);Qg(Gg,"TYPE","SeparatorField"),Qg(Gg,"COLLAPSE_BUTTON_LOCATION_TOP","top"),Qg(Gg,"COLLAPSE_BUTTON_LOCATION_BOTTOM","bottom");const Jg=Gg;function Kg(e){return Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(e)}function $g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n_(r.key),r)}}function Zg(e,t,n){return t=e_(t),function(e,t){if(t&&("object"===Kg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xg()?Reflect.construct(t,n||[],e_(e).constructor):t.apply(e,n))}function Xg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xg=function(){return!!e})()}function e_(e){return e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e_(e)}function t_(e,t){return t_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t_(e,t)}function n_(e){var t=function(e,t){if("object"!=Kg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kg(t)?t:t+""}var r_=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Zg(this,t))._setHours(e),o._setMinutes(n),o._setSeconds(r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t_(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return PortalString.zeroPad(this._hours.toString(),2)+":"+PortalString.zeroPad(this._minutes.toString(),2)+":"+PortalString.zeroPad(this._seconds.toString(),2)}},{key:"getHours",value:function(){return this._hours}},{key:"getMinutes",value:function(){return this._minutes}},{key:"getSeconds",value:function(){return this._seconds}},{key:"_setHours",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>23)throw new Error("invalidArgumentException: Hours should be between 0 and 23");this._hours=e}},{key:"_setMinutes",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Minutes should be between 0 and 59");this._minutes=e}},{key:"_setSeconds",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Seconds should be between 0 and 59");this._seconds=e}}],r&&$g(n.prototype,r),o&&$g(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(k);!function(e,t,n){(t=n_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r_,"TYPE","FieldTimeValue");const o_=r_;function i_(e){return i_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i_(e)}function a_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f_(r.key),r)}}function u_(e,t,n){return t=s_(t),function(e,t){if(t&&("object"===i_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l_()?Reflect.construct(t,n||[],s_(e).constructor):t.apply(e,n))}function l_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l_=function(){return!!e})()}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s_(e)}function c_(e,t){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c_(e,t)}function f_(e){var t=function(e,t){if("object"!=i_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i_(t)?t:t+""}var p_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u_(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c_(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new M:new o_(PortalString.toInt(e),0,0)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return[e=e!=this._notSelectedOptionValue?e:null,0,0]}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}}],r&&a_(n.prototype,r),o&&a_(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Gs);!function(e,t,n){(t=f_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(p_,"TYPE","SimpleTimeField");const d_=p_;function y_(e){return y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y_(e)}function h_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,__(r.key),r)}}function v_(e,t,n){return t=m_(t),function(e,t){if(t&&("object"===y_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b_()?Reflect.construct(t,n||[],m_(e).constructor):t.apply(e,n))}function b_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b_=function(){return!!e})()}function m_(e){return m_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m_(e)}function g_(e,t){return g_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g_(e,t)}function __(e){var t=function(e,t){if("object"!=y_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y_(t)?t:t+""}var w_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v_(this,t,[e,n]))._baseFieldId=t._extractBaseIdFromCompoundFieldId(e),Y.registerFieldDependency(r._baseFieldId,r._baseFieldId+t._getCategoryFieldSuffix(),Y.TYPE_VALUES),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g_(e,t)}(t,e),n=t,o=[{key:"_extractBaseIdFromCompoundFieldId",value:function(e){return e.replace("_sourceAndCategory","")}},{key:"_getCategoryFieldSuffix",value:function(){return"_category"}}],(r=[{key:"getValue",value:function(){return new M}},{key:"getValueForCondition",value:function(){return null}},{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_cloneDependentFieldsForNewTableRow",value:function(e,t){}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._baseFieldId,""),this._createFieldMetadata(this._baseFieldId,t._getCategoryFieldSuffix())]}},{key:"_attachOnChangeListener",value:function(){}}])&&h_(n.prototype,r),o&&h_(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Tu);!function(e,t,n){(t=__(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(w_,"TYPE","SourceAndCategoryField");const O_=w_;function S_(e){return S_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S_(e)}function E_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P_(r.key),r)}}function P_(e){var t=function(e,t){if("object"!=S_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S_(t)?t:t+""}var k_=function(){return e=function e(t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldId=t,this.dropdownCssClass=n,this.placeholderText=r,this.minimumInputLength=o,this.isMultiple=i,this.ajaxDelayMs=a,this.visibleOptionsLimit=u,this.optionsSearchApiUrl=l,this.dictionary=s,this.label=c,this.isRequired=f,this.isAccessible=p,this.requestedDataFieldId=d,this.jobId=y,this.contactOrJobIdEdit=h,this.wizardId=v,this.wizardFormId=b,this.schemaFieldId=m,this.optionFormatJson=g,this.alphabeticalOrder=_||!1},(t=[{key:"attachToFieldAndRefreshOptions",value:function(e){var t=this;pjQuery("#"+e).select2({placeholder:t.placeholderText,allowClear:!0,width:"100%",minimumInputLength:t.minimumInputLength,multiple:t.isMultiple,containerCssClass:"select2Container"+e,dropdownCssClass:t.dropdownCssClass,escapeMarkup:function(e){return e},dictionary:t.dictionary,label:t.label,fieldId:t.fieldId,isRequired:t.isRequired,isAccessible:t.isAccessible,ajax:{url:t.optionsSearchApiUrl,type:"POST",delay:t.ajaxDelayMs,quietMillis:t.ajaxDelayMs,dataType:"json",data:function(n){return t._buildAjaxRequestData(e,n)},processResults:function(e,n){return t._processAjaxResponseData(e,n)}}}),pjQuery("#"+e).on("select2:select",(function(e){pjQuery(this).focus()})),pjQuery("#"+e).trigger("select2-"+e+"-ready")}},{key:"_buildAjaxRequestData",value:function(e,t){var n={searchText:t.term,ids:t.searchIds,fieldId:this.requestedDataFieldId,jobId:this.jobId,page:t.page||1,limit:this.visibleOptionsLimit,wizardFormId:this.wizardFormId,optionFormat:this.optionFormatJson,schemaFieldId:this.schemaFieldId,alphabeticalOrder:this.alphabeticalOrder},r=this.wizardId;r&&(n.wizardId=r);var o=this.contactOrJobIdEdit;return o&&(n.contactOrJobIdEdit=o),JSON.stringify(n)}},{key:"_processAjaxResponseData",value:function(e,t){var n=e.results?e.results:e;Array.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;r++)n[r].value&&(n[r]=n[r].value);var i=!!e.more&&e.more;return t.page=t.page||1,{results:n.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name,category:e.category}})):null}})),pagination:{more:i}}}}])&&E_(e.prototype,t),n&&E_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const T_=k_;function j_(e){return j_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j_(e)}function I_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F_(r.key),r)}}function F_(e){var t=function(e,t){if("object"!=j_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j_(t)?t:t+""}var C_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"registerJobTemplateAutocompletableWidgetLazyPicker",value:function(t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_){e._lazyPickers[t]=new T_(t,n,r,o,i,a,u,l,s,c,f,p,d,y,h,v,b,m,g,_)}},{key:"refreshLazyPickerOptions",value:function(t){e.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(t,t)}},{key:"refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource",value:function(t,n){var r=e._getLazyPicker(t);null!==r&&r.attachToFieldAndRefreshOptions(n)}},{key:"_getLazyPicker",value:function(t){return e._isLazyPickerRegistered(t)?e._lazyPickers[t]:null}},{key:"_isLazyPickerRegistered",value:function(t){return t in e._lazyPickers}}],(n=null)&&I_(t.prototype,n),r&&I_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();C_._lazyPickers={};const D_=C_;function R_(e){return R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R_(e)}var A_;function N_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M_(r.key),r)}}function x_(e,t,n){L_(e,t),t.set(e,n)}function L_(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M_(e){var t=function(e,t){if("object"!=R_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=R_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R_(t)?t:t+""}function V_(e,t){return e.get(W_(e,t))}function B_(e,t,n){return e.set(W_(e,t),n),n}function W_(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var U_=new WeakMap,Y_=new WeakMap,H_=new WeakMap,z_=new WeakSet,Q_=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){L_(e,t),t.add(e)}(this,z_),x_(this,U_,void 0),x_(this,Y_,void 0),x_(this,H_,void 0),B_(U_,this,t),B_(Y_,this,JSON.parse(n)),B_(H_,this,JSON.parse(r))}return t=e,r=[{key:"prepareFileFieldToReuseUploadedFiles",value:function(t,n,r){new e(t,n,r).addOldFilesSelectorToFileInput(),q_.call(e,t,n,r)}}],(n=[{key:"addOldFilesSelectorToFileInput",value:function(){var e=document.getElementById("fileInput_"+V_(U_,this));if(e){var t=W_(z_,this,iw).call(this),n=W_(z_,this,aw).call(this);t.appendChild(n),e.prepend(t),W_(z_,this,J_).call(this)}}}])&&N_(t.prototype,n),r&&N_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function q_(e,t,n){var r=G_.call(A_,e);r&&(A_.tableFieldsDataReference[r]={dictionaryJSON:t,uploadedFilesJSON:n})}function G_(e){var t=e.split("-sample");return 2===t.length?t[0]:null}function J_(){var e=this,t=document.getElementById("fileInput_"+V_(U_,this)+"_oldFilesSelector");t&&t.addEventListener("change",(function(){W_(z_,e,nw).call(e)?W_(z_,e,K_).call(e):(W_(z_,e,rw).call(e),W_(z_,e,$_).call(e,W_(z_,e,tw).call(e)))}))}function K_(){W_(z_,this,ow).call(this),W_(z_,this,X_).call(this),W_(z_,this,ew).call(this,"")}function $_(e){W_(z_,this,ew).call(this,V_(H_,this)[e-1]["data-hiddenValue"]),W_(z_,this,Z_).call(this)}function Z_(){var e=document.getElementById("fileInput_"+V_(U_,this));if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","file_"+V_(U_,this)+"_reuse"),t.setAttribute("value","1"),e.append(t)}}function X_(){var e=document.querySelector("input[name=file_"+V_(U_,this)+"_reuse]");e&&e.remove()}function ew(e){var t=document.querySelector("input[name=file_"+V_(U_,this)+"_fileNumber]");t&&(t.value=e)}function tw(){var e=document.getElementById("fileInput_"+V_(U_,this)+"_oldFilesSelector");return e?e.value:""}function nw(){return"0"===W_(z_,this,tw).call(this)}function rw(){var e=document.getElementById(V_(U_,this));e&&(e.hidden=!0)}function ow(){var e=document.getElementById(V_(U_,this));e&&(e.hidden=!1)}function iw(){var e=document.createElement("div");return e.setAttribute("id","fileInput_"+V_(U_,this)+"_oldFilesSelectorContainer"),e.dataset.oldFilesSelectorSampleReference=V_(U_,this),e}function aw(){var e=document.createElement("select");return e.setAttribute("id","fileInput_"+V_(U_,this)+"_oldFilesSelector"),e.setAttribute("aria-labelledby",V_(U_,this)+"-label"),e.appendChild(W_(z_,this,uw).call(this)),e.appendChild(W_(z_,this,lw).call(this)),e}function uw(){var e=document.createElement("option");return e.setAttribute("value","0"),e.innerText=V_(Y_,this).uploadNewFile,e}function lw(){var e=document.createElement("optgroup");return e.setAttribute("label",V_(Y_,this).previouslySavedFiles),W_(z_,this,sw).call(this,e),e}function sw(e){for(var t=0;t<V_(H_,this).length;++t){var n=V_(H_,this)[t],r=document.createElement("option");r.setAttribute("value",(t+1).toString()),r.innerText=n.name+W_(z_,this,cw).call(this,n.timestamp),e.appendChild(r)}}function cw(e){return e?" - "+Eg.c9.fromMillis(1e3*e).toFormat("dd LLL yyyy"):""}A_=Q_,function(e,t,n){(t=M_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Q_,"tableFieldsDataReference",{});const fw=Q_;function pw(e){return pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pw(e)}function dw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yw(r.key),r)}}function yw(e){var t=function(e,t){if("object"!=pw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pw(t)?t:t+""}var hw=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._patternSampleContainerName=/^(multipleDatasetEntry_.*)_sample$/,this._sampleContainerId="multipleDatasetEntry_"+this._fieldId+"_sample",this._rowsContainerId="multipleDatasetRowsContainer_"+this._fieldId,this._rowContainerWithoutRowIndexId="multipleDatasetEntry_"+this._fieldId+"_",this._offsetValueId="multipleDatasetEntry_"+this._fieldId+"_rowOffset",this._classSpecInDataSet=".datasetfieldSpec",this._classRemove=".removeDatasetRow",this._fieldsContainers="datasetfieldSpec"},t=[{key:"unWrapJQuery",value:function(e){return e[0]}},{key:"wrapJQuery",value:function(e){return pjQuery(e)}},{key:"getPatternNameSampleContainer",value:function(){return this._patternSampleContainerName}},{key:"getSampleContainer",value:function(){return this.wrapJQuery(document.getElementById(this._sampleContainerId))}},{key:"getRowsContainer",value:function(){return this.wrapJQuery(document.getElementById(this._rowsContainerId))}},{key:"getJQueryRowContainer",value:function(e){return this.wrapJQuery(this.getRowContainer(e))}},{key:"getRowContainer",value:function(e){return document.getElementById(this._rowContainerWithoutRowIndexId+e)}},{key:"setOffsetValue",value:function(e){this.wrapJQuery(document.getElementById(this._offsetValueId)).val(e)}},{key:"getFieldsInsideTableRow",value:function(e){var t=this,n=[];return this.getRowContainer(e).getElementsByClassName(this._fieldsContainers).forEach((function(e){n.push(X.getField(t._getFieldIdFromFieldContainerId(e.id)))})),n}},{key:"getClassSpecInDataset",value:function(){return this._classSpecInDataSet}},{key:"getClassRemove",value:function(){return this._classRemove}},{key:"cleanAttributesOfSample",value:function(e){this.unWrapJQuery(e).removeAttribute("aria-hidden"),this.unWrapJQuery(e).classList.remove("TableSampleRow")}},{key:"isAddAnotherButton",value:function(e){return this.unWrapJQuery(e).classList.contains("addDatasetRow")}},{key:"addClonedRowToRowsContainer",value:function(e){this.wrapJQuery(document.getElementById(this._rowsContainerId)).append(e)}},{key:"_getFieldIdFromFieldContainerId",value:function(e){return e.substring(18)}}],t&&dw(e.prototype,t),n&&dw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const vw=hw;function bw(e){return bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bw(e)}function mw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gw(r.key),r)}}function gw(e){var t=function(e,t){if("object"!=bw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bw(t)?t:t+""}function _w(e,t,n){return t=Ow(t),function(e,t){if(t&&("object"===bw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ww()?Reflect.construct(t,n||[],Ow(e).constructor):t.apply(e,n))}function ww(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ww=function(){return!!e})()}function Ow(e){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ow(e)}function Sw(e,t){return Sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sw(e,t)}var Ew=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_w(this,t,[e]))._patternSampleContainerName=/^(datasetField__row--.*)-sample$/,n._sampleContainerId="datasetField__row--"+n._fieldId+"-sample",n._rowsContainerId=n._fieldId,n._rowContainerWithoutRowIndexId="datasetField__row--"+n._fieldId+"_",n._classSpecInDataSet=".fieldSpec--in-dataset",n._classRemove=".action--remove",n._fieldsContainers="fieldSpec",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sw(e,t)}(t,e),n=t,(r=[{key:"cleanAttributesOfSample",value:function(e){this.unWrapJQuery(e).removeAttribute("aria-hidden"),this.unWrapJQuery(e).removeAttribute("hidden"),this.unWrapJQuery(e).classList.remove("datasetField__row--sample")}},{key:"isAddAnotherButton",value:function(e){return void 0!==e&&this.unWrapJQuery(e).classList.contains("datasetField__button--add")}},{key:"addClonedRowToRowsContainer",value:function(e){this.wrapJQuery(document.getElementById(this._fieldId).querySelector(".datasetcontent > .datasetField__button--add")).before(e)}}])&&mw(n.prototype,r),o&&mw(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(vw);const Pw=Ew;function kw(e){return kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kw(e)}function Tw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dw(r.key),r)}}function jw(e,t,n){return t=Fw(t),function(e,t){if(t&&("object"===kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Iw()?Reflect.construct(t,n||[],Fw(e).constructor):t.apply(e,n))}function Iw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Iw=function(){return!!e})()}function Fw(e){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fw(e)}function Cw(e,t){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cw(e,t)}function Dw(e){var t=function(e,t){if("object"!=kw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kw(t)?t:t+""}var Rw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=jw(this,t,[e,n]))._lastRowIndex=r.getSetting("lastRowIndex"),r._isAccessibilityEnabled=r.getSetting("isAccessibilityEnabled"),r.getSetting("hasLegacyFormat")?r._structure=new vw(e):r._structure=new Pw(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cw(e,t)}(t,e),n=t,r=[{key:"_postRegister",value:function(){this._fixSampleRowRequiredAttributesForAccessibility(),this._attachOnClickListenersToAddNewRowLink(),this._attachOnClickListenersToRowsRemovalLinksInElement(this._getFieldElement()),this._attachOnChangeListener(),this.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,this.caller("_executeOnFieldValueChange"))}},{key:"_executeOnFieldValueChange",value:function(){if(this.hasValue()){var e=this._fieldId;pjQuery((function(){X.onFieldValueChange(e)}))}}},{key:"_attachOnChangeListener",value:function(){}},{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){return new M}},{key:"hasValue",value:function(){for(var e=!1,t=this._getFirstRowIndex();t<=this._lastRowIndex;t++)this._structure.getFieldsInsideTableRow(t).forEach((function(t){t&&t.hasValue()&&(e=!0)}));return e}},{key:"_getFirstRowIndex",value:function(){return this._structure.getRowsContainer().find(this._structure.getClassRemove()+'[data-row-index!="sample"]').attr("data-row-index")}},{key:"getValueForCondition",value:function(){return null}},{key:"focus",value:function(){pjQuery("#"+this._fieldId+"-1-"+this._getFirstRowIndex()).focus()}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_removeRow",value:function(e){var t=pjQuery(e).data("row-index"),n=this._getElementToFocusAfterRemove(t);this._structure.getJQueryRowContainer(t).remove(),n.focus(),this._hasNoRows()&&this._setRowsCounterElementValue("allRemoved")}},{key:"_getElementToFocusAfterRemove",value:function(e){var t=this._structure.getJQueryRowContainer(e);return 1!==t.next().length||this._structure.isAddAnotherButton(t.next())?t.prev().attr("id").includes("sample")?this._getAddNewRowLinkElement():t.prev().find(":input:visible:first"):t.next().find(":input:visible:first")}},{key:"_addNewRow",value:function(){var e=this._lastRowIndex+1,t=this._buildClonedRowElement();this._attachOnClickListenersToRowsRemovalLinksInElement(t),this._structure.cleanAttributesOfSample(t),this._fixFileFields(t,e),this._fixLabels(t,e),this._fixArrayedInputs(t,e),this._fixSingleElement("input",t,e),this._fixSingleElement("select",t,e),this._fixSingleElement("textarea",t,e),this._fixSingleElement("span",t,e),this._fixSingleElement("option",t,e),this._fixContainerId(t,e),this._fixRemoveLink(t,e),this._fixDateFallbacks(t,e),this._fixTime(t,e),this._addClonedRowToRowsContainer(t),this._fixParagraphWithFormat(t,e),this._fixAutocomplete(t),this._setRowsCounterElementValue(e),this._fixReuseUploadedFilesWidget(t,e),this._registerJsFields(t,e),this._focusFirstInputInNewRow(t),this._lastRowIndex=e}},{key:"_focusFirstInputInNewRow",value:function(e){e.find(":input:visible:first").focus()}},{key:"_fixSampleRowRequiredAttributesForAccessibility",value:function(){if(this._isAccessibilityEnabled)for(var e=document.querySelectorAll("[data-samplerow]"),t=e.length-1;t>=0;t--){var n=e[t].querySelectorAll("[data-required]")[0];n&&(n.removeAttribute("aria-required"),n.removeAttribute("required"))}}},{key:"_getAddNewRowLinkElement",value:function(){return pjQuery("#addRowFor_"+this._fieldId)}},{key:"_setRowsCounterElementValue",value:function(e){this._structure.setOffsetValue(e)}},{key:"_hasNoRows",value:function(){return 1===pjQuery('[name="removeRowFor_'+this._fieldId+'"]').length}},{key:"_buildClonedRowElement",value:function(){var e=this._structure.getSampleContainer().clone();if(!e)throw new Error("Error when adding new row for table: "+this._fieldId);return e}},{key:"_attachOnClickListenersToRowsRemovalLinksInElement",value:function(e){var t=this;pjQuery(e).find('[name="removeRowFor_'+this._fieldId+'"]').each((function(){var e=pjQuery(this);e.click((function(){return t._removeRow(e),!1}))}))}},{key:"_attachOnClickListenersToAddNewRowLink",value:function(){var e=this;this._getAddNewRowLinkElement().click((function(){return e._addNewRow(),!1}))}},{key:"_fixLabels",value:function(e,t){pjQuery(e).find("label").each((function(){var n=/^((\d+-)+)sample(\[.*\]|_.*)*$/,r=pjQuery(this).attr("for");if(r&&n.test(r)){var o=r.replace(n,"$1"+t+"$3");pjQuery(this).attr("for",o)}n=/^((\d+-)+)sample(\[.*\]|_.*|-label)*$/;var i=pjQuery(this).attr("id");if(i&&n.test(i)){var a=i.replace(n,"$1"+t+"$3");pjQuery(this).attr("id",a),pjQuery(e).find("[aria-labelledby="+i+"]").each((function(){pjQuery(this).attr("aria-labelledby",a)}))}}))}},{key:"_fixArrayedInputs",value:function(e,t){var n=this,r=[];pjQuery(e).find("input").each((function(){var e=/^((\d+-)+)sample_(\d+)$/,o=pjQuery(this).attr("id");if(o&&e.test(o)){var i=o.replace(e,"$1");i=i.substring(0,i.length-1);var a=o.replace(e,"$3");r[i]?r[i].push(a):r[i]=[a];var u=o.replace(e,"$1"+t+"_$3");pjQuery(this).attr("id",u);var l=/^((\d+-)+)sample(\[\])?$/,s=pjQuery(this).attr("name");if(s&&l.test(s)){var c=s.replace(l,"$1"+t+"$3");pjQuery(this).attr("name",c)}n._fixRequiredAttributes(this)}}))}},{key:"_fixRequiredAttributes",value:function(e){var t=pjQuery(e).attr("data-required");t&&(pjQuery(e).attr("required",t),pjQuery(e).attr("aria-required",t))}},{key:"_fixSingleElement",value:function(e,t,n){var r=this;pjQuery(t).find(e).each((function(){var e=/^((\d+-)+)sample(\[.*\]|_.*)*$/,t=pjQuery(this).attr("id");if(t&&e.test(t)){var o=t.replace(e,"$1"+n+"$3");pjQuery(this).attr("id",o);var i=pjQuery(this).attr("name");if(i){var a=/^((\d+-)+)sample(\[.*\]|_.*)*$/;a.test(i)&&(i=i.replace(a,"$1"+n+"$3")),pjQuery(this).attr("name",i)}r._fixRequiredAttributes(this)}var u=pjQuery(this).data("parentid");if(u){var l=/^((\d+-)+)sample(\[.*\]|_.*)*$/;l.test(u)&&(u=u.replace(l,"$1"+n+"$3")),pjQuery(this).attr("data-parentId",u)}}))}},{key:"_fixFileFields",value:function(e,t){pjQuery(e).has('.FileSchemaField :input[type="file"]')&&pjQuery(e).find('input[type="hidden"], input[type="file"], div').each((function(){this.name&&(this.name=this.name.replace(/sample/i,t)),this.id=this.id.replace(/sample/i,t)}))}},{key:"_getFileIdFromFileSchemaFieldElement",value:function(e){var t=pjQuery(e).find('.FileSchemaField :input[type="file"]').prop("id");return void 0!==t&&0!==t.length||(t=pjQuery(e).find('.FileSchemaField :input[type="hidden"][name^="file_"]:not([id=""])').prop("id")),t}},{key:"_fixParagraphWithFormat",value:function(e,t){var n=e.find(".mce-tinymce.mce-container");0!=n.length&&(n.remove(),e.find("textarea").show())}},{key:"_fixContainerId",value:function(e,t){pjQuery(e).attr("id",pjQuery(e).attr("id").replace(this._structure.getPatternNameSampleContainer(),"$1_"+t)),pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){pjQuery(this).attr("id",pjQuery(this).attr("id").replace(/(fieldSpecContainer.*-)sample/,"$1"+t))}))}},{key:"_fixRemoveLink",value:function(e,t){pjQuery(this._structure.getClassRemove(),e).attr("data-row-index",t)}},{key:"_addClonedRowToRowsContainer",value:function(e){this._structure.addClonedRowToRowsContainer(e)}},{key:"_fixDateFallbacks",value:function(e,t){pjQuery(e).find("div.DateFormField").each((function(){var e=pjQuery(this).find("script");if(pjQuery(e).html()){var n=pjQuery(e).html().replace(/(.*)sample(.*)/,"$1"+t+"$2");pjQuery(this).find("script").remove(),pjQuery(this).find("select").remove();var r=document.createElement("script");pjQuery(r).attr("type","text/javascript"),r.text=n,this.appendChild(r)}var o=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),i=o.split("-"),a=i.splice(0,i.length-1).join("-")+"-sample",u=pjQuery(document).find("input#"+a+'[type="hidden"]');u.length&&pjQuery(this).find("input#"+o+'[type="hidden"]').val(u[0].value);var l=pjQuery(document).find("input#"+a);l.length&&pjQuery(this).find("input#"+o).val(l[0].value)}))}},{key:"_fixAutocomplete",value:function(e){pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){var e=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),t=e.split("-"),n=t.splice(0,t.length-1).join("-")+"-0";void 0!==D_&&(n!==e&&D_.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(n,e),pjQuery("#"+e).change((function(){X.onFieldValueChange(e)})))}))}},{key:"_registerJsFields",value:function(e,t){var n=e.find("[data-formula]").attr("id");if(n){var r=n.split("-"),o=r.splice(0,r.length-1).join("-");X.cloneForNewTableRow(o,t)}pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){var e=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),n=e.split("-"),r=n.splice(0,n.length-1).join("-");X.cloneForNewTableRow(r,t);var o=e+"_sourceAndCategory";PortalHtml.elementExists(o)&&X.cloneForNewTableRow(r,t,"_sourceAndCategory");var i=e+"_category";PortalHtml.elementExists(i)&&X.cloneForNewTableRow(r,t,"_category")}))}},{key:"_fixReuseUploadedFilesWidget",value:function(e,t){e.find("[data-old-files-selector-sample-reference]").each((function(){var e=pjQuery(this).attr("data-old-files-selector-sample-reference").split("-"),n=e.splice(0,e.length-1).join("-");pjQuery(this).remove(),new fw(n+"-"+t,fw.tableFieldsDataReference[n].dictionaryJSON,fw.tableFieldsDataReference[n].uploadedFilesJSON).addOldFilesSelectorToFileInput()}))}},{key:"_fixTime",value:function(e,t){e.find(".TimeFieldsWrapper").each((function(){var e=pjQuery(this).html();e=e.replace(/sample/g,t),pjQuery(this).html(pjQuery.parseHTML(e))}))}}],r&&Tw(n.prototype,r),o&&Tw(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=Dw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Rw,"TYPE","TableField");const Aw=Rw;function Nw(e){return Nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nw(e)}function xw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ww(r.key),r)}}function Lw(e,t,n){return t=Vw(t),function(e,t){if(t&&("object"===Nw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mw()?Reflect.construct(t,n||[],Vw(e).constructor):t.apply(e,n))}function Mw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mw=function(){return!!e})()}function Vw(e){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vw(e)}function Bw(e,t){return Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bw(e,t)}function Ww(e){var t=function(e,t){if("object"!=Nw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nw(t)?t:t+""}var Uw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Lw(this,t,[e,n]))._shouldUseMilitaryTimeFormat=r.getSetting("shouldUseMilitaryTimeFormat"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bw(e,t)}(t,e),n=t,r=[{key:"getType",value:function(){return t.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[o_.TYPE]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=e.getHours(),n=null;this._shouldUseMilitaryTimeFormat||(n=t>=12?"PM":"AM",t>12?t-=12:0===t&&(t=12)),X.setFieldValue(this._getHoursId(),new Sn(t.toString())),X.setFieldValue(this._getMinutesId(),new Sn(e.getMinutes().toString())),n&&X.setFieldValue(this._getAMPMId(),new Gt(n))}},{key:"getValue",value:function(){return X.hasValue(this._getHoursId())&&X.hasValue(this._getMinutesId())?new o_(this._getHoursFieldValue(),this._getMinutesFieldValue(),0):new M}},{key:"getValueForCondition",value:function(){return[this._getHoursFieldValue(),this._getMinutesFieldValue(),0]}},{key:"_getHoursFieldValue",value:function(){var e=X.getFieldValueByType(this._getHoursId(),FieldOptionValue.TYPE);if(e.isEmpty())return 0;var t=PortalString.toInt(e.getOptionId());return isNaN(t)?0:(t=PortalString.toInt(t,10),this._shouldUseMilitaryTimeFormat?t:this._adaptHoursToAMPMFormat(t))}},{key:"_adaptHoursToAMPMFormat",value:function(e){var t=X.getFieldValueByType(this._getAMPMId(),FieldOptionValue.TYPE);if(t.isEmpty())return e;var n=t.getOptionText();return"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),e}},{key:"_getMinutesFieldValue",value:function(){var e=X.getFieldValueByType(this._getMinutesId(),FieldOptionValue.TYPE);return e.isEmpty()?0:PortalString.toInt(e.getOptionId())||0}},{key:"_buildClonedField",value:function(e){return new t(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){var e=[this._createFieldMetadata(this._getHoursId(),this._getHoursSuffix()),this._createFieldMetadata(this._getMinutesId(),this._getMinutesSuffix())];return this._shouldUseMilitaryTimeFormat||e.push(this._createFieldMetadata(this._getAMPMId(),this._getAMPMSuffix())),e}},{key:"_getHoursId",value:function(){return this.getFieldId()+this._getHoursSuffix()}},{key:"_getMinutesId",value:function(){return this.getFieldId()+this._getMinutesSuffix()}},{key:"_getAMPMId",value:function(){return this.getFieldId()+this._getAMPMSuffix()}},{key:"_getHoursSuffix",value:function(){return"_hours"}},{key:"_getMinutesSuffix",value:function(){return"_minutes"}},{key:"_getAMPMSuffix",value:function(){return"_ampm"}}],r&&xw(n.prototype,r),o&&xw(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Tu);!function(e,t,n){(t=Ww(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Uw,"TYPE","TimeField");const Yw=Uw;function Hw(e){return Hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hw(e)}function zw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$w(r.key),r)}}function Qw(e,t,n){return t=Jw(t),function(e,t){if(t&&("object"===Hw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qw()?Reflect.construct(t,n||[],Jw(e).constructor):t.apply(e,n))}function qw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qw=function(){return!!e})()}function Gw(){return Gw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jw(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Gw.apply(this,arguments)}function Jw(e){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jw(e)}function Kw(e,t){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kw(e,t)}function $w(e){var t=function(e,t){if("object"!=Hw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hw(t)?t:t+""}var Zw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qw(this,t,[e,n]))._customEmail=r.getSetting("customEmail")||"",r._customEmailLabel=r.getSetting("customEmailLabel"),r._isCustomInputEnabled=r.getSetting("isCustomInputEnabled"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kw(e,t)}(t,e),n=t,r=[{key:"getValueForCondition",value:function(){var e=this._getCustomInput();if(e)return e.value;var t=this._getSelectedOptionId();return t?document.getElementById(this.getFieldId()+"_"+t).text:null}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){Gs.prototype._postRegister.call(this),(this._customEmail||"custom"===this._getSelectedOptionId())&&this.setValue(new Sn("custom"))}},{key:"_activate",value:function(e){Gw(Jw(t.prototype),"_activate",this).call(this,e),this._customEmail&&"custom"!==this._getSelectedOptionId()&&(document.getElementById(this.getFieldId()).value="custom")}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this.getFieldId()).on("change",(function(){e._handleCustomInput(),X.onFieldValueChange(e.getFieldId())}))}},{key:"_handleCustomInput",value:function(){var e=this.getValue();if(e.isEmpty()||"custom"!==e.getOptionId()){var t=this._getCustomInput();t&&t.remove()}else{document.getElementById(this.getFieldId()).parentNode.append(this._buildCustomInput()),this._getCustomInput().focus();var n=this;pjQuery("#"+this.getFieldId()+"_customEmail").on("input",(function(){this.onkeyup=null,X.onFieldValueChange(n.getFieldId())}))}}},{key:"_buildCustomInput",value:function(){var e=document.createElement("input");return e.setAttribute("id",this.getFieldId()+"_customEmail"),e.setAttribute("name",this.getFieldId()+"_customEmail"),e.setAttribute("type","email"),e.setAttribute("class","EmailField NotificationEmailField"),e.setAttribute("value",this._customEmail),e.setAttribute("tabindex",0),e.setAttribute("autocomplete","email"),e.setAttribute("aria-label",this._customEmailLabel),this._isCustomInputEnabled||e.setAttribute("disabled",""),e}},{key:"_getCustomInput",value:function(){return document.getElementById(this.getFieldId()+"_customEmail")}},{key:"_getSelectedOptionId",value:function(){return this._getFieldElement().val()}}],r&&zw(n.prototype,r),o&&zw(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Gs);!function(e,t,n){(t=$w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zw,"TYPE","UserNotificationsEmailField");const Xw=Zw;function eO(e){return eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eO(e)}function tO(e,t,n){return(t=rO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rO(r.key),r)}}function rO(e){var t=function(e,t){if("object"!=eO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eO(t)?t:t+""}function oO(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var iO=new WeakSet,aO=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oO(this,iO)},t=[{key:"getBrowserTimeZone",value:function(){return"undefined"==typeof Intl?"":function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(iO,this,uO).call(this,Intl.DateTimeFormat().resolvedOptions().timeZone)}}],t&&nO(e.prototype,t),n&&nO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function uO(e){return tO(tO(tO({"Africa/Timbuktu":"Africa/Abidjan","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Atka":"America/Adak","America/Buenos_Aires":"America/Argentina/Buenos_Aires","America/Catamarca":"America/Argentina/Catamarca","America/Coral_Harbour":"America/Atikokan","America/Cordoba":"America/Argentina/Cordoba","America/Ensenada":"America/Tijuana","America/Fort_Wayne":"America/Indiana/Indianapolis","America/Indianapolis":"America/Indiana/Indianapolis","America/Jujuy":"America/Argentina/Jujuy","America/Knox_IN":"America/Indiana/Knox","America/Louisville":"America/Kentucky/Louisville","America/Mendoza":"America/Argentina/Mendoza","America/Montreal":"America/Toronto","America/Porto_Acre":"America/Rio_Branco","America/Rosario":"America/Argentina/Cordoba","America/Santa_Isabel":"America/Tijuana","America/Shiprock":"America/Denver","America/Virgin":"America/Port_of_Spain","Antarctica/South_Pole":"Pacific/Auckland","Asia/Ashkhabad":"Asia/Ashgabat","Asia/Calcutta":"Asia/Kolkata","Asia/Chongqing":"Asia/Shanghai","Asia/Chungking":"Asia/Shanghai","Asia/Dacca":"Asia/Dhaka","Asia/Harbin":"Asia/Shanghai","Asia/Istanbul":"Europe/Istanbul","Asia/Kashgar":"Asia/Urumqi[note 1]","Asia/Katmandu":"Asia/Kathmandu","Asia/Macao":"Asia/Macau","Asia/Rangoon":"Asia/Yangon","Asia/Saigon":"Asia/Ho_Chi_Minh","Asia/Tel_Aviv":"Asia/Jerusalem","Asia/Thimbu":"Asia/Thimphu","Asia/Ujung_Pandang":"Asia/Makassar","Asia/Ulan_Bator":"Asia/Ulaanbaatar","Atlantic/Faeroe":"Atlantic/Faroe","Atlantic/Jan_Mayen":"Europe/Oslo","Australia/ACT":"Australia/Sydney","Australia/Canberra":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Australia/Yancowinna":"Australia/Broken_Hill","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",Cuba:"America/Havana",Egypt:"Africa/Cairo",Eire:"Europe/Dublin","Europe/Belfast":"Europe/London","Europe/Nicosia":"Asia/Nicosia","Europe/Tiraspol":"Europe/Chisinau",GB:"Europe/London","GB-Eire":"Europe/London",Hongkong:"Asia/Hong_Kong",Iceland:"Atlantic/Reykjavik",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",Navajo:"America/Denver",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham","Pacific/Johnston":"Pacific/Honolulu","Pacific/Ponape":"Pacific/Pohnpei","Pacific/Samoa":"Pacific/Pago_Pago","Pacific/Truk":"Pacific/Chuuk","Pacific/Yap":"Pacific/Chuuk",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",PRC:"Asia/Shanghai",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Pacific-New":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago","W-SU":"Europe/Moscow"},"W-SU","Europe/Moscow"),"Etc/UTC","GMT"),"UTC","GMT")[e]||e}const lO=aO;function sO(e){return sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sO(e)}function cO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vO(r.key),r)}}function fO(e,t,n){return t=yO(t),function(e,t){if(t&&("object"===sO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pO()?Reflect.construct(t,n||[],yO(e).constructor):t.apply(e,n))}function pO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pO=function(){return!!e})()}function dO(){return dO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},dO.apply(this,arguments)}function yO(e){return yO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yO(e)}function hO(e,t){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hO(e,t)}function vO(e){var t=function(e,t){if("object"!=sO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sO(t)?t:t+""}var bO=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=fO(this,t,[e,n,r]))._shouldUseBrowserTimeZone=o.getSetting("shouldUseBrowserTimeZone"),o._useMocks=o.getSetting("useMocks"),o._timeZoneHelper=new lO,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hO(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,n){return this._cloneDatasourceForNewTableRow(e,n),new t(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new t(e,this.getFieldSettings(),this.getFieldId())}},{key:"_postRegister",value:function(){dO(yO(t.prototype),"_postRegister",this).call(this),this._shouldUseBrowserTimeZone&&this.setValue(new Sn(this._getBrowserTimeZone())),X.getField(this.getFieldId()).addListener("selectingAutocompleteValueEvent",this.caller("_onSelectedOption"))}},{key:"_onSelectedOption",value:function(e){var t=e.params.args.data.id,n=document.getElementById(this._fieldId),r=n.querySelector('option[value="'+t+'"]');r&&n.removeChild(r)}},{key:"_getBrowserTimeZone",value:function(){return this._useMocks?"Europe/London":this._timeZoneHelper.getBrowserTimeZone()}}])&&cO(n.prototype,r),o&&cO(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(dr);!function(e,t,n){(t=vO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bO,"TYPE","UserTimeZoneField");const mO=bO;var gO;function _O(e){return _O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_O(e)}function wO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OO(r.key),r)}}function OO(e){var t=function(e,t){if("object"!=_O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_O(t)?t:t+""}var SO=null,EO=!1,PO=function(){return e=function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!EO)throw new Error("Constructor is private. Use getInstance() instead")},(t=[{key:"buildField",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the field."),null;switch(t){case yn.TYPE:return new yn(e,n);case Qr.TYPE:return new Qr(e,n);case dr.TYPE:return new dr(e,n);case Lj.TYPE:return new Lj(e,n);case Co.TYPE:return new Co(e,n);case Wo.TYPE:return new Wo(e,n);case Xa.TYPE:return new Xa(e,n);case bu.TYPE:return new bu(e,n);case fl.TYPE:return new fl(e,n);case wl.TYPE:return new wl(e,n);case es.TYPE:return new es(e,n);case Vs.TYPE:return new Vs(e,n);case sc.TYPE:return new sc(e,n);case Ps.TYPE:return new Ps(e,n);case Xf.TYPE:return new Xf(e,n);case lp.TYPE:return new lp(e,n);case Cp.TYPE:return new Cp(e,n);case cs.TYPE:return new cs(e,n);case Bp.TYPE:return new Bp(e,n);case lu.TYPE:return new lu(e,n);case sd.TYPE:return new sd(e,n);case Ad.TYPE:return new Ad(e,n);case Yd.TYPE:return new Yd(e,n);case Zd.TYPE:return new Zd(e,n);case Jp.TYPE:return new Jp(e,n);case Ny.TYPE:return new Ny(e,n);case oh.TYPE:return new oh(e,n);case dh.TYPE:return new dh(e,n);case Oh.TYPE:return new Oh(e,n);case Yh.TYPE:return new Yh(e,n);case Zh.TYPE:return new Zh(e,n);case mv.TYPE:return new mv(e,n);case qv.TYPE:return new qv(e,n);case rb.TYPE:return new rb(e,n);case hb.TYPE:return new hb(e,n);case kb.TYPE:return new kb(e,n);case xb.TYPE:return new xb(e,n);case zb.TYPE:return new zb(e,n);case cm.TYPE:return new cm(e,n);case gm.TYPE:return new gm(e,n);case Sg.TYPE:return new Sg(e,n);case Lg.TYPE:return new Lg(e,n);case Gs.TYPE:return new Gs(e,n);case Jg.TYPE:return new Jg(e,n);case d_.TYPE:return new d_(e,n);case O_.TYPE:return new O_(e,n);case Aw.TYPE:return new Aw(e,n);case bp.TYPE:return new bp(e,n);case Yw.TYPE:return new Yw(e,n);case Xw.TYPE:return new Xw(e,n);case mO.TYPE:return new mO(e,n);default:return console.error("Can not register Field ID #"+e+' - Field registrar name "'+t+'" is not valid.'),null}}}])&&wO(e.prototype,t),n&&wO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();gO=PO,function(e,t,n){(t=OO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(PO,"getInstance",(function(){return SO||(EO=!0,SO=new gO,EO=!1),SO}));const kO=PO;n(95755),n(79432);const TO=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.run=function(e,t,n){var r=s.getInstance(),o=r.buildKey(e,t);r.get(o).fail((function(){var i=pjQuery.ajax({type:"POST",url:e,dataType:"json",data:t});r.set(o,i),i.done(n)})).done((function(e){e.done(n)}))}};function jO(e){return jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jO(e)}function IO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FO(r.key),r)}}function FO(e){var t=function(e,t){if("object"!=jO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jO(t)?t:t+""}var CO=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._datasourceSettings=n||{},this._portalUrlPath=this.getSetting("portalUrlPath"),this._datasourcesCallRunner=new TO},(t=[{key:"registerDatasourceValues",value:function(){Datasources.registerDatasource(this._fieldId,this)}},{key:"registerDatasourceDefaultValues",value:function(){DefaultValueDatasources.registerDatasource(this._fieldId,this)}},{key:"isLocalDatasource",value:function(){return!1}},{key:"getOptions",value:function(){return[]}},{key:"fetchNewOptions",value:function(e,t,n,r){throw new Error("notImplementedError")}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notImplementedError")}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notImplementedError")}},{key:"getParentDependenciesFieldsIds",value:function(){throw new Error("notImplementedError")}},{key:"isParentDependentField",value:function(e){throw new Error("notImplementedError")}},{key:"cloneForNewTableRow",value:function(e,t){return this.clone(e)}},{key:"clone",value:function(e){throw new Error("notImplementedError")}},{key:"getOptionsSearchApiUrl",value:function(){throw new Error("notImplementedError")}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){throw new Error("notImplementedError")}},{key:"processLazyPickerAjaxResponseData",value:function(e){throw new Error("notImplementedError")}},{key:"_fetchOptions",value:function(e,t){var n=this._getDatasourcesCallRunnerOnSuccessCallback(t);this._datasourcesCallRunner.run(this.getOptionsSearchApiUrl(),e,n)}},{key:"_getDatasourcesCallRunnerOnSuccessCallback",value:function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[],r=t.hasOwnProperty("currentOptionsFoundInResults")?t.currentOptionsFoundInResults:[];e(n,r)}}},{key:"_getFieldId",value:function(){return this._fieldId}},{key:"getDatasourceSettings",value:function(){return this._datasourceSettings}},{key:"getSetting",value:function(e){return this._datasourceSettings.hasOwnProperty(e)?this._datasourceSettings[e]:null}}])&&IO(e.prototype,t),n&&IO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const DO=CO;function RO(e){return RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RO(e)}function AO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LO(r.key),r)}}function NO(e,t,n){return t&&AO(e.prototype,t),n&&AO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xO(e,t,n){return(t=LO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LO(e){var t=function(e,t){if("object"!=RO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RO(t)?t:t+""}var MO=NO((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));xO(MO,"SELF_RECORD","selfRecord"),xO(MO,"RECORD_PICKER","recordPicker");const VO=MO;function BO(e){return BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BO(e)}function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HO(r.key),r)}}function UO(e,t,n){return t&&WO(e.prototype,t),n&&WO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function YO(e,t,n){return(t=HO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HO(e){var t=function(e,t){if("object"!=BO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BO(t)?t:t+""}var zO=UO((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));YO(zO,"FIXED","fixed"),YO(zO,"FIELD","field");const QO=zO;var qO=n(65484),GO=n(70834);function JO(e){return JO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JO(e)}function KO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$O(r.key),r)}}function $O(e){var t=function(e,t){if("object"!=JO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=JO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JO(t)?t:t+""}function ZO(e,t,n){return t=eS(t),function(e,t){if(t&&("object"===JO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,XO()?Reflect.construct(t,n||[],eS(e).constructor):t.apply(e,n))}function XO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XO=function(){return!!e})()}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eS(e)}function tS(e,t){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tS(e,t)}var nS=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ZO(this,t,[e,n]))._datasetFilters=r||o.getSetting("datasetFilters")||[],o._optionFormatComponents=o.getSetting("optionFormatComponents")||[],o._schemaFieldIdToUseForIndirectFiltering=o.getSetting("schemaFieldIdToUseForIndirectFiltering"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t)}(t,e),n=t,(r=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){throw new Error("notImplemented")}},{key:"getParentDependenciesFieldsIds",value:function(){return this._datasetFilters.flatMap((function(e){return e.type===QO.FIELD?[e.parentDependencyFieldId.toString()]:[]}))}},{key:"isParentDependentField",value:function(e){return null!=e&&this.getParentDependenciesFieldsIds().includes(e.toString())}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e,!0,null,null);this._fetchOptions(n,t)}else t([])}},{key:"_buildClonedFiltersForNewTableRow",value:function(e,t){for(var n=[],r=this._fieldId.split("-"),o=0;o<this._datasetFilters.length;o++){var i=pjQuery.extend(!0,{},this._datasetFilters[o]);if(i.type===QO.FIELD&&i.parentDependencyFieldId.indexOf("-")>0){var a=i.parentDependencyFieldId.split("-");a[0]===r[0]&&(a[a.length-1]=t,i.parentDependencyFieldId=a.join("-"))}n.push(i)}return n}},{key:"_buildFiltersWithCurrentFieldsValues",value:function(){for(var e=[],t=0;t<this._datasetFilters.length;t++){var n=pjQuery.extend(!0,{},this._datasetFilters[t]);n.type===QO.FIELD&&this._updateFieldFilter(n),e.push(n)}return e}},{key:"_prepareFilterToSend",value:function(e){var t;return{operator:e.operator,datasetSpecIdFilter:e.datasetSpecIdFilter||null,schemaFieldNumberFilter:e.schemaFieldNumberFilter||null,value:null!==(t=e.value)&&void 0!==t?t:null,sourceType:e.sourceType,entityId:e.entityId||null,type:e.type}}},{key:"_prepareOptionFormatComponentToSend",value:function(e){return{type:e.type,order:e.order,fieldNumberOrText:e.fieldNumberOrText}}},{key:"_updateFieldFilter",value:function(e){e.sourceType===VO.SELF_RECORD?this._updateFieldFilterWithSelfWizardSource(e):e.sourceType===VO.RECORD_PICKER&&this._updateFieldFilterWithRecordPickerSource(e)}},{key:"_updateFieldFilterWithSelfWizardSource",value:function(e){var t=e.parentDependencyFieldId;if(X.isFieldRegistered(t)){var n=X.getFieldValue(t);if(!this._shouldIgnoreFilterIfNoValueIsSelected()||!n.isEmpty()){switch(n.getType()){case M.TYPE:e.value=[];break;case Dn.TYPE:e.value=PortalString.toInt(n.getOptionId());break;case Wn.TYPE:e.value=n.getOptionsIds().map((function(e){return PortalString.toInt(e)}));break;case Ch.TYPE:var r=new qO.j(n.getYear(),n.getMonth(),1),o=new qO.j(n.getYear(),n.getMonth(),GO.A.getLastDayInMonth(r));e.value=[r.getJsonValue(),o.getJsonValue()];break;case tl.TYPE:case xu.TYPE:e.value=new qO.j(n.getYear(),n.getMonth(),n.getDay()),e.value=e.value.getJsonValue();break;case rn.TYPE:case Gt.TYPE:e.value=n.getValue();break;default:throw new Error("invalidValue: dataset filtering requires a field with options to filter by")}e.type=QO.FIXED}}}},{key:"_updateFieldFilterWithRecordPickerSource",value:function(e){var t=e.parentDependencyFieldId;if(X.isFieldRegistered(t)){var n=X.getFieldValue(t);n.isEmpty()||(e.entityId=n.getOptionId())}}}])&&KO(n.prototype,r),o&&KO(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);const rS=nS;function oS(e){return oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oS(e)}function iS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cS(r.key),r)}}function aS(e,t,n){return t=lS(t),function(e,t){if(t&&("object"===oS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uS()?Reflect.construct(t,n||[],lS(e).constructor):t.apply(e,n))}function uS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uS=function(){return!!e})()}function lS(e){return lS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lS(e)}function sS(e,t){return sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sS(e,t)}function cS(e){var t=function(e,t){if("object"!=oS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oS(t)?t:t+""}var fS=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=aS(this,t,[e,n,r]))._datasetSchemaSpecId=o.getSetting("datasetSchemaSpecId"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sS(e,t)}(t,e),n=t,(r=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return!1}},{key:"cloneForNewTableRow",value:function(e,n){var r=this._buildClonedFiltersForNewTableRow(e,n);return new t(e,this.getDatasourceSettings(),r)}},{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDatasetOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)})),l=this._optionFormatComponents.map((function(e){return a._prepareOptionFormatComponentToSend(e)}));return JSON.stringify({datasetSchemaSpecId:this._datasetSchemaSpecId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:l,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&iS(n.prototype,r),o&&iS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(rS);!function(e,t,n){(t=cS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fS,"TYPE","DatasetFieldOptionsDatasource");const pS=fS;function dS(e){return dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dS(e)}function yS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gS(r.key),r)}}function hS(e,t,n){return t=bS(t),function(e,t){if(t&&("object"===dS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vS()?Reflect.construct(t,n||[],bS(e).constructor):t.apply(e,n))}function vS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vS=function(){return!!e})()}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bS(e)}function mS(e,t){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mS(e,t)}function gS(e){var t=function(e,t){if("object"!=dS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dS(t)?t:t+""}var _S=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=hS(this,t,[e,n,r]))._datasetSchemaFieldId=o.getSetting("datasetSchemaFieldId"),o._ignoreFilterIfNoValueIsSelected=o.getSetting("ignoreFilterIfNoValueIsSelected"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mS(e,t)}(t,e),n=t,(r=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return this._ignoreFilterIfNoValueIsSelected}},{key:"cloneForNewTableRow",value:function(e,n){var r=this._buildClonedFiltersForNewTableRow(e,n);return new t(e,this.getDatasourceSettings(),r)}},{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDatasetSingleColumnOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)})),l=this._optionFormatComponents.map((function(e){return a._prepareOptionFormatComponentToSend(e)}));return JSON.stringify({datasetFieldSchemaFieldId:this._datasetSchemaFieldId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:l,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&yS(n.prototype,r),o&&yS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(rS);!function(e,t,n){(t=gS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_S,"TYPE","DatasetSingleColumnFieldOptionsDatasource");const wS=_S;function OS(e){return OS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OS(e)}function SS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jS(r.key),r)}}function ES(e,t,n){return t=kS(t),function(e,t){if(t&&("object"===OS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PS()?Reflect.construct(t,n||[],kS(e).constructor):t.apply(e,n))}function PS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PS=function(){return!!e})()}function kS(e){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kS(e)}function TS(e,t){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},TS(e,t)}function jS(e){var t=function(e,t){if("object"!=OS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OS(t)?t:t+""}var IS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ES(this,t,[e,n]))._setOptions(r.getSetting("options")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}(t,e),n=t,(r=[{key:"isLocalDatasource",value:function(){return!0}},{key:"getOptions",value:function(){return this._options}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=[],i=[];if(this._options.forEach((function(t){PortalArray.contains(t.id,e)&&i.push(t),o.push(t)})),null!==t&&null!==n){var a=(t-1)*n;o=o.slice(a,a+n)}r(o,i)}},{key:"fetchOptionsById",value:function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.id==e&&(n.push(t),!0)}))}),this),t(n)}},{key:"fetchOptionsByValue",value:function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.name==e&&(n.push(t),!0)}))}),this),t(n)}},{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"_setOptions",value:function(e){this._options=[],e&&Array.isArray(e)&&e.forEach((function(e){e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&this._options.push({id:e.id,name:e.name})}),this)}}])&&SS(n.prototype,r),o&&SS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=jS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(IS,"TYPE","LocalDatasource");const FS=IS;function CS(e){return CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CS(e)}function DS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LS(r.key),r)}}function RS(e,t,n){return t=NS(t),function(e,t){if(t&&("object"===CS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,AS()?Reflect.construct(t,n||[],NS(e).constructor):t.apply(e,n))}function AS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AS=function(){return!!e})()}function NS(e){return NS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NS(e)}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xS(e,t)}function LS(e){var t=function(e,t){if("object"!=CS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=CS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CS(t)?t:t+""}var MS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),RS(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}(t,e),n=t,(r=[{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){return[]}},{key:"fetchOptionsById",value:function(e,t){var n=[];e.forEach((function(e){n.push({id:e})}),this),t(n)}},{key:"fetchOptionsByValue",value:function(e,t){var n=[];e.forEach((function(e){n.push({name:e})}),this),t(n)}},{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}}])&&DS(n.prototype,r),o&&DS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(FS);!function(e,t,n){(t=LS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(MS,"TYPE","DummyDatasource");const VS=MS;function BS(e){return BS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BS(e)}function WS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QS(r.key),r)}}function US(e,t,n){return t=HS(t),function(e,t){if(t&&("object"===BS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YS()?Reflect.construct(t,n||[],HS(e).constructor):t.apply(e,n))}function YS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YS=function(){return!!e})()}function HS(e){return HS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},HS(e)}function zS(e,t){return zS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zS(e,t)}function QS(e){var t=function(e,t){if("object"!=BS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BS(t)?t:t+""}var qS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=US(this,t,[e,n]))._jobId=r.getSetting("jobId"),r._contactOrJobIdEdit=r.getSetting("contactOrJobIdEdit"),r._wizardId=r.getSetting("wizardId"),r._schemaFieldId=r.getSetting("schemaFieldId"),r._optionFormatJson=r.getSetting("optionFormatJson"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zS(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalOptionSearchApi"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e),i=this;this._fetchOptions(o,(function(e){var t=i._buildApiAdaptedResults(e);r(t)}))}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0,null,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={searchText:n,exactTextMatch:r,ids:o,fieldId:this._fieldId,jobId:this._jobId,page:e||1,limit:t,optionFormat:this._optionFormatJson,schemaFieldId:this._schemaFieldId,currentSelectedOptionsIds:i},u=this._wizardId;u&&(a.wizardId=u);var l=this._contactOrJobIdEdit;return l&&(a.contactOrJobIdEdit=l),JSON.stringify(a)}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name}})):null}})),pagination:{more:e.more}}}},{key:"_buildApiAdaptedResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){n.children?pjQuery.each(n.children,(function(e,n){t.push({id:n.id,name:n.name})})):t.push({id:n.id,name:n.name})})),t}}],r&&WS(n.prototype,r),o&&WS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=QS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qS,"TYPE","GeneralOptionsDatasource");const GS=qS;function JS(e){return JS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JS(e)}function KS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tE(r.key),r)}}function $S(e,t,n){return t=XS(t),function(e,t){if(t&&("object"===JS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ZS()?Reflect.construct(t,n||[],XS(e).constructor):t.apply(e,n))}function ZS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZS=function(){return!!e})()}function XS(e){return XS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XS(e)}function eE(e,t){return eE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},eE(e,t)}function tE(e){var t=function(e,t){if("object"!=JS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=JS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JS(t)?t:t+""}var nE=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=$S(this,t,[e,n]))._listSpecId=r.getSetting("listSpecId"),r._requestType=r.getSetting("requestType"),r._searchIndexId=r.getSetting("searchIndexId"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eE(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_instantSearch"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({requestType:this._requestType,listSpecId:this._listSpecId,richFieldId:this._fieldId,searchTerm:n||"",searchIndexId:this._searchIndexId})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name||"",fields:e.fieldValues||[],detailUrl:e.detailUrl||null}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.id,name:n.name})})),t}}],r&&KS(n.prototype,r),o&&KS(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=tE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nE,"TYPE","InstantSearchDatasource");const rE=nE;function oE(e){return oE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oE(e)}function iE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fE(r.key),r)}}function aE(e,t,n){return t=lE(t),function(e,t){if(t&&("object"===oE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uE()?Reflect.construct(t,n||[],lE(e).constructor):t.apply(e,n))}function uE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uE=function(){return!!e})()}function lE(e){return lE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lE(e)}function sE(e,t){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sE(e,t)}function cE(e,t,n){return(t=fE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fE(e){var t=function(e,t){if("object"!=oE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oE(t)?t:t+""}var pE=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aE(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sE(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_jobSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,n,r,o,i,a){return JSON.stringify({richFieldId:this._getFieldId(),richFieldType:pjQuery("#"+this._getFieldId()).data("field-type"),searchText:r||"",limit:t.PAGE_SIZE,page:e})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.value,text:e.text}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.value,name:n.text})})),t}}],r&&iE(n.prototype,r),o&&iE(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);cE(pE,"TYPE","JobSuggestionsDatasource"),cE(pE,"PAGE_SIZE",10);const dE=pE;function yE(e){return yE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yE(e)}function hE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_E(r.key),r)}}function vE(e,t,n){return t=mE(t),function(e,t){if(t&&("object"===yE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bE()?Reflect.construct(t,n||[],mE(e).constructor):t.apply(e,n))}function bE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bE=function(){return!!e})()}function mE(e){return mE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mE(e)}function gE(e,t){return gE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gE(e,t)}function _E(e){var t=function(e,t){if("object"!=yE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yE(t)?t:t+""}var wE=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vE(this,t,[e,n]))._schemaFieldId=r.getSetting("schemaFieldId"),r._isSearchMode=r.getSetting("isSearchMode")||!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gE(e,t)}(t,e),n=t,(r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalUserSearch"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,(function(e){t(e)}))}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notSupportedError: currently is not possible to set an option by value.")}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={schemaFieldId:this._schemaFieldId,searchText:n||"",searchIds:o||null,currentOptionsIds:i||[],isSearchMode:this._isSearchMode,page:e||1,limit:t};return JSON.stringify(a)}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&hE(n.prototype,r),o&&hE(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=_E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wE,"TYPE","UsersDatasource");const OE=wE;function SE(e){return SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SE(e)}function EE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IE(r.key),r)}}function PE(e,t,n){return t=TE(t),function(e,t){if(t&&("object"===SE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kE()?Reflect.construct(t,n||[],TE(e).constructor):t.apply(e,n))}function kE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kE=function(){return!!e})()}function TE(e){return TE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},TE(e)}function jE(e,t){return jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jE(e,t)}function IE(e){var t=function(e,t){if("object"!=SE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SE(t)?t:t+""}var FE=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=PE(this,t,[e,n]))._richFieldId=r.getSetting("richFieldId"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jE(e,t)}(t,e),n=t,(r=[{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalLinkToPersonSearch"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={richFieldId:this._richFieldId,searchText:n||"",searchIds:o||null,currentOptionsIds:i||[]};return JSON.stringify(a)}}])&&EE(n.prototype,r),o&&EE(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(OE);!function(e,t,n){(t=IE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(FE,"TYPE","LinkToPersonDatasource");const CE=FE;function DE(e){return DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DE(e)}function RE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ME(r.key),r)}}function AE(e,t,n){return t=xE(t),function(e,t){if(t&&("object"===DE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,NE()?Reflect.construct(t,n||[],xE(e).constructor):t.apply(e,n))}function NE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NE=function(){return!!e})()}function xE(e){return xE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xE(e)}function LE(e,t){return LE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},LE(e,t)}function ME(e){var t=function(e,t){if("object"!=DE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DE(t)?t:t+""}var VE=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),AE(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LE(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_workflowStepSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({searchText:n||"",page:e,limit:t,richFieldId:this._getFieldId()})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._adaptGroupedOptionsToSelect2(e.results),pagination:{more:e.more||!1}}}},{key:"_adaptGroupedOptionsToSelect2",value:function(e){var t=[];for(var n in e)t.push({text:e[n].text,children:e[n].children,id:n});return t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e)t.push({id:e[n].id,name:e[n].text});return t}}],r&&RE(n.prototype,r),o&&RE(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=ME(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(VE,"TYPE","WorkflowStepDatasource");const BE=VE;function WE(e){return WE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WE(e)}function UE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qE(r.key),r)}}function YE(e,t,n){return t=zE(t),function(e,t){if(t&&("object"===WE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HE()?Reflect.construct(t,n||[],zE(e).constructor):t.apply(e,n))}function HE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HE=function(){return!!e})()}function zE(e){return zE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zE(e)}function QE(e,t){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QE(e,t)}function qE(e){var t=function(e,t){if("object"!=WE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WE(t)?t:t+""}var GE=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),YE(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QE(e,t)}(t,e),n=t,(r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_linkedJobStepSuggestions"}}])&&UE(n.prototype,r),o&&UE(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(BE);!function(e,t,n){(t=qE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(GE,"TYPE","LinkedJobStepDatasource");const JE=GE;function KE(e){return KE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KE(e)}function $E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nP(r.key),r)}}function ZE(e,t,n){return t=eP(t),function(e,t){if(t&&("object"===KE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,XE()?Reflect.construct(t,n||[],eP(e).constructor):t.apply(e,n))}function XE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XE=function(){return!!e})()}function eP(e){return eP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eP(e)}function tP(e,t){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tP(e,t)}function nP(e){var t=function(e,t){if("object"!=KE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KE(t)?t:t+""}var rP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ZE(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tP(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_locationSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({searchText:n||""})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._results=e.results.map((function(e){return{id:e.value,text:e.text,lat:e.lat,lon:e.lon}})),pagination:{more:e.more||!1}}}},{key:"getOptionLatAndLonById",value:function(e){var t=[];return this._results.forEach((function(n){n.id===e&&(t=[n.lat,n.lon])})),t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e)t.push({id:e[n].value,name:e[n].text});return t}}],r&&$E(n.prototype,r),o&&$E(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=nP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(rP,"TYPE","LocationDatasource");const oP=rP;function iP(e){return iP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iP(e)}function aP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uP(r.key),r)}}function uP(e){var t=function(e,t){if("object"!=iP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iP(t)?t:t+""}function lP(e,t,n){return t=cP(t),function(e,t){if(t&&("object"===iP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sP()?Reflect.construct(t,n||[],cP(e).constructor):t.apply(e,n))}function sP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sP=function(){return!!e})()}function cP(e){return cP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cP(e)}function fP(e,t){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fP(e,t)}var pP=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lP(this,t,[e,n])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}(t,e),n=t,(r=[{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalLocationsSearchApi/"+this._getSearchMode()}},{key:"fetchNewOptions",value:function(e,t,n,r){return[]}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notSupportedError")}},{key:"processLazyPickerAjaxResponseData",value:function(e){throw new Error("notSupportedError")}},{key:"_getSearchMode",value:function(){throw new Error("notImplementedError")}}])&&aP(n.prototype,r),o&&aP(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);const dP=pP;function yP(e){return yP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yP(e)}function hP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_P(r.key),r)}}function vP(e,t,n){return t=mP(t),function(e,t){if(t&&("object"===yP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bP()?Reflect.construct(t,n||[],mP(e).constructor):t.apply(e,n))}function bP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bP=function(){return!!e})()}function mP(e){return mP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mP(e)}function gP(e,t){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gP(e,t)}function _P(e){var t=function(e,t){if("object"!=yP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yP(t)?t:t+""}var wP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vP(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}(t,e),n=t,(r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({target:"state",criteria:{country:0!==o.length?o[0]:""}})}},{key:"_getSearchMode",value:function(){return"byCountry"}}])&&hP(n.prototype,r),o&&hP(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(dP);!function(e,t,n){(t=_P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wP,"TYPE","LocationStandardizedStateDatasource");const OP=wP;function SP(e){return SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SP(e)}function EP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IP(r.key),r)}}function PP(e,t,n){return t=TP(t),function(e,t){if(t&&("object"===SP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kP()?Reflect.construct(t,n||[],TP(e).constructor):t.apply(e,n))}function kP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kP=function(){return!!e})()}function TP(e){return TP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},TP(e)}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jP(e,t)}function IP(e){var t=function(e,t){if("object"!=SP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SP(t)?t:t+""}var FP=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=PP(this,t,[e,n]))._listSpecId=r.getSetting("listSpecId"),r._extraJobLocationFieldNumbers=r.getSetting("extraJobLocationFieldNumbers"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}(t,e),n=t,(r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({target:"state",criteria:{country:0!==o.length?o[0]:"",listSpecId:this._listSpecId,extraJobLocationFieldNumbers:this._extraJobLocationFieldNumbers}})}},{key:"_getSearchMode",value:function(){return"byCountryAndList"}}])&&EP(n.prototype,r),o&&EP(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(dP);!function(e,t,n){(t=IP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(FP,"TYPE","LocationStandardizedStateSearchDatasource");const CP=FP;function DP(e){return DP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DP(e)}function RP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MP(r.key),r)}}function AP(e,t,n){return t=xP(t),function(e,t){if(t&&("object"===DP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,NP()?Reflect.construct(t,n||[],xP(e).constructor):t.apply(e,n))}function NP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NP=function(){return!!e})()}function xP(e){return xP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xP(e)}function LP(e,t){return LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},LP(e,t)}function MP(e){var t=function(e,t){if("object"!=DP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DP(t)?t:t+""}var VP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),AP(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LP(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_postalCode"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({richFieldId:this._getRichFieldId(),searchPostalCode:n||""})}},{key:"_getRichFieldId",value:function(){var e=this._fieldId.match(/^([0-9]+)_postalCode$/);if(!e)throw new Error("invalidFieldId");return e[1]}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.value,text:e.text}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.value,name:n.text})})),t}}],r&&RP(n.prototype,r),o&&RP(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);!function(e,t,n){(t=MP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(VP,"TYPE","PostalCodeDatasource");const BP=VP;function WP(e){return WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WP(e)}function UP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GP(r.key),r)}}function YP(e,t,n){return t=QP(t),function(e,t){if(t&&("object"===WP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,HP()?Reflect.construct(t,n||[],QP(e).constructor):t.apply(e,n))}function HP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HP=function(){return!!e})()}function zP(){return zP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},zP.apply(this,arguments)}function QP(e){return QP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},QP(e)}function qP(e,t){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qP(e,t)}function GP(e){var t=function(e,t){if("object"!=WP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=WP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WP(t)?t:t+""}var JP=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=YP(this,t,[e,n]))._categoryFilterFieldId=r||o.getSetting("categoryFilterFieldId"),o._sourcesByCategory=o.getSetting("sourcesByCategory"),o._currentCategoryFilter=null,o._setOptions([]),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qP(e,t)}(t,e),n=t,(r=[{key:"getParentDependenciesFieldsIds",value:function(){return[this._categoryFilterFieldId]}},{key:"isParentDependentField",value:function(e){return e===this._categoryFilterFieldId}},{key:"fetchNewOptions",value:function(e,n,r,o){this._updateAvailableOptions(),zP(QP(t.prototype),"fetchNewOptions",this).call(this,e,n,r,o)}},{key:"fetchOptionsById",value:function(e,n){this._updateAvailableOptions(),zP(QP(t.prototype),"fetchOptionsById",this).call(this,e,n)}},{key:"fetchOptionsByValue",value:function(e,n){this._updateAvailableOptions(),zP(QP(t.prototype),"fetchOptionsByValue",this).call(this,e,n)}},{key:"cloneForNewTableRow",value:function(e,n){var r=this._categoryFilterFieldId.replace(/^([^_]*-)[\d]+(_category)$/,"$1"+n+"$2");return new t(e,this.getDatasourceSettings(),r)}},{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"_updateAvailableOptions",value:function(){var e=this._getCurrentCategoryFilterValue();this._currentCategoryFilter!==e&&(this._currentCategoryFilter=e,this._sourcesByCategory.hasOwnProperty(this._currentCategoryFilter)?this._setOptions(this._sourcesByCategory[this._currentCategoryFilter]):this._setOptions([]))}},{key:"_getCurrentCategoryFilterValue",value:function(){var e=Fields.getFieldValueByType(this._categoryFilterFieldId,FieldOptionValue.TYPE);return e.isEmpty()?null:e.getOptionId()}}])&&UP(n.prototype,r),o&&UP(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(FS);!function(e,t,n){(t=GP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(JP,"TYPE","SourcesDatasource");const KP=JP;function $P(e){return $P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$P(e)}function ZP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ok(r.key),r)}}function XP(e,t,n){return t=tk(t),function(e,t){if(t&&("object"===$P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ek()?Reflect.construct(t,n||[],tk(e).constructor):t.apply(e,n))}function ek(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ek=function(){return!!e})()}function tk(e){return tk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tk(e)}function nk(e,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nk(e,t)}function rk(e,t,n){return(t=ok(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ok(e){var t=function(e,t){if("object"!=$P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$P(t)?t:t+""}var ik=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XP(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nk(e,t)}(t,e),n=t,r=[{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_timeZone"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){0!==e.length?this._fetchOptionsByValueOrId(null,e,t):t([])}},{key:"fetchOptionsByValue",value:function(e,t){0!==e.length?this._fetchOptionsByValueOrId(e[0],null,t):t([])}},{key:"_fetchOptionsByValueOrId",value:function(e,t,n){var r=this,o=this.buildRequestDataFromParams(null,null,e,!0,t);this._fetchOptions(o,(function(e){var t=r._adaptApiOptionsResults(e);n(t)}))}},{key:"buildRequestDataFromParams",value:function(e,n,r,o,i,a){return JSON.stringify({searchText:r||"",page:e||1,limit:t.PAGE_SIZE,searchIds:i||null})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._adaptGroupedOptionsToSelect2(e.results),pagination:{more:e.more||!1}}}},{key:"_adaptGroupedOptionsToSelect2",value:function(e){var t=[];for(var n in e)t.push({text:e[n].text,children:e[n].children,id:n});return t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e){var r=e[n].children;for(var o in r)t.push({id:r[o].id,name:r[o].text})}return t}}],r&&ZP(n.prototype,r),o&&ZP(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(DO);rk(ik,"TYPE","TimeZoneDatasource"),rk(ik,"PAGE_SIZE",10);const ak=ik;var uk;function lk(e){return lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lk(e)}function sk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ck(r.key),r)}}function ck(e){var t=function(e,t){if("object"!=lk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lk(t)?t:t+""}var fk=null,pk=!1,dk=function(){return e=function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!pk)throw new Error("Constructor is private. Use getInstance() instead")},(t=[{key:"buildDatasource",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the values datasource."),null;switch(t){case pS.TYPE:return new pS(e,n);case wS.TYPE:return new wS(e,n);case VS.TYPE:return new VS(e,n);case GS.TYPE:return new GS(e,n);case rE.TYPE:return new rE(e,n);case dE.TYPE:return new dE(e,n);case CE.TYPE:return new CE(e,n);case JE.TYPE:return new JE(e,n);case FS.TYPE:return new FS(e,n);case oP.TYPE:return new oP(e,n);case OP.TYPE:return new OP(e,n);case CP.TYPE:return new CP(e,n);case BP.TYPE:return new BP(e,n);case KP.TYPE:return new KP(e,n);case ak.TYPE:return new ak(e,n);case OE.TYPE:return new OE(e,n);case BE.TYPE:return new BE(e,n);default:return console.error("Can not register ValuesDatasource for Field ID #"+e+' - Datasource registrar name "'+t+'" is not valid.'),null}}}])&&sk(e.prototype,t),n&&sk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();uk=dk,function(e,t,n){(t=ck(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dk,"getInstance",(function(){return fk||(pk=!0,fk=new uk,pk=!1),fk}));const yk=dk;function hk(e){return hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hk(e)}function vk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wk(r.key),r)}}function bk(e,t,n){return t=gk(t),function(e,t){if(t&&("object"===hk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mk()?Reflect.construct(t,n||[],gk(e).constructor):t.apply(e,n))}function mk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mk=function(){return!!e})()}function gk(e){return gk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gk(e)}function _k(e,t){return _k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_k(e,t)}function wk(e){var t=function(e,t){if("object"!=hk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hk(t)?t:t+""}var Ok=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=bk(this,t,[e,n,r]))._datasetSchemaSpecId=o.getSetting("datasetSchemaSpecId"),o._datasetFieldNumber=o.getSetting("datasetFieldNumber"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_k(e,t)}(t,e),n=t,(r=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return!1}},{key:"cloneForNewTableRow",value:function(e,n){var r=this._buildClonedFiltersForNewTableRow(e,n);return new t(e,this.getDatasourceSettings(),r)}},{key:"clone",value:function(e){return new t(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDynamicDefaultDatasetOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)}));return JSON.stringify({datasetSchemaSpecId:this._datasetSchemaSpecId,datasetFieldNumber:this._datasetFieldNumber,filters:u})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}},{key:"_getDatasourcesCallRunnerOnSuccessCallback",value:function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[];e(n)}}}])&&vk(n.prototype,r),o&&vk(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(rS);!function(e,t,n){(t=wk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ok,"TYPE","DynamicDefaultValueDatasetFieldOptionsDatasource");const Sk=Ok;var Ek;function Pk(e){return Pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pk(e)}function kk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tk(r.key),r)}}function Tk(e){var t=function(e,t){if("object"!=Pk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pk(t)?t:t+""}var jk=null,Ik=!1,Fk=function(){return e=function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!Ik)throw new Error("Constructor is private. Use getInstance() instead")},(t=[{key:"buildDatasource",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the default values datasource."),null;switch(t){case Sk.TYPE:return new Sk(e,n);case InstantSearchDatasource.TYPE:return new InstantSearchDatasource(e,n);default:return console.error("Can not register DefaultValuesDatasource for Field ID #"+e+' - Datasource registrar name "'+t+'" is not valid.'),null}}}])&&kk(e.prototype,t),n&&kk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();Ek=Fk,function(e,t,n){(t=Tk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fk,"getInstance",(function(){return jk||(Ik=!0,jk=new Ek,Ik=!1),jk}));const Ck=Fk;function Dk(e){return Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dk(e)}function Rk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ak(r.key),r)}}function Ak(e){var t=function(e,t){if("object"!=Dk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Dk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dk(t)?t:t+""}var Nk=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._validatorSettings=n||{},this._validationErrorText=this.getSetting("errorMessage")||"Error"},(t=[{key:"register",value:function(){Ye.registerValidator(this._fieldId,this)}},{key:"isValid",value:function(){throw new Error("notImplementedError")}},{key:"cloneForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"getValidationErrorText",value:function(){return this._validationErrorText}},{key:"getValidatorSettings",value:function(){return this._validatorSettings}},{key:"getSetting",value:function(e){return this._validatorSettings.hasOwnProperty(e)?this._validatorSettings[e]:null}},{key:"_getField",value:function(){return X.getField(this._fieldId)}},{key:"_getFieldId",value:function(){return this._fieldId}}])&&Rk(e.prototype,t),n&&Rk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const xk=Nk;function Lk(e){return Lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lk(e)}function Mk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yk(r.key),r)}}function Vk(e,t,n){return t=Wk(t),function(e,t){if(t&&("object"===Lk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bk()?Reflect.construct(t,n||[],Wk(e).constructor):t.apply(e,n))}function Bk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bk=function(){return!!e})()}function Wk(e){return Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wk(e)}function Uk(e,t){return Uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uk(e,t)}function Yk(e){var t=function(e,t){if("object"!=Lk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lk(t)?t:t+""}var Hk=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vk(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uk(e,t)}(t,e),n=t,(r=[{key:"isValid",value:function(){return this._getField().hasValue()}},{key:"cloneForNewTableRow",value:function(e,n){return new t(e,this.getValidatorSettings())}}])&&Mk(n.prototype,r),o&&Mk(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(xk);!function(e,t,n){(t=Yk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Hk,"TYPE","RequiredValidator");const zk=Hk;function Qk(e){return Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qk(e)}function qk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zk(r.key),r)}}function Gk(e,t,n){return t=Kk(t),function(e,t){if(t&&("object"===Qk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jk()?Reflect.construct(t,n||[],Kk(e).constructor):t.apply(e,n))}function Jk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jk=function(){return!!e})()}function Kk(e){return Kk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kk(e)}function $k(e,t){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$k(e,t)}function Zk(e){var t=function(e,t){if("object"!=Qk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qk(t)?t:t+""}var Xk=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Gk(this,t,[e,n]))._minLength=r.getSetting("minLength"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$k(e,t)}(t,e),n=t,r=[{key:"isValid",value:function(){var e=document.getElementById(this._getFieldId()).value;return e.length>=this._minLength||0===e.length}},{key:"cloneForNewTableRow",value:function(e,n){return new t(e,this.getValidatorSettings())}}],r&&qk(n.prototype,r),o&&qk(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(xk);!function(e,t,n){(t=Zk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Xk,"TYPE","MinLengthValidator");const eT=Xk;function tT(e){return tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(e)}function nT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rT(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function rT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oT(){oT=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==tT(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(tT(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function iT(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function aT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){iT(i,r,o,a,u,"next",e)}function u(e){iT(i,r,o,a,u,"throw",e)}a(void 0)}))}}function uT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pT(r.key),r)}}function lT(e,t,n){return t=cT(t),function(e,t){if(t&&("object"===tT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sT()?Reflect.construct(t,n||[],cT(e).constructor):t.apply(e,n))}function sT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sT=function(){return!!e})()}function cT(e){return cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cT(e)}function fT(e,t){return fT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fT(e,t)}function pT(e){var t=function(e,t){if("object"!=tT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tT(t)?t:t+""}var dT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lT(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fT(e,t)}(t,e),n=t,r=[{key:"isValid",value:function(){return this._areAllMandatoryFieldsFilled()}},{key:"cloneForNewTableRow",value:function(e,n){return new t(e,this.getValidatorSettings())}},{key:"_areAllMandatoryFieldsFilled",value:(a=aT(oT().mark((function e(){var t,n,r,o,i;return oT().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X.getField(this._getFieldId()),e.next=3,t.onPdfDocumentIsReady();case 3:n=t.getPdfDocument(),r=n.numPages,o=n.annotationStorage.getAll(),i=1;case 7:if(!(i<=r)){e.next=16;break}return e.next=10,this._areMandatoryFieldsInPageFilled(n,i,o);case 10:if(e.sent){e.next=13;break}return e.abrupt("return",!1);case 13:i++,e.next=7;break;case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_areMandatoryFieldsInPageFilled",value:(i=aT(oT().mark((function e(t,n,r){var o,i,a,u,l;return oT().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPage(n);case 2:return o=e.sent,e.next=5,o.getAnnotations();case 5:i=e.sent,a=nT(i),e.prev=7,a.s();case 9:if((u=a.n()).done){e.next=15;break}if(l=u.value,!(this._isMandatory(l)&&this._isTextField(l)&&this._isEmpty(l,r))){e.next=13;break}return e.abrupt("return",!1);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this,[[7,17,20,23]])}))),function(e,t,n){return i.apply(this,arguments)})},{key:"_isMandatory",value:function(e){return e.fieldFlags&&Boolean(2&e.fieldFlags)}},{key:"_isEmpty",value:function(e,t){var n=t?t[e.id]:null,r=n?n.value:e.fieldValue;return!r||""===r.trim()}},{key:"_isTextField",value:function(e){return"Tx"===e.fieldType}}],r&&uT(n.prototype,r),o&&uT(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(xk);!function(e,t,n){(t=pT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(dT,"TYPE","PdfRequiredFieldValidator");const yT=dT;function hT(e){return hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hT(e)}function vT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bT(r.key),r)}}function bT(e){var t=function(e,t){if("object"!=hT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hT(t)?t:t+""}var mT=null,gT=!1,_T=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!gT)throw new Error("Constructor is private. Use getInstance() instead")}return t=e,r=[{key:"getInstance",value:function(){return mT||(gT=!0,mT=new e,gT=!1),mT}}],(n=[{key:"buildValidator",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the validator."),null;switch(t){case zk.TYPE:return new zk(e,n);case eT.TYPE:return new eT(e,n);case yT.TYPE:return new yT(e,n);default:return console.error("Can not register Validator for Field ID #"+e+' - Validator registrar name "'+t+'" is not valid.'),null}}}])&&vT(t.prototype,n),r&&vT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const wT=_T;n(83396);function OT(e){return OT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OT(e)}function ST(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ET(r.key),r)}}function ET(e){var t=function(e,t){if("object"!=OT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OT(t)?t:t+""}function PT(e,t,n){kT(e,t),t.set(e,n)}function kT(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function TT(e,t){return e.get(IT(e,t))}function jT(e,t,n){return e.set(IT(e,t),n),n}function IT(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var FT=new WeakMap,CT=new WeakMap,DT=new WeakMap,RT=new WeakMap,AT=new WeakMap,NT=new WeakSet,xT=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){kT(e,t),t.add(e)}(this,NT),PT(this,FT,void 0),PT(this,CT,void 0),PT(this,DT,void 0),PT(this,RT,void 0),PT(this,AT,void 0)},(t=[{key:"init",value:function(e){jT(RT,this,e),jT(AT,this,!1)}},{key:"finish",value:function(){jT(AT,this,!0),jT(FT,this,null),jT(CT,this,null)}},{key:"setFileKey",value:function(e){jT(DT,this,e)}},{key:"pause",value:function(){var e,t=this;TT(FT,this)||(null!==(e=TT(CT,this))&&void 0!==e?e:Promise.resolve()).then((function(){return IT(NT,t,LT).call(t)}))}},{key:"resume",value:function(){var e,t=this;TT(CT,this)||(null!==(e=TT(FT,this))&&void 0!==e?e:Promise.resolve()).then((function(){return IT(NT,t,MT).call(t)}))}},{key:"cancel",value:function(){var e=this;TT(RT,this)&&TT(DT,this)?TT(RT,this).cancel(TT(DT,this)).finally((function(){return jT(AT,e,!0)})):setTimeout((function(){return e.cancel()}),50)}}])&&ST(e.prototype,t),n&&ST(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function LT(){var e=this;jT(FT,this,new Promise((function(t){return IT(NT,e,VT).call(e,t)}))),jT(FT,this,TT(FT,this).then((function(){return jT(FT,e,null)})))}function MT(){var e=this;jT(CT,this,new Promise((function(t){return IT(NT,e,BT).call(e,t)}))),jT(CT,this,TT(CT,this).then((function(){return jT(CT,e,null)})))}function VT(e){var t=this;TT(AT,this)||(TT(RT,this)&&TT(DT,this)?TT(RT,this).pause(TT(DT,this),{force:!0}).finally(e):setTimeout((function(){return IT(NT,t,VT).call(t,e)}),50))}function BT(e){var t=this;TT(AT,this)||(TT(RT,this)&&TT(DT,this)?TT(RT,this).resume(TT(DT,this)).finally(e):setTimeout((function(){return IT(NT,t,BT).call(t,e)}),50))}const WT=xT;function UT(e){return UT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UT(e)}function YT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HT(r.key),r)}}function HT(e){var t=function(e,t){if("object"!=UT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UT(t)?t:t+""}function zT(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function QT(e,t){return e.get(qT(e,t))}function qT(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var GT=new WeakMap,JT=function(){function e(t,n,r,o){var i,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zT(this,GT,void 0),i=GT,a=this,u=new WT,i.set(qT(i,a),u),this.config=this._getConfig(t),this.dictionary=this._getDictionary(n),this.regularUploadMaxFileSize=o,this._appendLargeFileUploadDialog(r),this._disableClosingDialog(this._getTextByDictionaryKey("confirmLeave")),this._setActionBeforeSubmit()}return t=e,n=[{key:"_setActionBeforeSubmit",value:function(){var e=this;ot.getInstance().getAll().forEach((function(t){Dr.default.getInstance().addActionBeforeSubmit((function(t){var n=pjQuery(t.target),r=e._getOversizeNotProcessedWizardFileInputsInForm(n);if(r.length)return e._processLargeFilesUpload(n,r)}),t.getForm(),_m.A.PRIORITY_LOW)}))}},{key:"_disableUploadedFileInputs",value:function(e){var t=this;e.find(":file").each((function(e,n){t._isInputFileCompleted(n.id)&&pjQuery("#"+n.id).prop("disabled",!0)}))}},{key:"_disableClosingDialog",value:function(e){window.onbeforeunload=function(t){if(!pjQuery("#fileUploadDialogOverlay").is(":hidden"))return t||(t=window.event),t.cancelBubble=!0,t.returnValue=e,t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),e}}},{key:"_getTextByDictionaryKey",value:function(e){return this.dictionary[e]}},{key:"_getConfig",value:function(e){var t=JSON.parse(e);return{aws_url:t.aws_url,signerUrl:t.portalUrl+"/_remoteUploadSigner",timeUrl:t.portalUrl+"/_remoteUploadTime",aws_key:t.aws_key,awsRegion:t.aws_region,bucket:t.bucket,partSize:t.partSize,awsSignatureVersion:t.awsSignatureVersion,computeContentMd5:!0,cryptoMd5Method:function(e){return CryptoJS.MD5(CryptoJS.lib.WordArray.create(e)).toString(CryptoJS.enc.Base64)},cryptoHexEncodedHash256:function(e){return CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex)},veryLargeFilesBucketTemporaryFolder:t.veryLargeFilesBucketTemporaryFolder}}},{key:"_getDictionary",value:function(e){return JSON.parse(e)}},{key:"_getOversizeNotProcessedWizardFileInputsInForm",value:function(e){var t=[],n=this;return e.find(":file").each((function(e,r){if(n._shouldCheckOversize(r.id)&&!n._isUploaded(r.id)&&n._isFileOversizedOrForced(r)){var o=n._addFileUploadInfo(r);o&&(n._controlFileInputChange(r.id),t.push({input:r,file:o}),n._removeUploadFailedNotice(r.id))}})),t}},{key:"_getFileFromInput",value:function(e){return e.uploadThisFileAsBig?e.uploadThisFileAsBig:e.files&&e.files.length>0?e.files[0]:null}},{key:"_isFileOversizedOrForced",value:function(e){if(e.uploadThisFileAsBig)return!0;var t=this._getFileFromInput(e);return!!t&&t.size>this.regularUploadMaxFileSize}},{key:"_controlFileInputChange",value:function(e){var t=this;pjQuery("#"+e).change((function(){t._removeInputFileCompleted(e),t._removeHiddenInputs(e)}))}},{key:"_shouldCheckOversize",value:function(e){return pjQuery("#"+e).data("check-oversize")}},{key:"_isUploaded",value:function(e){return pjQuery("#"+e).data("uploaded")}},{key:"_appendLargeFileUploadDialog",value:function(e){pjQuery("body").append(e);var t=this;pjQuery("#fileUploadDialogCancelButton, #fileUploadDialogCloseThick").click((function(){t._fileUploadDialogCancel()}))}},{key:"_processLargeFilesUpload",value:function(t,n){var r=this;return this._openUploadDialog(),this.hasErrors=!1,this.cancelled=!1,this.totalCompleted=0,this.largeFilesUploaded=pjQuery.Deferred(),setTimeout((function(){return r._doUpload(t,n,0)}),e._uploadDelayTime),this.largeFilesUploaded.promise()}},{key:"_fileUploadDialogCancel",value:function(){var e=this;QT(GT,this).pause();var t=new kl(this.dictionary.leave,(function(){e._cancelUploadAndCloseDialog(),pjQuery(this).dialog("close")}),!0),n=new kl(this.dictionary.cancel,(function(){QT(GT,e).resume(),pjQuery(this).dialog("close")}),!1);new Cl(this.dictionary.leavePage,this.dictionary.confirmLeave,[t,n],"#fileUploadDialogContent",(function(t,n){e._hasBeenClickedDialogCloseIcon(t)&&QT(GT,e).resume()})).show()}},{key:"_hasBeenClickedDialogCloseIcon",value:function(e){return e.originalEvent&&pjQuery(e.originalEvent.target).closest(".ui-dialog-titlebar-close").length}},{key:"_guessContentTypeFromFileName",value:function(e){return/\.webm$/.exec(e)?"video/webm":/\.mp4$/.exec(e)?"video/mp4":null}},{key:"_doUpload",value:function(e,t,n){if(n>=t.length)return this._closeUploadDialog(),this._disableUploadedFileInputs(e),void this.largeFilesUploaded.resolve();var r=this,o=t[n].input,i=o.id,a=t[n].file,u=a.name,l=this._getTempFileName(a),s=this._guessContentTypeFromFileName(u),c=!1,f=0;Evaporate.create(this.config).then((function(p){r.evaporate=p,QT(GT,r).init(p),p.add({name:r.config.veryLargeFilesBucketTemporaryFolder+"/"+l,contentType:s,file:a,xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},progress:function(e,n){if(!c){var o=Math.floor(100*e);c=100===o,o>=f&&(r._updateTotalUploadProgress(Math.floor(o/t.length),t.length),r._updateFileUploadProgress(i,o),f=o)}},error:function(e){console.error("Error while uploading file "+u+": "+e)},started:function(e){r.fileKey=e,QT(GT,r).setFileKey(e)}}).then((function(i){r.totalCompleted++,r._setUploadCompleted(o,i,u),r._doUpload(e,t,n+1)}),(function(o){var a,l=null!==(a=o.message)&&void 0!==a?a:o;(l.match("Invalid time value")||l.match("File upload aborted")||l.match("invalid date")||l.match("Permission denied status:403"))&&r._cancelUploadAndCloseDialog(),r._handleUploadError(e,i,u,t,n+1)}))}))}},{key:"_handleUploadError",value:function(e,t,n,r,o){this._setUploadFailed(t,n),this.cancelled?this._setAllPendingUploadsFailed(r,o):this._doUpload(e,r,o)}},{key:"_setAllPendingUploadsFailed",value:function(e,t){for(;t<e.length;)this._setUploadFailed(e[t].input.id,e[t].file.name),++t}},{key:"_cancelUploadAndCloseDialog",value:function(){this.cancelled=!0,QT(GT,this).cancel(),this._closeUploadDialog(),this.largeFilesUploaded.reject()}},{key:"_getTempFileName",value:function(e){return CryptoJS.SHA256("tmp-"+Eg.c9.fromJSDate(this._getNowDate()).toMillis()+"-"+e.name).toString(CryptoJS.enc.Hex)}},{key:"_getNowDate",value:function(){return new Date}},{key:"_addFileUploadInfo",value:function(e){var t=this._getFileFromInput(e);if(!t)return null;var n='<li id="progressDetailContainer'+e.id+'" class="upload-large-files__item upload-large-files__item--particular" ><div class="upload-large-files__itemHeader"><h3 class="upload-large-files__itemTitle" id="fileName'+e.id+'">'+t.name+'</h3><span id="itemWarning'+e.id+'" class="upload-large-files__itemWarning">'+this.dictionary.uploadFailed+'</span></div><progress class="upload-large-files__itemProgressBar" id="progressBar'+e.id+'" value="0" max="100" ></progress><p class="upload-large-files__itemDetail" id="progressDetail'+e.id+'" ><span class="upload-large-files__progressPercentage" id="progressPercentage'+e.id+'">0</span>% '+this.dictionary.uploaded+"</p></li>";return pjQuery("#uploads").append(n),pjQuery("#itemWarning"+e.id).hide(),t}},{key:"_addHiddenInputs",value:function(e,t,n){var r='<input type="hidden" id="file_'+e+'_remoteFileName" name="file_'+e+'_remoteFileName" value="'+t+'" /><input type="hidden" id="file_'+e+'_userSetFileName" name="file_'+e+'_userSetFileName" value="'+n+'" />';pjQuery("#fileInput_"+e).append(r)}},{key:"_removeHiddenInputs",value:function(e){pjQuery("#file_"+e+"_remoteFileName").remove(),pjQuery("#file_"+e+"_userSetFileName").remove()}},{key:"_addUploadFailedNotice",value:function(e){var t='<p id="file_'+e+'_uploadFailed" class="upload-large-files__formError">'+this.dictionary.uploadFailed+"</p>";pjQuery("#fileInput_"+e).append(t),pjQuery("#fieldSpecContainer"+e).addClass("upload-large-files__formError")}},{key:"_removeUploadFailedNotice",value:function(e){pjQuery("#file_"+e+"_uploadFailed").remove(),pjQuery("#fieldSpecContainer"+e).removeClass("upload-large-files__formError")}},{key:"_setUploadCompleted",value:function(e,t,n){this._updateFileUploadProgress(e.id,100),this._setUploadCompletedText(e.id),this._setInputFileCompleted(e.id),this._addHiddenInputs(e.id,t,n),QT(GT,this).finish()}},{key:"_setInputFileCompleted",value:function(e){pjQuery("#"+e).data("uploaded",!0)}},{key:"_removeInputFileCompleted",value:function(e){pjQuery("#"+e).removeData("uploaded")}},{key:"_isInputFileCompleted",value:function(e){return pjQuery("#"+e).data("uploaded")}},{key:"_setUploadFailed",value:function(e,t){this.hasErrors=!0,this._setUploadFailedText(e,t)}},{key:"_setUploadFailedText",value:function(e){pjQuery("#itemWarning"+e).show(),pjQuery("#progressDetailContainer"+e).addClass("upload-large-files__error"),this._addUploadFailedNotice(e)}},{key:"_setUploadCompletedText",value:function(e){pjQuery("#progressDetail"+e).text(this.dictionary.complete)}},{key:"_updateTotalUploadProgress",value:function(e,t){var n=Math.floor(this.totalCompleted*(100/t));this._updateProgressBar("#progressBar",n+e),this._updatePercentage("#progressPercentage",n+e)}},{key:"_emptyTotalUploadProgress",value:function(){this._updateProgressBar("#progressBar",0),this._updatePercentage("#progressPercentage",0)}},{key:"_updateFileUploadProgress",value:function(e,t){this._updateProgressBar("#progressBar"+e,t),this._updatePercentage("#progressPercentage"+e,t)}},{key:"_updatePercentage",value:function(e,t){pjQuery(e).text(t)}},{key:"_updateProgressBar",value:function(e,t){pjQuery(e).val(t)}},{key:"_openUploadDialog",value:function(){pjQuery("#fileUploadDialogOverlay").removeClass("largeFileDialogClosed"),pjQuery("#fileUploadDialogContent").removeClass("largeFileDialogClosed")}},{key:"_closeUploadDialog",value:function(){pjQuery("#fileUploadDialogOverlay").addClass("largeFileDialogClosed"),pjQuery("#fileUploadDialogContent").addClass("largeFileDialogClosed"),pjQuery("#uploads").empty(),this._emptyTotalUploadProgress()}}],r=[{key:"prepareFormToProcessLargeFilesUpload",value:function(t,n,r,o){new e(t,n,r,o)}}],n&&YT(t.prototype,n),r&&YT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();!function(e,t,n){(t=HT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(JT,"_uploadDelayTime",0);const KT=JT;var $T=n(59493);const ZT=function(){function e(){}return e.prototype.generateKey=function(){var e=(0,$T.A)();return window.location.pathname.replace("/".concat(e),"")},e}();const XT=function(){function e(){this.keyGenerator=new ZT,this.wizardSessions=this.init(),this.saveAll()}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getKey=function(){return this.wizardSessions.key},e.prototype.getWizardSession=function(e){var t=this.wizardSessions.store[e];return t||(t={},this.wizardSessions.store[e]=t,t)},e.prototype.removeAll=function(){sessionStorage.removeItem("wizardSessions"),this.wizardSessions=this.getDefaultWizardSessions()},e.prototype.saveAll=function(){sessionStorage.setItem("wizardSessions",JSON.stringify(this.wizardSessions))},e.prototype.init=function(){var e=JSON.parse(sessionStorage.getItem("wizardSessions"));return e||this.getDefaultWizardSessions()},e.prototype.getDefaultWizardSessions=function(){return{key:this.keyGenerator.generateKey(),store:{}}},e}();function ej(e){return ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ej(e)}function tj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nj(r.key),r)}}function nj(e){var t=function(e,t){if("object"!=ej(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ej(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ej(t)?t:t+""}function rj(e,t,n){oj(e,t),t.set(e,n)}function oj(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ij(e,t){return e.get(uj(e,t))}function aj(e,t,n){return e.set(uj(e,t),n),n}function uj(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var lj=new WeakMap,sj=new WeakMap,cj=new WeakMap,fj=new WeakSet,pj=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){oj(e,t),t.add(e)}(this,fj),rj(this,lj,void 0),rj(this,sj,void 0),rj(this,cj,void 0),aj(lj,this,t),aj(sj,this,n),aj(cj,this,r)},(t=[{key:"handle",value:function(){var e=ij(sj,this).uploadedResumeId;ij(cj,this)&&ij(cj,this)!==e&&(ij(sj,this).uploadedResumeId=ij(cj,this),XT.getInstance().saveAll()),ij(sj,this).uploadedResumeId&&uj(fj,this,dj).call(this,ij(sj,this).uploadedResumeId)}}])&&tj(e.prototype,t),n&&tj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function dj(e){var t=document.querySelector("#wizard-id-".concat(ij(lj,this))),n=document.createElement("input");n.name="uploadedResumeId",n.value=e,n.type="hidden",t.append(n)}const yj=pj;function hj(e){return hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hj(e)}function vj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sj(r.key),r)}}function bj(e,t,n){return t=gj(t),function(e,t){if(t&&("object"===hj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mj()?Reflect.construct(t,n||[],gj(e).constructor):t.apply(e,n))}function mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mj=function(){return!!e})()}function gj(e){return gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gj(e)}function _j(e,t){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_j(e,t)}function wj(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Oj(e,t,n){return(t=Sj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sj(e){var t=function(e,t){if("object"!=hj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hj(t)?t:t+""}var Ej=new WeakSet,Pj=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wj(o=bj(this,t),Ej),o._id=e,o._settings=n,o._fields=r,o._registeredFields=[],o._allFieldsRegistered=!1,o._wizardSession=XT.getInstance().getWizardSession(o._id),o._uploadedResumeIdHandler=new yj(o._id,o._wizardSession,o._settings.uploadedResumeId),o._timeZoneHelper=new lO,o._checkMissingContainer(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_j(e,t)}(t,e),n=t,r=[{key:"register",value:function(){this.dispatchEvent(t.EVENT_BEFORE_WIZARD_REGISTER,this._getWizardEventData()),this._uploadedResumeIdHandler.handle(),function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(Ej,this,kj).call(this),this._registerWizardFields(),this._attachResetEventHandler(),this._registerFieldConditions(),this._processWizard(),this.dispatchEvent(t.EVENT_AFTER_WIZARD_REGISTER,this._getWizardEventData())}},{key:"getSetting",value:function(e){return this._settings.hasOwnProperty(e)?this._settings[e]:null}},{key:"getId",value:function(){return this._id}},{key:"_checkMissingContainer",value:function(){!this._getWizardContainer()&&0===this._id&&this._fields.length>0&&(this._id=parseInt(this._fields[0].fieldId),this.getForm().innerHTML="<div id='wizard-id-"+this._id+"' class='wizard' data-id='"+this._id+"'>"+this.getForm().innerHTML+"</div>")}},{key:"_registerWizardFields",value:function(){this.dispatchEvent(t.EVENT_BEFORE_FIELDS_REGISTER,this._getWizardEventData());var e=this._getRegistrarTypesBuildOrder();for(var n in e){var r=e[n];for(var o in this._fields){var i=this._fields[o];for(var a in i.registrars)r===i.registrars[a].type&&this._register(i.fieldId,i.registrars[a])}}this._allFieldsRegistered=!0,this.dispatchEvent(t.EVENT_AFTER_FIELDS_REGISTER,this._getWizardEventData())}},{key:"_registerFieldConditions",value:function(){var e=this,t=function(){var t=e._fields[n];if(t.hasOwnProperty("visibilityConditions")){var r=t.visibilityConditions,o=r.conditions;X.setFieldVisibilityConditionsOperator(t.fieldId,r.operator),o.forEach((function(e){X.setFieldVisibilityConditionFromParams(t.fieldId,e.dependencyFieldId,e.conditionOperator,e.conditionValue)}))}if(t.hasOwnProperty("editConditions"))for(var i in t.editConditions){var a=t.editConditions[i];X.setFieldEditConditionFromParams(t.fieldId,a.dependencyFieldId,a.conditionOperator,a.conditionValue)}};for(var n in this._fields)t()}},{key:"_register",value:function(e,t){var n,r,o;switch(t.type){case po.FIELD:this._buildAndRegisterWizardField(e,t);break;case po.VALUES_DATASOURCE:null===(n=yk.getInstance().buildDatasource(e,t.name,t.settings))||void 0===n||n.registerDatasourceValues();break;case po.DEFAULT_VALUES_DATASOURCE:null===(r=Ck.getInstance().buildDatasource(e,t.name,t.settings))||void 0===r||r.registerDatasourceDefaultValues();break;case po.VALIDATOR:null===(o=wT.getInstance().buildValidator(e,t.name,t.settings))||void 0===o||o.register()}}},{key:"_buildAndRegisterWizardField",value:function(e,t){var n=kO.getInstance().buildField(e,t.name,t.settings);n&&(n.register(),this._registeredFields.push(n))}},{key:"_getRegistrarTypesBuildOrder",value:function(){return[po.VALUES_DATASOURCE,po.DEFAULT_VALUES_DATASOURCE,po.FIELD,po.VALIDATOR]}},{key:"_processWizard",value:function(){this._shouldShowFieldByField()?new io(this._getWizardContainerId(),null,!1,!0,!0,0).generate():(this._removeButtonsIfNecessary(),this._showFieldSetIfNecessary()),this._setupLargeFilesUploadIfNeeded(),this._restrictEditingIfNeeded()}},{key:"_shouldShowFieldByField",value:function(){var e=new URL(window.location.href);return this._settings.shouldShowFieldByField&&null===e.searchParams.get("listFilterMode")}},{key:"_removeButtonsIfNecessary",value:function(){eo.getInstance().getAllFieldsetSteppers().some((function(e){return!e.hasBuiltinButtonBar()}))||this._getWizardContainer().querySelectorAll(".button-bar__wrap .formPreviousButton, .button-bar__wrap .formNextButton").forEach((function(e){e.hidden=!0}))}},{key:"_showFieldSetIfNecessary",value:function(){var e;this._getWizardContainer().removeAttribute("hidden"),null===(e=this._getWizardContainer().parentElement.querySelector(".wizard--loading .form__loader"))||void 0===e||e.remove()}},{key:"_getWizardContainerId",value:function(){return t.WIZARD_CONTAINER_PREFIX+this._id}},{key:"_getWizardContainer",value:function(){return document.getElementById(this._getWizardContainerId())}},{key:"_getWizardEventData",value:function(){return new st({wizardId:this._id})}},{key:"_setupLargeFilesUploadIfNeeded",value:function(){this._settings.largeFilesUploadParams&&0!==Object.keys(this._settings.largeFilesUploadParams).length&&KT.prepareFormToProcessLargeFilesUpload(this._settings.largeFilesUploadParams.bucketConfig,this._settings.largeFilesUploadParams.dictionary,this._settings.largeFilesUploadParams.html,this._settings.largeFilesUploadParams.regularMaxSize)}},{key:"_restrictEditingIfNeeded",value:function(){for(var e in this._fields){var t=this._fields[e];X.evaluateEditRestrictions(t.fieldId)}}},{key:"_attachResetEventHandler",value:function(){var e,t=this;null===(e=this.getForm())||void 0===e||e.addEventListener("reset",(function(){setTimeout((function(){return t._registeredFields.forEach((function(e){X.onFieldValueChange(e._fieldId)}))}),0)}))}},{key:"getForm",value:function(){if(this._fields.length){var e=document.getElementById(this._fields[0].fieldId);if(e)return e.closest("form")}}},{key:"areAllFieldsRegistered",value:function(){return this._allFieldsRegistered}}],r&&vj(n.prototype,r),o&&vj(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(yt);function kj(){var e=document.createElement("input");e.setAttribute("name","timeZone"),e.setAttribute("type","hidden"),e.value=this._timeZoneHelper.getBrowserTimeZone(),document.getElementById(this._getWizardContainerId()).append(e)}Oj(Pj,"WIZARD_CONTAINER_PREFIX","wizard-id-"),Oj(Pj,"EVENT_BEFORE_WIZARD_REGISTER","beforeWizardRegister"),Oj(Pj,"EVENT_AFTER_WIZARD_REGISTER","afterWizardRegister"),Oj(Pj,"EVENT_BEFORE_FIELDS_REGISTER","beforeFieldsRegister"),Oj(Pj,"EVENT_AFTER_FIELDS_REGISTER","afterFieldsRegister");const Tj=Pj;function jj(e){return jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jj(e)}function Ij(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nj(r.key),r)}}function Fj(e,t,n){return t=Rj(t),function(e,t){if(t&&("object"===jj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cj()?Reflect.construct(t,n||[],Rj(e).constructor):t.apply(e,n))}function Cj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cj=function(){return!!e})()}function Dj(){return Dj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Dj.apply(this,arguments)}function Rj(e){return Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rj(e)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Aj(e,t)}function Nj(e){var t=function(e,t){if("object"!=jj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jj(t)?t:t+""}var xj=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Fj(this,t,[e,n]))._disableButtonConditions=new Map,r._disableButtonConditionsEvaluator=new me,r._buttonsData=r.getSetting("buttonsData"),r._addEventToFormPrevious(),r._addEventToFormNext(),r._configureButtons(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"getValue",value:function(){return new M}},{key:"getValueForCondition",value:function(){return null}},{key:"_updateFieldAfterParentFieldValueChange",value:function(){var e=this;Dj(Rj(t.prototype),"_updateFieldAfterParentFieldValueChange",this).call(this),this._buttonsData.forEach((function(t){return e._evaluateButtonConditions(t.buttonId)}))}},{key:"_addEventToFormPrevious",value:function(){var e=this;pjQuery("#"+this.getFieldId()+"-formPrevious").click((function(){return e._getFieldsetSteppersToMove().forEach((function(e){return e.goToPreviousField()}))}))}},{key:"_addEventToFormNext",value:function(){var e=this;pjQuery("#"+this.getFieldId()+"-formNext").click((function(){return e._getFieldsetSteppersToMove().forEach((function(e){return e.goToNextField()}))}))}},{key:"_getFieldsetSteppersToMove",value:function(){return eo.getInstance().getAllFieldsetSteppers().filter((function(e){return!e.hasBuiltinButtonBar()}))}},{key:"_configureButtons",value:function(){if(this._buttonsData)for(var e=0;e<this._buttonsData.length;e++){var t=this._buttonsData[e];this._addWorkflowStepIdsIfNeeded(t),this._removeRequiredIfHidden(t),this._addAutomaticActionIfNeeded(t),this._prepareDisableButtonConditions(t),this._removeValidationsIfNeeded(t)}}},{key:"_addWorkflowStepIdsIfNeeded",value:function(e){if(e.workflowStepUpdateIds)for(var t=document.getElementsByClassName(e.buttonType),n=0;n<t.length;n++){var r=t[n];parseInt(r.dataset.buttonid,10)===e.buttonId&&r.addEventListener("click",(function(t){var n=document.getElementsByName("workflowStatusId");if(n.length<1)for(var r=document.getElementsByTagName("form"),o=0;o<r.length;o++){var i=r[o],a=document.createElement("input");a.type="hidden",a.id="workflowStatusId",a.name="workflowStatusId",a.value=e.workflowStepUpdateIds,i.append(a)}else n[0].value=e.workflowStepUpdateIds}))}}},{key:"_removeRequiredIfHidden",value:function(e){for(var t=document.getElementsByClassName(e.buttonType),n=0;n<t.length;n++){var r=t[n];parseInt(r.dataset.buttonid,10)===e.buttonId&&r.addEventListener("click",(function(e){for(var t=document.querySelector("body").querySelectorAll('[type="hidden"]:not(script)[required]'),n=0;n<t.length;n++)t[n].removeAttribute("required")}))}}},{key:"_addAutomaticActionIfNeeded",value:function(e){if(e.isAutomaticAction){var t=document.querySelectorAll("."+e.buttonType+'[data-buttonid="'+e.buttonId+'"]');t&&t.length&&t[0].click()}}},{key:"_prepareDisableButtonConditions",value:function(e){var t=this;this.getWizard().addListener(Tj.EVENT_AFTER_FIELDS_REGISTER,(function(){t._registerDisableButtonConditions(e),t._evaluateButtonConditions(e.buttonId)}))}},{key:"_registerDisableButtonConditions",value:function(e){var t=this,n=new Et;e.disableButtonConditions.forEach((function(e){var r=new G(e.richFieldId,e.operator,e.value);Y.registerFieldDependency(t._fieldId,r.getParentDependencyFieldId(),Y.TYPE_VALUES),n.addCondition(r)})),this._disableButtonConditions.set(e.buttonId,n)}},{key:"_evaluateButtonConditions",value:function(e){var t=this._disableButtonConditions.get(e),n=t.getConditions().length>0&&this._disableButtonConditionsEvaluator.areFieldConditionsSatisfied(t),r=document.querySelector('[data-buttonid="'+e+'"]');r&&(r.disabled=n,r.classList.toggle("button--disabled",n))}},{key:"_removeValidationsIfNeeded",value:function(e){this._shouldRemoveValidations(e.buttonType)&&this._removeValidationsForButton(e.buttonId)}},{key:"_removeValidationsForButton",value:function(e){var t=this,n=document.querySelector('[data-buttonid="'+e+'"]');null==n||n.addEventListener("click",(function(){Dr.default.getInstance().removeValidationsBeforeSubmit(t.getFormContainer())}))}},{key:"_shouldRemoveValidations",value:function(e){return["clearButton","partialSaveButton","previousButton"].includes(e)}}])&&Ij(n.prototype,r),o&&Ij(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Vt);!function(e,t,n){(t=Nj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xj,"TYPE","ButtonBarField");const Lj=xj;function Mj(e){return Mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mj(e)}function Vj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bj(r.key),r)}}function Bj(e){var t=function(e,t){if("object"!=Mj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mj(t)?t:t+""}function Wj(e,t,n){return t=Yj(t),function(e,t){if(t&&("object"===Mj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Uj()?Reflect.construct(t,n||[],Yj(e).constructor):t.apply(e,n))}function Uj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Uj=function(){return!!e})()}function Yj(e){return Yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yj(e)}function Hj(e,t){return Hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hj(e,t)}var zj=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Wj(this,t,[e,n]))._configuration=n||new Yf,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hj(e,t)}(t,e),n=t,r=[{key:"onFileSelected",value:function(e){if(e){var t=X.getField(this._fieldId);!0===this._configuration.hasPhotoPreview&&t._resetPreviewAndFileLoaders();var n=e.title;this._fileInfoCleaner.cleanAll(),this._addFileDataToDownload(e),this._setFileNameHiddenInputValue(n),this._setFileSizeHiddenInputValue(e.fileSize?e.fileSize:"0"),this._addUploadedFileElement(n),!0===this._configuration.hasPhotoPreview&&(t._setPreview(e.thumbnailLink),t._onPhotoFileInputNewPhotoSelected())}}},{key:"_getAccessToken",value:function(){return gapi.auth.getToken().access_token}},{key:"_setFileNameHiddenInputValue",value:function(e){var t=document.getElementById("driveFileName_"+this._fieldId);t&&(t.value=e)}},{key:"_setFileSizeHiddenInputValue",value:function(e){var t=document.getElementById("driveFileSize_"+this._fieldId);t&&(t.value=e)}},{key:"_addUploadedFileElement",value:function(e){var t=document.querySelector("#fileInput_"+this._fieldId+" .drivePickerButton");t&&t.before(this._createUploadedFileElement(e))}},{key:"_addFileDataToDownload",value:function(e){if(e&&e.id){var t=document.getElementById(this._fieldId),n=t?t.closest("form"):null;n&&(n.appendChild(this._createDriveFileIdHiddenInput(e.id)),n.appendChild(this._createDriveAccessTokenHiddenInput()))}}},{key:"_createDriveFileIdHiddenInput",value:function(e){var t=document.createElement("input");return t.name="driveFileId_"+this._fieldId,t.id="driveFileId_"+this._fieldId,t.value=e,t.type="hidden",t}},{key:"_createDriveAccessTokenHiddenInput",value:function(){var e=document.createElement("input");return e.name="driveAccessToken_"+this._fieldId,e.id="driveAccessToken_"+this._fieldId,e.value=this._getAccessToken(),e.type="hidden",e}},{key:"_createUploadedFileElement",value:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.classList.add("drivePickerUploadFile"),t.appendChild(this._buildRemoveExternalUploadedFileButton(e)),t}}],r&&Vj(n.prototype,r),o&&Vj(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(uf);const Qj=zj;function qj(e){return qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qj(e)}function Gj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tI(r.key),r)}}function Jj(e,t,n){return t=Zj(t),function(e,t){if(t&&("object"===qj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kj()?Reflect.construct(t,n||[],Zj(e).constructor):t.apply(e,n))}function Kj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kj=function(){return!!e})()}function $j(){return $j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zj(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},$j.apply(this,arguments)}function Zj(e){return Zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zj(e)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xj(e,t)}function eI(e,t,n){return(t=tI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tI(e){var t=function(e,t){if("object"!=qj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qj(t)?t:t+""}var nI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jj(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}(t,e),n=t,(r=[{key:"onFileSelected",value:function(e){$j(Zj(t.prototype),"onFileSelected",this).call(this,{id:t.FAKE_FILE_ID,title:t.FAKE_FILE_NAME,fileSize:t.FAKE_FILE_SIZE})}},{key:"_getAccessToken",value:function(){return t.FAKE_ACCESS_TOKEN}}])&&Gj(n.prototype,r),o&&Gj(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(Qj);eI(nI,"FAKE_FILE_NAME","googleDriveFile.txt"),eI(nI,"FAKE_FILE_SIZE","1"),eI(nI,"FAKE_FILE_ID","fileId"),eI(nI,"FAKE_ACCESS_TOKEN","accessToken");const rI=nI;var oI=n(60477),iI=n.n(oI);function aI(e){return aI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aI(e)}function uI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lI(r.key),r)}}function lI(e){var t=function(e,t){if("object"!=aI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aI(t)?t:t+""}var sI=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n,this._useMocks=r},(t=[{key:"load",value:function(){if(this._isGoogleDriveApiAvailable()){var e=this._buildGoogleDrivePickerButton(),t=document.getElementById("fileInput_"+this._fieldId);t&&t.appendChild(e)}}},{key:"_buildGoogleDrivePickerButton",value:function(){var e=this,t=document.createElement("a");return t.innerText=this._configuration.chooseFromDriveText,t.setAttribute("id","drivePicker"),t.setAttribute("href","#"),t.className="drivePickerButton",t.addEventListener("click",(function(t){t.preventDefault(),e._googleDrivePickerClickEventListener()})),t}},{key:"_googleDrivePickerClickEventListener",value:function(){if(this._useMocks)new rI(this._fieldId,this._configuration).onFileSelected(null);else{var e=new Qj(this._fieldId,this._configuration);new(iI())({apiKey:this._configuration.appKey,clientId:this._configuration.clientId,scope:this._configuration.scope,buttonEl:document.getElementById("drivePicker"),onSelect:e.onFileSelected.bind(e),extensions:this._configuration.allowedFileExtensions})}}},{key:"_isGoogleDriveApiAvailable",value:function(){var e=new If.A;return this._useMocks?!!e.get("enableGoogleDriveDummyApi"):"undefined"!=typeof gapi&&"undefined"!=typeof google}}])&&uI(e.prototype,t),n&&uI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const cI=sI;function fI(e){return fI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fI(e)}function pI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bI(r.key),r)}}function dI(e,t,n){return t=hI(t),function(e,t){if(t&&("object"===fI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yI()?Reflect.construct(t,n||[],hI(e).constructor):t.apply(e,n))}function yI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yI=function(){return!!e})()}function hI(e){return hI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hI(e)}function vI(e,t){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vI(e,t)}function bI(e){var t=function(e,t){if("object"!=fI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fI(t)?t:t+""}var mI=function(e){function t(e,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!PortalNumber.isNumber(n))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: month must be a valid integer");return(r=dI(this,t,[PortalDate.fromParams(1904,e,n)]))._day=n,r._month=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vI(e,t)}(t,e),n=t,(r=[{key:"getType",value:function(){return t.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("MM-dd")}},{key:"getDay",value:function(){return this._day}},{key:"getMonth",value:function(){return this._month}}])&&pI(n.prototype,r),o&&pI(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(xu);!function(e,t,n){(t=bI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(mI,"TYPE","FieldDayAndMonthValue");const gI=mI;var _I=n(45061),wI=n.n(_I);const OI=function(){function e(){this.keyGenerator=new ZT}return e.prototype.cleanIfNeeded=function(e){if(e){var t=XT.getInstance();t.getKey()!==this.keyGenerator.generateKey()&&t.removeAll()}},e}();function SI(e){return SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SI(e)}function EI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PI(r.key),r)}}function PI(e){var t=function(e,t){if("object"!=SI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SI(t)?t:t+""}var kI=null,TI=!1,jI=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!TI)throw new Error("Constructor is private. Use getInstance() instead")}return t=e,r=[{key:"getInstance",value:function(){return kI||(TI=!0,kI=new e,TI=!1),kI}}],(n=[{key:"init",value:function(){var e=ot.getInstance(),t=this._getWizardsRegistrars();(new OI).cleanIfNeeded(t.length>0),t.forEach((function(t){if(t.hasOwnProperty("wizardId")&&t.hasOwnProperty("settings")&&t.hasOwnProperty("fields")){var n=new Tj(t.wizardId,t.settings,t.fields);e.addWizard(t.wizardId,n),n.register()}}))}},{key:"_getWizardsRegistrars",value:function(){try{var e=new rr.default;return JSON.parse(e.get("avature.wizard.registrars"))||[]}catch(e){return e instanceof SyntaxError?console.error("WizardsRegister - Error while parsing Wizard registrars: "+e.message):console.error("WizardsRegister - "+e.message),[]}}}])&&EI(t.prototype,n),r&&EI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const II=jI;function FI(e){return FI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FI(e)}function CI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DI(r.key),r)}}function DI(e){var t=function(e,t){if("object"!=FI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=FI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==FI(t)?t:t+""}var RI=null,AI=!1,NI=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!AI)throw new Error("Constructor is private. Use getInstance() instead")}return t=e,n=[{key:"init",value:function(e,t){var n=this;t&&(t.entityData=pjQuery('input[name ="entityData"]').val()),pjQuery.post("_linkedinWizardMappingApi/"+e,JSON.stringify(t),(function(e){n._fillWizard(e.mapping,e.entityData)}))}},{key:"_fillWizard",value:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(this._areFieldsBeingMappedInATableRow(e[n])?this._mapFieldsInATableRow(n,e[n]):this._mapField(n,e[n].value,e[n].builtinFieldTypeCode));this._setAutofilledWithLinkedinProfileDataInput(),this._setEntityDataInput(t)}},{key:"_areFieldsBeingMappedInATableRow",value:function(e){return e.constructor===Array}},{key:"_mapField",value:function(e,t,n){"photo"===n?Fields.getField(e).setSocialLoginPhoto(t):this._setFieldValue(e,t)}},{key:"_mapFieldsInATableRow",value:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){this._addRowIfRequired(e,n);var r=t[n].value;for(var o in r)if(r.hasOwnProperty(o)){var i=this._getTableFieldId(e,o,n);this._setFieldValue(i,r[o])}}}},{key:"_getTableFieldId",value:function(e,t,n){var r=this._getElement("[id$="+e+"_"+n+' ] [data-schema-field-id="'+t+'"]'),o=this._getFieldInContainer(r);return o?o.prop("id"):null}},{key:"_setFieldValue",value:function(e,t){if(t)try{var n=this._buildFieldValueObject(e,t);Fields.setFieldValue(e,n)}catch(e){console.warn(e)}}},{key:"_getFieldInContainer",value:function(e){return e&&e.length?this._getElement("select",e).length?this._getElement("select",e):this._getElement('input[type="radio"]',e).length?this._getElement('input[type="radio"]',e):this._getElement("input",e).length?this._getElement("input",e):this._getElement("textarea",e).length?this._getElement("textarea",e):null:null}},{key:"_setAutofilledWithLinkedinProfileDataInput",value:function(){pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).append(pjQuery("<input/>",{type:"hidden",name:"autofilledWithSocialProfileData",value:"linkedin"}))}))}},{key:"_setEntityDataInput",value:function(e){pjQuery('input[name ="entityData"]').val(e)}},{key:"_buildFieldValueObject",value:function(e,t){return this._isDateValue(t)?this._buildFieldValueObjectForDates(e,t):Array.isArray(t)?new FieldMultipleTextsValue(t):new FieldTextValue(t)}},{key:"_buildFieldValueObjectForDates",value:function(e,t){var n=PortalDate.fromParams(t.year,("0"+(t.month||1)).slice(-2),("0"+(t.day||1)).slice(-2));return Fields.fieldAcceptsValueType(e,FieldDateValue.TYPE)?new FieldDateValue(n):new FieldTextValue(n.format("dd-MMM-yyyy"))}},{key:"_isDateValue",value:function(e){return"object"===FI(e)&&"year"in e}},{key:"_getElement",value:function(e,t){return t&&t.length>0?pjQuery(e,t):pjQuery(e)}},{key:"_addRowIfRequired",value:function(e,t){pjQuery("[id$="+e+"_"+t+" ]").length||this._addRow(e)}},{key:"_addRow",value:function(e){pjQuery("#addRowFor_"+e).trigger("click")}}],r=[{key:"getInstance",value:function(){return RI||(AI=!0,RI=new e,AI=!1),RI}}],n&&CI(t.prototype,n),r&&CI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();const xI=NI;function LI(e){return LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LI(e)}function MI(e){return function(e){if(Array.isArray(e))return BI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||VI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VI(e,t){if(e){if("string"==typeof e)return BI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BI(e,t):void 0}}function BI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WI(){WI=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),u=new F(r||[]);return o(a,"_invoke",{value:k(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",d="suspendedYield",y="executing",h="completed",v={};function b(){}function m(){}function g(){}var _={};s(_,a,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(C([])));O&&O!==n&&r.call(O,a)&&(_=O);var S=g.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==LI(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var l=T(u,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var s=f(t,n,r);if("normal"===s.type){if(o=r.done?h:d,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=h,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(LI(t)+" is not iterable")}return m.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),s(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),s(S,l,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function UI(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function YI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HI(r.key),r)}}function HI(e){var t=function(e,t){if("object"!=LI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=LI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LI(t)?t:t+""}var zI=null,QI=!1,qI=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!QI)throw new Error("Constructor is private. Use getInstance() instead");this._autoSaveField=document.getElementById("wizardAutoSave"),this._isAutoSaveEnabled()&&(this._form=this._autoSaveField.closest("form"),this._revision=parseInt(this._autoSaveField.dataset.baseRevision),this._actionInterval=parseInt(this._autoSaveField.dataset.actionInterval),this._actionName=this._autoSaveField.dataset.action,this._setFormDataSaved(new FormData(this._form)))}return t=e,n=[{key:"init",value:function(){var e=this;this._isAutoSaveEnabled()&&(this._timer=setInterval((function(){return e._triggerSave()}),this._actionInterval))}},{key:"_isAutoSaveEnabled",value:function(){return this._autoSaveField}},{key:"_triggerSave",value:(o=WI().mark((function e(){var t,n,r=this;return WI().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getFormValue();case 2:if(t=e.sent,this._hasDataFormChanged(t)){e.next=5;break}return e.abrupt("return");case 5:n=this._form.action||window.location.href,fetch(n,{method:"POST",body:this._prepareFormDataForSave(t)}).then((function(e){return e.json()})).then((function(e){if(!e||!0!==e.success)throw new Error;r._onAutoSaveSuccess(e.data,t)})).catch((function(){return r._onAutoSaveError()}));case 7:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){UI(i,n,r,a,u,"next",e)}function u(e){UI(i,n,r,a,u,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"_onAutoSaveSuccess",value:function(e,t){this._updateFileFieldsInFormAndFormData(e,t),this._setFormDataSaved(t),this._revision=this._revision+1,this._dispatchAutoSaveEvent(wI().STATUS_SUCCESS)}},{key:"_updateFileFieldsInFormAndFormData",value:function(e,t){for(var n in e){var r="file_"+n,o=r+"_fileNumber",i=r+"_fileState";this._isFilePresentInThisStep(r)?(this._addRemoveButton(n),this._clearFileInput(r,t)):this._replaceSerializedFileWithFileNumber(n,o,t),this._updateFileNumberInput(o,e[n],t),this._removeFileStateInput(i,t)}}},{key:"_isFilePresentInThisStep",value:function(e){return document.getElementsByName(e).length>0}},{key:"_addRemoveButton",value:function(e){var t=X.getField(e);t&&t.addRemoveButton()}},{key:"_replaceSerializedFileWithFileNumber",value:function(e,t,n){var r=document.getElementsByName(e);r.length>0&&((r=r[0]).name=t,r.value="",n.delete(e),n.append(t,""))}},{key:"_clearFileInput",value:function(e,t){var n=document.getElementsByName(e);n.length>0&&((n=n[0]).value="",t.set(e,new File([""],"",{type:"application/octet-stream"})))}},{key:"_updateFileNumberInput",value:function(e,t,n){var r=document.getElementsByName(e);r.length>0&&((r=r[0]).value=t,n.set(e,t))}},{key:"_removeFileStateInput",value:function(e,t){var n=document.getElementsByName(e);n.length>0&&((n=n[0]).remove(),t.delete(e))}},{key:"_onAutoSaveError",value:function(){clearInterval(this._timer),this._dispatchAutoSaveEvent(wI().STATUS_ERROR)}},{key:"_dispatchAutoSaveEvent",value:function(e){wI().getInstance().dispatchEvent(wI().EVENT_AUTO_SAVE_NAME,{status:e,autoSaveActionName:this._actionName})}},{key:"_prepareFormDataForSave",value:function(e){var t=this._cloneFormData(e);return t.append(this._actionName,"automatic"),t.append("revision",this._revision+1),t}},{key:"_cloneFormData",value:function(e){var t=new FormData;return e.forEach((function(e,n){t.append(n,e)})),t}},{key:"_getFormValue",value:function(){var e=this;return X.dispatchBeforeSubmitAutoPartialSave().then((function(){return new FormData(e._form)}))}},{key:"_hasDataFormChanged",value:function(e){var t,n=0,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=VI(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(e.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value;n++;var i=e.getAll(o),a=this._formDataSaved.getAll(o);if(!this._areFormValuesEqual(i,a))return!0}}catch(e){r.e(e)}finally{r.f()}return this._hasNumberOfKeysInTheFormDataChanged(n)}},{key:"_hasNumberOfKeysInTheFormDataChanged",value:function(e){return e!==this._formDataSavedLength}},{key:"_areFormValuesEqual",value:function(e,t){var n=this;return!(!Array.isArray(e)||!Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)&&e.every((function(e,r){return!(e instanceof File)||n._areFileEquals(e,t[r])}))}},{key:"_areFileEquals",value:function(e,t){return e instanceof File&&t instanceof File&&e.size===t.size&&e.name===t.name&&e.type===t.type}},{key:"_setFormDataSaved",value:function(e){this._formDataSaved=e,this._formDataSavedLength=MI(this._formDataSaved.entries()).length}}],r=[{key:"getInstance",value:function(){return zI||(QI=!0,zI=new e,QI=!1),zI}}],n&&YI(t.prototype,n),r&&YI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i}();const GI=qI;function JI(e){return JI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JI(e)}function KI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$I(r.key),r)}}function $I(e){var t=function(e,t){if("object"!=JI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=JI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JI(t)?t:t+""}var ZI=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"init",value:function(){var e=this,t=wI().getInstance();t.addEventHandler(wI().EVENT_LOAD_NAME,(function(){return e._initWizardsManager()}),wI().PRIORITY_HIGH),t.addEventHandler(wI().EVENT_LOAD_NAME,(function(){return e._initProfileDataWizardMapper()}),wI().PRIORITY_MEDIUM),t.addEventHandler(wI().EVENT_LOAD_NAME,(function(){return e._initAutoPartialSave()}),wI().PRIORITY_LOWEST)}},{key:"_initWizardsManager",value:function(){II.getInstance().init()}},{key:"_initAutoPartialSave",value:function(){GI.getInstance().init()}},{key:"_initProfileDataWizardMapper",value:function(){if((new If.A).get("linkedinDataCallbackNeeded")){var e=new rr.default,t=window.sessionStorage.getItem("linkedinProfileData"),n=e.get("avature.wizard.currentStepId");n&&t&&xI.getInstance().init(n,JSON.parse(t))}else window.sessionStorage.setItem("linkedinProfileData",null)}}])&&KI(e.prototype,t),n&&KI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();(new ZI).init(),n.g.ApiCache=s,n.g.AccessibleErrorValidationHandler=w,n.g.ArithmeticField=yn,n.g.AutocompleteMultipleSelectField=Qr,n.g.AutocompleteSelectField=dr,n.g.ButtonBarField=Lj,n.g.CheckboxField=Co,n.g.CheckboxListField=Wo,n.g.ConfirmationField=Xa,n.g.CurrencyField=bu,n.g.CustomFormatDateField=fl,n.g.DayAndMonthDateField=wl,n.g.EncryptedAutocompleteSelectField=es,n.g.EncryptedFullDateField=Vs,n.g.EncryptedSelectField=sc,n.g.EncryptedTextField=Ps,n.g.Fields=X,n.g.FileField=Xf,n.g.FormField=lp,n.g.FormattedTextField=Cp,n.g.FullDateField=cs,n.g.GenericField=Bp,n.g.InputField=lu,n.g.InstantSearchField=sd,n.g.JobIdField=Ad,n.g.JobRefField=Yd,n.g.JobVariableField=Zd,n.g.KeywordsField=Jp,n.g.LocationDistanceSearchField=Ny,n.g.LocationField=oh,n.g.LocationStateCreateField=dh,n.g.LocationStateSearchField=Oh,n.g.MonthAndYearDateField=Yh,n.g.MultipleSelectField=Zh,n.g.NumberField=mv,n.g.NumberProgressField=qv,n.g.NumberStarsField=rb,n.g.PersonIdField=kb,n.g.PdfEditor=hb,n.g.PhotoField=xb,n.g.PlainTextField=zb,n.g.PostalCodeRadiusField=cm,n.g.RadioButtonListField=gm,n.g.RecordVideoField=Sg,n.g.SchedulingField=Lg,n.g.SelectField=Gs,n.g.SeparatorField=Jg,n.g.SimpleTimeField=d_,n.g.SourceAndCategoryField=O_,n.g.TableField=Aw,n.g.TextField=bp,n.g.TimeField=Yw,n.g.UserNotificationsEmailField=Xw,n.g.UserTimeZoneField=mO,n.g.ReuseUploadedFilesWidget=fw,n.g.LargeFileUploadDialog=KT,n.g.GoogleDriveChooserLoader=cI,n.g.DropboxChooserLoader=Af,n.g.FieldBooleanValue=Oo,n.g.FieldDateValue=xu,n.g.FieldDayAndMonthValue=gI,n.g.FieldEmptyValue=M,n.g.FieldFileUploadedValue=Tc,n.g.FieldFileValue=mc,n.g.FieldFullDateValue=tl,n.g.FieldIdValue=Sn,n.g.FieldLocationDistanceValue=Py,n.g.FieldLocationValue=Hy,n.g.FieldMonthAndYearValue=Ch,n.g.FieldMultipleIdsValue=Or,n.g.FieldMultipleOptionsValue=Wn,n.g.FieldMultipleTextsValue=Cr,n.g.FieldNumberValue=rn,n.g.FieldOptionValue=Dn,n.g.FieldPostalCodeRadiusValue=em,n.g.FieldRadiusValue=vy,n.g.FieldTextValue=Gt,n.g.FieldTimeValue=o_,n.g.ValueBase=k,n.g.DatasetFieldOptionsDatasource=pS,n.g.DatasetSingleColumnFieldOptionsDatasource=wS,n.g.Datasources=Qn,n.g.DefaultValueDatasources=gt,n.g.DummyDatasource=VS,n.g.DynamicDefaultValueDatasetFieldOptionsDatasource=Sk,n.g.GeneralOptionsDatasource=GS,n.g.InstantSearchDatasource=rE,n.g.JobSuggestionsDatasource=dE,n.g.LinkToPersonDatasource=CE,n.g.LocalDatasource=FS,n.g.LocationDatasource=oP,n.g.LocationStandardizedStateDatasource=OP,n.g.LocationStandardizedStateSearchDatasource=CP,n.g.PostalCodeDatasource=BP,n.g.SourcesDatasource=KP,n.g.TimeZoneDatasource=ak,n.g.UsersDatasource=OE,n.g.RequiredValidator=zk,n.g.MinLengthValidator=eT},34307:(e,t,n)=>{"use strict";var r=n(88418);n.g.AnalyticsServiceFactory=r.A},89001:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(58476),n(5086),n(58379);const r=function(){function e(){this.dispatchedEvents=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.dispatch=function(t,n){var r=new CustomEvent(e.EVENT_NAME,{detail:{widgetId:t,dynamicJsxContainer:n}});this.dispatchedEvents.push(r),document.dispatchEvent(r)},e.prototype.addListener=function(t,n){var r=function(e){e.detail.widgetId===t&&n(e.detail.dynamicJsxContainer)};return document.addEventListener(e.EVENT_NAME,r),this.dispatchedEvents.forEach((function(e){return r(e)})),r},e.prototype.removeListener=function(t){document.removeEventListener(e.EVENT_NAME,t)},e.EVENT_NAME="DynamicJsxChanged",e}()},35913:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(63534),n(40590),n(64216),n(58476),n(18665),n(5086),n(29979),n(58379),n(14602);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}const o=function(){function e(){this.variables={},this.isInitialized=!1,this.initializationCallbacks=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setVariables=function(e){if("object"!==r(e)||null==e)throw new Error("invalidDataType: Expected JSON object.");this.variables=e,this.isInitialized=!0,this.initializationCallbacks.forEach((function(e){return e()})),this.initializationCallbacks=[]},e.prototype.getVariables=function(e){return e?this.variables[e]:this.variables},e.prototype.addOnInitializedListener=function(e){this.isInitialized?e():this.initializationCallbacks.push(e)},e}()},87300:(e,t,n)=>{"use strict";n(68123);var r=n(96540),o=n(89001);const i=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.inject=function(e){o.A.getInstance().dispatch(this.getWidgetId(),e)},e.prototype.getWidgetId=function(){return document.currentScript.getAttribute("data-widgetId")},e}();var a=n(35913);globalThis.JsxInjector=i,globalThis.TemplateVariablesService=a.A,globalThis._PortalReact={createElement:r.createElement,Fragment:r.Fragment}},38270:(e,t,n)=>{"use strict";n.r(t)},71064:(e,t,n)=>{"use strict";n.r(t)}},e=>{var t=t=>e(e.s=t);e.O(0,[689,82,170,888,169,156,122,425,996],(()=>(t(91130),t(84459),t(80337),t(68174),t(15040),t(87300),t(34307))));e.O()}]);
